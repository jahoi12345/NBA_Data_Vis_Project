const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WhereClauseCache-DTgdRPc5.js","assets/LRUCache-fy84PBMi.js","assets/jsonMap-Bs3hmeCU.js","assets/WhereClause-DtSdvExf.js","assets/TimeOnly-CHGkqUPg.js","assets/enum-BzLwmiID.js","assets/UnknownTimeZone-B697BDFv.js","assets/date-IqUzANpt.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-B4u1bcyL.js","assets/Point-fJINO2ru.js","assets/reader-DcGs6kKN.js","assets/index-ClordG0R.js","assets/index-uyDEb95I.css","assets/mathUtils-PIGhLnI9.js","assets/arcadeUtils-DaLS9W3o.js","assets/arcade-C5PBCL45.js","assets/arcadeEnvironment-DqZGrNFy.js","assets/Dictionary-Dm6u5JoR.js","assets/ImmutableArray-BPVd6ESQ.js","assets/shared-rXrHx8vy.js","assets/Field-Cm_ZejYW.js","assets/Color-CERqXxxY.js","assets/fieldType-DVUzXtk_.js","assets/number-D_FvV3D1.js","assets/Polyline-33xu-nCu.js","assets/Polygon-Brg2ZzgS.js","assets/aaBoundingRect-5dP796IU.js","assets/jsonUtils-D5pkeZVw.js","assets/Feature-DjXvblsx.js","assets/featureConversionUtils-CxwZ5qAf.js","assets/aaBoundingBox-DYUg4mSl.js","assets/DoubleArray-DExKNiTh.js","assets/mat4f64-q_b6UJoq.js","assets/OptimizedFeature-CwRGZPwv.js","assets/memoryEstimations-Bd726a_p.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/createFeatureId-CVwTD0fV.js","assets/FieldsIndex-2QbNHvFQ.js","assets/timeZoneUtils-BSc7-7qA.js","assets/aiServices-C4HMFXM1.js","assets/collectionUtils-DO-P7c3V.js","assets/SimpleObservable-CvFyr0NA.js","assets/commonProperties-DHiB1uzW.js","assets/utils-BqP_yUzV.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/unitConversion-B6wBWHb7.js","assets/hash-CcEbRgUF.js","assets/uuid-Oe6SV2kF.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/rasterFieldUtils-0bNK-dHZ.js","assets/batchExec-BW2NRh-f.js","assets/QueueProcessor-D8z0mMzA.js","assets/Queue-CYlrXMwB.js","assets/ReactiveMap-B0by2bYu.js","assets/signal-BX9ezF8a.js"])))=>i.map(i=>d[i]);
import{bo as C,bd as v,J as z,a3 as j,s as X}from"./jsonMap-Bs3hmeCU.js";import{_ as d}from"./index-ClordG0R.js";import{D as I}from"./date-IqUzANpt.js";import{af as s,aU as U,a6 as q}from"./Point-fJINO2ru.js";let m;async function G(){return m==null&&(m=d(()=>import("./WhereClauseCache-DTgdRPc5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(e=>new e.WhereClauseCache(500,500))),m}function qe(){m=null}async function H(e,n){const t=await G(),i=t.get(e,n);if(i==null)throw t.getError(e,n);return i}function Ge(e,n){return e||=null,n||=null,e==="1=1"?n??e:n==="1=1"?e??n:e&&n?`(${e}) AND (${n})`:e??n}function He(e,n){return e||=null,n||=null,e==="1=1"||n==="1=1"||e===n?e==="1=1"?e:n:e&&n?`(${e}) OR (${n})`:e??n}function Be(e,n){return n.length===0?null:`${e} IN (${B(n)})`}function B(e){return e.map(n=>typeof n=="string"?J(n):n).join(",")}function J(e){return`'${e.replaceAll("'","''")}'`}function Je(e){return typeof e=="number"}function Qe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function We(e){return typeof e=="boolean"}function f(e){return typeof e=="string"||e instanceof String}function Q(e){return e==null||f(e)}function Ze(e){return Array.isArray(e)}function Ke(e){return e?.declaredClass==="esri.Graphic"}function Ye(e){return e instanceof Date}const W="HH:mm",Z="HH:mm:ss",K="HH:mm:ss.SSS",Y=[K,Z,W,"TT"],ee="yyyy-MM-dd";function x(e){if(!e||!f(e))return null;const n=I.fromFormat(e,ee);return n.isValid?n:null}function h(e){return e&&f(e)?C(Y,n=>{const t=I.fromFormat(e,n);return t.isValid?t:null})??null:null}function T(e){if(!e||!f(e))return null;const n=I.fromISO(e);return n.isValid?n:null}const E=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function ne(e){return e!=null&&E.has(e.type)}function S(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function M(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function A(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const te=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);v(E,te);function en(e,n){const t=e?.domain;if(!t||t.type!=="range")return;const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue,l=ne(e);return S(e)||A(e)||M(e)?{...ie(e,r,i),isInteger:l}:{min:i!=null&&typeof i=="number"?i:null,max:r!=null&&typeof r=="number"?r:null,rawMin:i,rawMax:r,isInteger:l}}function ie(e,n,t){return S(e)?{min:x(t)?.toMillis(),max:x(n)?.toMillis(),rawMin:t,rawMax:n}:A(e)?{min:h(t)?.toMillis(),max:h(n)?.toMillis(),rawMin:t,rawMax:n}:M(e)?{min:T(t)?.toMillis(),max:T(n)?.toMillis(),rawMin:t,rawMax:n}:{max:null,min:null}}function re(e){if(!e)return;const n=e.match(le);return n?.groups?n.groups.doubleQuoted??n.groups.singleQuoted??n.groups.dotNotation:void 0}const le=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function nn(e){return e.match(se)?.[1]?.replaceAll("\\'","'")??null}const se=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let g;function ae(){return g||(g=(async()=>{const[e,n,t]=await Promise.all([d(()=>import("./arcadeUtils-DaLS9W3o.js"),__vite__mapDeps([15,16,12,13,17,5,2,18,4,6,7,8,9,10,11,19,20,21,22,14,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,3,45,46,47,48,49,50,51])),d(()=>import("./batchExec-BW2NRh-f.js"),__vite__mapDeps([52,2,53,54,42,55,56])),d(()=>import("./aiServices-C4HMFXM1.js").then(i=>i.a),__vite__mapDeps([40,2,6,7,8,18,4,5,9,10,11,12,13,19,20,21,22,14,23,24,25,26,27,28,41,42,43,17,44]))]);return{arcade:e.arcade,arcadeUtils:e,batchExec:n,aiServices:t,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel,Pixel:e.Pixel}})()),g}const oe=/^([0-9_])/,ue=/[^a-z0-9_\u0080-\uffff]+/gi;function tn(e){return e==null?null:e.trim().replaceAll(ue,"_").replace(oe,"F$1")||null}const fe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],ce=["field","normalizationField"];function rn(e,n){if(e!=null&&n!=null){for(const t of Array.isArray(e)?e:[e])if(_(fe,t,n),"visualVariables"in t&&t.visualVariables)for(const i of t.visualVariables)_(ce,i,n)}}function _(e,n,t){if(e)for(const i of e){const r=z(i,n),l=r&&typeof r!="function"&&t.get(r);l&&j(i,l.name,n)}}function ln(e,n){if(e!=null&&n?.fields?.length)if("startField"in e){const t=n.get(e.startField),i=n.get(e.endField);e.startField=t?.name??null,e.endField=i?.name??null}else{const t=n.get(e.startTimeField),i=n.get(e.endTimeField);e.startTimeField=t?.name??null,e.endTimeField=i?.name??null}}const F=new Set;function $(e,n){return e&&n?(F.clear(),p(F,e,n),Array.from(F).sort()):[]}function p(e,n,t){if(t)if(n?.fields?.length)if(t.includes("*"))for(const{name:i}of n.fields)e.add(i);else for(const i of t)o(e,n,i);else{if(t.includes("*"))return e.clear(),void e.add("*");for(const i of t)i!=null&&e.add(i)}}function o(e,n,t){if(typeof t=="string")if(n){const i=n.get(t);i&&e.add(i.name)}else e.add(t)}function sn(e,n){return n==null||e==null?[]:n.includes("*")?(e.fields??[]).map(t=>t.name):n}function an(e,n,t=1){if(!n||!e)return[];if(n.includes("*"))return["*"];const i=$(e,n);return i.length/e.fields.length>=t?["*"]:i}async function u(e,n,t,i){if(!i)return;const r=re(i);if(r)o(e,n,r);else{const{arcadeUtils:l}=await ae(),a=l.extractFieldNames(i,t?.partitions??n?.fields?.map(y=>y.name));for(const y of a)o(e,t?.index??n,y)}}async function w(e,n,t){if(t&&t!=="1=1"){const i=await H(t,n);if(!i.isStandardized)throw new X("fieldUtils:collectFilterFields","Where clause is not standardized",{where:t});p(e,n,i.fieldNames)}}function on({displayField:e,fields:n}){return e||(n?.length?de(n):null)}function de(e){return b(e,"name-or-title")||b(e,"unique-identifier")||b(e,"type-or-category")||me(e)}function me(e){for(const n of e){if(!n?.name)continue;const t=n.name.toLowerCase();if(t.includes("name")||t.includes("title"))return n.name}return null}function b(e,n){for(const t of e)if(t?.valueType&&t.valueType===n)return t.name;return null}async function un(e,n){if(!n)return;const t=n.elevationInfo?.featureExpressionInfo;return t?t.collectRequiredFields(e,n.fieldsIndex):void 0}function pe(e,n,t){t.onStatisticExpression?u(e,n,null,t.onStatisticExpression.expression):e.add(t.onStatisticField)}async function fn(e,n,t){if(!n||!t||!("fields"in t))return;const i=[],r=t.popupTemplate;i.push(N(e,n,r)),t.fields&&i.push(...t.fields.map(async l=>pe(e,n.fieldsIndex,l))),await Promise.all(i)}async function cn(e,n){const{fieldsIndex:t,trackInfo:i}=n;if(!n||!i||!t)return;const r=[i.latestObservations.renderer?.collectRequiredFields(e,t),i.previousObservations.renderer?.collectRequiredFields(e,t),i.trackLines.renderer?.collectRequiredFields(e,t)];i.popupTemplate&&r.push(N(e,n,i.popupTemplate));for(const l of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(l)for(const a of l)r.push(V(e,t,a));await Promise.all(r)}async function N(e,n,t){const i=[];t?.expressionInfos&&i.push(...t.expressionInfos.map(l=>u(e,n.fieldsIndex,null,l.expression)));const r=t?.content;if(Array.isArray(r))for(const l of r)l.type==="expression"&&l.expressionInfo&&i.push(u(e,n.fieldsIndex,null,l.expressionInfo.expression));await Promise.all(i)}async function dn(e,n,t){n&&(n.timeInfo&&t?.timeExtent&&p(e,n.fieldsIndex,[n.timeInfo.startField,n.timeInfo.endField]),n.floorInfo&&p(e,n.fieldsIndex,[n.floorInfo.floorField]),t?.where!=null&&await w(e,n.fieldsIndex,t.where))}async function mn(e,n,t){n&&t&&await Promise.all(t.map(i=>ye(e,n,i)))}async function ye(e,n,t){n&&t&&(t.valueExpression?await u(e,n.fieldsIndex,null,t.valueExpression):t.field&&o(e,n.fieldsIndex,t.field))}function pn(e){return e?$(e.fieldsIndex,L(e)):[]}function ge(e){if(!e)return[];const n=e.geometryFieldsInfo;return n?$(e.fieldsIndex,[n.shapeAreaField,n.shapeLengthField]):[]}async function yn(e,n,t){if(!n||!t)return;const i=n.fieldsIndex;await Promise.all(t.filters.map(r=>w(e,i,r.where)))}const Fe=new Set(["oid","global-id","guid"]),be=new Set(["oid","global-id"]),Ie=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function $e(e){const n=new Set;D(e).forEach(i=>n.add(i)),ge(e).forEach(i=>n.add(i.toLowerCase()));const t=e&&"infoFor3D"in e?e.infoFor3D:void 0;return t&&(Object.values(t.assetMapFieldRoles).forEach(i=>n.add(i.toLowerCase())),Object.values(t.transformFieldRoles).forEach(i=>n.add(i.toLowerCase()))),Array.from(n)}function L(e){if(!e)return[];const n="editFieldsInfo"in e&&e.editFieldsInfo;if(!n)return[];const{creationDateField:t,creatorField:i,editDateField:r,editorField:l}=n;return[t,i,r,l].filter(Boolean)}function D(e){return L(e).map(n=>n.toLowerCase())}function gn(e,n){return e.editable&&!Fe.has(e.type)&&!D(n).includes(e.name?.toLowerCase()??"")}function Fn(e,n){const t=e.name?.toLowerCase()??"";return!(n?.objectIdField!=null&&t===n.objectIdField.toLowerCase()||n?.globalIdField!=null&&t===n.globalIdField.toLowerCase()||$e(n).includes(t)||be.has(e.type)||Ie.some(i=>i.test(t)))}async function bn(e,n){const{labelingInfo:t,fieldsIndex:i}=n;t?.length&&await Promise.all(t.map(r=>V(e,i,r)))}async function V(e,n,t){if(!t)return;const i=t.getLabelExpression(),r=t.where;if(i.type==="arcade")await u(e,n,null,i.expression);else{const l=i.expression.match(/{[^}]*}/g);l&&l.forEach(a=>{o(e,n,a.slice(1,-1))})}await w(e,n,r)}function In(e){const n=e.defaultValue;return n!==void 0&&R(e,n)?n:e.nullable?null:void 0}function $n(e){const n=typeof e=="string"?{type:e}:e;return Ne(n)?255:n.type==="esriFieldTypeDate"||n.type==="date"?8:void 0}function O(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function we(e){return e===null||O(e)}function xe(e){return e===null||Number.isInteger(e)}function he(){return!0}function R(e,n){let t;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":t=e.nullable?xe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":t=e.nullable?we:O;break;case"string":case"esriFieldTypeString":t=e.nullable?Q:f;break;default:t=he}return arguments.length===1?t:t(n)}const Te=["integer","small-integer","big-integer","long"],_e=["single","double"],ve=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Ee=["esriFieldTypeSingle","esriFieldTypeDouble"],k=new Set([...Te,...ve]),Se=new Set([..._e,...Ee]),Me=v(k,Se);function wn(e){return e!=null&&k.has(e.type)}function Ae(e){return e!=null&&Me.has(e.type)}function Ne(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function xn(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function hn(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Tn(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function _n(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function vn(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function En(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function Sn(e,n){return Le(e,n)===null}function Mn(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Le(e,n){return e==null||e.nullable&&n===null?null:R(e,n)?Ae(e)&&!De(e.type,Number(n))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function De(e,n){const t=typeof e=="string"?P(e):e;if(!t)return!1;const i=t.min,r=t.max;return t.isInteger?Number.isInteger(n)&&n>=i&&n<=r:n>=i&&n<=r}function P(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Ve;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return Oe;case"esriFieldTypeBigInteger":case"big-integer":return Re;case"esriFieldTypeSingle":case"single":return ke;case"esriFieldTypeDouble":case"double":return Pe}}const Ve={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Oe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Re={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},c=(2-2**-23)*2**127,ke={min:-c,max:c,isInteger:!1,rawMin:-c,rawMax:c},Pe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function An(e,n,t){switch(e){case"domain-validation-error::invalid-coded-value":return`Value ${t} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${t} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case"type-validation-error::invalid-type":return`Value ${t} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:i,max:r}=P(n.type);return`Value ${t} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${i} to ${r}`}}}function Nn(e,n){return!Ce(e,n,null)}function Ce(e,n,t){if(!e?.attributes||!n){if(t!=null)for(const l of n??[])t.add(l);return!0}const i=new Set(Object.keys(e.attributes));let r=!1;for(const l of n)if(!i.has(l)){if(r=!0,t==null)break;t.add(l)}return r}function Ln(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(n=>e.toLowerCase().startsWith(n))}function Dn(e){const n=e?.match(/{[^}]+}/g);return n?n.map(t=>t.slice(1,-1).split(":")[0].trim()):[]}const Vn={unknown:1,inches:s(1,"meters","inches"),feet:s(1,"meters","feet"),"us-feet":s(1,"meters","us-feet"),yards:s(1,"meters","yards"),miles:s(1,"meters","miles"),"nautical-miles":s(1,"meters","nautical-miles"),millimeters:s(1,"meters","millimeters"),centimeters:s(1,"meters","centimeters"),decimeters:s(1,"meters","decimeters"),meters:s(1,"meters","meters"),kilometers:s(1,"meters","kilometers"),"decimal-degrees":1/U(1,"meters",q.radius)};export{an as $,u as A,o as B,Ce as C,w as D,on as E,ln as F,H as G,gn as H,xn as I,wn as J,Fn as K,rn as L,p as M,nn as N,Qe as O,Be as P,un as Q,dn as R,Mn as S,vn as T,pn as U,An as V,fn as W,mn as X,bn as Y,cn as Z,yn as _,ae as a,en as a0,re as a1,Q as a2,qe as a3,$ as b,tn as c,hn as d,In as e,sn as f,Ae as g,En as h,Ke as i,$n as j,Nn as k,Ge as l,Vn as m,Je as n,Le as o,Ne as p,Ln as q,He as r,f as s,We as t,Ze as u,Sn as v,Tn as w,_n as x,Ye as y,Dn as z};
