import{F as i}from"./Color-CERqXxxY-BuYn26eI.js";import{U as m,D as C,J as I,H as M,j as h}from"./utils-DX2muIr3-DiPfFKSl.js";function y(e,t,o,a){if(e)if(e.type!=="CIMTextSymbol"){if(e.effects)for(const r of e.effects)p(r,t);if(e.symbolLayers)for(const r of e.symbolLayers){switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":d(r,t,a);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!a?.preserveOutlineWidth&&r.width&&(r.width*=t);break;case"CIMPictureFill":r.height&&(r.height*=t),r.offsetX&&(r.offsetX*=t),r.offsetY&&(r.offsetY*=t);break;case"CIMHatchFill":y(r.lineSymbol,t,!0,{...a,preserveOutlineWidth:!1}),r.offsetX&&(r.offsetX*=t),r.offsetY&&(r.offsetY*=t),r.separation&&(r.separation*=t)}if(r.effects)for(const s of r.effects)p(s,t)}}else e.height!=null&&(e.height*=t)}function d(e,t,o){if(e&&(e.markerPlacement&&P(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const a of e.markerGraphics)e.scaleSymbolsProportionally||y(a.symbol,t,!0,o)}function P(e,t){switch(m(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(a=>a*t);e.placementTemplate=o}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(a=>a*t);e.placementTemplate=o}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function p(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map(a=>a*t);e.dashTemplate=o}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function R(e){const t=[];return f(C(e),t),t.length?new i(h(t[0])):null}function f(e,t){if(!e)return;let o;o=e.type==="CIMTextSymbol"?e.symbol:e;const a=e.type==="CIMPolygonSymbol";if(o?.symbolLayers){for(const r of o.symbolLayers)if(!(r.colorLocked||a&&(I(r)||M(r)&&r.markerPlacement&&m(r.markerPlacement))))switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor&&c(t,r.tintColor);break;case"CIMVectorMarker":r.markerGraphics?.forEach(s=>{f(s.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":c(t,r.color);break;case"CIMGradientFill":g(t,r);break;case"CIMHatchFill":f(r.lineSymbol,t)}}}function c(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t)}function g(e,t){switch(t.colorRamp?.type){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach(o=>{o.type==="CIMLinearContinuousColorRamp"&&u(e,o)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":u(e,t.colorRamp)}}function u(e,t){t&&(t.fromColor&&c(e,t.fromColor),t.toColor&&c(e,t.toColor))}function G(e,t,o){t instanceof i||(t=new i(t));const a=C(e);a&&l(a,t)}function l(e,t,o){if(!e)return;let a;a=e.type==="CIMTextSymbol"?e.symbol:e;const r=a?.type==="CIMPolygonSymbol";if(a?.symbolLayers)for(const s of a.symbolLayers){if(s.colorLocked||r&&(I(s)||M(s)&&s.markerPlacement&&m(s.markerPlacement)))continue;const n=t.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=n;break;case"CIMVectorMarker":s.markerGraphics?.forEach(b=>{l(b.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":s.color=n;break;case"CIMGradientFill":S(s,t);break;case"CIMHatchFill":l(s.lineSymbol,t)}}}function S(e,t){switch(e.colorRamp?.type){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach(o=>{o.type==="CIMLinearContinuousColorRamp"&&k(o,t)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":k(e.colorRamp,t)}}function k(e,t){if(e&&(e.fromColor&&(e.fromColor=t.toArray()),e.toColor)){const o=t.clone();o.a=0,e.toColor=o.toArray()}}function T(e,t,o=!1){const a=C(e);if(o&&(t=360-t),a?.type!=="CIMTextSymbol"){if(a?.type==="CIMPointSymbol"&&a.symbolLayers){const r=t-(a.angle||0);for(const s of a.symbolLayers)if(M(s)){let n=s.rotation||0;s.rotateClockwise?n-=r:n+=r,s.rotation=n}a.angle=t}}else a.angle=t}export{G,R,T,y};
