import{B as l,f as M}from"./Point2D-CMz7woHH-BVbGGL7p.js";import"./Envelope2D-mFnl8dXR-MYac-bfa.js";import{O as V,Y as w,r as P,c as Z,e as p}from"./ProjectionTransformation-PJc9H7Gq-Rbz84pUM.js";import{z as v}from"./Extent-CgDMOSRD-CU1qE5Kr.js";import{o as R,n as d}from"./Polyline-CoiTLswR-BLagWJLS.js";import{b as h}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{P as E}from"./Polygon-D6wEPb3W-CpL9Efjx.js";import{fromGeometryToGXGeometry as g,toGeometry as y}from"./jsonConverter-DmBmaSz7-DAl7KiR-.js";import"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import"./index-CTl7hdrJ.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./Transformation2D-CrydmBdC-D4jE8w-_.js";import"./SimpleGeometryCursor-B92kdZ15-B1Z6elF7.js";import"./OperatorDefinitions-DP7_WWTp-DP7_WWTp.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";const a="_gxVersion",x=2,C=1;function ee(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function ne(e){switch(e.type){case"point":return G(e);case"multipoint":return z(e);case"polyline":return N(e);case"polygon":return Y(e);case"extent":return X(e);default:throw new Error(`Unsupported geometry type: ${e.type}`)}}function X(e){if(!e.getCacheValue(a)){const n=new P;n.setCoords(e.xmin,e.ymin,e.xmax,e.ymax),e.hasM&&n.setInterval(x,0,e.mmin,e.mmax),e.hasZ&&n.setInterval(C,0,e.zmin,e.zmax),e.setCacheValue(a,n)}return e.getCacheValue(a)}function z(e){if(!e.getCacheValue(a)){const n=new Z,r=new p,s=e.points,t=e.hasM,o=e.hasZ,i=o?3:2;for(let u=0,m=s.length;u<m;u++){const c=s[u];r.setXYCoords(c[0],c[1]),o&&r.setZ(c[2]??0),t&&r.setM(c[i]??NaN),n.add(r)}e.setCacheValue(a,n)}return e.getCacheValue(a)}function G(e){if(!e.getCacheValue(a)){const n=new p;n.setXYCoords(e.x,e.y),e.hasM&&n.setM(e.m),e.hasZ&&n.setZ(e.z),e.setCacheValue(a,n)}return e.getCacheValue(a)}function Y(e){if(!e.getCacheValue(a)){const{curveRings:n,hasM:r,hasZ:s,rings:t}=e,o=g({curveRings:n,hasM:r,hasZ:s,rings:t});e.setCacheValue(a,o)}return e.getCacheValue(a)}function N(e){if(!e.getCacheValue(a)){const{curvePaths:n,hasM:r,hasZ:s,paths:t}=e,o=g({curvePaths:n,hasM:r,hasZ:s,paths:t});e.setCacheValue(a,o)}return e.getCacheValue(a)}function re(e){if(e.wkid)return V(e.wkid);const n=e.wkt2||e.wkt;return n?w(n):null}function ae(e,n){if(e)switch(e.getGeometryType()){case l.enumPoint:return I(e,n);case l.enumEnvelope:return $(e,n);case l.enumMultiPoint:return k(e,n);case l.enumPolyline:return O(e,n);case l.enumPolygon:return S(e,n)}return null}function $(e,n){if(e.isEmpty())return null;const r=new v({xmin:e.getXMin(),ymin:e.getYMin(),xmax:e.getXMax(),ymax:e.getYMax(),spatialReference:n}),s=e.getDescription();if(s.hasM()){const t=e.queryInterval(x,0);r.mmin=t.vmin,r.mmax=t.vmax}if(s.hasZ()){const t=e.queryInterval(C,0);r.zmin=t.vmin,r.zmax=t.vmax}return r.setCacheValue(a,e),r}function k(e,n){if(e.isEmpty())return null;const r=e.getDescription(),s=r.hasM(),t=r.hasZ(),o=[],i=new p;for(let m=0,c=e.getPointCount();m<c;m++){e.getPointByVal(m,i);const f=[i.getX(),i.getY()];t&&f.push(i.getZ()),s&&f.push(i.getM()),o.push(f)}const u=new R({hasM:s,hasZ:t,points:o,spatialReference:n});return u.setCacheValue(a,e),u}function I(e,n){if(e instanceof M)return new h({x:e.x,y:e.y,spatialReference:n});if(e.isEmpty())return null;const r=new h({x:e.getX(),y:e.getY(),spatialReference:n}),s=e.getDescription();return s.hasM()&&(r.m=e.getM()),s.hasZ()&&(r.z=e.getZ()),r.setCacheValue(a,e),r}function S(e,n){if(e.isEmpty())return null;const r=E.fromJSON({spatialReference:n,...y(e,null)});return r.setCacheValue(a,e),r}function O(e,n){if(e.isEmpty())return null;const r=d.fromJSON({spatialReference:n,...y(e,null)});return r.setCacheValue(a,e),r}export{X as fromExtent,ne as fromGeometry,z as fromMultipoint,G as fromPoint,Y as fromPolygon,N as fromPolyline,re as fromSpatialReference,ee as getSpatialReference,$ as toExtent,ae as toGeometry,k as toMultipoint,I as toPoint,S as toPolygon,O as toPolyline};
