import{e as O}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{_ as j,P,B as l,f as k,o as q}from"./Point2D-CMz7woHH-BVbGGL7p.js";import{C as A,aY as I,a3 as w,c as Y}from"./ProjectionTransformation-PJc9H7Gq-Rbz84pUM.js";import{Envelope2D as y}from"./Envelope2D-mFnl8dXR-MYac-bfa.js";import"./Extent-CgDMOSRD-Bod5LY6s.js";import"./Polyline-CoiTLswR-DTxpB2Yg.js";import"./Point-BfTTZoMu-DeJwQYfh.js";import"./Polygon-D6wEPb3W-D2MPjRU4.js";import"./jsonConverter-DmBmaSz7-DJD4mCIi.js";import{i as _,s as z}from"./SimpleGeometryCursor-B92kdZ15-B1Z6elF7.js";import{fromGeometry as d,getSpatialReference as E,fromSpatialReference as M,toGeometry as b}from"./apiConverter-BAgvri9D-BZfUOnhv.js";import"./Transformation2D-CrydmBdC-D4jE8w-_.js";import"./OperatorDefinitions-DP7_WWTp-DP7_WWTp.js";import"./index-B0z_nLWi.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./aaBoundingRect-CjwcS2F3-ri8bmh30.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";class B{getOperatorType(){return 10003}supportsCurves(){return!0}accelerateGeometry(e,r,o){return!1}canAccelerateGeometry(e){return!1}executeMany(e,r,o,n){return new F(e,r,o,n)}execute(e,r,o,n){const i=new _([e]),a=new _([r]),s=this.executeMany(i,a,o,n).next();return s||j("null output"),s}}function X(t,e,r,o){const n=t.getDimension(),i=e.getDimension();if(n!==i)return n>i?t:e;if(t.isEmpty())return e;if(e.isEmpty())return t;const a=new y,s=new y,u=new y;t.queryEnvelope(a),e.queryEnvelope(s),u.setCoords({env2D:a}),u.mergeEnvelope2D(s);const c=A(r,u,!0),f=t.getGeometryType(),p=e.getGeometryType();return f===l.enumPoint&&p===l.enumPoint?$(t,e,c):f===l.enumPoint&&p===l.enumMultiPoint?v(e,t,c):f===l.enumMultiPoint&&p===l.enumPoint?v(t,e,c):I(t,e,r,o)}function $(t,e,r,o){const n=w(r),i=n*n,a=t.getXY(),s=e.getXY(),u=new Y({vd:t.getDescription()});return k.sqrDistance(a,s)>i&&(u.add(t),u.add(e)),u}function v(t,e,r,o){const n=t.getImpl().getAttributeStreamRef(0),i=t.getPointCount(),a=e.getXY(),s=t.createInstance(),u=w(r),c=new y;if(t.queryEnvelope(c),c.inflateCoords(u,u),c.contains(a)){const f=u*u;let p=!1;const h=q(i,!1);for(let m=0;m<i;m++){const T=n.read(2*m),R=n.read(2*m+1),x=T-a.x,G=R-a.y;x*x+G*G<=f&&(p=!0,h[m]=!0)}if(p)for(let m=0;m<i;m++)h[m]||s.addPoints(t,m,m+1);else s.addPoints(t,0,i),s.add(e)}else s.addPoints(t,0,i),s.add(e);return s}class F extends z{constructor(e,r,o,n){super(),this.m_progressTracker=n,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=o,this.m_rightGeom=r.next(),this.m_bEmpty=!this.m_rightGeom,P(this.m_rightGeom)}tock(){return!0}getRank(){return 1}next(){if(this.m_bEmpty)return null;const e=this.m_inputGeoms.next();return e?(P(e),this.m_index=this.m_inputGeoms.getGeometryID(),X(e,this.m_rightGeom,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}}const g=new B;function H(t,e,r){return g.execute(t,e,r,null)}function N(t,e,r){const o=g.executeMany(new _(t),new _([e]),r,null);return Array.from(o)}function Z(){return g.supportsCurves()}function D(t,e){const r=E(t);return b(H(d(t),d(e),M(r)),r)}function S(t,e){const r=t.map(d),o=E(t);return N(r,d(e),M(o)).map(n=>b(n,o)).filter(O)}const C=Z(),ce=Object.freeze(Object.defineProperty({__proto__:null,execute:D,executeMany:S,supportsCurves:C},Symbol.toStringTag,{value:"Module"})),pe=Object.freeze(Object.defineProperty({__proto__:null,execute:D,executeMany:S,supportsCurves:C},Symbol.toStringTag,{value:"Module"}));export{ce as i,pe as s};
