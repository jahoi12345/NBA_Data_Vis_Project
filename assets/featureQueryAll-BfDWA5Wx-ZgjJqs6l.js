import{o as c}from"./Query-BlS0WPDF-BdshFBMz.js";async function d(r,e,i){e=e.clone(),r.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=n(r));const o=s(r),u=r.capabilities.query.supportsPagination;e.start=0,e.num=o;let t=null;for(;;){const a=await r.source.queryFeaturesJSON(e,i);if(t==null?t=a:t.features=t.features.concat(a.features),t.exceededTransferLimit=a.exceededTransferLimit,!u||!a.exceededTransferLimit)break;e.start+=o}return t}function s(r){return n(r)*f(r)}function f(r){return r.capabilities.query.maxRecordCount||2e3}function n(r){return r.capabilities.query.supportsMaxRecordCountFactor?c.MAX_MAX_RECORD_COUNT_FACTOR:1}export{d,s};
