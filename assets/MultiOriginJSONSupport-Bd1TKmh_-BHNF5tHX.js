import{Y as O,G as f,aa as g,b2 as u,b3 as M,aj as w,b4 as p,b5 as b,b6 as E,b7 as m,a2 as S,q as y}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(p),this._values=new Map,this.multipleOriginsSupported=!0}clone(r){const s=new _,t=this._originStores[0];t&&t.forEach((i,e)=>{s.set(e,S(i),0)});for(let i=2;i<p;i++){const e=this._originStores[i];e&&e.forEach((o,n)=>{r&&r.has(n)||s.set(n,S(o),i)})}return s}get(r,s){const t=s===void 0?this._values:this._originStores[s];return t?t.get(r):void 0}keys(r){const s=r==null?this._values:this._originStores[r];return s?[...s.keys()]:[]}set(r,s,t=7){let i=this._originStores[t];if(i||(i=new Map,this._originStores[t]=i),i.set(r,s),!this._values.has(r)||this._propertyOriginMap.get(r)<=t){const e=this._values.get(r);return this._values.set(r,s),this._propertyOriginMap.set(r,t),e!==s}return!1}delete(r,s=7){const t=this._originStores[s];if(!t)return;const i=t.get(r);if(t.delete(r),this._values.has(r)&&this._propertyOriginMap.get(r)===s){this._values.delete(r);for(let e=s-1;e>=0;e--){const o=this._originStores[e];if(o&&o.has(r)){this._values.set(r,o.get(r)),this._propertyOriginMap.set(r,e);break}}}return i}has(r,s){const t=s===void 0?this._values:this._originStores[s];return!!t&&t.has(r)}revert(r,s){for(;s>0&&!this.has(r,s);)--s;const t=this._originStores[s],i=t?.get(r),e=this._values.get(r);return this._values.set(r,i),this._propertyOriginMap.set(r,s),e!==i}originOf(r){return this._propertyOriginMap.get(r)||0}isAtOrigin(r,s){return this.has(r,s)&&this.originOf(r)===s}isBelowOrigin(r,s){return!this.has(r)||this.originOf(r)<s}forEach(r){this._values.forEach(r)}}const d=a=>{const r=a;let s=class extends r{constructor(...t){super(...t);const i=g(this),e=i.store,o=new _;i.store=o,b(i,e,o)}read(t,i){E(this,t,i)}getAtOrigin(t,i){const e=c(this),o=u(i);if(typeof t=="string")return e.get(t,o);const n={};return t.forEach(h=>{n[h]=e.get(h,o)}),n}originOf(t){return m(this.originIdOf(t))}originIdOf(t){return c(this).originOf(t)}revert(t,i){const e=c(this),o=u(i),n=g(this);let h;h=typeof t=="string"?t==="*"?e.keys(o):[t]:t,h.forEach(l=>{n.invalidate(l),e.revert(l,o),n.commit(l)})}};return s=O([f("esri.core.ReadOnlyMultiOriginJSONSupport")],s),s};function c(a){return g(a).store}d(y);const J=a=>{const r=a;let s=class extends r{constructor(...t){super(...t)}clear(t,i="user"){g(this).clearOrigin(t,u(i))}write(t,i){return M(this,t=t||{},i),t}setAtOrigin(t,i,e){g(this).setAtOrigin(t,i,u(e))}removeOrigin(t){const i=v(this),e=u(t),o=i.keys(e);for(const n of o)i.originOf(n)===e&&i.set(n,i.get(n,e),7)}updateOrigin(t,i){const e=v(this),o=u(i),n=w(this,t);for(let h=o+1;h<p;++h)e.delete(t,h);e.set(t,n,o)}toJSON(t){return this.write({},t)}};return s=O([f("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function v(a){return g(a).store}const N=a=>{const r=J(d(a));let s=class extends r{};return s=O([f("esri.core.MultiOriginJSONSupport")],s),s},x=N(y);export{x as $,N as k};
