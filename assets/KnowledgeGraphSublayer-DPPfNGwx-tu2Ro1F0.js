const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lclayout-6cdRR6IH-e1a2nefn.js","assets/_commonjsHelpers-DCkdB7M8-DwXtFsJ3.js"])))=>i.map(i=>d[i]);
import{H as ut,_ as ct}from"./index-CTl7hdrJ.js";import{f as le,ag as Q,b as yt,an as mt,H as et}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{I as U,q as tt,v as rt,y as G,S as ht,Y as c,H as y,G as ye,aC as Y,aM as it,a2 as O,K as ft}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import"./aaBoundingBox-Cn49X7ge-DORLZxoS.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{z as pe}from"./Extent-CgDMOSRD-CU1qE5Kr.js";import{n as gt}from"./Polyline-CoiTLswR-BLagWJLS.js";import{P as st}from"./Polygon-D6wEPb3W-CpL9Efjx.js";import{Y as ve,O as bt}from"./OptimizedFeature-CwRGZPwv-Ddclhn0A.js";import{V as wt,a as J,l as Tt,n as Ie,i as _e,r as It}from"./knowledgeGraphService-DzM6eaby-BR72Ddnp.js";import{r as _t,l as Et,H as Se,K as Nt}from"./lengthUtils-Dt1_RvOO-bleznLOi.js";import{N as de,W as ie}from"./projectionUtils-BGH_5_I3-BySNUA-B.js";import{_ as R,o as be,E as se,S as Ee,I as ue,t as ce}from"./constants-SxxbBSOD-SxxbBSOD.js";import{P as vt}from"./jsonUtils-CmpazY1u-ateEpj4Q.js";import{H as St}from"./featureConversionUtils-BDA_FXJx-CUwkrHf5.js";import{m as Lt}from"./Graphic-DgGzDmqW-CFzg0c4i.js";import"./GraphicsLayer-CZ0Xqeb2-BpD6EhPB.js";import{s as W,u as Le,a as Me}from"./GraphQueryStreaming-ERTkxqUb-CWY79OsJ.js";import{a as Mt}from"./typeUtils-CXW_VpOn-BoSnXkME.js";import"./SimpleFillSymbol-CDawtd9z-CWD2KI2D.js";import{t as ne}from"./TextSymbol-hRGhyDHs-C0NgASym.js";import{o as K}from"./Query-BlS0WPDF-BdshFBMz.js";import{j as kt,A as Dt}from"./getPopupProvider-CmskPttI-C4PqyuPF.js";import{k as Ct}from"./MultiOriginJSONSupport-Bd1TKmh_-BHNF5tHX.js";import{_ as $t}from"./workers-BEkgoq8Q-BNWfkyQs.js";import{G as ee}from"./typeUtils-DqrRcjBx-ZWdHcSIJ.js";import{e as nt,r as at}from"./GraphicOrigin-uE6TDXc9-DqbdmNAV.js";import{o as xt}from"./Layer-DZvC7bne-m1cEC_yw.js";import{x as Ft}from"./FeatureStore-DSSTHScY-B0QQjb8C.js";import{h as Rt}from"./QueryEngine-J0SYKhS8-CFA9lsZ6.js";import{$ as ke}from"./clientSideDefaults-3DdoYkYX-n_psRtPH.js";import{h as Ot}from"./fieldProperties-BoJj55FN-yR5ddqST.js";import{F as De}from"./Color-CERqXxxY-BuYn26eI.js";import{m as At,x as jt}from"./FormTemplate-DuPZvaVv-Bo80W65Y.js";import{l as Gt}from"./normalizeUtils-85zLqeMi-DCF9gKvo.js";import{e as Pt,t as qt}from"./QueryEngineCapabilities-DJC_YILC-CshvWf3J.js";import{e as Ut}from"./FeatureTemplate-Bur8tORn-iLlvjnYm.js";import{i as Z,p as ae,e as Ht}from"./labelingInfo-BYG2hiVF-Dmkr19gA.js";import{C as Ce}from"./layerUtils-DZGhvm-W-DLw3QMll.js";import{y as Qt,u as zt,p as Wt}from"./BlendLayer-HE_aYHHW-CZa4IAJu.js";import{E as Bt,g as Vt,$ as Jt}from"./DisplayFilteredLayer-DyjtPayS-DEIdkBF3.js";import{n as Kt,i as Zt}from"./FeatureEffectLayer-BG_KTtPw-CZiOOvL9.js";import{L as Yt,a as Xt}from"./FeatureReductionLayer-Bhh5MvS_-BFfoYl9g.js";import{m as er,x as tr}from"./OrderedLayer-DQAUgUTV-CpnQmtbN.js";import{O as rr}from"./RefreshableLayer-CBbEkZf--CC_b3xaQ.js";import{s as ir}from"./ScaleRangeLayer-DQr2T3Hh-Dh1UYk4i.js";import{j as sr,x as nr}from"./TemporalLayer-D4R0YvXo-CzgQNAIr.js";import{I as ar,M as or,j as lr,a as pr,L as dr}from"./OperationalLayer-B6zbJ5nR-sYdHUfAL.js";import{o as oe}from"./Field-Cm_ZejYW-CwJZmSru.js";import{i as ur}from"./TimeInfo-D7ssmbZO-CCS1Im5i.js";import cr from"./SimpleRenderer-CEmCWePp-xiwnMlto.js";import{m as $e}from"./jsonUtils-BCGKNxno-Cm1OfGeu.js";import{e as yr}from"./typeUtils-DDFS4uuz-Cx8qHFHN.js";import{c as mr}from"./FeatureSet-BF7daP96-BqhMUjXs.js";import{S as hr}from"./popupUtils-D4UavgYz-4fibcgIL.js";import{W as xe}from"./utils-Dha_-5-2-eHjlcsVE.js";const ot=(r,e=ot,i=e.f||(e.f=["assets/lclayout-6cdRR6IH.js","assets/_commonjsHelpers-DCkdB7M8.js"]))=>r.map(t=>i[t]);let fr=class{constructor(){this.version="",this.queryResult=new gr}},gr=class{constructor(){this.featureResult=new br}},br=class{constructor(){this.objectIdFieldName="",this.uniqueIdField=new wr,this.globalIdFieldName="",this.geohashFieldName="",this.geometryProperties=new Tr,this.geometryType=null,this.spatialReference=new le,this.exceededTransferLimit=!1,this.hasZ=!1,this.hasM=!1,this.transform=new lt,this.fields=[],this.fieldNameToAttributeIndexMap={},this.values=[],this.features=[],this.geometryFields=[]}},wr=class{constructor(){this.name="",this.isSystemMaintained=!1}},Tr=class{constructor(){this.shapeAreaFieldName="",this.shapeLengthFieldName="",this.units=""}},lt=class{constructor(){this.quantizeOriginPosition="upperLeft",this.scale=new Ir,this.translate=new _r}},Ir=class{constructor(){this.xScale=0,this.yScale=0,this.mScale=0,this.zScale=0}},_r=class{constructor(){this.xTranslate=0,this.yTranslate=0,this.mTranslate=0,this.zTranslate=0}},Er=class{constructor(){this.name="",this.fieldType="esriFieldTypeString",this.alias="",this.sqlType="sqlTypeVarchar",this.domain="",this.defaultValue=""}},Nr=class{constructor(){this.attributes=[],this.compressedGeometry=new we,this.centroid=new we,this.aggregateGeometries=[]}},we=class{constructor(){this.geometryType=null,this.lengths=[],this.coords=[]}};const vr=["ELEMENTUID","TYPENAME"],Sr={upperLeft:0,lowerLeft:1},Lr={sqlTypeBigInt:0,sqlTypeBinary:1,sqlTypeBit:2,sqlTypeChar:3,sqlTypeDate:4,sqlTypeDecimal:5,sqlTypeDouble:6,sqlTypeFloat:7,sqlTypeGeometry:8,sqlTypeGUID:9,sqlTypeInteger:10,sqlTypeLongNVarchar:11,sqlTypeLongVarbinary:12,sqlTypeLongVarchar:13,sqlTypeNChar:14,sqlTypeNVarChar:15,sqlTypeOther:16,sqlTypeReal:17,sqlTypeSmallInt:18,sqlTypeSqlXml:19,sqlTypeTime:20,sqlTypeTimestamp:21,sqlTypeTimestamp2:22,sqlTypeTinyInt:23,sqlTypeVarbinary:24,sqlTypeVarchar:25};function Mr(r){const e=new fr;e.version=r.version;const i=r.get_query_result();if(i.results_type.value!==0)throw new Error("Got a non-feature collection type");const t=i.get_feature_result(),s=e.queryResult.featureResult;s.objectIdFieldName=t.objectid_field_name,s.exceededTransferLimit=t.exceeded_transfer_limit,s.hasM=t.has_m,s.hasZ=t.has_z,s.geometryType=Y(_e,t.geometry_type.value),s.globalIdFieldName=t.globalid_field_name,s.geohashFieldName=t.geohash_field_name;const n=s.uniqueIdField,l=t.unique_id_field;n.name=l.name,n.isSystemMaintained=l.isSystemMaintained;const p=s.geometryProperties,h=t.geometry_properties;p.shapeAreaFieldName=h.shapeAreaFieldName,p.shapeLengthFieldName=h.shapeLengthFieldName,p.units=h.units;const a=s.spatialReference,o=t.spatial_reference;a.wkid=o.wkid,a.latestWkid=o.latestWkid,a.vcsWkid=o.vcsWkid,a.latestVcsWkid=o.latestVcsWkid,a.wkt=o.wkt,s.transform=Dr(t.transform);const d=s.fields,u=s.fieldNameToAttributeIndexMap,m=t.fields,g=m.size();for(let v=0;v<g;v++){const M=m.get(v),L=pt(M);d.push(L),u[L.name]=v,M.delete()}m.delete();const f=s.values,S=t.values_count();for(let v=0;v<S;v++)f.push(t.get_value_at(v));const N=s.features,I=t.features,E=I.size();if(E>0){for(const v of vr)if(u[v]===void 0)throw new Error(`Feature collection missing required attribute: ${v}`)}for(let v=0;v<E;v++){const M=new Nr,L=I.get(v),P=M.attributes,k=L.attributes_count();for(let H=0;H<k;H++)P.push(L.get_attribute_at(H));const x=L.get_compressed_geometry();x&&(M.compressedGeometry=he(x),M.centroid=he(L.get_centroid()));const C=M.aggregateGeometries,F=L.aggregate_geometries,$=F.size();for(let H=0;H<$;H++){const V=F.get(H),X=he(V);C.push(X),V.delete()}F.delete(),N.push(M),L.delete()}I.delete();const D=s.geometryFields,_=t.geometry_fields,w=_.size();for(let v=0;v<w;v++){const M=_.get(v),L=kr(M);D.push(L),M.delete()}return _.delete(),e}function he(r){const e=new we;e.geometryType=Y(_e,r.geometry_type.value);const i=[],t=[];for(let s=0;s<r.lengths.length;s++)i.push(r.lengths[s]);for(let s=0;s<r.coords.length;s++)t.push(r.coords[s]);return e.lengths=i,e.coords=t,e}function pt(r){const e=new Er;return e.name=r.name,e.alias=r.alias,e.fieldType=Y(It,r.field_type.value),e.sqlType=Y(Lr,r.sql_type.value),e.domain=r.domain,e.defaultValue=r.default_value,e}function kr(r){const e=pt(r);return e.geometryType=Y(_e,r.geometry_type.value),e}function Dr(r){const e=new lt;e.quantizeOriginPosition=Y(Sr,r.quantizeOriginPosition.value);const i=e.scale,t=r.scale;i.xScale=t.xScale,i.yScale=t.yScale,i.mScale=t.mScale,i.zScale=t.zScale;const s=e.translate,n=r.translate;return s.xTranslate=n.xTranslate,s.yTranslate=n.yTranslate,s.mTranslate=n.mTranslate,s.zTranslate=n.zTranslate,e}async function Cr(r){const e=[],i={generateAllSublayers:!1,namedTypeDefinitions:new Map};return r.entitiesUrl&&e.push(Fe(r.entitiesUrl).then(t=>{Re(t,i)})),r.relationshipsUrl&&e.push(Fe(r.relationshipsUrl).then(t=>{Re(t,i)})),await Promise.all(e),i}async function us(r,e){e??=!1;const i={generateAllSublayers:e,namedTypeDefinitions:new Map};return await Fr(r).then(t=>{Or(t,i)}),i}async function cs(r){const e=await Ie(),i=new e.MapOfObjectIdentifierSets;$r(i,e,r);const t=new e.MapOfObjectIdentifierSetsEncoder;try{t.set_map_of_identifier_sets(i),t.encode();const s=t.get_encoding_result();if(s.error.error_code!==0)throw new U("knowledge-graph:layer-support-utils",s.error.error_message);const n=structuredClone(s.get_byte_buffer());return t.delete(),n}finally{i.delete()}}function $r(r,e,i){for(const[t,s]of i.namedTypeDefinitions){if(!s.members||s.useAllData)continue;const n=s.members.keys();let l=!1,p=!0;const h=new e.ObjectIdArray,a=new e.StringArray,o=new e.GlobalIdArray,d=new e.IdentifierArray,u=new e.ObjectIdentifierSet;for(const m of n)p&&(l=!isNaN(Number(m)),p=!1),l?h.add_objectid(Number(m)):(a.add_string(m),o.add_globalid(m)),d.add_identifier(m);u.set_oid_array(h),u.set_string_array(a),u.set_globalid_array(o),u.set_identifier_array(d),h.delete(),a.delete(),o.delete(),d.delete(),r.put_identifier_set(t,u),u.delete()}return r}async function Fe(r){const e=await et(r,{responseType:"array-buffer"});return xr(await e.data)}async function xr(r){const e=new(await Ie()).FeatureCollectionDecoder,i=e.decode(new Uint8Array(r));if(i.error_code!==0)throw new U("knowledge-graph:layer-support-utils",i.error_message);const t=e.get_feature_collection(),s=Mr(t);return e.delete(),s}async function Fr(r){const e=await et(r,{responseType:"array-buffer"}),i=await e.data;return Rr(new Uint8Array(i))}async function Rr(r){const e=new(await Ie()).MapOfObjectIdentifierSetsDecoder,i=e.decode(new Uint8Array(r)),t=new Map;if(i.error_code!==0)throw new U("knowledge-graph:layer-support-utils",i.error_message);const s=e.get_map_of_identifier_sets(),n=s.keys,l=n.size();for(let p=0;p<l;p++){const h=n.get(p),a=s.query_identifier_set(h),o=[];if(a.id_array_type.value===1){const d=a.get_globalid_array(),u=d.count();for(let m=0;m<u;m++)o.push(d.get_globalid_at(m))}else if(a.id_array_type.value===3){const d=a.get_identifier_array(),u=d.count();for(let m=0;m<u;m++)o.push(d.get_identifier_at(m).toString())}else if(a.id_array_type.value===2){const d=a.get_string_array(),u=d.count();for(let m=0;m<u;m++)o.push(d.get_string_at(m))}else{if(a.id_array_type.value!==0)throw new U("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const d=a.get_oid_array(),u=d.count();for(let m=0;m<u;m++)o.push(d.get_objectid_at(m).toString())}}t.set(h,o)}return e.delete(),t}function Re(r,e){if(!r?.queryResult?.featureResult)return e;const i=r.queryResult.featureResult.fieldNameToAttributeIndexMap;for(const t of r.queryResult.featureResult.features){const s=t.attributes[i.TYPENAME],n=G(e.namedTypeDefinitions,s,()=>({useAllData:!1,members:new Map})),l=t.attributes[i.ELEMENTUID];if(t.compressedGeometry?.coords?.length>0){let p=t.compressedGeometry.lengths;t.compressedGeometry.geometryType==="esriGeometryPoint"&&(p=[]),n.members.set(l,{id:l,linkChartLocation:new bt(p,t.compressedGeometry.coords)})}else n.members.set(l,{id:l})}return e}function Or(r,e){for(const[i,t]of r){const s=G(e.namedTypeDefinitions,i,()=>({useAllData:!1,members:new Map}));for(const n of t)s.members.has(n)||s.members.set(n,{id:n})}return e}const ys={fetchAndConvertSerializedLinkChart:r=>Cr(r)},Te=(r,e)=>{if(r.type==="column-reference")return r.column===e.systemOidFieldName?"ID(n)":`n.${r.column}`;if(r.type==="string")return`'${r.value}'`;if(r.type==="number")return`${r.value}`;if(r.type==="binary-expression"&&e.supportedSqlTypes.has(r.left.type)&&e.supportedSqlTypes.has(r.right.type)&&e.supportedSqlOperators.has(r.operator))return`${Te(r.left,e)} ${r.operator} ${Te(r.right,e)}`;if(r.type==="binary-expression"&&r.operator==="LIKE"){let i="";if(r.left.type==="function"&&r.left.args.value[0].type==="column-reference")i+=`lower(n.${r.left.args.value[0].column})`;else{if(r.left.type!=="column-reference")return e.unsupportedOperationFound=!0,"";i+=`lower(n.${r.left.column})`}if(i+=" CONTAINS (",r.right.type!=="string")return e.unsupportedOperationFound=!0,"";{let t=r.right.value;t.startsWith("%")&&(t=t.slice(1)),t.endsWith("%")&&(t=t.slice(0,-1)),i+=`'${t.toLowerCase()}')`}return i}return e.unsupportedOperationFound=!0,""};let fe=class B{constructor(){this._featureLookup=new Map}static getInstance(){return B.instance||(B.instance=new B),B.instance}static resetInstance(){B.instance&&(B.instance=null)}deleteFromStore(e){e.forEach(i=>{this._featureLookup.delete(i)})}readFromStoreByList(e){const i=[];return e.forEach(t=>{const s=this.readFromStoreById(t);s&&i.push(s)}),i}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,i,t){const s=[];return e.forEach(n=>{if(!n?.id)return;n.properties||(n.properties=[]);let l,p=null;if(t&&n.properties[t]&&(p=St(n.properties[t])),"originId"in n&&"destinationId"in n&&(n.properties[ue]=n.originId,n.properties[ce]=n.destinationId),n.properties[i]=n.id,n.id&&this._featureLookup.has(n.id)&&this._featureLookup.get(n.id).attributes){const h=this._featureLookup.get(n.id),a=JSON.parse(JSON.stringify(Object.assign(h.attributes,n.properties)));t&&n.properties[t]&&(a[t]=vt(n.properties[t])),l=new ve(p?JSON.parse(JSON.stringify(p)):h?.geometry?JSON.parse(JSON.stringify(h.geometry)):null,a,null,n.properties[i])}else l=new ve(p?JSON.parse(JSON.stringify(p)):null,n.properties,null,n.properties[i]);this._featureLookup.set(`${n.typeName?`${n.typeName}__${n.id}`:n.id}`,l),s.push(l)}),s}},ge,T=null;function ms(){return ge||(ge=ut(()=>ct(()=>import("./lclayout-6cdRR6IH-e1a2nefn.js"),__vite__mapDeps([0,1])),ot([0,1])).then(r=>r.l).then(({default:r})=>r({locateFile:e=>mt(`esri/libs/linkchartlayout/${e}`)})).then(r=>{Ar(r)}),ge)}function Ar(r){T=r}const Oe={right:0,left:1,top:2,bottom:3},Ae={none:0,"start-only":1,"start-and-end":2};function jr(r){const e={timeDirection:"right",timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:"start-and-end",showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0,...r?.toJSON(),eventsTicksVisualization:r?.eventsTicksVisualization??"start-and-end"};return{...e,timeDirection:{value:Oe[e.timeDirection]??Oe.right},eventsTicksVisualization:{value:Ae[e.eventsTicksVisualization]??Ae["start-and-end"]}}}function z(r,e,i,t,s,n){const l=i.length,p=s.length,h=Float64Array.BYTES_PER_ELEMENT,a=Uint32Array.BYTES_PER_ELEMENT,o=Uint8Array.BYTES_PER_ELEMENT,d=16,u=d+l*(o+2*h)+p*(2*a),m=T._malloc(u);try{const g=m+d-m%d,f=g+l*h,S=f+l*h,N=S+p*a,I=N+p*a,E=()=>[T.HEAPF64.subarray(g>>3,(g>>3)+l),T.HEAPF64.subarray(f>>3,(f>>3)+l),T.HEAPU32.subarray(S>>2,(S>>2)+p),T.HEAPU32.subarray(N>>2,(N>>2)+p),T.HEAPU8.subarray(I,I+l)],[D,_,w,v,M]=E();D.set(i),_.set(t),w.set(s),v.set(n),M.set(e);const L=r(l,I,g,f,p,S,N);let P=null,k=null;if(L.value===0){const V=T.getLayoutLinksTypes(),X=T.getLayoutLinksVerticesEndIndices(),me=T.getLayoutLinksVertices(),Ne=T.countLayoutLinksVertices();!p||V&&X?Ne&&!me?L.value=1:(P={types:new Uint8Array(T.HEAPU8.subarray(V,V+p)),vertexEndIndex:new Uint32Array(T.HEAPU32.subarray(X>>2,(X>>2)+p)),vertices:new Float64Array(T.HEAPF64.subarray(me>>3,(me>>3)+2*Ne))},k=T.getAuxiliaryGraphicElements()):L.value=1}const[x,C,F,$,H]=E();return i.set(x),t.set(C),s.set(F),n.set($),e.set(H),{status:L.value,links:P,graphics:k}}finally{T._free(m),T.cleanupLayout()}}const je=2,Ge=1,Pe=-1;var qe,Ue,He,Qe,ze,We,Be;(function(r){function e(){return T.getMinIdealEdgeLength()}function i(t,s,n,l,p,h,a=je,o=Ge,d=Pe){return z((u,m,g,f,S,N,I)=>T.applyForceDirectedLayout(t,u,m,g,f,S,N,I,a,o,d),s,n,l,p,h)}r.getMinIdealEdgeLength=e,r.apply=i})(qe||(qe={})),(function(r){function e(i,t,s,n,l,p,h=je,a=Ge,o=Pe){return z((d,u,m,g,f,S,N)=>T.applyCommunityLayout(i,d,u,m,g,f,S,N,h,a,o),t,s,n,l,p)}r.apply=e})(Ue||(Ue={})),(function(r){function e(i,t,s,n,l,p){return z((h,a,o,d,u,m,g)=>T.applySimpleLayout(i,h,a,o,d,u,m,g),t,s,n,l,p)}r.apply=e})(He||(He={})),(function(r){function e(i,t,s,n,l,p){return z((h,a,o,d,u,m,g)=>T.applyHierarchicalLayout(i,h,a,o,d,u,m,g),t,s,n,l,p)}r.apply=e})(Qe||(Qe={})),(function(r){function e(i,t,s,n,l,p){return z((h,a,o,d,u,m,g)=>T.applyRadialTreeLayout(i,h,a,o,d,u,m,g),t,s,n,l,p)}r.apply=e})(ze||(ze={})),(function(r){function e(i,t,s,n,l,p){return z((h,a,o,d,u,m,g)=>T.applySmartTreeLayout(i,h,a,o,d,u,m,g),t,s,n,l,p)}r.apply=e})(We||(We={})),(function(r){function e(i,t,s,n,l,p,h,a,o,d,u,m){return z((g,f,S,N,I,E,D)=>{if(l.length!==g)return{value:1};if(p.length!==g)return{value:1};if(o.length!==I)return{value:1};if(d.length!==I)return{value:1};const _=Float64Array.BYTES_PER_ELEMENT,w=16,v=T._malloc(w+g*_),M=T._malloc(w+g*_),L=T._malloc(w+I*_),P=T._malloc(w+I*_),k=v+w-v%w,x=M+w-M%w,C=L+w-L%w,F=P+w-P%w;try{return T.HEAPF64.subarray(k>>3,(k>>3)+g).set(l),T.HEAPF64.subarray(x>>3,(x>>3)+g).set(p),T.HEAPF64.subarray(C>>3,(C>>3)+I).set(o),T.HEAPF64.subarray(F>>3,(F>>3)+I).set(d),T.applyChronologicalLayout(i,g,f,S,N,k,x,I,E,D,C,F,u,jr(m))}finally{T._free(v),T._free(M),T._free(L),T._free(P)}},t,s,n,h,a)}r.apply=e})(Be||(Be={}));it()({none:"none",startAndEnd:"start-and-end",startOnly:"start-only"});it()({absoluteValue:"absolute-value",multiplier:"multiplier"});const Gr=new Map([["basic-grid","basic-grid"],["geographic-organic-standard","geographic-organic-standard"],["hierarchical-bottom-to-top","hierarchical-bottom-to-top"],["hierarchical-top-to-bottom","hierarchical-bottom-to-top"],["organic-community","organic-community"],["organic-fusiform","organic-standard"],["organic-leaf-circle","organic-standard"],["organic-standard","organic-standard"],["radial-node-centric","radial-root-centric"],["radial-root-centric","radial-root-centric"],["tree-bottom-to-top","tree-left-to-right"],["tree-left-to-right","tree-left-to-right"],["tree-right-to-left","tree-left-to-right"],["tree-top-to-bottom","tree-left-to-right"],["chronological-mono-timeline","chronological-mono-timeline"],["chronological-multi-timeline","chronological-multi-timeline"]]);function Pr(r,e){const i=new Map;if(e.dataModel?.relationshipTypes)for(const t of e.dataModel.relationshipTypes)t.name&&i.set(t.name,[]);for(const t of r)i.has(t.typeName)&&i.get(t.typeName)?.push(t.id);return i}async function hs(r,e,i){const t=[],s=Pr(r,e),n={},l=[];for(const[o,d]of s){if(d.length<1)continue;const u=`${o}_ids`;n[u]=d,l.push(`MATCH (n)-[r:${o}]->(m) WHERE id(r) in $${u} RETURN id(n), labels(n)[0], id(m), labels(m)[0]`)}if(l.length===0)return[];const p=l.join(" UNION "),h=new W({openCypherQuery:p,bindParameters:n}),a=(await J(e,h,i?.requestOptions)).resultRowsStream.getReader();for(;;){const{done:o,value:d}=await a.read();if(o)break;for(const u of d)t.push({id:u[0],typeName:u[1]}),t.push({id:u[2],typeName:u[3]})}return t}const fs=r=>Gr.get(r)??"radial-root-centric";function qr(r){if(!r.spatialReference.isWGS84)throw new U("knowledge-graph:layer-support-utils","The utilsExtentToInBoundsRings function only supports WGS84 spatial references.");return r.clone().normalize().map(e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]])}let j=class extends tt{constructor(r){super(r),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const e=new Map;r.knowledgeGraph.dataModel.entityTypes?.forEach(i=>{i.name&&(e.set(i.name,"entity"),this._processingCacheUpdatesLookup.set(i.name,[]),r.inclusionModeDefinition&&!r.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(i.name),i.properties?.forEach(t=>{t.geometryType&&t.geometryType!=="esriGeometryNull"&&this.geographicLookup.set(i.name,{name:t.name??"",geometryType:t.geometryType})}))}),r.knowledgeGraph.dataModel.relationshipTypes?.forEach(i=>{i.name&&(e.set(i.name,"relationship"),this._processingCacheUpdatesLookup.set(i.name,[]),r.inclusionModeDefinition&&!r.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(i.name),i.properties?.forEach(t=>{t.geometryType&&t.geometryType!=="esriGeometryNull"&&this.geographicLookup.set(i.name,{name:t.name??"",geometryType:t.geometryType})}))}),r.inclusionModeDefinition?.namedTypeDefinitions.forEach((i,t)=>{if(e.get(t)==="entity")this.entityTypeNames.add(t);else{if(e.get(t)!=="relationship")return rt.getLogger(this).warn(`A named type, ${t}, was in the inclusion list that wasn't in the data model and will be removed`),void r.inclusionModeDefinition?.namedTypeDefinitions.delete(t);this.relationshipTypeNames.add(t)}const s=new Map;i.members?.forEach(n=>{G(this.memberIdTypeLookup,n.id,()=>new Set).add(t)}),this.sublayerCaches.set(t,s)})}addToLayer(r){r.forEach(({typeName:e,id:i})=>{if(!this.inclusionModeDefinition)throw new U("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){const t=this.inclusionModeDefinition.namedTypeDefinitions.get(e);t.members||(t.members=new Map),t.members.set(i,{id:i}),G(this.memberIdTypeLookup,i,()=>new Set).add(e)}}else{const t=new Map;t.set(i,{id:i}),this.inclusionModeDefinition.namedTypeDefinitions.set(e,{useAllData:!1,members:t}),G(this.memberIdTypeLookup,i,()=>new Set).add(e)}})}getById(r){return fe.getInstance().readFromStoreById(r)}async getData(r,e,i){if(e.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(e.objectType.name))return[];let t;if(t=r||new K({where:"1=1",outFields:["*"]}),e.parentCompositeLayer.type==="link-chart"){const s=e.parentCompositeLayer,n=this._processingCacheUpdatesLookup.get(e.objectType.name??""),l=t.outFields;l&&l.length===1&&l[0]===R&&t.where==="1=1"||await Promise.all(n??[]);const p=this.sublayerCaches.has(e.objectType.name??"")?Array.from(this.sublayerCaches.get(e.objectType.name)?.values()):[],h=[];return p.forEach(a=>{if(this.relationshipTypeNames.has(e.objectType.name)){a.geometry=s.relationshipLinkChartDiagramLookup.get(a.attributes[e.objectIdField]);const o=this.memberIdTypeLookup.get(a.attributes[ue]),d=this.memberIdTypeLookup.get(a.attributes[ce]),u=this._isEndEntitySpatial(o,a,ue),m=this._isEndEntitySpatial(d,a,ce);a.attributes[se]=Number(u&&m)}else{a.geometry=s.entityLinkChartDiagramLookup.get(a.attributes[e.objectIdField]);const o=this.geographicLookup.get(e.objectType.name);o&&a.attributes[o.name]?a.attributes[se]=1:a.attributes[se]=0}a.attributes[Ee]=a.geometry,h.push(a)}),h}return this.retrieveDataFromService(t,e,i)}async getConnectedRecordIds(r,e,i){const t=[];let s="";const n=this._getNamedTypeIdMapFromNodeIds(r);if(e&&e?.length!==0){for(const o of e)s=s+o+"|";s=s.slice(0,-1)}const l={},p=[];for(const[o,d]of n){const u=`${o}_ids`;l[u]=d,e&&e?.length!==0?p.push(`MATCH (n:${o}) WHERE id(n) IN $${u} WITH n MATCH (n)-[r:${s}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`):p.push(`MATCH (n:${o}) WHERE id(n) IN $${u} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`)}if(!p.length)return t;const h=p.join(" UNION "),a=(await J(this.knowledgeGraph,new W({openCypherQuery:h,bindParameters:l}),{signal:i?.signal})).resultRowsStream.getReader();for(;;){const{done:o,value:d}=await a.read();if(o)break;for(let u=0;u<d.length;u++){const m=d[u];t.push({id:m[0],typeName:m[1]}),t.push({id:m[2],typeName:m[3]})}}return t}async getRelationshipsBetweenNodes(r,e,i){const t=this._getNamedTypeIdMapFromNodeIds(r);if(t.size===0)return[];const s={relationshipExclusionIds:e,possibleConnectionEntityIds:r},n=[];for(const[a,o]of t.entries()){const d=`${a}_ids`;s[d]=o,n.push(`MATCH (n:${a}) WHERE id(n) IN $${d} WITH n MATCH (n)-[r]->(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const l=n.join(" UNION "),p=[],h=(await J(this.knowledgeGraph,new W({openCypherQuery:l,bindParameters:s}),{signal:i?.signal})).resultRowsStream.getReader();for(;;){const{done:a,value:o}=await h.read();if(a)break;for(let d=0;d<o.length;d++){const u=o[d];p.push({id:u[0],typeName:u[1]})}}return p}async getRelationshipsFromNodes(r,e,i,t){const s=this._getNamedTypeIdMapFromNodeIds(r);if(s.size===0||e.length===0)return[];const n={relationshipExclusionIds:i,possibleConnectionEntityIds:e},l=[];for(const[d,u]of s.entries()){const m=`${d}_ids`;n[m]=u,l.push(`MATCH (n:${d}) WHERE id(n) IN $${m} WITH n MATCH (n)-[r]-(m) WHERE id(m) IN $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds RETURN id(r), type(r)`)}const p=l.join(" UNION "),h=new Map,a=(await J(this.knowledgeGraph,new W({openCypherQuery:p,bindParameters:n}),{signal:t?.signal})).resultRowsStream.getReader();for(;;){const{done:d,value:u}=await a.read();if(d)break;for(let m=0;m<u.length;m++){const g=u[m];let f=h.get(g[1]);f||(f=new Set,h.set(g[1],f)),f.add(g[0])}}const o=[];for(const[d,u]of h)for(const m of u)o.push({id:m,typeName:d});return o}async refreshCacheContent(r,e,i,t=!0,s){const n=fe.getInstance(),l=[],p=new Map,h=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach(a=>{a.name&&h.set(a.name,a)}),this.knowledgeGraph.dataModel.relationshipTypes?.forEach(a=>{a.name&&h.set(a.name,a)}),r||this.inclusionModeDefinition?r?r.forEach(a=>{if(this.memberIdTypeLookup.has(a))for(const o of this.memberIdTypeLookup.get(a))p.has(o)?p.get(o)?.push(a):p.set(o,[a])}):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach((a,o)=>{a.useAllData?p.set(o,null):a.members&&a.members.forEach(d=>{p.has(o)&&p.get(o)!==null?p.get(o)?.push(d.id):p.set(o,[d.id])})}):(this.knowledgeGraph.dataModel.entityTypes?.forEach(a=>{a.name&&p.set(a.name,null)}),this.knowledgeGraph.dataModel.entityTypes?.forEach(a=>{a.name&&p.set(a.name,null)}));for(const[a,o]of p){const d=new Set(o),u=new Promise((m,g)=>{(async()=>{const f=new Set,S=[];let N,I="",E=!1;if(e||h.get(a)?.properties?.forEach(w=>{w.name&&f.add(w.name)}),i&&this.geographicLookup.has(a)){const w=this.geographicLookup.get(a)?.name;w&&f.add(w)}if(this.entityTypeNames.has(a))I=`MATCH (n:${a}) ${o?"WHERE id(n) IN $ids ":""}return ID(n)`,f.forEach(w=>{I+=`, n.${w}`,S.push(w)});else{if(!this.relationshipTypeNames.has(a))throw new U("knowledge-graph:layer-data-manager",`The graph type of ${a} could not be determined. Was this type set in the KG data model and inclusion definition?`);E=!0,I=`MATCH ()-[n:${a}]->() ${o?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,f.forEach(w=>{I+=`, n.${w}`,S.push(w)})}N=new W(o?{openCypherQuery:I,bindParameters:{ids:o}}:{openCypherQuery:I});const D=(await J(this.knowledgeGraph,N,{signal:s?.signal})).resultRowsStream.getReader();for(;;){const{done:w,value:v}=await D.read();if(w)break;const M=[];for(let k=0;k<v.length;k++){const x=v[k];let C=0,F=0;const $={properties:{}};for($.id=x[C],C++,F++,E&&($.originId=x[C],C++,F++,$.destinationId=x[C],C++,F++,G(this.nodeConnectionsLookup,$.originId,()=>new Set).add($.id),G(this.nodeConnectionsLookup,$.destinationId,()=>new Set).add($.id),G(this.relationshipConnectionsLookup,$.id,()=>[$.originId,$.destinationId]));C<x.length;C++)$.properties[S[C-F]]=x[C];d.delete($.id),M.push($)}const L=n.writeToStore(M,R,this.geographicLookup.get(a)?.name);this.sublayerCaches.has(a)||this.sublayerCaches.set(a,new Map),t&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(a)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(a,{useAllData:!1,members:new Map}),t&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(a).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(a).members=new Map);const P=this.sublayerCaches.get(a);L.forEach(k=>{P?.set(k.attributes[R],k),t&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(a).members.has(k.attributes[R])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(a).members.set(k.attributes[R],{id:k.attributes[R]}),G(this.memberIdTypeLookup,k.attributes[R],()=>new Set).add(a))})}const _=this.inclusionModeDefinition?.namedTypeDefinitions.get(a);if(_)for(const w of d)_.members?.delete(w)})().then(()=>{m(null)}).catch(f=>{f.name==="AbortError"?m(null):g(f)})});l.push(u),this._processingCacheUpdatesLookup.get(a)?.push(u)}if(await Promise.all(l),s?.signal?.aborted)throw ht()}removeFromLayer(r){const e=new Set,i=new Set(r.map(t=>t.id));for(const t of r)e.add(t.typeName),this.memberIdTypeLookup.get(t.id)?.size===1?this.memberIdTypeLookup.delete(t.id):this.memberIdTypeLookup.get(t.id)?.delete(t.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach((s,n)=>{n===t.typeName&&s.members?.has(t.id)&&s.members.delete(t.id)});e.forEach(t=>{this.sublayerCaches.get(t)?.forEach((s,n)=>{i.has(n)&&this.sublayerCaches.get(t)?.delete(n)})})}async retrieveDataFromService(r,e,i){const t=fe.getInstance(),s=new Set,n=[];let l,p="",h=[];const a=e.graphType==="relationship",o=this.inclusionModeDefinition?.namedTypeDefinitions?.get(e.objectType.name)?.useAllData,d=e.parentCompositeLayer.sublayerIdsCache.get(e.objectType.name);let u=!o&&d?Array.from(d).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(e.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(e.objectType.name)?.useAllData&&r.objectIds!=null&&(u=r.objectIds);else if(r.objectIds!=null&&u&&u.length>0){const g=r.objectIds;r.objectIds=u.filter(f=>g.includes(f))}else if(r.objectIds!=null)u=r.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(e.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(e.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(e.objectType.name)?.members?.size<1))return r.objectIds=[],[];r.objectIds=u}if(r.outFields!=null){const g=r.outFields;g.includes("*")?e.fields.forEach(f=>{s.add(f.name)}):g.forEach(f=>{f!==R&&f!==e.geometryFieldName&&s.add(f)})}if(r.geometry!=null){const g=r.geometry;let f;const S=e.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,N=S?.spatialReference,I=S?.serviceCapabilities?.geometryCapabilities;let E=I?.geometryMaxBoundingRectangleSizeX,D=I?.geometryMaxBoundingRectangleSizeY;if(g.type==="point"){let _=g;_.spatialReference?.isWGS84||(await de(_.spatialReference,Q),_=ie(_,Q)),f=new pe({spatialReference:Q,xmin:_.x-1e-4,ymin:_.y-1e-4,xmax:_.x+1e-4,ymax:_.y+1e-4})}else g?.extent?.spatialReference&&!g.spatialReference?.isWGS84?(await de(g.extent.spatialReference,Q),f=ie(g.extent,Q)):f=g.extent;if(E&&D&&N){if(N.wkid!==4326){const _=new pe({spatialReference:N,xmax:E,ymax:D}),w=ie(_,Q);E=w.xmax,D=w.ymax}if(f.xmax-f.xmin>E)throw new U("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${E}° latitude, limit exceeded`);if(f.ymax-f.ymin>D)throw new U("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${D}° longitude, limit exceeded`)}if(r.where!=null&&r.where!=="1=1"){const _=await Se(r.where.toUpperCase(),e.fieldsIndex);e.fields.forEach(w=>{_.fieldNames.includes(w.name)&&s.add(w.name)})}p=a?`Match ()-[n:${e.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${e.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${e.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${e.geometryFieldName}) return ID(n)`,e.geometryFieldName&&s.add(e.geometryFieldName),s.forEach(_=>{p+=`, n.${_}`,n.push(_)}),l=new W({openCypherQuery:p,bindParameters:{param_filter_geom:new st({rings:qr(f)})}})}else{let g="";if(r.where!=null&&r.where!=="1=1"){const N=await Se(r.where,e.fieldsIndex);e.fields.forEach(E=>{N.fieldNames.includes(E.name)&&s.add(E.name)});const I={systemOidFieldName:R,supportedSqlTypes:new Set(["column-reference","string","number","binary-expression"]),supportedSqlOperators:new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]),unsupportedOperationFound:!1};g=Te(N.parseTree,I),I.unsupportedOperationFound&&(g="")}let f="";f=a?`Match ()-[n:${e.objectType.name}]->()`:`Match (n:${e.objectType.name})`;let S=!1;u&&(S=!0,f+=" WHERE ID(n) IN $ids"),g&&(f+=S?" AND":" WHERE",f+=` ${g}`),f+=" return ID(n)",a&&(f+=", id(startNode(n)), id(endNode(n))"),r.returnGeometry&&e.geometryFieldName&&s.add(e.geometryFieldName),s.forEach(N=>{f+=`, n.${N}`,n.push(N)}),l=new W(u?{openCypherQuery:f,bindParameters:{ids:u}}:{openCypherQuery:f})}const m=(await J(e.parentCompositeLayer.dataManager.knowledgeGraph,l,i)).resultRowsStream.getReader();for(;;){const{done:g,value:f}=await m.read();if(g)break;const S=[];for(let N=0;N<f.length;N++){const I=f[N];let E=0,D=0;const _={properties:{}};for(_.id=I[E],E++,D++,a&&(_.originId=I[E],E++,D++,_.destinationId=I[E],E++,D++);E<I.length;E++)_.properties[n[E-D]]=I[E];S.push(_)}h=h.concat(t.writeToStore(S,R,e.parentCompositeLayer.dataManager.geographicLookup.get(e.objectType.name)?.name))}return h}_isEndEntitySpatial(r,e,i){for(const t of r??[])if(this.entityTypeNames.has(t)){const s=this.geographicLookup.get(t),n=s&&this.sublayerCaches.get(t)?.get(e.attributes[i]);if(s&&n?.attributes[s.name])return!0}return!1}_getNamedTypeIdMapFromNodeIds(r){const e=new Map;return r.forEach(i=>{if(this.memberIdTypeLookup.has(i))for(const t of this.memberIdTypeLookup.get(i)){if(!this.entityTypeNames.has(t))return;e.has(t)?e.get(t)?.push(i):e.set(t,[i])}}),e}};c([y()],j.prototype,"knowledgeGraph",void 0),c([y()],j.prototype,"inclusionModeDefinition",void 0),c([y()],j.prototype,"entityTypeNames",void 0),c([y()],j.prototype,"relationshipTypeNames",void 0),c([y()],j.prototype,"geographicLookup",void 0),c([y()],j.prototype,"sublayerCaches",void 0),c([y()],j.prototype,"nodeConnectionsLookup",void 0),c([y()],j.prototype,"relationshipConnectionsLookup",void 0),c([y()],j.prototype,"memberIdTypeLookup",void 0),j=c([ye("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],j);const Ur=Symbol("isKnowledgeGraphGraphicOriginSymbol");var Ve;class Hr extends nt{get[(Ve=Ur,kt)](){return this.sublayer}get[Lt](){return this.sublayer}get[at](){return this.sublayer}constructor(e,i){super(),this[Ve]=!0,this.type="knowledge-graph",this.layer=e,this.sublayer=i}get id(){return this.layer.id}}const Qr=Symbol("isLinkChartGraphicOriginSymbol");var Je;class zr extends nt{get[(Je=Qr,at)](){return this.layer}constructor(e,i){super(),this[Je]=!0,this.type="link-chart",this.layer=e,this.sublayer=i}get id(){return`${this.layer.id}:__${this.sublayer.id}__`}}const Ke=Ot(),Wr=r=>{const e=r;let i=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return c([y(Ke.fields)],i.prototype,"fields",void 0),c([y(Ke.fieldsIndex)],i.prototype,"fieldsIndex",void 0),i=c([ye("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],i),i},Br=At;let q=class extends tt{constructor(r){super(r),this.entityAdds=void 0,this.entityUpdates=void 0,this.entityDeletes=void 0,this.relationshipAdds=void 0,this.relationshipUpdates=void 0,this.relationshipDeletes=void 0,this.options=void 0}};c([y()],q.prototype,"entityAdds",void 0),c([y()],q.prototype,"entityUpdates",void 0),c([y()],q.prototype,"entityDeletes",void 0),c([y()],q.prototype,"relationshipAdds",void 0),c([y()],q.prototype,"relationshipUpdates",void 0),c([y()],q.prototype,"relationshipDeletes",void 0),c([y()],q.prototype,"options",void 0),q=c([ye("esri.rest.knowledgeGraph.GraphApplyEdits")],q);const Vr={initializeLayersFromClientData:async(r,e,i)=>{if(e||(e=[...r.layers,...r.tables].map(n=>n.graphTypeName)),e?.length===0)return;const t=new Map;for(const n of e)t.set(n,Ze(r,n));const s=await Tt(r.dataManager.knowledgeGraph,Array.from(t.values()),{requestOptions:{signal:i?.signal}});for(const n of[...r.layers,...r.tables]){const l=n.objectType.name;if(l==null)continue;const p=s.get(Ze(r,l));if(p){const h=JSON.parse(p);h===null||typeof h!="object"||h.hasOwnProperty("showLabels")||(h.showLabels=!1),n.read(h,{origin:"service"})}}}},Ze=(r,e)=>r.type==="knowledge-graph"?`${e}/Map`:`${e}/LinkChart/LinkChartSubLayer`;async function gs(r,e,i){return Vr.initializeLayersFromClientData(r,e,i)}const Ye=["#4a0932","#b31515","#18382e","#a64f1b","#102432","#8c213f","#ed9310","#2c6954","#144d59","#ffc730","#75351e","#454f4b","#78b1c2","#191921","#8f8f82","#9be0c0","#dbb658","#87b051","#11495c","#c43541","#9c5596","#44498b","#ad9d63","#86afb3","#5c98ca","#b0bfa2","#73241f","#b86b53","#d9d78c","#3e756d","#f260a1","#a0d17d","#c27c30","#eb82eb","#ffdf3c","#ffb259","#ab52b3","#3cccb4","#0095ba","#d92b30"],Jr="#8f8f82";function Kr(r){return r<0||r>=Ye.length?new De(Jr):new De(Ye[r])}function Zr(r){const e=r.toArray();return new Mt({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,style:"solid",width:.75,color:e},{type:"CIMVectorMarker",enable:!0,size:6,markerPlacement:{type:"CIMMarkerPlacementOnLine",angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-10,ymin:-5,xmax:0,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[-12,-3.47],[-12,3.6],[1.96,-.03],[-12,-3.47]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:e}]}}]}]}}})}function Yr(r){let e="ESRI__ID",i=4;for(const t of r)if(t.name){if(t.name.toLowerCase()==="name"){e=t.name;break}t.name.toLowerCase().includes("name")?(e=t.name,i=2):t.fieldType==="esriFieldTypeString"&&i>3&&(e=t.name,i=3)}return e}function Xr(r,e,i){const t={color:[80,80,80],haloColor:[255,255,255],haloSize:.7,font:{size:10,weight:"normal"}},s=new Z({labelExpressionInfo:new ae({expression:i==="ESRI__ID"?`${e}`:`$feature.${i}`}),labelPlacement:"above-center",symbol:new ne(t)}),n=new Z({labelExpressionInfo:new ae({expression:`'${e}' + IIf($feature.ESRI__AggregationCount>1, ' (' + $feature.ESRI__AggregationCount + ')', '')`}),labelPlacement:"center-along",labelPosition:"parallel",repeatLabel:!1,symbol:new ne({...t,yoffset:"12px"})});return r==="entity"?[s]:[n]}function ei(r,e,i){const t={color:[255,255,255],haloColor:[0,0,0],haloSize:.7,font:{size:10,weight:"bold"}},s=i==="ESRI__ID"?`${r}`:`$feature.${i}`;return e==="point"?[new Z({labelExpressionInfo:new ae({expression:s}),labelPlacement:"above-center",symbol:new ne(t)})]:e==="polyline"?[new Z({labelExpressionInfo:new ae({expression:s}),labelPlacement:"center-along",repeatLabel:!0,symbol:new ne(t)})]:e==="polygon"?[new Z({labelExpressionInfo:new ae({expression:s}),labelPlacement:"always-horizontal",symbol:new ne(t)})]:null}const ti={capabilities:[],allowGeometryUpdates:!1,serviceCapabilities:{geometryCapabilities:{supportsZValues:!1,supportsMValues:!1}}};function ri(r){const{capabilities:e,allowGeometryUpdates:i,serviceCapabilities:{geometryCapabilities:{supportsZValues:t,supportsMValues:s}}}=r?.serviceDefinition||ti,n=r?.dataModel.arcgisManaged?e:e.filter(p=>p==="Query"),l=new Set(n);return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:s,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:l.has("Create"),supportsDelete:l.has("Delete"),supportsEditing:l.has("Editing"),supportsChangeTracking:!1,supportsQuery:l.has("Query"),supportsQueryBins:!1,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:l.has("Update"),supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:qt,queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:Pt,editing:{supportsGeometryUpdate:!!r?.dataModel.arcgisManaged&&i,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:l.has("Delete"),supportsUpdateByAnonymous:!1,supportsUpdateByOthers:l.has("Update"),supportsAsyncApplyEdits:!1,zDefault:void 0}}}async function ii(r,e){const i=new q,t=e.graphTypeName,s=e.graphType,n=e.parentCompositeLayer.type==="knowledge-graph"?e.geometryFieldName:null,l=!!e.fieldsIndex.get(n)?.editable,p=o=>{const d={...o};for(const u of e.fields)u.editable||delete d[u.name];for(const u of Object.keys(o))u.includes("ESRI__")&&delete d[u];return d},h=async o=>{await de(o.spatialReference,le.WGS84);const d=ie(o,le.WGS84);return d.type==="point"?d.normalize():(await Gt(d))[0]};for(const o of r.addFeatures??[]){const d=p(o.attributes);Ce(o.sourceLayer)&&o.sourceLayer.graphTypeName===t&&(s==="entity"?(i.entityAdds||(i.entityAdds=[]),n&&o.geometry&&(d[n]=await h(o.geometry)),i.entityAdds.push(new Le({properties:d,typeName:t}))):(i.relationshipAdds||(i.relationshipAdds=[]),i.relationshipAdds.push(new Me({properties:d,typeName:t}))))}for(const o of r.updateFeatures??[]){const d=o.attributes[R],u=p(o.attributes);Ce(o.sourceLayer)&&o.sourceLayer.graphTypeName===t&&(s==="entity"?(i.entityUpdates||(i.entityUpdates=[]),n&&l&&o.geometry&&(u[n]=await h(o.geometry)),i.entityUpdates.push(new Le({id:d,properties:u,typeName:t}))):(i.relationshipUpdates||(i.relationshipUpdates=[]),i.relationshipUpdates.push(new Me({id:d,properties:u,typeName:t}))))}const a=new Map;for(const o of r.deleteFeatures??[])if(Nt(o)){const d=o,u=G(a,d.sourceLayer.graphTypeName,()=>({typeName:d.sourceLayer.graphTypeName,ids:[]}));d.sourceLayer.graphTypeName===t&&u.ids.push(d.attributes[R])}else o.objectId&&typeof o.objectId=="string"&&G(a,t,()=>({typeName:t,ids:[]})).ids.push(o.objectId);for(const o of a.values())o.ids.length>0&&(s==="entity"?(i.entityDeletes||(i.entityDeletes=[]),i.entityDeletes.push({typeName:o.typeName,ids:o.ids})):(i.relationshipDeletes||(i.relationshipDeletes=[]),i.relationshipDeletes.push({typeName:o.typeName,ids:o.ids})));return i}function si(r,e){const i={addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]};for(const t of r.editResults)if(t.typeName===e){for(const s of t.adds)i.addFeatureResults.push({objectId:s.id,globalId:s.id});for(const s of t.updates)i.updateFeatureResults.push({objectId:s.id,globalId:s.id});for(const s of t.deletes)i.deleteFeatureResults.push({objectId:s.id,globalId:s.id})}return i}function ni(r){if(!r.objectType)return null;const e=[];for(const i of r.fields)!i.name.includes("ESRI__")&&i.editable&&i.type!=="geometry"&&e.push(new Br({fieldName:i.name}));return new jt({elements:e})}function ai(r){if(!r.objectType)return null;let e=null;switch(r.geometryType){case"point":case"multipoint":e="point";break;case"polyline":e="line";break;case"polygon":e="polygon";break;default:e=null}return[new Ut({name:r.graphTypeName,drawingTool:e,prototype:{}})]}function A(r){if(!r.json)return r;r.json.write=Xe(r.json.write);const e=r.json.origins;if(!e)return r;let i;for(i in e){const t=e[i];t&&(t.write=Xe(t.write))}return r}function Xe(r){return typeof r=="object"&&r?(r.enabled!==!1&&(r.overridePolicy=oi(r)),r):r===!0?te():r}function oi(r){const{target:e,writer:i,overridePolicy:t,...s}=r;return function(n,l){const p=dt.call(this,n,l);return p.enabled?{...s,...p}:p}}function te(){return{overridePolicy:dt}}function dt(r,e){const i=!!this.geometryType;let t={enabled:i};return i&&(t={...t,...re.call(this,r,e)}),t}function re(r,e){return{ignoreOrigin:this.originIdOf(e)>0}}let b=class extends Wr(Bt(Yt(Kt(Qt(er(sr(ir(rr(Ct(xt)))))))))){constructor(e){super(e),this.blendMode="normal",this.charts=null,this.definitionExpression=null,this.displayFilterEnabled=!0,this.displayFilterInfo=null,this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=R,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then(()=>{const i=new MessageChannel;return new $t(i.port1,{channel:i,client:{queryFeatures:(t,s={})=>{const n=K.fromJSON(t);return this.queryFeaturesJSON(n,s)}}}),[i.port2]})},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get capabilities(){return this.parent?this.parent.sublayerCapabilities:ri(null)}get userHasUpdateItemPrivileges(){return!!this.parent?.userHasUpdateItemPrivileges}get editingEnabled(){return this._isOverridden("editingEnabled")?this._get("editingEnabled"):this.capabilities.operations.supportsEditing}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}get isTable(){return this.parentCompositeLayer.type!=="link-chart"&&this.geometryFieldName==null}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const i=this._normalizeFeatureReduction(e);this._set("featureReduction",i)}get fields(){const e=[];return this.objectType?.properties?.forEach(i=>{const t=i.fieldType==="esriFieldTypeOID"?"esriFieldTypeInteger":i.fieldType;e.push(oe.fromJSON({name:i.name,type:t,alias:i.alias,defaultValue:i.defaultValue,editable:i.editable,nullable:i.nullable}))}),e.push(oe.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),oe.fromJSON({name:be,type:"esriFieldTypeInteger",alias:be,editable:!1}),oe.fromJSON({name:se,type:"esriFieldTypeInteger",alias:se,editable:!1})),e}get formTemplate(){return this._isOverridden("formTemplate")?this._get("formTemplate"):ni(this)}set formTemplate(e){this._overrideIfSome("formTemplate",e)}get geometryType(){if(this.parentCompositeLayer?.type==="link-chart")return this.graphType==="relationship"?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),i=e?.geometryType;return i&&i!=="esriGeometryNull"?ee.fromJSON(i):null}get geometryFieldName(){return this.parentCompositeLayer?.type==="link-chart"?Ee:this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name)?.name??null}get graphicOrigin(){if(!this.parent)return null;switch(this.parent.type){case"knowledge-graph":return new Hr(this.parent,this);case"link-chart":return new zr(this.parent,this)}}get graphTypeName(){return this.objectType?.name}set graphTypeName(e){this._set("graphTypeName",e)}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),i=e?.name;return(i?this.objectType?.properties?.[i]:null)?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),i=e?.name;return(i?this.objectType?.properties?.[i]:null)?.hasZ??!1}set labelingInfo(e){this._set("labelingInfo",e)}get labelingInfo(){if(this._isOverridden("labelingInfo"))return this._get("labelingInfo");if(!this.objectType||!this.parentCompositeLayer||!this.graphTypeName)return null;const e=this.objectType.properties?Yr(this.objectType.properties):"ESRI__ID";return this.parentCompositeLayer.type==="link-chart"?Xr(this.graphType,this.graphTypeName,e):ei(this.graphTypeName,this.geometryType,e)}set renderer(e){_t(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const e=this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel,i=[...e?.entityTypes??[],...e?.relationshipTypes??[]].map(n=>n.name).indexOf(this.graphTypeName),t=Kr(i);if(this.parentCompositeLayer?.type==="link-chart"){if(this.graphType==="relationship")return new cr({type:"simple",symbol:Zr(t)});const n=$e(ke(ee.toJSON("point")).renderer);return xe(n.symbol,t),n}const s=$e(ke(ee.toJSON(this.geometryType)).renderer);return xe(s.symbol,t),s}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??le.WGS84}get templates(){return this._isOverridden("templates")?this._get("templates"):ai(this)}set templates(e){this._overrideIfSome("templates",e)}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,i){i.title=e??"Layer"}createPopupTemplate(e){return hr(this,e)}createQuery(){return new K({where:"1=1",outFields:["*"]})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,i){return null}async queryFeatures(e,i){await this.load();const{resolvedQuery:t,queryEngine:s}=await this._setupQueryObjects(e),n=this.graphicOrigin,l=mr.fromJSON(await s.executeQuery(t.toJSON(),i?.signal));return l.features.forEach(p=>{p.sourceLayer=this,p.origin=n}),l}async queryFeaturesJSON(e,i){await this.load();const{resolvedQuery:t,queryEngine:s}=await this._setupQueryObjects(e);return await s.executeQuery(t.toJSON(),i?.signal)}async queryFeatureCount(e,i){await this.load();const{resolvedQuery:t,queryEngine:s}=await this._setupQueryObjects(e);return s.executeQueryForCount(t.toJSON(),i?.signal)}async queryExtent(e={},i){await this.load();const t={...e,returnGeometry:!0},{resolvedQuery:s,queryEngine:n}=await this._setupQueryObjects(t),l=await n.executeQueryForExtent(s.toJSON(),i?.signal);let p;return p=l.extent?.xmin!=null&&l.extent?.xmax!=null&&l.extent?.ymin!=null&&l.extent?.ymax!=null?new pe(l.extent):new pe,{count:l.count,extent:p}}async queryObjectIds(e,i){await this.load();const t=K.from(e);let s;if(this.parentCompositeLayer.type==="link-chart"&&this._cachedQueryEngine)s=this._cachedQueryEngine;else{const n=await this.parentCompositeLayer.dataManager.getData(t,this,i);s=this.loadQueryEngine(n)}return await s.executeQueryForIds(t.toJSON(),i?.signal)}async applyEdits(e){if(!this.parentCompositeLayer.dataManager.knowledgeGraph)throw new U("knowledge-graph-sublayer:no-knowledge-graph","ApplyEdits cannot be executed because the parent does not have a Knowledge Graph model.  This is usually caused by the layer not yet being loaded");const i=await ii(e,this);i.options={cascadeDelete:!0,cascadeProvenanceDelete:!!this.parent?.knowledgeGraph.serviceDefinition.supportsProvenance||void 0};const t=await wt(this.parentCompositeLayer.dataManager.knowledgeGraph,i),s=si(t,this.graphTypeName),n={addedFeatures:s.addFeatureResults,updatedFeatures:s.updateFeatureResults,deletedFeatures:s.deleteFeatureResults,addedAttachments:s.addAttachmentResults,deletedAttachments:s.deleteAttachmentResults,updatedAttachments:s.updateAttachmentResults,exceededTransferLimit:!1,historicMoment:new Date,edits:void 0};return this.emit("edits",n),this.emit("apply-edits",{result:Promise.resolve(n)}),this.parentCompositeLayer.type==="link-chart"&&await this.parentCompositeLayer.refreshLinkChartCache([...n.addedFeatures.map(l=>l.globalId),...n.updatedFeatures.map(l=>l.globalId),...n.deletedFeatures.map(l=>l.globalId)]),s}loadQueryEngine(e){const i=new Ft({geometryType:ee.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),t=new Rt({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:ee.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,featureIdInfo:{type:"object-id",fieldName:this.objectIdField},spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:i});return t.featureStore.addMany(e),t}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new K({where:"1=1",outFields:[R]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then(()=>Et(this.timeInfo,this.fieldsIndex))),Promise.resolve(this)}async _setupQueryObjects(e,i){const t=K.from(e),s=t.geometry;if(s&&!s.spatialReference?.isWGS84&&(await de(s.spatialReference,Q),t.geometry=ie(s instanceof st||s instanceof gt||s instanceof yt?s:s.extent,Q)),this.parentCompositeLayer.type==="link-chart"&&this._cachedQueryEngine)return{resolvedQuery:t,queryEngine:this._cachedQueryEngine};const n=await this.parentCompositeLayer.dataManager.getData(t,this,i);return{resolvedQuery:t,queryEngine:this.loadQueryEngine(n)}}};function li(r,e,i){const t=[["ESRI__AGGREGATION_COUNT",be],["ESRI__ORIGIN_ID",ue],["ESRI__DESTINATION_ID",ce],["ESRI__LAYOUT_GEOMETRY",Ee]];try{for(const s of r)for(const[n,l]of t)s.labelExpression=s.labelExpression?.replaceAll(n,l),s.labelExpressionInfo?.expression&&(s.labelExpressionInfo.expression=s.labelExpressionInfo.expression.replaceAll(n,l))}catch(s){rt.getLogger(this).warn("Error updating labelingInfo",s)}return Ht(r,e,i)}c([y(A(O(zt)))],b.prototype,"blendMode",void 0),c([y({readOnly:!0})],b.prototype,"capabilities",null),c([y({readOnly:!0})],b.prototype,"userHasUpdateItemPrivileges",null),c([y({type:Boolean})],b.prototype,"editingEnabled",null),c([y()],b.prototype,"isTable",null),c([y({json:{origins:{"web-scene":{write:!1}},write:te()}})],b.prototype,"charts",void 0),c([y({readOnly:!0})],b.prototype,"defaultPopupTemplate",null),c([y({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],b.prototype,"definitionExpression",void 0),c([y(A(O(Vt)))],b.prototype,"displayFilterEnabled",void 0),c([y(A(O(Jt)))],b.prototype,"displayFilterInfo",void 0),c([y(A(O(Wt)))],b.prototype,"effect",void 0),c([y()],b.prototype,"elevationInfo",void 0),c([y(A(O(Zt)))],b.prototype,"featureEffect",void 0),c([y(A(O(Xt)))],b.prototype,"featureReduction",null),c([y()],b.prototype,"fields",null),c([y()],b.prototype,"formTemplate",null),c([y()],b.prototype,"geometryType",null),c([y()],b.prototype,"geometryFieldName",null),c([y({readOnly:!0})],b.prototype,"graphicOrigin",null),c([y({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],b.prototype,"graphType",void 0),c([y({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],b.prototype,"graphTypeName",null),c([y()],b.prototype,"hasM",null),c([y()],b.prototype,"hasZ",null),c([y({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],b.prototype,"id",void 0),c([y({type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",default:!1,write:{overridePolicy(){return{enabled:!!this.geometryType,alwaysWriteDefaults:!0,ignoreOrigin:!0}}}}})],b.prototype,"labelsVisible",void 0),c([y({type:[Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:li,write:te()}})],b.prototype,"labelingInfo",null),c([y({readOnly:!0,json:{read:!1,write:{writer(r,e){switch(this.parentCompositeLayer?.type){case"link-chart":e.layerType="LinkChartSubLayer";break;case"knowledge-graph":e.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],b.prototype,"layerType",void 0),c([y(A(O(ar)))],b.prototype,"legendEnabled",void 0),c([y(A(O(or)))],b.prototype,"maxScale",void 0),c([y(A(O(lr)))],b.prototype,"minScale",void 0),c([y()],b.prototype,"objectIdField",void 0),c([y()],b.prototype,"objectType",void 0),c([y(A(O(pr)))],b.prototype,"opacity",void 0),c([y(A(O(tr)))],b.prototype,"orderBy",void 0),c([y({clonable:!1})],b.prototype,"parent",void 0),c([y()],b.prototype,"parentCompositeLayer",void 0),c([y(A(O(dr)))],b.prototype,"popupEnabled",void 0),c([y({type:Dt,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],b.prototype,"popupTemplate",void 0),c([y({type:Number,json:{write:{overridePolicy:re}}})],b.prototype,"refreshInterval",void 0),c([y({types:yr,json:{name:"layerDefinition.drawingInfo.renderer",write:te()}})],b.prototype,"renderer",null),c([y()],b.prototype,"source",void 0),c([y()],b.prototype,"spatialReference",null),c([y()],b.prototype,"templates",null),c([y({type:ur,json:{name:"layerDefinition.timeInfo",write:{overridePolicy:re},origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:{overridePolicy:re}},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:{overridePolicy:re}}}}})],b.prototype,"timeInfo",null),c([y({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],b.prototype,"title",null),c([ft("title")],b.prototype,"writeTitle",null),c([y({json:{read:!1}})],b.prototype,"type",void 0),c([y(A(O(nr)))],b.prototype,"useViewTime",void 0),c([y({type:Boolean,json:{name:"visibility",write:te()}})],b.prototype,"visible",void 0),b=c([ye("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],b);export{fs as $,Be as B,ys as E,qe as G,He as H,cs as I,hs as N,j as P,ze as Q,gs as S,us as T,Ue as U,We as W,ms as _,fe as a,ri as e,b as f,Qe as z};
