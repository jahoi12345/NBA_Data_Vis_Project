import{_ as Q,Y as c,H as y,G as U}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{c as V,f as E,b as X,aP as T,ar as k,S as $,R as tt,a8 as q}from"./Point-BfTTZoMu-DeJwQYfh.js";import"./index-B0z_nLWi.js";import"./reader-DcGs6kKN-DHJfK-tm.js";const H=[0,0];function B(t,i){return i!=null&&p(t,i.x,i.y,i.z)}function dt(t,i){if(!i.points?.length)return!1;for(const n of i.points)if(!S(t,n))return!1;return!0}function it(t,i){const{xmin:n,ymin:s,zmin:e,xmax:r,ymax:a,zmax:h}=i;return t.hasZ&&i.hasZ?p(t,n,s,e)&&p(t,n,a,e)&&p(t,r,a,e)&&p(t,r,s,e)&&p(t,n,s,h)&&p(t,n,a,h)&&p(t,r,a,h)&&p(t,r,s,h):p(t,n,s)&&p(t,n,a)&&p(t,r,a)&&p(t,r,s)}function S(t,i){return p(t,i[0],i[1])}function nt(t,i){return p(t,i[0],i[1],i[2])}function p(t,i,n,s){return i>=t.xmin&&i<=t.xmax&&n>=t.ymin&&n<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function Mt(t,i){return H[1]=i.y,H[0]=i.x,et(t,H)}function et(t,i){return F(t.rings,i)}function F(t,i){if(!t||t.length<1)return!1;if(st(t))return Y(!1,t,i);let n=!1;for(let s=0,e=t.length;s<e;s++)n=Y(n,t[s],i);return n}function st(t){return!Array.isArray(t[0][0])}function Y(t,i,n){const[s,e]=n;let r=t,a=0;for(let h=0,m=i.length;h<m;h++){a++,a===m&&(a=0);const[l,o]=i[h],[f,d]=i[a];(o<e&&d>=e||d<e&&o>=e)&&l+(e-o)/(d-o)*(f-l)<s&&(r=!r)}return r}function rt(t,i){return B(t,i)}function at(t,i){const n=t.hasZ&&i.hasZ;let s,e,r;if(t.xmin<=i.xmin){if(s=i.xmin,t.xmax<s)return!1}else if(s=t.xmin,i.xmax<s)return!1;if(t.ymin<=i.ymin){if(e=i.ymin,t.ymax<e)return!1}else if(e=t.ymin,i.ymax<e)return!1;if(n&&i.hasZ){if(t.zmin<=i.zmin){if(r=i.zmin,t.zmax<r)return!1}else if(r=t.zmin,i.zmax<r)return!1}return!0}function mt(t,i){const{points:n,hasZ:s}=i,e=s?nt:S;for(const r of n)if(e(t,r))return!0;return!1}const Z=[0,0],_=[0,0],G=[0,0],j=[0,0],ht=[Z,_,G,j],K=[[G,Z],[Z,_],[_,j],[j,G]];function ot(t,i){return lt(t,i.rings)}function lt(t,i){Z[0]=t.xmin,Z[1]=t.ymax,_[0]=t.xmax,_[1]=t.ymax,G[0]=t.xmin,G[1]=t.ymin,j[0]=t.xmax,j[1]=t.ymin;for(const n of ht)if(F(i,n))return!0;for(const n of i){if(!n.length)continue;let s=n[0];if(S(t,s))return!0;for(let e=1;e<n.length;e++){const r=n[e];if(S(t,r)||L(s,r,K))return!0;s=r}}return!1}function xt(t,i){Z[0]=t.xmin,Z[1]=t.ymax,_[0]=t.xmax,_[1]=t.ymax,G[0]=t.xmin,G[1]=t.ymin,j[0]=t.xmax,j[1]=t.ymin;const n=i.paths;for(const s of n){if(!n.length)continue;let e=s[0];if(S(t,e))return!0;for(let r=1;r<s.length;r++){const a=s[r];if(S(t,a)||L(e,a,K))return!0;e=a}}return!1}const u=[0,0];function gt(t){for(let i=0;i<t.length;i++){const n=t[i];for(let e=0;e<n.length-1;e++){const r=n[e],a=n[e+1];for(let h=i+1;h<t.length;h++)for(let m=0;m<t[h].length-1;m++){const l=t[h][m],o=t[h][m+1];if(D(r,a,l,o,u)&&!(u[0]===r[0]&&u[1]===r[1]||u[0]===l[0]&&u[1]===l[1]||u[0]===a[0]&&u[1]===a[1]||u[0]===o[0]&&u[1]===o[1]))return!0}}const s=n.length;if(!(s<=4))for(let e=0;e<s-3;e++){let r=s-1;e===0&&(r=s-2);const a=n[e],h=n[e+1];for(let m=e+2;m<r;m++){const l=n[m],o=n[m+1];if(D(a,h,l,o,u)&&!(u[0]===a[0]&&u[1]===a[1]||u[0]===l[0]&&u[1]===l[1]||u[0]===h[0]&&u[1]===h[1]||u[0]===o[0]&&u[1]===o[1]))return!0}}}return!1}function L(t,i,n){for(let s=0;s<n.length;s++)if(D(t,i,n[s][0],n[s][1]))return!0;return!1}function D(t,i,n,s,e){const[r,a]=t,[h,m]=i,[l,o]=n,[f,d]=s,M=f-l,g=r-l,w=h-r,b=d-o,I=a-o,N=m-a,R=b*w-M*N;if(R===0)return!1;const v=(M*I-b*g)/R,O=(w*I-N*g)/R;return v>=0&&v<=1&&O>=0&&O<=1&&(e&&(e[0]=r+v*(h-r),e[1]=a+v*(m-a)),!0)}function ut(t){switch(t){case"esriGeometryEnvelope":case"extent":return at;case"esriGeometryMultipoint":case"multipoint":return mt;case"esriGeometryPoint":case"point":return rt;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return ot;case"esriGeometryPolyline":case"polyline":return xt}}var z;function ct(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function P(t,i,n){return i==null?n:n==null?i:t(i,n)}let x=z=class extends V{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,i,n,s,e){return ct(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?E.WGS84:t.spatialReference,t):{xmin:t,ymin:i,xmax:n,ymax:s,spatialReference:e??E.WGS84}}static fromPoint(t){return new z({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new X({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const i=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-i.x,t.y-i.y,t.z-i.z):this.offset(t.x-i.x,t.y-i.y)}clone(){const t=new z;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const i=this.spatialReference,n=t.spatialReference;return i&&n&&!i.equals(n)&&T(i,n)&&(t=i.isWebMercator?k(t):$(t,!0)),t.type==="point"?B(this,t):t.type==="extent"&&it(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const i=this.spatialReference,n=t.spatialReference;return i&&n&&!i.equals(n)&&T(i,n)&&(t=i.isWebMercator?k(t):$(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const i=.5*(1-t),n=this.width*i,s=this.height*i;if(this.xmin+=n,this.ymin+=s,this.xmax-=n,this.ymax-=s,this.hasZ){const e=(this.zmax-this.zmin)*i;this.zmin+=e,this.zmax-=e}if(this.hasM){const e=(this.mmax-this.mmin)*i;this.mmin+=e,this.mmax-=e}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const i=this.spatialReference,n=t.spatialReference;return i&&n&&!tt(i,n)&&T(i,n)&&(t=i.isWebMercator?k(t):$(t,!0)),ut(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,i,n){return this.xmin+=t,this.ymin+=i,this.xmax+=t,this.ymax+=i,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=P(Math.min,this.zmin,t.zmin),this.zmax=P(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=P(Math.min,this.mmin,t.mmin),this.mmax=P(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=P(Math.max,this.zmin,t.zmin),this.zmax=P(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=P(Math.max,this.mmin,t.mmin),this.mmax=P(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=q(this.spatialReference)){if(!t||!this.spatialReference)return this;const i=this.spatialReference,n=this._getCM(t);if(n){const s=i.isWebMercator?$(n):n;this.xmin-=n.x,this.xmax-=n.x,i.isWebMercator||(s.x=J(s.x,t).x),this.spatialReference=new E(Q((i.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let i=null;const[n,s]=t.valid,e=this.xmin,r=this.xmax;return e>=n&&e<=s&&r>=n&&r<=s||(i=this.center),i}_normalize(t,i,n){const s=this.spatialReference;if(!s)return this;const e=n??q(s);if(e==null)return this;const r=this._getParts(e).map(m=>m.extent);if(r.length<2)return r[0]||this;if(r.length>2)return t?this._shiftCM(e):this.set({xmin:e.valid[0],xmax:e.valid[1]});if(t)return this._shiftCM(e);if(i)return r;let a=!0,h=!0;return r.forEach(m=>{m.hasZ||(a=!1),m.hasM||(h=!1)}),{rings:r.map(m=>{const l=[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]];if(a){const o=(m.zmax-m.zmin)/2;for(let f=0;f<l.length;f++)l[f].push(o)}if(h){const o=(m.mmax-m.mmin)/2;for(let f=0;f<l.length;f++)l[f].push(o)}return l}),hasZ:a,hasM:h,spatialReference:s}}_getParts(t){let i=this.cache._parts;if(!i){i=[];const{ymin:e,ymax:r,spatialReference:a}=this,h=this.width,m=this.xmin,l=this.xmax;let o;t=t||q(a);const[f,d]=t.valid;o=J(this.xmin,t);const M=o.x,g=o.frameId;o=J(this.xmax,t);const w=o.x,b=o.frameId,I=M===w&&h>0;if(h>2*d){const N=new z(m<l?M:w,e,d,r,a),R=new z(f,e,m<l?w:M,r,a),v=new z(0,e,d,r,a),O=new z(f,e,0,r,a),C=[],W=[];N.contains(v)&&C.push(g),N.contains(O)&&W.push(g),R.contains(v)&&C.push(b),R.contains(O)&&W.push(b);for(let A=g+1;A<b;A++)C.push(A),W.push(A);i.push({extent:N,frameIds:[g]},{extent:R,frameIds:[b]},{extent:v,frameIds:C},{extent:O,frameIds:W})}else M>w||I?i.push({extent:new z(M,e,d,r,a),frameIds:[g]},{extent:new z(f,e,w,r,a),frameIds:[b]}):i.push({extent:new z(M,e,w,r,a),frameIds:[g]});this.cache._parts=i}const n=this.hasZ,s=this.hasM;if(n||s){const e={};n&&(e.zmin=this.zmin,e.zmax=this.zmax),s&&(e.mmin=this.mmin,e.mmax=this.mmax);for(let r=0;r<i.length;r++)i[r].extent.set(e)}return i}};function J(t,i){const[n,s]=i.valid,e=2*s;let r,a=0;return t>s?(r=Math.ceil(Math.abs(t-s)/e),t-=r*e,a=r):t<n&&(r=Math.ceil(Math.abs(t-n)/e),t+=r*e,a=-r),{x:t,frameId:a}}c([y({readOnly:!0})],x.prototype,"cache",null),c([y({readOnly:!0})],x.prototype,"center",null),c([y({readOnly:!0})],x.prototype,"extent",null),c([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasM",null),c([y({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasZ",null),c([y({readOnly:!0})],x.prototype,"height",null),c([y({readOnly:!0})],x.prototype,"width",null),c([y({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],x.prototype,"xmin",void 0),c([y({type:Number,json:{write:!0}})],x.prototype,"ymin",void 0),c([y({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],x.prototype,"mmin",void 0),c([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],x.prototype,"zmin",void 0),c([y({type:Number,json:{write:!0}})],x.prototype,"xmax",void 0),c([y({type:Number,json:{write:!0}})],x.prototype,"ymax",void 0),c([y({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],x.prototype,"mmax",void 0),c([y({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],x.prototype,"zmax",void 0),x=z=c([U("esri.geometry.Extent")],x),x.prototype.toJSON.isDefaultToJSON=!0;const wt=Object.freeze(Object.defineProperty({__proto__:null,get default(){return x}},Symbol.toStringTag,{value:"Module"}));export{wt as E,D as G,ut as P,p as a,nt as e,Mt as f,S as i,at as o,gt as p,dt as r,B as t,ot as x,x as z};
