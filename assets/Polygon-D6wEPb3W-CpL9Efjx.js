import{ai as yt,v as dt,a2 as Q,ar as wt,Y as A,H as k,K as bt,G as gn}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{z as pn,p as xn,f as yn}from"./Extent-CgDMOSRD-CU1qE5Kr.js";import{c as dn,b as Y,aj as bn,a8 as In,f as vn}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{y as Et,L as Pn,P as E,w as It,Q as Rn,R as Nn}from"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";import{q as Ot,i as Tt,s as Sn}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./index-CTl7hdrJ.js";import"./reader-DcGs6kKN-DHJfK-tm.js";let ht=1e-6;function it(){return ht}function qn(t){ht=t}const At=Math.random,zn=Math.PI/180,_n=180/Math.PI;function wn(t){return t*zn}function En(t){return t*_n}function On(t,n){return Math.abs(t-n)<=ht*Math.max(1,Math.abs(t),Math.abs(n))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:At,equals:On,getEpsilon:it,setEpsilon:qn,toDegree:En,toRadian:wn},Symbol.toStringTag,{value:"Module"}));function Tn(t,n){return t[0]=n[0],t[1]=n[1],t}function An(t,n,s){return t[0]=n,t[1]=s,t}function Zn(t,n,s){return t[0]=n[0]+s[0],t[1]=n[1]+s[1],t}function Zt(t,n,s){return t[0]=n[0]-s[0],t[1]=n[1]-s[1],t}function $t(t,n,s){return t[0]=n[0]*s[0],t[1]=n[1]*s[1],t}function jt(t,n,s){return t[0]=n[0]/s[0],t[1]=n[1]/s[1],t}function $n(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function jn(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function Fn(t,n,s){return t[0]=Math.min(n[0],s[0]),t[1]=Math.min(n[1],s[1]),t}function Vn(t,n,s){return t[0]=Math.max(n[0],s[0]),t[1]=Math.max(n[1],s[1]),t}function Yn(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function Cn(t,n,s){return t[0]=n[0]*s,t[1]=n[1]*s,t}function Gn(t,n,s,a){return t[0]=n[0]+s[0]*a,t[1]=n[1]+s[1]*a,t}function Ft(t,n){const s=n[0]-t[0],a=n[1]-t[1];return Math.sqrt(s*s+a*a)}function ft(t,n){const s=n[0]-t[0],a=n[1]-t[1];return s*s+a*a}function Vt(t){const n=t[0],s=t[1];return Math.sqrt(n*n+s*s)}function Yt(t){const n=t[0],s=t[1];return n*n+s*s}function kn(t,n){return t[0]=-n[0],t[1]=-n[1],t}function Ln(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function Dn(t,n){const s=n[0],a=n[1];let i=s*s+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=n[0]*i,t[1]=n[1]*i),t}function Jn(t,n){return t[0]*n[0]+t[1]*n[1]}function Hn(t,n,s){const a=n[0]*s[1]-n[1]*s[0];return t[0]=t[1]=0,t[2]=a,t}function Kn(t,n,s,a){const i=n[0],r=n[1];return t[0]=i+a*(s[0]-i),t[1]=r+a*(s[1]-r),t}function Bn(t,n=1){const s=2*At()*Math.PI;return t[0]=Math.cos(s)*n,t[1]=Math.sin(s)*n,t}function Qn(t,n,s){const a=n[0],i=n[1];return t[0]=s[0]*a+s[2]*i,t[1]=s[1]*a+s[3]*i,t}function Wn(t,n,s){const a=n[0],i=n[1];return t[0]=s[0]*a+s[2]*i+s[4],t[1]=s[1]*a+s[3]*i+s[5],t}function U(t,n,s){const a=n[0],i=n[1];return t[0]=s[0]*a+s[3]*i+s[6],t[1]=s[1]*a+s[4]*i+s[7],t}function Un(t,n,s){const a=n[0],i=n[1];return t[0]=s[0]*a+s[4]*i+s[12],t[1]=s[1]*a+s[5]*i+s[13],t}function Xn(t,n,s,a){const i=n[0]-s[0],r=n[1]-s[1],o=Math.sin(a),u=Math.cos(a);return t[0]=i*u-r*o+s[0],t[1]=i*o+r*u+s[1],t}function ts(t,n){const s=t[0],a=t[1],i=n[0],r=n[1];let o=s*s+a*a;o>0&&(o=1/Math.sqrt(o));let u=i*i+r*r;u>0&&(u=1/Math.sqrt(u));const c=(s*i+a*r)*o*u;return c>1?0:c<-1?Math.PI:Math.acos(c)}function ns(t){return"vec2("+t[0]+", "+t[1]+")"}function ss(t,n){return t[0]===n[0]&&t[1]===n[1]}function as(t,n){const s=t[0],a=t[1],i=n[0],r=n[1],o=it();return Math.abs(s-i)<=o*Math.max(1,Math.abs(s),Math.abs(i))&&Math.abs(a-r)<=o*Math.max(1,Math.abs(a),Math.abs(r))}function is(t,n,s,a,i){let r=n[0]-s[0],o=n[1]-s[1];const u=(a[0]*r+a[1]*o)*(i-1);return r=a[0]*u,o=a[1]*u,t[0]=n[0]+r,t[1]=n[1]+o,t}const os=Vt,rs=Zt,us=$t,cs=jt,ls=Ft,hs=ft,fs=Yt;Object.freeze(Object.defineProperty({__proto__:null,add:Zn,angle:ts,ceil:$n,copy:Tn,cross:Hn,dist:ls,distance:Ft,div:cs,divide:jt,dot:Jn,equals:as,exactEquals:ss,floor:jn,inverse:Ln,len:os,length:Vt,lerp:Kn,max:Vn,min:Fn,mul:us,multiply:$t,negate:kn,normalize:Dn,projectAndScale:is,random:Bn,rotate:Xn,round:Yn,scale:Cn,scaleAndAdd:Gn,set:An,sqrDist:hs,sqrLen:fs,squaredDistance:ft,squaredLength:Yt,str:ns,sub:rs,subtract:Zt,transformMat2:Qn,transformMat2d:Wn,transformMat3:U,transformMat4:Un},Symbol.toStringTag,{value:"Module"}));function Z(t,n,s,a){return t[0]=n[0]*(1-a)+s[0]*a,t[1]=n[1]*(1-a)+s[1]*a,t}function z(t,n){return ft(t,n)}function ms(t,n,s,a,i){const[r,o]=n,[u,c]=s,[l,h]=a,[f,m]=i,e=(r-u)*(h-m)-(o-c)*(l-f);if(e===0)return null;const M=(r*c-o*u)*(l-f)-(r-u)*(l*m-h*f),g=(r*c-o*u)*(h-m)-(o-c)*(l*m-h*f);return t[0]=M/e,t[1]=g/e,t}const T=2*Math.PI;function C(t,n){const s=Math.atan2(t,n);return s<0?s+T:s}function Ct(t){return Math.abs(t)%T}function vt(t){const n=Ct(t);return n<Math.PI?n:T-n}function ot(t,n){return{min:Math.min(t,n),max:Math.max(t,n)}}function Gt(t,n,s,a){if(Tt(Ct(t-n),0))return s?[t,t]:[t,a?t-T:t+T];const[i,r]=a?[t-T,t]:[t,t+T];return[t,B({min:i,max:r},n)]}function B({min:t,max:n},s){let a;return a=n-s,a>=T?(a-=a%T,s+a):(a=s-t,a>=T?(a-=a%T,s-a):s)}function es(t,n){const s=B(t,n);return s>t.min&&s<t.max?s:vt(s-t.min)<vt(s-t.max)?t.min:t.max}function kt(t,n,s,a=10){return n.map(i=>{let r=i;for(let o=0;o<a;o++){const[u,c,l,h,f,m]=s(r),e=t[0]-u,M=t[1]-c,g=-l,p=-h;r+=-(2*e*g+2*M*p)/(2*g*g+2*e*-f+2*p*p+2*M*-m||1e-6)}return r})}const Ms=[0,0];function Lt(t){const n=1-t,s=n*n,a=t*t;return[s*n,3*t*s,3*a*n,a*t]}function lt(t,n,s,a,i){const[r,o,u,c]=Lt(i);return[t[0]*r+n[0]*o+s[0]*u+a[0]*c,t[1]*r+n[1]*o+s[1]*u+a[1]*c]}function Pt(t,n,s,a,i){const[r,o,u,c]=Lt(i);return t*r+n*o+s*u+a*c}function Oa(t,n,s){const a=t,[i,r,o]=n.b;return lt(a,r,o,i,s)}function gs(t,n,s){const a=t,[i,r,o]=n.b,u=Z([0,0],a,r,s),c=Z(Ms,r,o,s),l=Z([0,0],o,i,s),h=Z([0,0],u,c,s),f=Z([0,0],c,l,s);return[{b:[Z([],h,f,s),u,h]},{b:[[...i],f,l]}]}function Ta(t,n,s){const a=t,[i,r,o]=n.b,u=kt(s,[.1,.5,.9],f=>{const m=1-f,[e,M]=lt(a,r,o,i,f);return[e,M,3*m*m*(r[0]-a[0])+6*m*f*(o[0]-r[0])+3*f*f*(i[0]-o[0]),3*m*m*(r[1]-a[1])+6*m*f*(o[1]-r[1])+3*f*f*(i[1]-o[1]),6*m*(o[0]-2*r[0]+a[0])+6*f*(i[0]-2*o[0]+r[0]),6*m*(o[1]-2*r[1]+a[1])+6*f*(i[1]-2*o[1]+r[1])]}).map(f=>Math.min(1,Math.max(0,f)));u.push(0,1);let c=1/0;const l=u.map(f=>{const m=lt(a,r,o,i,f),[e,M]=m,g=s[0]-e,p=s[1]-M,x=Math.sqrt(g*g+p*p);return c=Math.min(x,c),{t:f,curvePoint:m,distance:x}}),h=[];for(const f of l){const{t:m,distance:e}=f;Ot(e,c)&&!h.some(({t:M})=>Tt(M,m))&&h.push(f)}return h}function ps(t,n,s){const a=n,[i,r,o]=s.b;if(E(t,a),E(t,i),It(t,r[0],r[1])&&It(t,o[0],o[1]))return t;for(const u of Rt(a[0],r[0],o[0],i[0]))u>0&&u<1&&Rn(t,Pt(a[0],r[0],o[0],i[0],u));for(const u of Rt(a[1],r[1],o[1],i[1]))u>0&&u<1&&Nn(t,Pt(a[1],r[1],o[1],i[1],u));return t}function Rt(t,n,s,a){const i=3*(3*(n-s)-t+a),r=6*(t-2*n+s),o=3*(n-t);if(i===0)return r!==0?[-o/r]:[];const u=Math.sqrt(r*r-4*i*o);return[(-r+u)/(2*i),(-r-u)/(2*i)]}function Aa(t,n,s){let a=0,i=[n];for(let r=0;r<16;r++){let o=t;const u=[];for(const l of i)u.push(...gs(o,l,.5)),o=l.b[0];i=u,o=t,a=0;let c=0;for(const l of i){const[h,f,m]=l.b,e=Math.sqrt(z(o,h));a+=(e+(Math.sqrt(z(o,f))+Math.sqrt(z(f,m))+Math.sqrt(z(m,h))))/2,c+=e,o=h}if(a-c<s)return a}return a}function xs(t,n,s){const[a,i]=t,[r,o]=n,[u,c]=s,[l,h]=[r-a,o-i];let f=l*(u-a)+h*(c-i);f/=l**2+h**2,f=Sn(f,0,1);const m=Z([0,0],t,n,f);return{t:f,curvePoint:m,distance:Math.sqrt(z(m,s))}}let Dt=class{constructor(t,n,s,a,i,r){this.cx=t,this.cy=n,this.radius=s,this.thetaStart=a,this.thetaEnd=i,this.isInvalid=r}get startPoint(){const{cx:t,cy:n,radius:s,thetaStart:a}=this;return[t+s*Math.cos(a),n+s*Math.sin(a)]}get endPoint(){const{cx:t,cy:n,radius:s,thetaEnd:a}=this;return[t+s*Math.cos(a),n+s*Math.sin(a)]}};function st(t,n){const{cx:s,cy:a,radius:i}=t;return[s+i*Math.cos(n),a+i*Math.sin(n)]}function X(t,n){if(t.isInvalid)return Z([0,0],t.startPoint,t.endPoint,n);const{thetaStart:s,thetaEnd:a}=t;return st(t,s*(1-n)+a*n)}function Za(t,n){if(t.isInvalid)return xs(t.startPoint,t.endPoint,n);const{cx:s,cy:a,thetaStart:i,thetaEnd:r}=t,[o,u]=n,c=es(ot(i,r),Math.atan2(u-a,o-s)),l=st(t,c);return{t:(c-i)/(r-i),curvePoint:l,distance:Math.sqrt(z(n,l))}}function Nt(t,n){if(n.isInvalid)return E(t,n.startPoint),E(t,n.endPoint),t;const{cx:s,cy:a,radius:i,thetaStart:r,thetaEnd:o}=n;E(t,st(n,r)),E(t,st(n,o));const u=ot(r,o),c=Math.PI/2;let l=0;for(const h of[[s+i,a],[s,a+i],[s-i,a],[s,a-i]])l=B(u,l),l>u.min&&l<u.max&&E(t,h),l+=c;return t}function $a(t){if(t.isInvalid)return 2*t.radius;const{radius:n,thetaStart:s,thetaEnd:a}=t;return n*Math.abs(a-s)}function ys(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function ds(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function H(t,n,s,a,i,r,o,u,c,l){return t[0]=n,t[1]=s,t[2]=a,t[3]=i,t[4]=r,t[5]=o,t[6]=u,t[7]=c,t[8]=l,t}function bs(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Jt(t,n){if(t===n){const s=n[1],a=n[2],i=n[5];t[1]=n[3],t[2]=n[6],t[3]=s,t[5]=n[7],t[6]=a,t[7]=i}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function Ht(t,n){const s=n[0],a=n[1],i=n[2],r=n[3],o=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=h*o-u*l,m=-h*r+u*c,e=l*r-o*c;let M=s*f+a*m+i*e;return M?(M=1/M,t[0]=f*M,t[1]=(-h*a+i*l)*M,t[2]=(u*a-i*o)*M,t[3]=m*M,t[4]=(h*s-i*c)*M,t[5]=(-u*s+i*r)*M,t[6]=e*M,t[7]=(-l*s+a*c)*M,t[8]=(o*s-a*r)*M,t):null}function Is(t,n){const s=n[0],a=n[1],i=n[2],r=n[3],o=n[4],u=n[5],c=n[6],l=n[7],h=n[8];return t[0]=o*h-u*l,t[1]=i*l-a*h,t[2]=a*u-i*o,t[3]=u*c-r*h,t[4]=s*h-i*c,t[5]=i*r-s*u,t[6]=r*l-o*c,t[7]=a*c-s*l,t[8]=s*o-a*r,t}function tt(t){const n=t[0],s=t[1],a=t[2],i=t[3],r=t[4],o=t[5],u=t[6],c=t[7],l=t[8];return n*(l*r-o*c)+s*(-l*i+o*u)+a*(c*i-r*u)}function at(t,n,s){const a=n[0],i=n[1],r=n[2],o=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],m=s[0],e=s[1],M=s[2],g=s[3],p=s[4],x=s[5],y=s[6],b=s[7],d=s[8];return t[0]=m*a+e*o+M*l,t[1]=m*i+e*u+M*h,t[2]=m*r+e*c+M*f,t[3]=g*a+p*o+x*l,t[4]=g*i+p*u+x*h,t[5]=g*r+p*c+x*f,t[6]=y*a+b*o+d*l,t[7]=y*i+b*u+d*h,t[8]=y*r+b*c+d*f,t}function vs(t,n,s){const a=n[0],i=n[1],r=n[2],o=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],m=s[0],e=s[1];return t[0]=a,t[1]=i,t[2]=r,t[3]=o,t[4]=u,t[5]=c,t[6]=m*a+e*o+l,t[7]=m*i+e*u+h,t[8]=m*r+e*c+f,t}function Ps(t,n,s){const a=n[0],i=n[1],r=n[2],o=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],m=Math.sin(s),e=Math.cos(s);return t[0]=e*a+m*o,t[1]=e*i+m*u,t[2]=e*r+m*c,t[3]=e*o-m*a,t[4]=e*u-m*i,t[5]=e*c-m*r,t[6]=l,t[7]=h,t[8]=f,t}function Rs(t,n,s){const a=s[0],i=s[1],r=s[2];return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t[6]=r*n[6],t[7]=r*n[7],t[8]=r*n[8],t}function Ns(t,n,s){const a=s[0],i=s[1];return t[0]=a*n[0],t[1]=a*n[1],t[2]=a*n[2],t[3]=i*n[3],t[4]=i*n[4],t[5]=i*n[5],t}function Ss(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function qs(t,n){const s=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=s,t[2]=0,t[3]=-s,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function zs(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function ws(t,n){const s=n[0],a=n[1],i=n[2],r=n[3],o=s+s,u=a+a,c=i+i,l=s*o,h=a*o,f=a*u,m=i*o,e=i*u,M=i*c,g=r*o,p=r*u,x=r*c;return t[0]=1-f-M,t[3]=h-x,t[6]=m+p,t[1]=h+x,t[4]=1-l-M,t[7]=e-g,t[2]=m-p,t[5]=e+g,t[8]=1-l-f,t}function Es(t,n){const s=n[0],a=n[1],i=n[2],r=n[4],o=n[5],u=n[6],c=n[8],l=n[9],h=n[10],f=h*o-u*l,m=-h*r+u*c,e=l*r-o*c,M=s*f+a*m+i*e;if(!M)return null;const g=1/M;return t[0]=f*g,t[1]=(-h*a+i*l)*g,t[2]=(u*a-i*o)*g,t[3]=m*g,t[4]=(h*s-i*c)*g,t[5]=(-u*s+i*r)*g,t[6]=e*g,t[7]=(-l*s+a*c)*g,t[8]=(o*s-a*r)*g,t}function Os(t,n){const s=n[0],a=n[1],i=n[2],r=n[3],o=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],m=n[10],e=n[11],M=n[12],g=n[13],p=n[14],x=n[15],y=s*u-a*o,b=s*c-i*o,d=s*l-r*o,I=a*c-i*u,v=a*l-r*u,R=i*l-r*c,P=h*g-f*M,N=h*p-m*M,S=h*x-e*M,O=f*p-m*g,q=f*x-e*g,V=m*x-e*p;let _=y*V-b*q+d*O+I*S-v*N+R*P;return _?(_=1/_,t[0]=(u*V-c*q+l*O)*_,t[1]=(c*S-o*V-l*N)*_,t[2]=(o*q-u*S+l*P)*_,t[3]=(i*q-a*V-r*O)*_,t[4]=(s*V-i*S+r*N)*_,t[5]=(a*S-s*q-r*P)*_,t[6]=(g*R-p*v+x*I)*_,t[7]=(p*d-M*R-x*b)*_,t[8]=(M*v-g*d+x*y)*_,t):null}function Ts(t,n,s){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/s,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function As(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Zs(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function $s(t,n,s){return t[0]=n[0]+s[0],t[1]=n[1]+s[1],t[2]=n[2]+s[2],t[3]=n[3]+s[3],t[4]=n[4]+s[4],t[5]=n[5]+s[5],t[6]=n[6]+s[6],t[7]=n[7]+s[7],t[8]=n[8]+s[8],t}function Kt(t,n,s){return t[0]=n[0]-s[0],t[1]=n[1]-s[1],t[2]=n[2]-s[2],t[3]=n[3]-s[3],t[4]=n[4]-s[4],t[5]=n[5]-s[5],t[6]=n[6]-s[6],t[7]=n[7]-s[7],t[8]=n[8]-s[8],t}function js(t,n,s){return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=n[3]*s,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=n[7]*s,t[8]=n[8]*s,t}function Fs(t,n,s,a){return t[0]=n[0]+s[0]*a,t[1]=n[1]+s[1]*a,t[2]=n[2]+s[2]*a,t[3]=n[3]+s[3]*a,t[4]=n[4]+s[4]*a,t[5]=n[5]+s[5]*a,t[6]=n[6]+s[6]*a,t[7]=n[7]+s[7]*a,t[8]=n[8]+s[8]*a,t}function Vs(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function Ys(t,n){const s=t[0],a=t[1],i=t[2],r=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=n[0],m=n[1],e=n[2],M=n[3],g=n[4],p=n[5],x=n[6],y=n[7],b=n[8],d=it();return Math.abs(s-f)<=d*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-m)<=d*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-e)<=d*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(r-M)<=d*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-g)<=d*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-p)<=d*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-x)<=d*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-y)<=d*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(h-b)<=d*Math.max(1,Math.abs(h),Math.abs(b))}function Cs(t){const n=it(),s=t[0],a=t[1],i=t[2],r=t[3],o=t[4],u=t[5],c=t[6],l=t[7],h=t[8];return Math.abs(1-(s*s+r*r+c*c))<=n&&Math.abs(1-(a*a+o*o+l*l))<=n&&Math.abs(1-(i*i+u*u+h*h))<=n}const Gs=at,ks=Kt;Object.freeze(Object.defineProperty({__proto__:null,add:$s,adjoint:Is,copy:ds,determinant:tt,equals:Ys,exactEquals:Vs,frob:Zs,fromMat2d:_s,fromMat4:ys,fromQuat:ws,fromRotation:qs,fromScaling:zs,fromTranslation:Ss,identity:bs,invert:Ht,isOrthoNormal:Cs,mul:Gs,multiply:at,multiplyScalar:js,multiplyScalarAndAdd:Fs,normalFromMat4:Os,normalFromMat4Legacy:Es,projection:Ts,rotate:Ps,scale:Rs,scaleByVec2:Ns,set:H,str:As,sub:ks,subtract:Kt,translate:vs,transpose:Jt},Symbol.toStringTag,{value:"Module"}));function G(){return[1,0,0,0,1,0,0,0,1]}function Ls(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function Ds(t,n,s,a,i,r,o,u,c){return[t,n,s,a,i,r,o,u,c]}const Js=G();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Js,clone:Ls,create:G,fromValues:Ds},Symbol.toStringTag,{value:"Module"}));const L=G();function Hs(t,n,s){const[a,i]=t,[r,o]=n,[u,c]=s;H(L,a,r,u,i,o,c,1,1,1);const l=tt(L),h=4*l/(z(t,n)+z(n,s)+z(s,t));if(!isFinite(h)||Math.abs(h)<1e-8)return null;const f=a**2+i**2,m=r**2+o**2,e=u**2+c**2;H(L,f,m,e,i,o,c,1,1,1);const M=tt(L);return H(L,f,m,e,a,r,u,1,1,1),[M/l*.5,tt(L)/l*-.5]}function Bt(t,n){const[s,a]=n.c,i=Hs(t,a,s),r=i==null,o=i??Z([],t,s,.5),[u,c]=t,[l,h]=a,[f,m]=s,[e,M]=o,g=u-e,p=c-M,x=Math.sqrt(g*g+p*p),y=C(c-M,u-e),b=C(h-M,l-e);let d=C(m-M,f-e);return(b-y)*(d-b)<0&&(d+=2*Math.sign(y-d)*Math.PI),new Dt(e,M,x,y,d,r)}function ja(t,n,s){const a=X(t,s/2),i=X(t,s),r=X(t,(s+1)/2);return[{c:[i,a]},{c:[[...n.c[0]],r]}]}function Fa(t,n){const[s]=n.c,{cx:a,cy:i,thetaStart:r,thetaEnd:o,radius:u,isInvalid:c}=Bt(t,n);return{a:[s,[a,i],Math.abs(o-r)<Math.PI?1:0,r>o?1:0,c?r:0,u,c?0:1]}}function Va(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function mt(t){return"b"in t}function et(t){return"c"in t}function rt(t){return Array.isArray(t)}function Ya(t){return"a"in t}function Qt(t){return"a"in t&&t.a.length===4}function Ks(t){return"a"in t&&t.a.length===7}function ct(t){return rt(t)?t:mt(t)?t.b[0]:et(t)?t.c[0]:t.a[0]}function Bs(t){if(mt(t)){const[n,s,a]=t.b;return{b:[[...n],[...s],[...a]]}}if(et(t)){const[n,s]=t.c;return{c:[[...n],[...s]]}}if(rt(t))return[...t];if(Qt(t)){const[n,s,a,i]=t.a;return{a:[[...n],[...s],a,i]}}if(Ks(t)){const[n,s,a,i,r,o,u]=t.a;return{a:[[...n],[...s],a,i,r,o,u]}}return t}function Qs(t,n){const[s,a,i,r]=n.a,[o,u]=t,[c,l]=s,[h,f]=a,m=o-h,e=u-f,M=Math.sqrt(m*m+e*e),g=c-h,p=l-f,x=Math.sqrt(g*g+p*p),y=M===0||x===0||!Ot(M,x),b=M,[d,I]=Gt(C(u-f,o-h),Math.atan2(l-f,c-h),i,r);return new Dt(h,f,b,d,I,y)}function Ca(t,n,s){const{cx:a,cy:i,thetaStart:r,thetaEnd:o}=t,[u,c,l,h]=n.a,f=r*(1-s)+o*s;return[{a:[X(t,s),[a,i],Math.abs(f-r)<Math.PI?1:0,h]},{a:[[...u],[a,i],Math.abs(o-f)<Math.PI?1:0,h]}]}class Ws{constructor(n,s,a,i,r,o,u,c,l){this.cx=n,this.cy=s,this.a=a,this.b=i,this.cosR=r,this.sinR=o,this.u1=u,this.u2=c,this.isInvalid=l}}function Mt(t,n){const[s,a,i,r,o,u,c]=n.a,[l,h]=t,[f,m]=s,[e,M]=a,g=u*c,p=Math.cos(o),x=Math.sin(o),[y,b]=Gt(C(1/g*(h-M)*p-1/g*(l-e)*x,1/u*(h-M)*x+1/u*(l-e)*p),Math.atan2(1/g*(m-M)*p-1/g*(f-e)*x,1/u*(m-M)*x+1/u*(f-e)*p),i,r);return new Ws(e,M,u,g,p,x,y,b,u===0||g===0)}function K(t,n){const{a:s,b:a,cosR:i,sinR:r,cx:o,cy:u}=t,c=Math.cos(n),l=Math.sin(n);return[s*c*i-a*l*r+o,s*c*r+a*l*i+u]}function D(t,n){const{u1:s,u2:a}=t;return K(t,s*(1-n)+a*n)}function Ga(t,n,s){if(s<0||s>1)return[];if(s===0||s===1)return[Bs(n)];const[a,[i,r],o,u,c,l,h]=n.a,{u1:f,u2:m}=t,e=f*(1-s)+m*s;return[{a:[[...D(t,s)],[i,r],Math.abs(e-f)<Math.PI?1:0,u,c,l,h]},{a:[[...a],[i,r],Math.abs(m-e)<Math.PI?1:0,u,c,l,h]}]}function ka(t,n){const{a:s,b:a,cosR:i,sinR:r,u1:o,u2:u}=t,c=Math.PI/6,l=kt(n,[1*c,2*c,4*c,5*c,7*c,8*c,10*c,11*c],g=>{const p=Math.cos(g),x=Math.sin(g),[y,b]=K(t,g);return[y,b,-s*i*x-a*r*p,-s*r*x+a*i*p,-s*i*p+a*r*x,-s*r*p-a*i*x]}),h=ot(o,u),f=new Set(l.map(g=>B(h,g)).filter(g=>g>h.min&&g<h.max));f.add(o),f.add(u);let m,e,M=1/0;for(const g of f){const p=K(t,g),[x,y]=p,b=n[0]-x,d=n[1]-y,I=b*b+d*d;I<M&&(m=(g-o)/(u-o),e=p,M=I)}return{t:m,curvePoint:e,distance:Math.sqrt(M)}}function Us(t,n,s){const a=Mt(n,s),{a:i,b:r,u1:o,u2:u,cosR:c,sinR:l,isInvalid:h}=a,f=s.a[0];if(E(t,n),E(t,f),h)return t;const m=Math.atan2(-r*l,i*c),e=m+Math.PI,M=Math.atan2(r*c,i*l),g=M+Math.PI,p=ot(o,u);for(const x of[m,e,M,g].map(y=>B(p,y)))x>p.min&&x<p.max&&E(t,K(a,x));return t}function La(t,n,s){const[a,i,r,o,u,c,l]=n.a,h=Mt(t,n),{u1:f,u2:m,isInvalid:e}=h,M=m-f;if(e)return Math.sqrt(z(t,a));const g=14,p=[0,0];let x=0,y=[D(h,0),D(h,.25),D(h,.5),D(h,.75),D(h,1)];for(let b=0;b<g;b++){const d=y.length-1,I=M/(2*d),v=[];for(let P=0;P<d;P++)v.push(y[P]),v.push(K(h,f+(2*P+1)*I));v.push(y[y.length-1]),y=v,x=0;let R=0;for(let P=1;P<y.length;P++){const N=y[P-1],S=y[P];if(x+=Math.sqrt(z(N,S)),P>1){const O=y[P-2],q=ms(p,O,N,i,S);R+=q?Math.sqrt(z(N,q)):Math.abs(S[0]-N[0])+Math.abs(S[1]-N[1])}else R+=x}if(R-x<s)return x}return x}const St=G(),W=G(),qt=G(),$=G();function Da(t,n,s){const[a,i,r,o,u,c,l]=n.a,h=Mt(t,n),{cosR:f,sinR:m,a:e,b:M,cx:g,cy:p}=h,x=U([0,0],a,s),y=U([0,0],i,s),b=s[0]*s[4]<0?1-o:o;{const d=e*e*m*m+M*M*f*f,I=2*(M*M-e*e)*m*f,v=e*e*f*f+M*M*m*m,R=-2*d*g-I*p,P=-I*g-2*v*p;H(St,d,I/2,R/2,I/2,v,P/2,R/2,P/2,d*g*g+I*g*p+v*p*p-e*e*M*M)}if(Ht(W,s),W==null){const d=U([0,0],t,s);return{a:[x,y,r,o,C(x[1],x[0]),Math.sqrt(z(x,d))/2,0]}}Jt(qt,W),at($,at($,qt,St),W);{const d=$[0],I=2*$[1],v=$[4],R=2*$[2],P=2*$[5],N=I*I-4*d*v,S=2*(d*P*P+v*R*R-I*R*P+N*$[8]),O=Math.sqrt((d-v)**2+I*I),q=-Math.sqrt(S*(d+v+O))/N,V=-Math.sqrt(S*(d+v-O))/N;return{a:[x,y,r,b,.5*C(-I,v-d),q,V/q]}}}function Xs(t,n,s){if(rt(s))return E(t,n),E(t,s),t;if(mt(s))return ps(t,n,s);if(et(s)){const a=Bt(n,s);return Nt(t,a)}if(Qt(s)){const a=Qs(n,s);return Nt(t,a)}return Us(t,n,s)}function Wt(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Ut(t){return t.points!==void 0}function Xt(t){return t.x!==void 0&&t.y!==void 0}function tn(t){return t.paths!==void 0}function nn(t){return t.rings!==void 0}function sn(t){function n(s,a){return s==null?a:a==null?s:t(s,a)}return n}const j=sn(Math.min),F=sn(Math.max);function Ja(t,n){return tn(n)?J(t,n.curvePaths??n.paths,!1,!1)??t:nn(n)?J(t,n.curveRings??n.rings,!1,!1)??t:Ut(n)?gt(t,n.points,!1,!1,!1,!1):Wt(n)?an(t,n):(Xt(n)&&(t[0]=n.x,t[1]=n.y,t[2]=n.x,t[3]=n.y),t)}function Ha(t){let n,s,a,i;for(t.reset(),n=a=1/0,s=i=-1/0;t.nextPath();){const r=ta(t);n=Math.min(r[0],n),a=Math.min(r[1],a),s=Math.max(r[2],s),i=Math.max(r[3],i)}return Et([n,a,s,i])}function ta(t){let n,s,a,i;for(n=a=1/0,s=i=-1/0;t.nextPoint();)n=Math.min(t.x,n),a=Math.min(t.y,a),s=Math.max(t.x,s),i=Math.max(t.y,i);return Et([n,a,s,i])}function Ka(t,n){return tn(n)?J(t,n.curvePaths??n.paths,!0,!1)??t:nn(n)?J(t,n.curveRings??n.rings,!0,!1)??t:Ut(n)?gt(t,n.points,!0,!1,!0,!1):Wt(n)?an(t,n,!0,!1,!0,!1):(Xt(n)&&(t[0]=n.x,t[1]=n.y,t[2]=n.z,t[3]=n.x,t[4]=n.y,t[5]=n.z),t)}function J(t,n,s,a){const i=s?3:2;if(!n.length||!n[0].length)return null;let r,o,u,c,[l,h]=ct(n[0][0]),f=l,m=h;for(let e=0;e<n.length;e++){const M=n[e];for(let g=0;g<M.length;g++){const p=ct(M[g]),[x,y]=p;if(l=j(l,x),h=j(h,y),f=F(f,x),m=F(m,y),s&&p.length>2){const v=p[2];r=j(r,v),o=F(o,v)}if(a&&p.length>i){const v=p[i];u=j(r,v),c=F(o,v)}const b=M[g];if(rt(b)||g<1)continue;const d=ct(M[g-1]),I=Pn(l,h,f,m);[l,h,f,m]=Xs(I,d,b)}}return s?a?(t[0]=l,t[1]=h,t[2]=r,t[3]=u,t[4]=f,t[5]=m,t[6]=o,t[7]=c,t.length=8,t):(t[0]=l,t[1]=h,t[2]=r,t[3]=f,t[4]=m,t[5]=o,t.length=6,t):a?(t[0]=l,t[1]=h,t[2]=u,t[3]=f,t[4]=m,t[5]=c,t.length=6,t):(t[0]=l,t[1]=h,t[2]=f,t[3]=m,t.length=4,t)}function an(t,n,s,a,i,r){const o=n.xmin,u=n.xmax,c=n.ymin,l=n.ymax;let h=n.zmin,f=n.zmax,m=n.mmin,e=n.mmax;return i?(h=h||0,f=f||0,r?(m=m||0,e=e||0,t[0]=o,t[1]=c,t[2]=h,t[3]=m,t[4]=u,t[5]=l,t[6]=f,t[7]=e,t):(t[0]=o,t[1]=c,t[2]=h,t[3]=u,t[4]=l,t[5]=f,t)):r?(m=m||0,e=e||0,t[0]=o,t[1]=c,t[2]=m,t[3]=u,t[4]=l,t[5]=e,t):(t[0]=o,t[1]=c,t[2]=u,t[3]=l,t)}function gt(t,n,s,a,i,r){const o=s?3:2,u=a&&r,c=s&&i;if(!n.length||!n[0].length)return null;let l,h,f,m,[e,M]=n[0],[g,p]=n[0];for(let x=0;x<n.length;x++){const y=n[x],[b,d]=y;if(e=j(e,b),M=j(M,d),g=F(g,b),p=F(p,d),c&&y.length>2){const I=y[2];l=j(l,I),h=F(h,I)}if(u&&y.length>o){const I=y[o];f=j(l,I),m=F(h,I)}}return i?(l=l||0,h=h||0,r?(f=f||0,m=m||0,t[0]=e,t[1]=M,t[2]=l,t[3]=f,t[4]=g,t[5]=p,t[6]=h,t[7]=m,t):(t[0]=e,t[1]=M,t[2]=l,t[3]=g,t[4]=p,t[5]=h,t)):r?(f=f||0,m=m||0,t[0]=e,t[1]=M,t[2]=f,t[3]=g,t[4]=p,t[5]=m,t):(t[0]=e,t[1]=M,t[2]=g,t[3]=p,t)}function na(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function sa(t){return t.points!==void 0}function aa(t){return t.x!==void 0&&t.y!==void 0}function ia(t){return t.paths!==void 0}function oa(t){return t.rings!==void 0}const pt=[];function on(t,n,s,a){return{xmin:t,ymin:n,xmax:s,ymax:a}}function rn(t,n,s,a,i,r){return{xmin:t,ymin:n,zmin:s,xmax:a,ymax:i,zmax:r}}function un(t,n,s,a,i,r){return{xmin:t,ymin:n,mmin:s,xmax:a,ymax:i,mmax:r}}function cn(t,n,s,a,i,r,o,u){return{xmin:t,ymin:n,zmin:s,mmin:a,xmax:i,ymax:r,zmax:o,mmax:u}}function xt(t,n=!1,s=!1){return n?s?cn(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):rn(t[0],t[1],t[2],t[3],t[4],t[5]):s?un(t[0],t[1],t[2],t[3],t[4],t[5]):on(t[0],t[1],t[2],t[3])}function Ba(t){return t?na(t)?t:aa(t)?ua(t):oa(t)?ln(t):ia(t)?ca(t):sa(t)?ra(t):null:null}function ra(t){const{hasZ:n,hasM:s,points:a}=t,i=gt(pt,a,n??!1,s??!1,n??!1,s??!1);return i?xt(i,n,s):null}function ua(t){const{x:n,y:s,z:a,m:i}=t,r=i!=null;return a!=null?r?cn(n,s,a,i,n,s,a,i):rn(n,s,a,n,s,a):r?un(n,s,i,n,s,i):on(n,s,n,s)}function ln(t){const{hasZ:n,hasM:s,rings:a,curveRings:i}=t,r=J(pt,i??a,n??!1,s??!1);return r?xt(r,n,s):null}function ca(t){const{hasZ:n,hasM:s,paths:a,curvePaths:i}=t,r=J(pt,i??a,n??!1,s??!1);return r?xt(r,n,s):null}function zt(t,n,s=!1){let{hasM:a,hasZ:i}=t;Array.isArray(n)?n.length!==4||a||i?n.length===3&&s&&!a?(i=!0,a=!1):n.length===3&&a&&i&&(a=!1,i=!1):(a=!0,i=!0):(i=!i&&n.hasZ&&(!a||n.hasM),a=!a&&n.hasM&&(!i||n.hasZ)),t.hasZ=i,t.hasM=a}function Qa(t){const n=[];for(t.reset();t.nextPath();){const s=[];for(;t.nextPoint();)s.push([t.x,t.y]);n.push(s)}return t.reset(),n}function la(t){const n=[];for(;t.nextPoint();)n.push([t.x,t.y]);return t.seekPathStart(),n}function Wa(t){if(!t)return null;if(Array.isArray(t))return t;const n=t.hasZ,s=t.hasM;if(t.type==="point")return s&&n?[t.x,t.y,t.z,t.m]:n?[t.x,t.y,t.z]:s?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(a=>[a]);if(t.type==="extent"){const a=t.clone().normalize();if(!a)return null;let i=!1,r=!1;return a.forEach(o=>{o.hasZ&&(i=!0),o.hasM&&(r=!0)}),a.map(o=>{const u=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const c=.5*(o.zmax-o.zmin);for(let l=0;l<u.length;l++)u[l].push(c)}if(r&&o.hasM){const c=.5*(o.mmax-o.mmin);for(let l=0;l<u.length;l++)u[l].push(c)}return u})}return null}function ut(t,n){const s=n[0]-t[0],a=n[1]-t[1];if(t.length>2&&n.length>2){const i=t[2]-n[2];return Math.sqrt(s*s+a*a+i*i)}return Math.sqrt(s*s+a*a)}function hn(t,n,s){const a=t[0]+s*(n[0]-t[0]),i=t[1]+s*(n[1]-t[1]);return t.length>2&&n.length>2?[a,i,t[2]+s*(n[2]-t[2])]:[a,i]}function Ua(t,n,s,a){const[i,r]=n,[o,u]=s,[c,l]=a,h=c-o,f=l-u,m=h*h+f*f,e=(i-o)*h+(r-u)*f,M=Math.min(1,Math.max(0,e/m));return t[0]=o+h*M,t[1]=u+f*M,t}function Xa(t,n,s,a,i,r){let o=s,u=a,c=i-o,l=r-u;if(c!==0||l!==0){const h=((t-o)*c+(n-u)*l)/(c*c+l*l);h>1?(o=i,u=r):h>0&&(o+=c*h,u+=l*h)}return c=t-o,l=n-u,c*c+l*l}function fn(t,n){return hn(t,n,.5)}function ti(t){const n=t.length;let s=0;for(let a=0;a<n-1;++a)s+=ut(t[a],t[a+1]);return s}function ni(t,n){if(n<=0)return t[0];const s=t.length;let a=0;for(let i=0;i<s-1;++i){const r=ut(t[i],t[i+1]);if(n-a<r){const o=(n-a)/r;return hn(t[i],t[i+1],o)}a+=r}return t[s-1]}function mn(t,n=0,s=1){let a=0;const i=t.length;let r=t[0];for(let o=1;o<i;o++){const u=t[o];a+=(u[n]-r[n])*(u[s]+r[s]),r=u}if(en(t)){const o=t[0];a+=(o[n]-r[n])*(o[s]+r[s])}return a>=0}function en(t){const n=t.length;return n>0&&!wt(t[0],t[n-1])}function si(t){"rings"in t&&(ha(t),fa(t))}function ha(t){if("rings"in t)for(const n of t.rings)en(n)&&n.push(n[0].slice())}function fa(t){if(!("rings"in t)||t.rings.length===0||mn(t.rings[0]))return!1;for(const n of t.rings)n.reverse();return!0}function ai(t){return t.type!=="polygon"&&t.type!=="polyline"||ma(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function ma(t,n){const s=In(n);if(!s)return;const a=s.valid[0],i=s.valid[1],r=i-a;for(const o of t){let u=1/0,c=-1/0;for(const h of o){const f=ea(h[0],a,i);u=Math.min(u,f),c=Math.max(c,f),h[0]=f}const l=c-u;r-l<l&&o.forEach(h=>{h[0]<0&&(h[0]+=r)})}}function ea(t,n,s){const a=s-n;return t<n?s-(n-t)%a:t>s?n+(t-n)%a:t}function ii(t,n){if(t===n)return!0;if(t.type!==n.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===n.points.length;const[s,a]=t.type==="polyline"?[t.paths,n.paths]:[t.rings,n.rings];return s.length===a.length&&s.every((i,r)=>i.length===a[r].length)}function oi(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Ma(t){return pa(t.rings,t.hasZ??!1)}function ga(t){const n=Ma(t);if(!n)return null;const{hasZ:s,spatialReference:a}=t,[i,r,o]=n;return isNaN(i)||isNaN(r)||s&&isNaN(o)?null:{x:i,y:r,z:s?o:void 0,spatialReference:a}}function pa(t,n){if(!t?.length)return null;const s=[],a=[],i=n?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let r=0,o=t.length;r<o;r++){const u=Mn(t[r],n,i);u&&a.push(u)}if(a.sort((r,o)=>{let u=r[2]-o[2];return u===0&&n&&(u=r[4]-o[4]),u}),a.length&&(s[0]=a[0][0],s[1]=a[0][1],n&&(s[2]=a[0][3]),(s[0]<i[0]||s[0]>i[1]||s[1]<i[2]||s[1]>i[3]||n&&(s[2]<i[4]||s[2]>i[5]))&&(s.length=0)),!s.length){const r=t[0]&&t[0].length?xa(t[0],n):null;if(!r)return null;s[0]=r[0],s[1]=r[1],n&&r.length>2&&(s[2]=r[2])}return s}function Mn(t,n,s){let a=0,i=0,r=0,o=0,u=0;const c=t.length?t[0][0]:0,l=t.length?t[0][1]:0,h=t.length&&n?t[0][2]:0;for(let m=0;m<t.length;m++){const e=t[m],M=t[(m+1)%t.length],[g,p,x]=e,y=g-c,b=p-l,[d,I,v]=M,R=d-c,P=I-l,N=y*P-R*b;if(o+=N,a+=(y+R)*N,i+=(b+P)*N,n&&e.length>2&&M.length>2){const S=x-h,O=v-h,q=y*O-R*S;r+=(S+O)*q,u+=q}g<s[0]&&(s[0]=g),g>s[1]&&(s[1]=g),p<s[2]&&(s[2]=p),p>s[3]&&(s[3]=p),n&&(x<s[4]&&(s[4]=x),x>s[5]&&(s[5]=x))}if(o>0&&(o*=-1),u>0&&(u*=-1),!o)return null;o*=.5,u*=.5;const f=[a/(6*o)+c,i/(6*o)+l,o];return n&&(s[4]===s[5]||u===0?(f[3]=(s[4]+s[5])/2,f[4]=0):(f[3]=r/(6*u)+h,f[4]=u)),f}function ri(t,n){let s=0,a=0,i=0;t.nextPoint();const r=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let u=0;u<t.pathSize;u++){t.seekInPath(u);const c=[t.x,t.y];t.seekInPath((u+1)%t.pathSize);const l=[t.x,t.y],[h,f]=c,m=h-r,e=f-o,[M,g]=l,p=M-r,x=g-o,y=m*x-p*e;i+=y,s+=(m+p)*y,a+=(e+x)*y,h<n[0]&&(n[0]=h),h>n[1]&&(n[1]=h),f<n[2]&&(n[2]=f),f>n[3]&&(n[3]=f)}return i>0&&(i*=-1),i?(i*=.5,[s/(6*i)+r,a/(6*i)+o,i]):null}function xa(t,n){const s=n?[0,0,0]:[0,0],a=n?[0,0,0]:[0,0];let i=0,r=0,o=0,u=0;for(let c=0,l=t.length;c<l-1;c++){const h=t[c],f=t[c+1];if(h&&f){s[0]=h[0],s[1]=h[1],a[0]=f[0],a[1]=f[1],n&&h.length>2&&f.length>2&&(s[2]=h[2],a[2]=f[2]);const m=ut(s,a);if(m){i+=m;const e=fn(h,f);r+=m*e[0],o+=m*e[1],n&&e.length>2&&(u+=m*e[2])}}}return i>0?n?[r/i,o/i,u/i]:[r/i,o/i]:t.length?t[0]:null}function ya(t){const{hasZ:n,totalSize:s}=t;if(s===0)return null;const a=[],i=[],r=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Mn(la(t),t.hasZ,r);o&&i.push(o)}if(i.sort((o,u)=>{let c=o[2]-u[2];return c===0&&n&&(c=o[4]-u[4]),c}),i.length&&(a[0]=i[0][0],a[1]=i[0][1],n&&(a[2]=i[0][3]),(a[0]<r[0]||a[0]>r[1]||a[1]<r[2]||a[1]>r[3]||n&&(a[2]<r[4]||a[2]>r[5]))&&(a.length=0)),!a.length){t.reset(),t.nextPath();const o=t.pathSize?da(t):null;if(!o)return null;a[0]=o[0],a[1]=o[1],n&&o.length>2&&(a[2]=o[2])}return a}function da(t){const{hasZ:n}=t,s=n?[0,0,0]:[0,0],a=n?[0,0,0]:[0,0];let i=0,r=0,o=0,u=0;if(t.nextPoint()){let c=t.x,l=t.y,h=t.z;for(;t.nextPoint();){const f=t.x,m=t.y,e=t.z;s[0]=c,s[1]=l,a[0]=f,a[1]=m,n&&(s[2]=h,a[2]=e);const M=ut(s,a);if(M){i+=M;const g=fn(s,a);r+=M*g[0],o+=M*g[1],n&&g.length>2&&(u+=M*g[2])}c=f,l=m,h=e}}return i>0?n?[r/i,o/i,u/i]:[r/i,o/i]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const ba=1e-6;function ui(t){let n=0;for(t.reset();t.nextPath();)n+=t.getCurrentRingArea();if(n<ba){const i=ya(t);return i?[i[0],i[1]]:null}const s=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const a=[t.x,t.y];for(t.reset();t.nextPath();)va(s,a,t);return s[0]*=1/n,s[1]*=1/n,s[0]+=a[0],s[1]+=a[1],s}const Ia=1/3;function va(t,n,s){if(!t||!s||s.pathSize<3)return null;s.nextPoint();const a=s.x,i=s.y;s.nextPoint();let r,o=s.x-a,u=s.y-i,c=0,l=0;for(;s.nextPoint();)c=s.x-a,l=s.y-i,r=.5*Ia*(c*u-l*o),t[0]+=r*(o+c),t[1]+=r*(u+l),o=c,u=l;const h=s.getCurrentRingArea(),f=[a,i];return f[0]-=n[0],f[1]-=n[1],f[0]*=h,f[1]*=h,t[0]+=f[0],t[1]+=f[1],t}var nt;function _t(t){return!Array.isArray(t[0])}function Pa(t){return typeof t[0]?.[0]=="number"}function Ra(t){if(!t)return;let{rings:n,hasM:s,hasZ:a,spatialReference:i}=t;switch(n??=[],Pa(n)&&(n=[n]),n[0]?.[0]?.length){case 4:a??=!0,s??=!0;break;case 3:a??=s!==!0,s??=!a;break;default:a??=!1,s??=!1}return i??=vn.WGS84,{...t,hasM:s,hasZ:a,rings:n,spatialReference:i}}let w=nt=class extends dn{static fromExtent(t){const n=t.clone().normalize(),{spatialReference:s}=t;let a=!1,i=!1;for(const o of n)o.hasZ&&(a=!0),o.hasM&&(i=!0);const r={rings:n.map(o=>{const u=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(a&&o.hasZ){const c=o.zmin+.5*(o.zmax-o.zmin);for(let l=0;l<u.length;l++)u[l].push(c)}if(i&&o.hasM){const c=o.mmin+.5*(o.mmax-o.mmin);for(let l=0;l<u.length;l++)u[l].push(c)}return u}),spatialReference:s};return a&&(r.hasZ=!0),i&&(r.hasM=!0),new nt(r)}constructor(t){super(Ra(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){yt(dt.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=ga(this);return t?Y.fromJSON(t):null}writeCurveRings(t,n){n.curveRings=Q(t)}get extent(){const t=ln(this),{spatialReference:n}=this;return t?new pn({...t,spatialReference:n}):null}get isSelfIntersecting(){return yt(dt.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),xn(this.rings)}writeRings(t,n){n.rings=Q(this.rings)}addRing(t){if(!t)return;const n=this.rings,s=n.length;if(_t(t)){const a=[];for(let i=0,r=t.length;i<r;i++)a[i]=t[i].toArray();n[s]=a}else n[s]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new nt;return t.spatialReference=this.spatialReference,t.rings=Q(this.rings),t.curveRings=Q(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const n=this.spatialReference,s=t.spatialReference;if(n!=null!=(s!=null)||n!=null&&s!=null&&!n.equals(s)||this.rings.length!==t.rings.length)return!1;const a=([i,r,o,u],[c,l,h,f])=>i===c&&r===l&&(o==null&&h==null||o===h)&&(u==null&&f==null||u===f);for(let i=0;i<this.rings.length;i++){const r=this.rings[i],o=t.rings[i];if(!wt(r,o,a))return!1}return!0}contains(t){if(!t)return!1;const n=bn(t,this.spatialReference);return yn(this,n??t)}isClockwise(t){const n=_t(t)?t.map(s=>this.hasZ?this.hasM?[s.x,s.y,s.z,s.m]:[s.x,s.y,s.z]:[s.x,s.y]):t;return mn(n)}getPoint(t,n){if(!this._validateInputs(t,n))return null;const s=this.rings[t][n],a=this.hasZ,i=this.hasM;return a&&!i?new Y(s[0],s[1],s[2],void 0,this.spatialReference):i&&!a?new Y(s[0],s[1],void 0,s[2],this.spatialReference):a&&i?new Y(s[0],s[1],s[2],s[3],this.spatialReference):new Y(s[0],s[1],this.spatialReference)}insertPoint(t,n,s){return this._validateInputs(t,n,!0)?(zt(this,s),Array.isArray(s)||(s=s.toArray()),this.rings[t].splice(n,0,s),this.notifyChange("rings"),this):this}removePoint(t,n){if(!this._validateInputs(t,n))return null;const s=new Y(this.rings[t].splice(n,1)[0],this.spatialReference);return this.notifyChange("rings"),s}removeRing(t){if(!this._validateInputs(t,null))return null;const n=this.rings.splice(t,1)[0],s=this.spatialReference,a=n.map(i=>new Y(i,s));return this.notifyChange("rings"),a}setPoint(t,n,s){return this._validateInputs(t,n)?(zt(this,s),Array.isArray(s)||(s=s.toArray()),this.rings[t][n]=s,this.notifyChange("rings"),this):this}_validateInputs(t,n,s=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(n!=null){const a=this.rings[t];if(s&&(n<0||n>a.length)||!s&&(n<0||n>=a.length))return!1}return!0}toJSON(t){return this.write({},t)}};A([k({readOnly:!0})],w.prototype,"cache",null),A([k({readOnly:!0})],w.prototype,"centroid",null),A([k({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],w.prototype,"curveRings",void 0),A([bt("curveRings")],w.prototype,"writeCurveRings",null),A([k({readOnly:!0})],w.prototype,"extent",null),A([k({readOnly:!0})],w.prototype,"isSelfIntersecting",null),A([k({type:[[[Number]]],json:{write:{isRequired:!0}}})],w.prototype,"rings",void 0),A([bt("rings")],w.prototype,"writeRings",null),w=nt=A([gn("esri.geometry.Polygon")],w),w.prototype.toJSON.isDefaultToJSON=!0;const ci=Object.freeze(Object.defineProperty({__proto__:null,get default(){return w}},Symbol.toStringTag,{value:"Module"}));export{Ht as $,Xa as A,Gs as B,mn as C,Os as D,ys as E,An as F,ls as G,at as H,Xn as I,Is as J,H as K,ts as L,Jt as M,Qa as N,Ha as O,w as P,ta as Q,ri as R,Ua as S,ga as T,ft as U,ws as V,Rs as W,kn as X,Dn as Y,ma as Z,ai as _,G as a,Js as a0,Wn as a1,Ka as a2,Qt as a3,Bt as a4,Qs as a5,X as a6,fn as a7,Oa as a8,Mt as a9,ss as aA,la as aB,ti as aC,ya as aD,ui as aE,Es as aF,xs as aG,Ta as aH,Za as aI,ka as aJ,Aa as aK,$a as aL,z as aM,La as aN,Bs as aO,ni as aP,pa as aQ,Qn as aR,bs as aS,vs as aT,Ps as aU,Ls as aV,ci as aW,D as aa,Ga as ab,Ca as ac,ja as ad,gs as ae,Ya as af,Ks as ag,si as ah,C as ai,Ft as aj,Kn as ak,wn as al,Ba as am,ln as an,Ma as ao,oi as ap,Tn as aq,as as ar,is as as,U as at,ii as au,Fn as av,Vn as aw,En as ax,ea as ay,rs as az,Zt as b,et as c,Gn as d,it as e,Ja as f,Fa as g,J as h,ct as i,Jn as j,Va as k,Cn as l,ha as m,Ds as n,At as o,Yt as p,Vt as q,Wa as r,rt as s,mt as t,Zn as u,ra as v,Da as w,zt as x,Hn as y,ca as z};
