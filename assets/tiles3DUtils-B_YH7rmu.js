import{M as y}from"./mathUtils-PIGhLnI9.js";import{c as z,u as a,E as A,s as I,l as k,d as $,R as l}from"./vec32-3aXs3jbn.js";import{r as c,n as R}from"./collectionUtils-DoXnmzlX.js";import{f as p,B as V}from"./Point-vWR8_ZMt.js";import{z as S}from"./Extent-DY3BG_6i.js";import{m as _}from"./HeightModelInfo-CaqLl28i.js";import{b as U}from"./projectionUtils-CxkhtTt4.js";function E(n,g){if(!Array.isArray(n)||n.length<g)return!1;for(const x of n)if(typeof x!="number")return!1;return!0}const v=7645211,W={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},G=new Map([[5773,new _({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new _({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new _({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new _({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new _({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new _({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function B(n){if(!n)return null;const g=n.vcsWkid||n.latestVcsWkid;return g?G.get(g):null}function T(n){return!(!(n.extensions?.ESRI_crs?.wkid||n.extensions?.ESRI_crs?.latestWkid||n.extensions?.ESRI_crs?.wkt)||!n.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!n.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function j(n,g=!1){let x=new p({wkid:4326,vcsWkid:115700}),s=n.root?.boundingVolume,b=!1,d=n?.root?.transform;if(g&&(n.extensions?.ESRI_crs?.wkid||n.extensions?.ESRI_crs?.latestWkid||n.extensions?.ESRI_crs?.wkt)&&(n.root?.extensions?.ESRI_crs?.boundingVolume?.box||n.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))x=new p(n.extensions?.ESRI_crs),s=n.root?.extensions?.ESRI_crs?.boundingVolume,d=n.root?.transform,b=!0;else if(!s)return new S(-180,-90,180,90,x);if(s.box){const t=s?.box;if(t[3]>v&&t[7]>v&&t[11]>v)return new S({...W,spatialReference:x})}const w=R();if(!b&&s.region&&E(s.region,6)){const t=s.region,m=y(t[0]),o=y(t[1]),r=t[4],i=y(t[2]),e=y(t[3]),h=t[5];return new S({xmin:m,ymin:o,zmin:r,xmax:i,ymax:e,zmax:h,spatialReference:x})}if(s.sphere&&E(s.sphere,4)){const t=s.sphere,m=c(t[0],t[1],t[2]),o=t[3]/Math.sqrt(3),r=R();z(r,m,c(o,o,o));const i=R();if(a(i,m,c(o,o,o)),d&&E(d,16)){const f=d;A(w,r,f),I(r,w),A(w,i,f),I(i,w)}b||(U(r,V,0,r,p.WGS84,0),U(i,V,0,i,p.WGS84,0));const e=R(),h=R();return k(e,r,i),$(h,r,i),new S({xmin:e[0],ymin:e[1],zmin:e[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:x})}if(s.box&&E(s.box,12)){const t=s.box,m=c(t[0],t[1],t[2]),o=c(t[3],t[4],t[5]),r=c(t[6],t[7],t[8]),i=c(t[9],t[10],t[11]),e=[];for(let u=0;u<8;++u)e.push(R());if(a(e[0],m,o),a(e[0],e[0],r),a(e[0],e[0],i),l(e[1],m,o),a(e[1],e[1],r),a(e[1],e[1],i),a(e[2],m,o),l(e[2],e[2],r),a(e[2],e[2],i),l(e[3],m,o),l(e[3],e[3],r),a(e[3],e[3],i),a(e[4],m,o),a(e[4],e[4],r),l(e[4],e[4],i),l(e[5],m,o),a(e[5],e[5],r),l(e[5],e[5],i),a(e[6],m,o),l(e[6],e[6],r),l(e[6],e[6],i),l(e[7],m,o),l(e[7],e[7],r),l(e[7],e[7],i),d&&E(d,16)){const u=d;for(let M=0;M<8;++M)A(e[M],e[M],u)}const h=c(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),f=c(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let u=0;u<8;++u)b||U(e[u],V,0,e[u],p.WGS84,0),k(f,f,e[u]),$(h,h,e[u]);return new S({xmin:f[0],ymin:f[1],zmin:f[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:x})}return new S(-180,-90,180,90,x)}export{j as E,T as R,B as _};
