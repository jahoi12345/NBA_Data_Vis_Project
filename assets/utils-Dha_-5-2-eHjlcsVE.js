const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/symbolLayerUtils-C6J3Fvdt-CLc-EV8j.js","assets/index-CTl7hdrJ.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu-BAT2Wq6O.js","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/LRUCache-fy84PBMi-Y56WPIvD.js","assets/collectionUtils-jDyktm0P-ArdXNs6F.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/Extent-CgDMOSRD-CU1qE5Kr.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/aaBoundingBox-Cn49X7ge-DORLZxoS.js","assets/aaBoundingRect-CjwcS2F3-D7aII9DY.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/DoubleArray-DExKNiTh-CvVpHySW.js","assets/mat4f64-q_b6UJoq-Dh6sWB_w.js","assets/PolygonSymbol3D-BXRHZiCQ-Vi0-2Gvc.js","assets/Color-CERqXxxY-BuYn26eI.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js","assets/screenUtils-BitdhK1O-L0FLPAMi.js","assets/opacityUtils-DuFH0EC9-DWspTgn2.js","assets/lineMarkers-CDwLe3J6-CNUjJvs3.js","assets/Font-BwmnW7d2-D-oIm_Md.js"])))=>i.map(i=>d[i]);
import{H as w,_ as j}from"./index-CTl7hdrJ.js";import{F as u}from"./Color-CERqXxxY-BuYn26eI.js";import{k}from"./asyncUtils-w6KfWU41-HenJ0UOu.js";import"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{r as g}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";import"./mat4f32-Djp3mnm5-DzYG3LYB.js";import"./mat4-C96X-Nn0-Do6fKsNS.js";import{R as x,T as v}from"./cimSymbolUtils-DOGwV0lV-DF1x9X12.js";import"./Point-BfTTZoMu-BAT2Wq6O.js";import{M as L}from"./LRUCache-fy84PBMi-Y56WPIvD.js";import{p as D}from"./ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js";import{B as m,K as y}from"./typeUtils-CXW_VpOn-BoSnXkME.js";const d=(e,t=d,s=t.f||(t.f=["assets/symbolLayerUtils-C6J3Fvdt.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu.js","assets/jsonMap-Bs3hmeCU.js","assets/reader-DcGs6kKN.js","assets/LRUCache-fy84PBMi.js","assets/collectionUtils-jDyktm0P.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-CgDMOSRD.js","assets/SimpleObservable-CvFyr0NA.js","assets/aaBoundingBox-Cn49X7ge.js","assets/aaBoundingRect-CjwcS2F3.js","assets/mathUtils-PIGhLnI9.js","assets/DoubleArray-DExKNiTh.js","assets/mat4f64-q_b6UJoq.js","assets/PolygonSymbol3D-BXRHZiCQ.js","assets/Color-CERqXxxY.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x.js","assets/screenUtils-BitdhK1O.js","assets/opacityUtils-DuFH0EC9.js","assets/lineMarkers-CDwLe3J6.js","assets/Font-BwmnW7d2.js"]))=>e.map(n=>s[n]);new L(1e3);new u([128,128,128]);function $(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function G(e){return e.resource?.href??""}function Q(e,t){if(!e)return null;let s=null;return m(e)?s=_(e):y(e)&&(s=e.type==="cim"?x(e):e.color?new u(e.color):null),s?c(s,t):null}function _(e){const t=e.symbolLayers;if(!t)return null;let s=null;return t.forEach(n=>{n.type==="object"&&n.resource?.href||(s=n.type==="water"?n.color:n.material?n.material.color:null)}),s?new u(s):null}function c(e,t){if(t==null||e==null)return e;const s=e.toRgba();return s[3]=s[3]*t,new u(s)}function C(e,t,s){const n=e.symbolLayers;if(!n)return;const a=(o,r=!1)=>{let i=t??o??null;return s?.override!=null&&(!i&&r&&(i=new u([255,255,255])),i&&(i.a=s.override)),c(i,s?.add)};n.forEach(o=>{if(o.type==="water")return void(o.color=c(o.color,s?.add));const r=o.material!=null?o.material.color:null,i=a(r,o.type==="icon"&&o.resource?.href!=null);o.material==null?o.material=new D({color:i}):o.material.color=i,"outline"in o&&o.outline?.color&&s?.add!=null&&(o.outline.color=c(o.outline.color,s.add)),"marker"in o&&o.marker!=null&&(o.marker.color=a(o.marker.color))})}function S(e,t,s){t=t??e.color,s?.override!=null&&t&&(t.a=s.override),t&&(e.color=c(t,s?.add)),"outline"in e&&e.outline?.color&&(e.outline.color=c(e.outline.color,s?.add))}function Y(e,t,s){e&&(t||s!=null)&&(t&&(t=new u(t)),m(e)?C(e,t,s):y(e)&&S(e,t,s))}async function B(e,t){const s=e.symbolLayers;s&&await k(s,async n=>R(n,t))}async function R(e,t){switch(e.type){case"extrude":z(e,t);break;case"icon":case"line":case"text":E(e,t);break;case"path":O(e,t);break;case"object":await U(e,t)}}function E(e,t){const s=h(t);s!=null&&(e.size=s)}function h(e){for(const t of e)if(typeof t=="number")return t;return null}function z(e,t){const s=t[2];typeof s=="number"&&(e.size=s)}async function U(e,t){const{resourceSize:s,symbolSize:n}=await P(e),a=b(t,s,n);a!=null&&(e.width=f(t[0],n[0],s[0],a),e.depth=f(t[1],n[1],s[1],a),e.height=f(t[2],n[2],s[2],a))}function O(e,t){const s=b(t,g,[e.width,void 0,e.height]);s!=null&&(e.width=f(t[0],e.width,1,s),e.height=f(t[2],e.height,1,s))}function b(e,t,s){for(let n=0;n<3;n++){const a=e[n];switch(a){case"symbol-value":{const o=s[n];return o!=null?o/t[n]:1}case"proportional":break;default:if(a&&t[n])return a/t[n]}}return null}async function P(e){const{computeObjectLayerResourceSize:t}=await w(()=>j(()=>import("./symbolLayerUtils-C6J3Fvdt-CLc-EV8j.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])),d([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22])),s=await t(e,10),{width:n,height:a,depth:o}=e,r=[n,o,a];let i=1;for(let l=0;l<3;l++){const p=r[l];if(p!=null){i=p/s[l];break}}for(let l=0;l<3;l++)r[l]==null&&(r[l]=s[l]*i);return{resourceSize:s,symbolSize:r}}function f(e,t,s,n){switch(e){case"proportional":return s*n;case"symbol-value":return t??s;default:return e}}function F(e,t){const s=h(t);if(s!=null)switch(e.type){case"simple-marker":e.size=s;break;case"picture-marker":{const n=e.width/e.height;n>1?(e.width=s,e.height=s*n):(e.width=s*n,e.height=s);break}case"simple-line":e.width=s;break;case"text":e.font.size=s}}async function V(e,t){if(e&&t)return m(e)?B(e,t):void(y(e)&&F(e,t))}function ee(e,t,s){if(e&&t!=null){if(m(e)){const n=e.symbolLayers;n&&n.forEach(a=>{if(a.type==="object")switch(s){case"tilt":a.tilt=(a.tilt??0)+t;break;case"roll":a.roll=(a.roll??0)+t;break;default:a.heading=(a.heading??0)+t}a.type==="icon"&&(a.angle+=t)})}else if(y(e))switch(e.type){case"simple-marker":case"picture-marker":case"text":e.angle+=t;break;case"cim":v(e,t,!0)}}}function te(e){return e!=null&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}export{$ as H,G as K,Q,Y as W,V as X,ee as Y,te as Z};
