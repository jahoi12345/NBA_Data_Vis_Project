import{bC as et,ar as E}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{A as ct,S as ut}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{h as at}from"./mat4-C96X-Nn0-Do6fKsNS.js";import{L as M,V as U,I as k,$ as m,z as ft,F as A,k as _,x as p,v as W,J as ht,O as $,y as gt,l as S,w as lt,A as C,h as mt}from"./vec32-CewSdTn3-DHOFKD0R.js";import{X as G,t as f}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";import{e as dt}from"./vec4f64-DPb6J-GU-C7c2DqbZ.js";import{e as Mt,K as _t,a as $t,$ as pt}from"./Polygon-D6wEPb3W-CpL9Efjx.js";import{z as g,C as Ct,G as Pt}from"./vector-B8ZDYGQ6-B1uNywRb.js";class yt{constructor(n){this._allocator=n,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&et(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const n=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*I);this._items.length=Math.min(n,this._items.length),this._itemsPtr=0}_grow(){for(let n=0;n<Math.max(8,Math.min(this._items.length,I));n++)this._items.push(this._allocator())}}const I=1024;function V(t){return t?X(G(t.origin),G(t.direction)):X(f(),f())}function X(t,n){return{origin:t,direction:n}}function un(t,n){return E(t.origin,n.origin)&&E(t.direction,n.direction)}function an(t,n){const r=wt.get();return r.origin=t,r.direction=n,r}function fn(t,n=V()){return St(t.origin,t.direction,n)}function At(t,n,r=V()){return k(r.origin,t),m(r.direction,n,t),r}function St(t,n,r=V()){return k(r.origin,t),k(r.direction,n),r}function hn(t,n){const r=A(g.get(),S(g.get(),t.direction),m(g.get(),n,t.origin));return C(r,r)}function bt(t,n,r){const i=C(t.direction,m(r,n,t.origin));return $(r,t.origin,_(r,t.direction,i)),r}function gn(t,n,r,i){const o=t.origin,s=n.origin,e=t.direction,c=n.direction,u=C(S(v,e),S(B,c));if(Math.abs(u)>=1)return null;const a=A(v,e,c),l=mt(T,s,o),O=_t(J,e[0],e[1],e[2],-c[0],-c[1],-c[2],a[0],a[1],a[2]),d=pt(J,O);if(d==null)return[r,i];const ot=C(M(v,d[0],d[3],d[6]),l),st=C(M(B,d[1],d[4],d[7]),l);return $(r,o,_(T,e,ot)),$(i,s,_(T,c,st)),[r,i]}const wt=new yt(()=>V()),T=f(),v=f(),B=f(),J=$t();function K(t,n){const r=p(t),i=ut(t[2]/r),o=Math.atan2(t[1]/r,t[0]/r);return M(n,r,i,o),n}const xt=q();function P(t,n,r,i){return new Array(t,n,r,i)}function q(){return P(0,0,0,0)}function Vt(t,n){return P(t[0],t[1],t[2],n)}function qt(t){return P(t[0],t[1],t[2],t[3])}function D(t,n,r){return Q(t,n[0],n[1],n[2],r)}function Q(t,n,r,i,o){return t[0]=n,t[1]=r,t[2]=i,t[3]=o,t}function Rt(t,n){return Y(t,n)}function Y(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function b(t,n){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function Ot(t){return P(t[0],t[1],t[2],t[3])}function Tt(t){t[0]=0,t[1]=0,t[2]=0,t[3]=0}function vt(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=n,t}function y(t){return t[3]}function L(t,n){return M(n,t[0],t[1],t[2])}function h(t){return M(x,t[0],t[1],t[2])}function H(t,n){t[0]=n[0],t[1]=n[1],t[2]=n[2]}function Ft(t,n){t[0]=n[0],t[1]=n[1],t[2]=n[2]}function kt(t,n,r,i){t[0]=n,t[1]=r,t[2]=i}function Lt(t,n,r){H(t,U(x,n,r))}function jt(t,n,r,i,o){t[0]=n,t[1]=r,t[2]=i,t[3]=o}function zt(t){return dt(t[0],t[1],t[2],t[3])}function Et(t,n,r){return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=t[3]+n,r}function Gt(t,n,r){return t!==r&&b(t,r),r}function It(t,n){return n}function R(t,n,r){if(n==null||!Z(t,n,w))return!1;let{t0:i,t1:o}=w;if((i<0||o<i&&o>0)&&(i=o),i<0)return!1;if(r){const{origin:s,direction:e}=n;r[0]=s[0]+e[0]*i,r[1]=s[1]+e[1]*i,r[2]=s[2]+e[2]*i}return!0}function Xt(t,n,r){const i=At(n,r);if(!Z(t,i,w))return[];const{origin:o,direction:s}=i,{t0:e,t1:c}=w,u=a=>{const l=f();return lt(l,o,s,a),z(t,l,l)};return Math.abs(e-c)<Mt()?[u(e)]:[u(e),u(c)]}const w={t0:0,t1:0};function Z(t,n,r){const{origin:i,direction:o}=n,s=Bt;s[0]=i[0]-t[0],s[1]=i[1]-t[1],s[2]=i[2]-t[2];const e=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(e===0)return!1;const c=2*(o[0]*s[0]+o[1]*s[1]+o[2]*s[2]),u=c*c-4*e*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return r.t0=(-c-a)/(2*e),r.t1=(-c+a)/(2*e),!0}const Bt=f();function Jt(t,n){return R(t,n,null)}function Kt(t,n,r){if(R(t,n,r))return r;const i=tt(t,n,g.get());return $(r,n.origin,_(g.get(),n.direction,W(n.origin,i)/p(n.direction))),r}function tt(t,n,r){const i=g.get(),o=Ct.get();A(i,n.origin,n.direction);const s=y(t);A(r,i,n.origin),_(r,r,1/p(r)*s);const e=nt(t,n.origin),c=Pt(n.origin,r);return at(o,c+e,i),U(r,r,o),r}function Nt(t,n,r,i){const o=y(t),s=o*o,e=n+.5*Math.PI,c=r*r+s-2*Math.cos(e)*r*o,u=Math.sqrt(c),a=c-s;if(a<=0)return .5;const l=Math.sqrt(a),O=Math.acos(l/u)-Math.asin(o/(u/Math.sin(e)));return Math.min(1,(O+.5*i)/i)}function Ut(t,n,r){return R(t,n,r)?r:(bt(n,h(t),r),z(t,r,r))}function z(t,n,r){const i=m(g.get(),n,h(t)),o=_(g.get(),i,t[3]/p(i));return $(r,o,h(t))}function Wt(t,n){const r=m(g.get(),n,h(t)),i=ft(r),o=t[3]*t[3];return Math.sqrt(Math.abs(i-o))}function nt(t,n){const r=m(g.get(),n,h(t)),i=p(r),o=y(t),s=o+Math.abs(o-i);return ct(o/s)}const F=f();function rt(t,n,r,i){const o=m(F,n,h(t));switch(r){case 0:{const s=K(o,F)[2];return M(i,-Math.sin(s),Math.cos(s),0)}case 1:{const s=K(o,F),e=s[1],c=s[2],u=Math.sin(e);return M(i,-u*Math.cos(c),-u*Math.sin(c),Math.cos(e))}case 2:return S(i,o);default:return}}function it(t,n){const r=m(j,n,h(t));return p(r)-t[3]}function Dt(t,n,r,i){const o=it(t,n),s=rt(t,n,2,j),e=_(j,s,r-o);return $(i,n,e)}function Qt(t,n){const r=gt(h(t),n),i=y(t);return r<=i*i}function Yt(t,n,r=q()){const i=W(h(t),L(n,N)),o=t[3],s=n[3];return i+s<o?(b(t,r),r):i+o<s?(b(n,r),r):(ht(x,h(t),L(n,N),(i+s-o)/(2*i)),D(r,x,(i+o+s)/2),r)}const x=f(),N=f(),Ht=q(),j=f(),ln=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:xt,altitudeAt:it,angleToSilhouette:nt,axisAt:rt,cameraFrustumCoverage:Nt,clear:Tt,clone:Ot,closestPoint:Ut,closestPointOnSilhouette:tt,containsPoint:Qt,copy:b,copyCenter:Ft,create:q,distanceToSilhouette:Wt,elevate:Et,equals:Y,exactEquals:Rt,fromCenterAndRadius:Vt,fromRadius:vt,fromValues:P,fromVec4:qt,getCenter:L,getCenterTemp:h,getExtent:It,getRadius:y,intersectLine:Xt,intersectRay:R,intersectRayClosestSilhouette:Kt,intersectsRay:Jt,projectPoint:z,set:Q,setAltitudeAt:Dt,setCenter:H,setCenterFromValues:kt,setExtent:Gt,setFromCenterAndRadius:D,setFromValues:jt,setTransformedCenter:Lt,tmpSphere:Ht,toVec4:zt,union:Yt},Symbol.toStringTag,{value:"Module"}));export{St as A,b as C,kt as F,Nt as G,z as I,Wt as J,Xt as L,Lt as O,D as Q,y as S,vt as T,Jt as U,Ft as V,Qt as W,Yt as X,H as Y,L as a,an as b,Ht as c,Vt as d,yt as e,fn as f,P as g,h,ln as i,R as j,jt as k,hn as l,Rt as m,gn as n,zt as o,qt as p,At as q,tt as t,un as u,xt as w,V as x,q as y};
