const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Feature3DPipeline-Bowu9_aK-M9uzqmic.js","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/WorkerHandle-B930SiRy-b7IwaSpV.js","assets/workers-BEkgoq8Q-BNWfkyQs.js","assets/index-CTl7hdrJ.js","assets/index-Cv2ko1Ob.css","assets/Queue-CYlrXMwB-CYJTUII-.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/Point-BfTTZoMu-BAT2Wq6O.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/intl-DRFqUect-ClAS7BRt.js","assets/date-IqUzANpt-bLKO9IDT.js","assets/Extent-CgDMOSRD-CU1qE5Kr.js","assets/aaBoundingRect-CjwcS2F3-D7aII9DY.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/isFeatureGraphicOrigin-YA2hudPe-Bk2FjH_E.js","assets/AttributeBinsFeatureSet-BtGn1q3D-BzPdjLAd.js","assets/Graphic-DgGzDmqW-CFzg0c4i.js","assets/getPopupProvider-CmskPttI-C4PqyuPF.js","assets/collectionUtils-jDyktm0P-ArdXNs6F.js","assets/lengthUtils-Dt1_RvOO-bleznLOi.js","assets/Color-CERqXxxY-BuYn26eI.js","assets/Layer-DZvC7bne-m1cEC_yw.js","assets/jsonUtils-CmpazY1u-ateEpj4Q.js","assets/Polyline-CoiTLswR-BLagWJLS.js","assets/Polygon-D6wEPb3W-CpL9Efjx.js","assets/typeUtils-DqrRcjBx-ZWdHcSIJ.js","assets/createFeatureId-CVwTD0fV-3fKpJDrk.js","assets/typeUtils-CXW_VpOn-BoSnXkME.js","assets/lineMarkers-CDwLe3J6-CNUjJvs3.js","assets/PolygonSymbol3D-BXRHZiCQ-Vi0-2Gvc.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js","assets/screenUtils-BitdhK1O-L0FLPAMi.js","assets/opacityUtils-DuFH0EC9-DWspTgn2.js","assets/aaBoundingBox-Cn49X7ge-DORLZxoS.js","assets/DoubleArray-DExKNiTh-CvVpHySW.js","assets/mat4f64-q_b6UJoq-Dh6sWB_w.js","assets/Font-BwmnW7d2-D-oIm_Md.js","assets/SimpleFillSymbol-CDawtd9z-CWD2KI2D.js","assets/SimpleMarkerSymbol-BGAFRS9_-CVQ5NLIA.js","assets/PictureMarkerSymbol-CaSh-vZk-BNpExnAb.js","assets/TextSymbol-hRGhyDHs-C0NgASym.js","assets/FeatureSet-BF7daP96-BqhMUjXs.js","assets/Field-Cm_ZejYW-CwJZmSru.js","assets/fieldType-DVUzXtk_-tUuvnZJM.js","assets/ShadowCastClear.glsl-CeOT_rAo-iOFMl8eB.js","assets/Texture-CFNZjV2R-lGBztxVp.js","assets/vec32-CewSdTn3-DHOFKD0R.js","assets/Indices-D0_UQPPr-t1Qev6md.js","assets/BufferView-Cj2sQaht-DuP-iLZg.js","assets/vec42-B8VM4vXb-BnA9MysM.js","assets/vec2f64-rIxtbMRN-Kai9mK1i.js","assets/vec4f64-DPb6J-GU-C7c2DqbZ.js","assets/sphere-DLQ6p7mp-DmnRpHXV.js","assets/mat4-C96X-Nn0-Do6fKsNS.js","assets/vector-B8ZDYGQ6-B1uNywRb.js","assets/quatf64-CCm9z-pX-CQ7_sSji.js","assets/frustum-CMzahy3--CFytpSYl.js","assets/plane-BNdSPG2o-Cq7jmU6w.js","assets/Emissions.glsl-B8XKMjLy-DXfiRNVX.js","assets/enums-B4pqBiXb-BO-3hS_8.js","assets/orientedBoundingBox-BLEx7wLU-CPBtS4XC.js","assets/quat-B7J5v7rV-i-DOMCm_.js","assets/spatialReferenceEllipsoidUtils-D2JabnKt-Cip58jmo.js","assets/computeTranslationToOriginAndRotation-Bjd4esRf-CXUng2L4.js","assets/projectionUtils-BGH_5_I3-BySNUA-B.js","assets/InterleavedLayout-B7roQAzV-CC2VYRPC.js","assets/types-BKo2foNY-DE0QfIFp.js","assets/VertexElementDescriptor-BlxU8vCE-BwuKQkTU.js","assets/Cyclical-BLSxUpe7-Bj8R2Yk-.js","assets/projectPointToVector-DL7Z4uvb-BbcUuq8O.js","assets/projectVectorToVector-Csv3NYZI-BsIKHfQD.js","assets/HUDIntersectorResult-1xTExS7z-CU1-YQoW.js","assets/normalizeUtils-85zLqeMi-DCF9gKvo.js","assets/normalizeUtilsCommon-CnhQye_A-zWtr51r8.js","assets/utils-CylVuxNi-CqOfmBVG.js","assets/utils-Dpg4yj1D-BVnuoMV8.js","assets/videoUtils-Dwx3AEgj-CduhpDRk.js","assets/modeUtils-BA-mAwuS-UrytRxLw.js","assets/uuid-Oe6SV2kF-IYX19xBA.js","assets/sanitizerUtils-BT_8V5US-CWQWUwZQ.js","assets/PooledRBush-Dco5QkUp-DX3CMhf3.js","assets/quickselect-QQC62dOK-Br2Ahhru.js","assets/GraphicsCollection-Bk6M0b7D-ByzFamPI.js","assets/HeightModelInfo-D5IdRvJ2-BK9di2bT.js","assets/RealisticTree.glsl-WN9nrQUl-CRRcYwOn.js","assets/meshVertexSpaceUtils-CtG7DPVT-V_uCtHpB.js","assets/MeshLocalVertexSpace-BGd1IdEs-DqCdtROz.js","assets/vec3f32-WCVSSNPR-9V6Uhrx-.js","assets/memoryEstimations-Bd726a_p-0cVCY2Jz.js","assets/Intersector-DS9YtyQY-CuzM48xl.js","assets/scaleUtils-yfx9kKWT-BPfZ-Fh2.js","assets/layerUtils-DZGhvm-W-DLw3QMll.js","assets/TilemapCache-CjhKW_vj-BYOTuKe8.js","assets/LRUCache-fy84PBMi-Y56WPIvD.js","assets/TileKey-CXWFOqOI-CcilLir8.js","assets/tagSymbols-BPcGfZon-BPcGfZon.js","assets/UpdatingHandles-D2RI_3Hb-dwLPjVun.js","assets/asyncUtils-w6KfWU41-HenJ0UOu.js","assets/signal-BX9ezF8a-cf1Pn6io.js","assets/Map-AEYszeHg-D2YZkc1e.js","assets/Basemap-CL_uaRmk-ChnHJfg0.js","assets/loadAll-BCyxerwc-DK9uHnLK.js","assets/PortalItem-DnxMlRVo-Dhq4alsp.js","assets/writeUtils-DEFpwIW1-D44H3UWs.js","assets/CollectionFlattener-D6h2Fkvj-qnUHjb1M.js","assets/persistable-CdoDQOTR-CH9U-JJT.js","assets/MD5-MtSiOt06-jWr180Yc.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw-DH8sdIsE.js","assets/resourceExtension-DOTCeiZj-BXiJr75H.js","assets/PolygonCollection-HNNpnBH7-C5NQ6xHr.js","assets/mat4f32-Djp3mnm5-DzYG3LYB.js","assets/TablesMixin-Q80MT3nU-CFBTh0j7.js","assets/timeZoneUtils-BSc7-7qA-BAv3h8mh.js","assets/ReactiveMap-B0by2bYu-DCsCfMj5.js","assets/Query-BlS0WPDF-BdshFBMz.js","assets/ElevationQuery-DzlYa4L4-BxQXlEAE.js","assets/TileInfo-Bz7QlefV-tjhen9qQ.js","assets/Scheduler-CNrsbccs-Bcg8fWoS.js","assets/constants-D67WmGms-H7IOwEdB.js","assets/floatRGBA-D-Q4FzNN-BzjdY1tU.js","assets/labelUtils-BtizwBfq-Zegx4520.js","assets/ArcadeExpression-BlIRq-oN-DGzfhzBj.js","assets/TimeOnly-BERR31kg-PKcKegNB.js","assets/enum-BzLwmiID-CcyIdWlQ.js","assets/UnknownTimeZone-B697BDFv-CBbtul7O.js","assets/FieldsIndex-CimK-TqD-CrSnohIk.js","assets/TileKey-C44YQC4_-BW7BBbYp.js","assets/layerViewUtils-BTa15X3o-BjQlX2q8.js","assets/unitConversionUtils-4vB4Ezlp-B0eWR3Ls.js","assets/vec2f32-CaVKkSa6-BjkBmyoj.js","assets/dehydratedFeatures-Ql-uVzLq-DehgeO5I.js","assets/quantizationUtils-Ceq-Uxsu-CDK8m1qL.js","assets/featureConversionUtils-BDA_FXJx-CUwkrHf5.js","assets/OptimizedFeature-CwRGZPwv-Ddclhn0A.js","assets/OptimizedFeatureSet-BR8EEvDc-CgsRgxJh.js","assets/Octree-DckBBpQ7-BC8mmFdF.js","assets/elevationInfoUtils-B8MpdRMP-CN_w2fPT.js","assets/intersectorUtilsConversions-pLQPEbcN-rV-4Q5_m.js","assets/DefaultLoadingContext-DXgBe4GE-Colk9t6X.js","assets/wosrLoader-CIPfz1Cl-qtGxLmBP.js","assets/Version-BtYZEj58-LyRHDnSJ.js","assets/axisAngleDegrees-CjbXmycq-LMRXo165.js","assets/edgePreprocessing-D_eX-fWy-CRLN12td.js","assets/config-Dg972SSE-D9DBKeq5.js","assets/GeometryUtils-C354xUs0-CG8X9WjO.js","assets/definitions-Dvg4hMIw-CdK2DzFN.js","assets/colorUtils-CeIi7j7j-nwrKvQYb.js","assets/vec3-B_phcnZY-DHC7I6xa.js","assets/vec33-CWJeyzxV-Me4sF5XB.js","assets/capabilities-Bi6C4OG6-CpURufko.js","assets/imageUtils-142g71N8-CjUugWaS.js","assets/utils-Dint_RG--Cvy9rUtc.js","assets/LodRenderer-Be2-9DZO-CzdrBODx.js","assets/highlightUtils--bJgM-zK-ChHi1-zr.js","assets/HeatmapDensity.glsl-CJMrIO7J-CdMKNLXb.js","assets/timeSupport-CL-HYuK--DWa-2gL6.js","assets/utils-DTE-xBiC-uxMmcNif.js","assets/AttributeBinsQuery-DmkXyj6Y-CoR4xwlT.js","assets/FixedIntervalBinParameters-8snYOK8a-BSPWw9c2.js","assets/NormalizationBinParametersMixin-BK9wNkI3-BKYeOhDN.js","assets/attributeUtils-Dc8--CBJ-B-j5BZQ_.js","assets/highlightOptionsUtils-Cdm0-Ad8-d1QoXb1P.js","assets/featureLayerUtils-FKjLNPl_-DLktjSPx.js","assets/featureQueryAll-BfDWA5Wx-ZgjJqs6l.js","assets/SimpleRenderer-CEmCWePp-xiwnMlto.js","assets/commonProperties-DbO613LF-DeJ_ZDUB.js","assets/colorRamps-DswZzxkO-BqSFavfl.js","assets/ColorStop-De5gQTjr-C1lw16u9.js","assets/visualVariableUtils-ma4r7Z2K-C4Gu8Tj6.js","assets/jsonUtils-C9q_FK4K-Cuz7ImzI.js","assets/defaults3D-C2hXSee1-DVT6WkAf.js","assets/defaults-BDN9qxeN-CCVK4JpS.js","assets/defaultsJSON-GKolV7NZ-GKolV7NZ.js","assets/UniqueValueRenderer-JPjz9Qvs-C1w5-GWR.js","assets/diffUtils-wTC1YzlE-JuqUWoWa.js","assets/RendererLegendOptions-ByGHYLtx-C9PvCikc.js","assets/styleUtils-DWvicjTN-DYvOM9HS.js","assets/FeatureTileDescriptor-n_NQwd9p-Cu6-pgr7.js","assets/dehydratedFeatureComparison-faNSTYzo-C3UzI31T.js","assets/utils-Dha_-5-2-eHjlcsVE.js","assets/cimSymbolUtils-DOGwV0lV-DF1x9X12.js","assets/utils-DX2muIr3-DiPfFKSl.js","assets/queryForSymbologySnapping-cmldLZWb-DcW_ZFbB.js","assets/Graphics3DFeatureProcessor-BtLaAjI1-CaXfqlkg.js","assets/hash-CcEbRgUF-DpReY683.js","assets/renderingInfoUtils-BivCmbrV-DfARK6_A.js","assets/ExtentSet-BmZuhn8E-BsM0ovD8.js","assets/optimizedFeatureQueryEngineAdapter-Bma9_B5X-BMDAgToU.js","assets/popupUtils-BKHMiD6K-B1dsckbj.js","assets/Graphics3DObjectStates-CA63huOX-fGyri52V.js","assets/FeatureFilter-G4_pWMVe-vo0uU6rO.js","assets/floorFilterUtils-DKzVzLpH-C2F2Cy-S.js","assets/QueryEngine-J0SYKhS8-CFA9lsZ6.js","assets/WhereClauseCache-B0L2SmwV-BYc3WALz.js","assets/WhereClause-BSVqskBz-DANRwfyr.js","assets/QueryEngineCapabilities-DJC_YILC-CshvWf3J.js","assets/utils-CUk96PkC-CThUWKre.js","assets/heatmapUtils-B-AXnq0l-G7fD8L97.js","assets/utils-BbtW4lHb-DKC09XMb.js","assets/utils-BEeBypEk-DQLTC4jR.js","assets/ClassBreaksDefinition-BGOzyovZ-K0U0wKo_.js","assets/SnappingCandidate-DGkpYqI6-CfPvDre4.js","assets/FeatureStore-DSSTHScY-B0QQjb8C.js","assets/BoundsStore-CBAymNAD-BJvinsAr.js","assets/pbf-2SIhMekG-LK438LAR.js","assets/FeatureEffect-mVCOF1v6-NIKVGK4R.js","assets/jsonUtils-CY6YsQMo-SliJcuqs.js","assets/LayerView-BnpxrRF8-CNZhc0aY.js","assets/LayerView3D-JY0KVfxL-ByE1zQWv.js","assets/query-DeNEvEsQ-piAD5C2I.js","assets/pbfQueryUtils-DlZBMNQk-B4EJfzeq.js","assets/queryZScale-CRP3Sh_E-0yf18ElE.js","assets/EventedSet-DfgtwAGn-CMNGS81T.js","assets/FeatureIdInfo-iL5WjyEH-DzYZU4u5.js","assets/constants-SxxbBSOD-SxxbBSOD.js","assets/displayFilterUtils-CIXGrQzt-Ck5cgHqb.js","assets/featurePopupQueryUtils-CnnY2XPA-CIuoWQ_Y.js","assets/RefreshableLayerView-BZ0W4dR0-NbasIvC8.js"])))=>i.map(i=>d[i]);
import{H as G,_ as z}from"./index-CTl7hdrJ.js";import{c as I,l as Z,Y as a,H as o,G as F,I as A,v,o as E,q as P,bQ as H,S as W,j as Y}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{j as _,l as B,o as S,s as $,t as D}from"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import{P as K,W as L}from"./dehydratedFeatures-Ql-uVzLq-DehgeO5I.js";import{m as X,$ as q,s as J,i as ee,B as se,G as R,y as V,z as te,M,O as re,P as ie,p as f,R as ae,U as le,o as C,d as oe,H as ne}from"./lengthUtils-Dt1_RvOO-bleznLOi.js";import{Q as ue,y as pe,g as de}from"./HeatmapDensity.glsl-CJMrIO7J-CdMKNLXb.js";import{u as ce}from"./LayerView3D-JY0KVfxL-ByE1zQWv.js";import{n as he}from"./RealisticTree.glsl-WN9nrQUl-CRRcYwOn.js";import{d as ye,t as me}from"./ShadowCastClear.glsl-CeOT_rAo-iOFMl8eB.js";import{d as fe,v as ge}from"./query-DeNEvEsQ-piAD5C2I.js";import{f as je}from"./WorkerHandle-B930SiRy-b7IwaSpV.js";import{f as U}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{o as Fe}from"./Field-Cm_ZejYW-CwJZmSru.js";import{o as be}from"./EventedSet-DfgtwAGn-CMNGS81T.js";import{B as Ce}from"./getPopupProvider-CmskPttI-C4PqyuPF.js";import{i as we}from"./FeatureIdInfo-iL5WjyEH-DzYZU4u5.js";import{E as ve}from"./constants-SxxbBSOD-SxxbBSOD.js";import{y as xe}from"./displayFilterUtils-CIXGrQzt-Ck5cgHqb.js";import{t as _e}from"./FeatureEffect-mVCOF1v6-NIKVGK4R.js";import{_ as Ie}from"./FeatureFilter-G4_pWMVe-vo0uU6rO.js";import{J as De}from"./featureLayerUtils-FKjLNPl_-DLktjSPx.js";import{O as Re,$ as Ee}from"./featurePopupQueryUtils-CnnY2XPA-CIuoWQ_Y.js";import{i as T}from"./floorFilterUtils-DKzVzLpH-C2F2Cy-S.js";import{o as N}from"./Query-BlS0WPDF-BdshFBMz.js";import{d as Pe}from"./Graphics3DFeatureProcessor-BtLaAjI1-CaXfqlkg.js";import{m as Be,h as Oe}from"./popupUtils-BKHMiD6K-B1dsckbj.js";import{t as Se}from"./LayerView-BnpxrRF8-CNZhc0aY.js";import{f as qe}from"./RefreshableLayerView-BZ0W4dR0-NbasIvC8.js";const k=(s,e=k,i=e.f||(e.f=["assets/Feature3DPipeline-Bowu9_aK.js","assets/jsonMap-Bs3hmeCU.js","assets/reactiveUtils-SO2Ko3sy.js","assets/WorkerHandle-B930SiRy.js","assets/workers-BEkgoq8Q.js","assets/Queue-CYlrXMwB.js","assets/SimpleObservable-CvFyr0NA.js","assets/Point-BfTTZoMu.js","assets/reader-DcGs6kKN.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/intl-DRFqUect.js","assets/date-IqUzANpt.js","assets/Extent-CgDMOSRD.js","assets/aaBoundingRect-CjwcS2F3.js","assets/mathUtils-PIGhLnI9.js","assets/isFeatureGraphicOrigin-YA2hudPe.js","assets/AttributeBinsFeatureSet-BtGn1q3D.js","assets/Graphic-DgGzDmqW.js","assets/getPopupProvider-CmskPttI.js","assets/collectionUtils-jDyktm0P.js","assets/lengthUtils-Dt1_RvOO.js","assets/Color-CERqXxxY.js","assets/Layer-DZvC7bne.js","assets/jsonUtils-CmpazY1u.js","assets/Polyline-CoiTLswR.js","assets/Polygon-D6wEPb3W.js","assets/typeUtils-DqrRcjBx.js","assets/createFeatureId-CVwTD0fV.js","assets/typeUtils-CXW_VpOn.js","assets/lineMarkers-CDwLe3J6.js","assets/PolygonSymbol3D-BXRHZiCQ.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x.js","assets/screenUtils-BitdhK1O.js","assets/opacityUtils-DuFH0EC9.js","assets/aaBoundingBox-Cn49X7ge.js","assets/DoubleArray-DExKNiTh.js","assets/mat4f64-q_b6UJoq.js","assets/Font-BwmnW7d2.js","assets/SimpleFillSymbol-CDawtd9z.js","assets/SimpleMarkerSymbol-BGAFRS9_.js","assets/PictureMarkerSymbol-CaSh-vZk.js","assets/TextSymbol-hRGhyDHs.js","assets/FeatureSet-BF7daP96.js","assets/Field-Cm_ZejYW.js","assets/fieldType-DVUzXtk_.js","assets/ShadowCastClear.glsl-CeOT_rAo.js","assets/Texture-CFNZjV2R.js","assets/vec32-CewSdTn3.js","assets/Indices-D0_UQPPr.js","assets/BufferView-Cj2sQaht.js","assets/vec42-B8VM4vXb.js","assets/vec2f64-rIxtbMRN.js","assets/vec4f64-DPb6J-GU.js","assets/sphere-DLQ6p7mp.js","assets/mat4-C96X-Nn0.js","assets/vector-B8ZDYGQ6.js","assets/quatf64-CCm9z-pX.js","assets/frustum-CMzahy3-.js","assets/plane-BNdSPG2o.js","assets/Emissions.glsl-B8XKMjLy.js","assets/enums-B4pqBiXb.js","assets/orientedBoundingBox-BLEx7wLU.js","assets/quat-B7J5v7rV.js","assets/spatialReferenceEllipsoidUtils-D2JabnKt.js","assets/computeTranslationToOriginAndRotation-Bjd4esRf.js","assets/projectionUtils-BGH_5_I3.js","assets/InterleavedLayout-B7roQAzV.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BlxU8vCE.js","assets/Cyclical-BLSxUpe7.js","assets/projectPointToVector-DL7Z4uvb.js","assets/projectVectorToVector-Csv3NYZI.js","assets/HUDIntersectorResult-1xTExS7z.js","assets/normalizeUtils-85zLqeMi.js","assets/normalizeUtilsCommon-CnhQye_A.js","assets/utils-CylVuxNi.js","assets/utils-Dpg4yj1D.js","assets/videoUtils-Dwx3AEgj.js","assets/modeUtils-BA-mAwuS.js","assets/uuid-Oe6SV2kF.js","assets/sanitizerUtils-BT_8V5US.js","assets/modeUtils-OCMtRbrJ.css","assets/PooledRBush-Dco5QkUp.js","assets/quickselect-QQC62dOK.js","assets/GraphicsCollection-Bk6M0b7D.js","assets/HeightModelInfo-D5IdRvJ2.js","assets/RealisticTree.glsl-WN9nrQUl.js","assets/meshVertexSpaceUtils-CtG7DPVT.js","assets/MeshLocalVertexSpace-BGd1IdEs.js","assets/vec3f32-WCVSSNPR.js","assets/memoryEstimations-Bd726a_p.js","assets/Intersector-DS9YtyQY.js","assets/scaleUtils-yfx9kKWT.js","assets/layerUtils-DZGhvm-W.js","assets/TilemapCache-CjhKW_vj.js","assets/LRUCache-fy84PBMi.js","assets/TileKey-CXWFOqOI.js","assets/tagSymbols-BPcGfZon.js","assets/UpdatingHandles-D2RI_3Hb.js","assets/asyncUtils-w6KfWU41.js","assets/signal-BX9ezF8a.js","assets/Map-AEYszeHg.js","assets/Basemap-CL_uaRmk.js","assets/loadAll-BCyxerwc.js","assets/PortalItem-DnxMlRVo.js","assets/writeUtils-DEFpwIW1.js","assets/CollectionFlattener-D6h2Fkvj.js","assets/persistable-CdoDQOTR.js","assets/MD5-MtSiOt06.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/resourceExtension-DOTCeiZj.js","assets/PolygonCollection-HNNpnBH7.js","assets/mat4f32-Djp3mnm5.js","assets/TablesMixin-Q80MT3nU.js","assets/timeZoneUtils-BSc7-7qA.js","assets/ReactiveMap-B0by2bYu.js","assets/Query-BlS0WPDF.js","assets/ElevationQuery-DzlYa4L4.js","assets/TileInfo-Bz7QlefV.js","assets/Scheduler-CNrsbccs.js","assets/constants-D67WmGms.js","assets/floatRGBA-D-Q4FzNN.js","assets/labelUtils-BtizwBfq.js","assets/ArcadeExpression-BlIRq-oN.js","assets/TimeOnly-BERR31kg.js","assets/enum-BzLwmiID.js","assets/UnknownTimeZone-B697BDFv.js","assets/FieldsIndex-CimK-TqD.js","assets/TileKey-C44YQC4_.js","assets/layerViewUtils-BTa15X3o.js","assets/unitConversionUtils-4vB4Ezlp.js","assets/vec2f32-CaVKkSa6.js","assets/dehydratedFeatures-Ql-uVzLq.js","assets/quantizationUtils-Ceq-Uxsu.js","assets/featureConversionUtils-BDA_FXJx.js","assets/OptimizedFeature-CwRGZPwv.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/Octree-DckBBpQ7.js","assets/elevationInfoUtils-B8MpdRMP.js","assets/intersectorUtilsConversions-pLQPEbcN.js","assets/DefaultLoadingContext-DXgBe4GE.js","assets/wosrLoader-CIPfz1Cl.js","assets/Version-BtYZEj58.js","assets/axisAngleDegrees-CjbXmycq.js","assets/edgePreprocessing-D_eX-fWy.js","assets/config-Dg972SSE.js","assets/GeometryUtils-C354xUs0.js","assets/definitions-Dvg4hMIw.js","assets/colorUtils-CeIi7j7j.js","assets/vec3-B_phcnZY.js","assets/vec33-CWJeyzxV.js","assets/capabilities-Bi6C4OG6.js","assets/imageUtils-142g71N8.js","assets/utils-Dint_RG-.js","assets/LodRenderer-Be2-9DZO.js","assets/highlightUtils--bJgM-zK.js","assets/HeatmapDensity.glsl-CJMrIO7J.js","assets/timeSupport-CL-HYuK-.js","assets/utils-DTE-xBiC.js","assets/AttributeBinsQuery-DmkXyj6Y.js","assets/FixedIntervalBinParameters-8snYOK8a.js","assets/NormalizationBinParametersMixin-BK9wNkI3.js","assets/attributeUtils-Dc8--CBJ.js","assets/highlightOptionsUtils-Cdm0-Ad8.js","assets/featureLayerUtils-FKjLNPl_.js","assets/featureQueryAll-BfDWA5Wx.js","assets/SimpleRenderer-CEmCWePp.js","assets/commonProperties-DbO613LF.js","assets/colorRamps-DswZzxkO.js","assets/ColorStop-De5gQTjr.js","assets/visualVariableUtils-ma4r7Z2K.js","assets/jsonUtils-C9q_FK4K.js","assets/defaults3D-C2hXSee1.js","assets/defaults-BDN9qxeN.js","assets/defaultsJSON-GKolV7NZ.js","assets/UniqueValueRenderer-JPjz9Qvs.js","assets/diffUtils-wTC1YzlE.js","assets/RendererLegendOptions-ByGHYLtx.js","assets/styleUtils-DWvicjTN.js","assets/FeatureTileDescriptor-n_NQwd9p.js","assets/dehydratedFeatureComparison-faNSTYzo.js","assets/utils-Dha_-5-2.js","assets/cimSymbolUtils-DOGwV0lV.js","assets/utils-DX2muIr3.js","assets/queryForSymbologySnapping-cmldLZWb.js","assets/Graphics3DFeatureProcessor-BtLaAjI1.js","assets/hash-CcEbRgUF.js","assets/renderingInfoUtils-BivCmbrV.js","assets/ExtentSet-BmZuhn8E.js","assets/optimizedFeatureQueryEngineAdapter-Bma9_B5X.js","assets/popupUtils-BKHMiD6K.js","assets/Graphics3DObjectStates-CA63huOX.js","assets/FeatureFilter-G4_pWMVe.js","assets/floorFilterUtils-DKzVzLpH.js","assets/QueryEngine-J0SYKhS8.js","assets/WhereClauseCache-B0L2SmwV.js","assets/WhereClause-BSVqskBz.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/utils-CUk96PkC.js","assets/heatmapUtils-B-AXnq0l.js","assets/utils-BbtW4lHb.js","assets/utils-BEeBypEk.js","assets/ClassBreaksDefinition-BGOzyovZ.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FeatureStore-DSSTHScY.js","assets/BoundsStore-CBAymNAD.js","assets/LayerView3D-JY0KVfxL.js","assets/query-DeNEvEsQ.js","assets/pbfQueryUtils-DlZBMNQk.js","assets/pbf-2SIhMekG.js","assets/queryZScale-CRP3Sh_E.js","assets/EventedSet-DfgtwAGn.js","assets/FeatureIdInfo-iL5WjyEH.js","assets/constants-SxxbBSOD.js","assets/displayFilterUtils-CIXGrQzt.js","assets/FeatureEffect-mVCOF1v6.js","assets/jsonUtils-CY6YsQMo.js","assets/featurePopupQueryUtils-CnnY2XPA.js","assets/LayerView-BnpxrRF8.js","assets/RefreshableLayerView-BZ0W4dR0.js"]))=>s.map(t=>i[t]);let Ve=class extends ye{constructor(s,e,i,t,r,l){super(s.usedMemory,s.displayedFeatures,s.totalFeatures,s.maximumFeatures,s.nodes,s.core),this.storedFeatures=e,this.totalVertices=i,this.partial=t,this.mode=r,this.symbolComplexity=l}};class Me{constructor(e){this._controller=e,this._handle=new Te(i=>e.schedule(i))}destroy(){this._handle.destroy()}invoke(e,i){return e.buffer&&e.buffer.byteLength!==0?(e.options.sourceSpatialReference&&e.options.sourceSpatialReference instanceof U&&(e.options={...e.options,sourceSpatialReference:e.options.sourceSpatialReference.toJSON()}),this._handle.invoke(e,i).then(t=>{let r=0,l=0;const u=U.fromJSON(t.spatialReference);t.spatialReference=u;const p=async d=>{const n=t.fields;if(n){for(;r<n.length;)if(n[r]=Fe.fromJSON(n[r]),r++,d.madeProgress())return this._controller.reschedule(j=>p(j))}const h=t.features;for(;l<h.length;){const j=h[l];++l,j.uid=Y();const b=j.geometry;if(b!=null&&(b.spatialReference=u,Ue(b),d.madeProgress()))return this._controller.reschedule(c=>p(c))}return t};return this._controller.schedule(d=>p(d))})):Promise.resolve(null)}}function Ue(s){switch(s.type){case"polyline":s.paths=s.hasZ&&s.hasM?s.paths.map(e=>e.map(i=>[i[0],i[1],i[2],i[3]])):s.hasZ||s.hasM?s.paths.map(e=>e.map(i=>[i[0],i[1],i[2]])):s.paths.map(e=>e.map(i=>[i[0],i[1]]));break;case"polygon":s.rings=s.hasZ&&s.hasM?s.rings.map(e=>e.map(i=>[i[0],i[1],i[2],i[3]])):s.hasZ||s.hasM?s.rings.map(e=>e.map(i=>[i[0],i[1],i[2]])):s.rings.map(e=>e.map(i=>[i[0],i[1]]))}}class Te extends je{constructor(e){super("PBFDecoderWorker","_parseFeatureQuery",{_parseFeatureQuery:i=>[i.buffer]},e)}}let g=class extends P{constructor(s){super(s)}get implicitFields(){if(!this.layer.outFields?.includes("*"))return new Set;const s=new Set(this.layerView.requiredFields),e=new Set(this.layerView.availableFields);return H(e,s)}get queryFeaturesDehydrated(){const{layer:s}=this,e=s.capabilities,i=e&&e.query,t=i&&i.supportsFormatPBF,r=s.parsedUrl;if(t){this._decoder==null&&(this._decoder=new Me(this.controller));const l={sourceSpatialReference:s.spatialReference?.toJSON()??null,applyTransform:!0,maxStringAttributeFields:this.implicitFields,maxStringAttributeLength:Q};return(u,p)=>fe(r,u,"pbf",this._createRequestOptions(p)).then(d=>(E(p),this._decoder!=null?this._decoder.invoke({buffer:d.data,options:l},p.signal):Promise.reject(W())))}return(l,u)=>ge(r,l,s.spatialReference,this._createRequestOptions(u)).then(p=>L(p.data,{maxStringAttributeFields:this.implicitFields,maxStringAttributeLength:Q}))}queryFeatureCount(s,e){return this.layer.queryFeatureCount(s,e)}destroy(){this._decoder=I(this._decoder)}_createRequestOptions(s){return{...s,query:{...this.layer.customParameters,token:this.layer.apiKey,...s?.query}}}};a([o({constructOnly:!0})],g.prototype,"layer",void 0),a([o({constructOnly:!0})],g.prototype,"layerView",void 0),a([o({constructOnly:!0})],g.prototype,"controller",void 0),a([o({readOnly:!0})],g.prototype,"implicitFields",null),a([o({readOnly:!0})],g.prototype,"queryFeaturesDehydrated",null),g=a([F("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],g);let x=class extends P{constructor(s){super(s)}queryFeaturesDehydrated(s,e){return this.layer.queryFeatures(s,e)}};a([o({constructOnly:!0})],x.prototype,"layer",void 0),x=a([F("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileOGCServiceQuery3D")],x);let w=class extends P{constructor(s){super(s)}queryFeaturesDehydrated(s,e){return this.source.queryFeaturesJSON(s,e).then(L,i=>{if(i&&i.name==="query-features-json:unsupported")return this.layer.queryFeatures(s,e);throw i})}queryFeatureCount(s,e){return this.layer.queryFeatureCount(s,e)}};function Ne(s,e){const{layer:i}=s;return i.type==="feature"&&i.source.type==="feature-layer"||i.type==="catalog-footprint"?new g({layer:i,layerView:s,controller:e}):i.type==="feature"&&i.source.type==="memory"||i.type==="csv"||i.type==="geojson"||i.type==="oriented-imagery"||i.type==="wfs"?new w({layer:i,source:i.source}):i.type==="ogc-feature"?new x({layer:i}):null}a([o({constructOnly:!0})],w.prototype,"layer",void 0),a([o({constructOnly:!0})],w.prototype,"source",void 0),w=a([F("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D")],w);const Q=1024;class Qe{constructor(e){this._memoryCache=null;const i=e.layerView.layer;this._layerView=e.layerView,this.objectIdField=i.objectIdField,this.globalIdField="globalIdField"in i?i.globalIdField:null,this._returnZ=e.returnZ,this._returnM=e.returnM;const t=this._layerView.view.resourceController;this.query=Ne(this._layerView,t.normal),t&&this._memoryCacheEnabled&&(this._memoryCache=t.memoryController.newCache(`fl-${i.uid}`))}get _memoryCacheEnabled(){switch(this._layerView.layer.source.type){case"feature-layer":case"ogc-feature":case"oriented-imagery":return!0;case"csv":case"parquet":case"geojson":case"memory":case"wfs":return!1}}destroy(){this._memoryCache=I(this._memoryCache),this.query.destroy()}createQuery(){const e=this._layerView.layer.createQuery();return e.outFields=this._layerView.availableFieldsForQuery,e.returnZ=this._returnZ,e.returnM=this._returnM,e.outSpatialReference=this.tilingScheme?.spatialReference??this._layerView.view.spatialReference,e}get memoryCache(){return this._memoryCache}get viewingMode(){return this._layerView.view.state.viewingMode}get tilingScheme(){return this._layerView.view.featureTiles?.tilingScheme}get scheduler(){return this._layerView.view.resourceController?.scheduler}get geometryType(){return this._layerView.layer.geometryType}get fullExtent(){return this._layerView.layer.fullExtent}get tileMaxRecordCount(){return this._layerView.layer.capabilities.query.tileMaxRecordCount}get standardMaxRecordCount(){return this._layerView.layer.capabilities.query.standardMaxRecordCount}get maxRecordCount(){return this._layerView.layer.capabilities.query.maxRecordCount}get isDraped(){return this._layerView.layer.elevationInfo?.mode==="on-the-ground"}get effectiveDisplayFilter(){return this._layerView.displayFilterEnabled?this._layerView.effectiveDisplayFilter:null}get highlightIds(){return this._layerView.displayFilterEnabled?this._layerView.highlightIds:null}get capabilities(){return this._capabilities??=Le(this._layerView.layer),this._capabilities}logFetchError(e,i){e.error("#fetchTile()",this._layerView.layer,i?.message??i)}}function Le(s){const e=s.capabilities.query;return{supportsMultipleResolutions:ke(s),supportsPagination:!(!e||!e.supportsPagination),supportsResultType:!(!e||!e.supportsResultType),supportsCacheHint:!(!e||!e.supportsCacheHint),supportsQuantization:!(!e||!e.supportsQuantization),supportsQuantizationEditMode:!(!e||!e.supportsQuantizationEditMode),supportsMaxRecordCountFactor:!(!e||!e.supportsMaxRecordCountFactor),supportsFormatPBF:!(!e||!e.supportsFormatPBF)}}function ke(s){switch(s.geometryType){case"polyline":return!0;case"polygon":return s.capabilities&&s.capabilities.query&&s.capabilities.query.supportsQuantization;default:return!1}}let y=class extends pe{constructor(s){super(s),this._controllerTotal=0,this._processorTotal=0,this._needsRefresh=!1,this.suspendResumeExtentMode="data"}initialize(){this.addHandles(_(()=>({controller:this.controller,suspended:this.suspended}),({controller:s,suspended:e})=>{s&&!e&&this._needsRefresh&&(s.refetch(),this._needsRefresh=!1)}))}destroy(){this._fetcherContext=I(this._fetcherContext)}get maximumNumberOfFeatures(){return this.controller?.maximumNumberOfFeatures??this._get("maximumNumberOfFeatures")}set maximumNumberOfFeatures(s){this._set("maximumNumberOfFeatures",s),this.controller&&(this.controller.maximumNumberOfFeatures=s)}get snappingComplexityExceeded(){return this.controller?.snappingComplexityExceeded??!0}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){let s=0;if(this.controller?.updating){const i=this.controller.updatingRemaining,t=Math.max(this.controller.updatingTotal,this._controllerTotal);t>0&&(s=(t-i)/t,this._controllerTotal=t)}let e=0;if(this.processor?.updating){const i=this.processor.updatingRemaining,t=Math.max(i,this._processorTotal);t>0&&(e=(t-i)/t,this._processorTotal=t)}return .5*(s+e)}get updatePolicy(){if(!this.controller)return 0;switch(this.controller.mode){case"snapshot":{const s=Ge.get(this.layer.geometryType);return s==null||this.controller.serviceDataCount>s?0:1}case"tiles":return 0}}get usedMemory(){return(this.processor?.usedMemory??0)+(this.controller?.memoryForUnusedFeatures??0)}get unloadedMemory(){const s=this.processor?.unprocessedMemoryEstimate??0,e=this.controller?.expectedFeatureDiff??0,i=this.processor?.loadedFeatures??0,t=i+e>0?i/(i+e):1;return s+e*(this.processor?.usedMemoryPerFeature??0)*t}get ignoresMemoryFactor(){return this.controller?.hasMaximumNumberOfFeaturesOverride}get performanceInfo(){const s=this.controller?.displayFeatureLimit,e=s?.averageSymbolComplexity,i=e!=null?`f:${e.verticesPerFeature},v:${e.verticesPerCoordinate}`:"n/a";return new Ve(super.performanceInfo,this.controller?.performanceInfo?.storedFeatures??0,this.controller?.performanceInfo?.totalVertices??0,this.maximumNumberOfFeaturesExceeded,this.controller?.mode??"n/a",i)}async doRefresh(s){const{controller:e,processor:i,suspended:t}=this;s&&e&&(t?this._needsRefresh=!0:(e.refetch(),this._needsRefresh=!1)),i.refreshFilter()}setVisibility(s,e){this.processor?.setObjectIdVisibility(s,e)}getMissingAttributesForFeature(s){return this.controller.getMissingAttributesForFeature(s)}getHydratedGeometry(s){const e=this.graphics3DProcessor;if(e==null)return null;const i=e.graphics3DGraphicsByObjectID;if(i==null)return null;const t=i.get(s);return t==null?null:he(t.graphic.geometry)}createController(){this._fetcherContext=new Qe({layerView:this.layerView,returnZ:this.hasZ,returnM:this.hasM});const s=new de({layerView:this.layerView,context:this._fetcherContext,graphics:new be,extent:this.clippingExtent});return this.updatingHandles.add(()=>s.serviceDataExtent,e=>{this.processor&&(this.processor.dataExtent=e)},S),this.addHandles(_(()=>this.suspended&&this.layerView.updateSuspended,e=>{e?s.suspend():s.resume()},B)),this.updatingHandles.add(()=>this.processor?.displayFeatureLimit,e=>s.displayFeatureLimit=e,S),this.addHandles($(()=>!this.updating,()=>{this._controllerTotal=0,this._processorTotal=0})),s}beforeSetController(s){s.maximumNumberOfFeatures=this.maximumNumberOfFeatures}get test(){return{controller:this.controller,graphics3DProcessor:this.graphics3DProcessor,heatmapProcessor:this.heatmapProcessor,loadedGraphics:this.loadedGraphics}}};a([o()],y.prototype,"layerView",void 0),a([o()],y.prototype,"controller",void 0),a([o()],y.prototype,"_controllerTotal",void 0),a([o()],y.prototype,"_processorTotal",void 0),a([o()],y.prototype,"_needsRefresh",void 0),a([o()],y.prototype,"maximumNumberOfFeatures",null),a([o()],y.prototype,"snappingComplexityExceeded",null),a([o()],y.prototype,"maximumNumberOfFeaturesExceeded",null),a([o()],y.prototype,"updatingProgressValue",null),a([o()],y.prototype,"updatePolicy",null),a([o()],y.prototype,"suspendResumeExtentMode",void 0),y=a([F("esri.views.3d.layers.graphics.FeatureGraphics3DGraphicsPipeline")],y);const Ge=new Map([["point",5e3],["polygon",500],["polyline",1e3]]);function ze(s,e){if(e.type!=="feature"&&e.type!=="subtype-group")return[];if(!e.url)return[];const i="utilityNetworks"in s.map?s.map.utilityNetworks??[]:[];for(const t of i)if(t.isUtilityLayer(e)){const r=e.fieldsIndex.get("assetgroup"),l=e.fieldsIndex.get("assettype");return[r?.name,l?.name].filter(u=>u!=null)}return[]}class Ze{constructor(e){this._fieldsIndex=e,this._clauses=[]}async finish(){return{requiresCurrentUser:(await Promise.all(this._clauses)).some(e=>e.currentUserRequired)}}visitClientWhereClause(e){e&&this._clauses.push(ne(e,this._fieldsIndex))}visitFeatureReduction(e){if(e)switch(e.type){case"binning":case"cluster":this.visitLabelingInfo(e.labelsVisible,e.labelingInfo)}}visitLabelingInfo(e,i){if(e&&i!=null)for(const t of i)this.visitClientWhereClause(t.where)}visitDisplayFilter(e,i){if(e)for(const t of i?.filters??[])this.visitClientWhereClause(t.where)}visitFilter(e){this.visitClientWhereClause(e?.where)}visitTrackInfo(e){e!=null&&(this.visitLabelingInfo(e?.latestObservations.labelsVisible,e?.latestObservations.labelingInfo),this.visitLabelingInfo(e?.previousObservations.labelsVisible,e?.previousObservations.labelingInfo),this.visitLabelingInfo(e?.trackLines.labelsVisible,e?.trackLines.labelingInfo))}}const Ae=s=>{const e=s;let i=class extends e{constructor(...t){super(...t),this._updatingRequiredPromise=null,this.filter=null,this.layer=null,this.requiresCurrentUser=!1,this.requiredFields=[],this.view=null}initialize(){this.addHandles([_(()=>{const t=this.layer,r=this.view;return[t&&"elevationInfo"in t?t.elevationInfo?.featureExpressionInfo:null,t&&"displayField"in t?t.displayField:null,t&&"timeInfo"in t&&t.timeInfo,t&&"renderer"in t&&t.renderer,t&&"labelingInfo"in t&&t.labelingInfo,t&&"floorInfo"in t&&t.floorInfo,r?.requiredFieldsOptions?.featureTitleFields&&t&&"featureTitleFields"in t&&t.featureTitleFields,r?.requiredFieldsOptions?.utilityNetworkFields&&ze(r,t),t.displayFilterInfo,this.displayFilterEnabled,this.filter,this.featureEffect,this.timeExtent,t?.type==="knowledge-graph-sublayer"&&t.parentCompositeLayer.type==="link-chart"&&t.parentCompositeLayer.linkChart?.linkChartProperties.nonspatialDataDisplay?.mode]},()=>this._handleChange(),B),D(()=>this.view?.floors,"change",()=>this._handleChange()),D(()=>this.layer.displayFilterInfo?.filters,"change",()=>this._handleChange()),D(()=>this.layer&&"sublayers"in this.layer?this.layer.sublayers:null,"change",()=>this._handleChange())])}get availableFields(){if(!this.layer)return[];const{layer:t,layer:{fieldsIndex:r},requiredFields:l}=this;return"outFields"in t&&t.outFields?q(r,[...J(r,t.outFields),...l]):q(r,l)}get displayFilterEnabled(){return(this.view?.displayFilterEnabled??!0)&&(!("displayFilterEnabled"in this.layer)||(this.layer?.displayFilterEnabled??!0))}get effectiveDisplayFilter(){const t=this.layer;return this.displayFilterEnabled&&t.displayFilterInfo?xe(t.displayFilterInfo,this.view):null}get effectiveDisplayFilterClause(){const t=this.effectiveDisplayFilter?.where??null;return t&&this.hasHighlight?ee(t,se(this.layer.objectIdField,this.highlightIds)):t}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(t){this._override("featureEffect",t)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(t){v.getLogger(this).error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}get signedInUser(){return this.layer?.url?De(this.layer.url):Promise.resolve(null)}highlight(t,r){throw new Error("missing implementation")}createQuery(){const t={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},r=this.filter!=null?this.filter.createQuery(t):new N(t);return"floorInfo"in this.layer&&this.layer.floorInfo&&(r.where=R(r.where,T(this))),this.displayFilterEnabled&&(r.where=R(r.where,this.effectiveDisplayFilter?.where)),this.timeExtent!=null&&(r.timeExtent=r.timeExtent!=null?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),r}createAggregateQuery(){const t={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return new N(t)}queryFeatures(t,r){throw new Error("missing implementation")}queryObjectIds(t,r){throw new Error("missing implementation")}queryFeatureCount(t,r){throw new Error("missing implementation")}queryExtent(t,r){throw new Error("missing implementation")}async fetchPopupFeaturesFromGraphics(t,r){const l=[],u=new Set;for(const d of t){const n=Ce(d.origin),h=Be(n,{...r,checkPopupEnabled:!0});h&&(l.push(d),u.add(h))}if(l.length===0||u.size===0)return[];const p=await this._createPopupQuery(u,r);return await Re(this.layer,l,p,{hasRequiredFields:(d,n)=>this._popupFeatureHasRequiredFields(d,n),...r})}_handleChange(){const t=Promise.all([this._updateRequiredFields(),this._updateClientWhereClauseRequirements()]).then(()=>{});return this._set("_updatingRequiredPromise",t),t.then(()=>{this._updatingRequiredPromise===t&&this._set("_updatingRequiredPromise",null)}),t}async _updateClientWhereClauseRequirements(){if(!this.layer||!this.view)return;const{layer:t}=this,r=new Ze(t.fieldsIndex);if(r.visitFilter(this.filter),"featureReduction"in t&&r.visitFeatureReduction(t.featureReduction),"labelingInfo"in t&&r.visitLabelingInfo(t.labelsVisible,t.labelingInfo),"trackInfo"in t&&r.visitTrackInfo(t.trackInfo),this.view.type==="2d"&&(r.visitFilter(this.featureEffect?.filter),r.visitDisplayFilter(this.displayFilterEnabled,t.displayFilterInfo),"featureReduction"in t&&r.visitFeatureReduction(t.featureReduction)),t.type==="subtype-group")for(const l of t.sublayers)r.visitLabelingInfo(l.labelsVisible,l.labelingInfo);try{const l=await r.finish();this._set("requiresCurrentUser",l.requiresCurrentUser)}catch(l){v.getLogger(this).error(l)}}async _updateRequiredFields(){if(!this.layer||!this.view)return;const t=this.view.type==="3d",{layer:r,layer:{fieldsIndex:l}}=this,u="renderer"in r&&r.renderer,p="orderBy"in r&&r.orderBy,d="featureReduction"in r?r.featureReduction:null,n=new Set,h=[u?u.collectRequiredFields(n,l):null,V(n,r),t&&"elevationInfo"in r?te(n,r):null,this.filter!=null?M(n,r,this.filter):null,t||this.featureEffect==null?null:M(n,r,this.featureEffect.filter),!t&&d?re(n,r,d):null,!t&&p?ie(n,r,p):null];if("timeInfo"in r&&r.timeInfo&&this.timeExtent&&f(n,r.fieldsIndex,[r.timeInfo.startField,r.timeInfo.endField]),"timeInfo"in r&&r.timeInfo&&"trackInfo"in r&&r.trackInfo){const{trackInfo:c}=r;f(n,r.fieldsIndex,[r.timeInfo.trackIdField]),r.type!=="feature"&&c.timeField!=="startTimeField"||f(n,r.fieldsIndex,[r.timeInfo.startField]),c.timeField==="endTimeField"&&f(n,r.fieldsIndex,[r.timeInfo.endField]),await ae(n,r)}if("floorInfo"in r&&r.floorInfo&&f(n,r.fieldsIndex,[r.floorInfo.floorField]),"featureTitleFields"in r&&this.view?.requiredFieldsOptions?.featureTitleFields&&r.featureTitleFields&&f(n,r.fieldsIndex,r.featureTitleFields),r.type==="feature"&&r.globalIdField&&this.view?.requiredFieldsOptions?.globalIdField&&f(n,r.fieldsIndex,[r.globalIdField]),this.displayFilterEnabled&&h.push(le(n,r,r.displayFilterInfo)),r.type==="feature"&&t&&r.infoFor3D!=null&&(r.globalIdField==null&&v.getLogger(this).error("globalIdField missing on 3DObjectFeatureLayer"),f(n,r.fieldsIndex,[r.globalIdField])),r.type==="subtype-group"){C(n,l,r.subtypeField);const c=r.sublayers.map(O=>Promise.all([O.renderer?.collectRequiredFields(n,l),V(n,O)]));h.push(Promise.all(c))}if(r.type==="catalog-footprint"&&r.parent){const c=r.parent;f(n,l,[c.itemNameField,c.itemSourceField,c.itemTypeField,c.maxScaleField,c.minScaleField])}r.type==="knowledge-graph-sublayer"&&r.parentCompositeLayer.type==="link-chart"&&C(n,l,ve);const j=await Promise.allSettled(h);if(t)C(n,l,r.objectIdField);else for(const c of we(Pe(r)))C(n,l,c);t&&"displayField"in r&&r.displayField&&C(n,l,r.displayField);for(const c of j)c.status==="rejected"&&v.getLogger(this).error(c.reason);const b=Array.from(n).sort();this._set("requiredFields",b)}_popupFeatureHasRequiredFields(t,r){return oe(t,r)}async _createPopupQuery(t,r){const l=this.layer.createQuery(),u=new Set;let p=this.layer.geometryType==="point";for(const d of t){if(!p){const h=await Ee(d);E(r),p=(h&&h.arcadeUtils.hasGeometryOperations(d))??!1}const n=await Oe(this.layer,d);E(r);for(const h of n)u.add(h)}return l.returnGeometry=p,l.returnZ=p,l.returnM=p,l.outFields=Array.from(u),l.outSpatialReference=this.view.spatialReference,"floorInfo"in this.layer&&this.layer.floorInfo&&(l.where=R(l.where,T(this))),l}canResume(){return!!super.canResume()&&(this.timeExtent==null||!this.timeExtent.isEmpty)}getTest(){}get test(){}};return a([o()],i.prototype,"_updatingRequiredPromise",void 0),a([o({readOnly:!0})],i.prototype,"availableFields",null),a([o({readOnly:!0})],i.prototype,"displayFilterEnabled",null),a([o({readOnly:!0})],i.prototype,"effectiveDisplayFilter",null),a([o({readOnly:!0})],i.prototype,"effectiveDisplayFilterClause",null),a([o({type:_e})],i.prototype,"featureEffect",null),a([o({type:Ie})],i.prototype,"filter",void 0),a([o()],i.prototype,"layer",void 0),a([o({type:Number})],i.prototype,"maximumNumberOfFeatures",null),a([o({readOnly:!0,type:Boolean})],i.prototype,"maximumNumberOfFeaturesExceeded",null),a([o()],i.prototype,"requiresCurrentUser",void 0),a([o({readOnly:!0})],i.prototype,"requiredFields",void 0),a([o({readOnly:!0})],i.prototype,"signedInUser",null),a([o()],i.prototype,"suspended",void 0),a([o()],i.prototype,"view",void 0),i=a([F("esri.views.layers.FeatureLayerView")],i),i};let m=class extends qe(ue(Ae(ce(Se)))){constructor(s){super(s)}initialize(){this.addHandles(_(()=>this._updatingRequiredPromise,s=>this._updatingHandles.addPromise(s),B))}destroy(){this._updatingHandles.removeAll(),this._fetcherContext=I(this._fetcherContext)}get maximumNumberOfFeatures(){return this.graphicsPipeline.maximumNumberOfFeatures}set maximumNumberOfFeatures(s){this.graphicsPipeline.maximumNumberOfFeatures=s}get maximumNumberOfFeaturesExceeded(){return this.graphicsPipeline!=null&&!this.suspended&&this.graphicsPipeline.maximumNumberOfFeaturesExceeded}get updatingProgressValue(){return this.graphicsPipeline?.updatingProgressValue??0}get updatePolicy(){return this.graphicsPipeline?.updatePolicy??0}get snappingComplexityExceeded(){return this.graphicsPipeline?.snappingComplexityExceeded??!0}get hasZ(){const s=this.layer,e=s.capabilities&&s.capabilities.data;return!(!e||!e.supportsZ)&&("returnZ"in s&&s.returnZ!=null?s.returnZ:e.supportsZ)}get hasM(){const s=this.layer,e=s.capabilities&&s.capabilities.data;return!(!e||!e.supportsM)&&"returnM"in s&&s.returnM!=null&&s.returnM}get availableFieldsForQuery(){return X(this.layer.fieldsIndex,this.availableFields)}setVisibility(s,e){this.graphicsPipeline?.setVisibility(s,e)}createQuery(){return super.createQuery()}queryFeatures(s,e){const i=()=>super.queryFeatures(s,e);return this.layer.geometryType==="mesh"?this._queryFeaturesMesh(this._ensureQuery(s),i):i()}async createGraphicsPipeline(){if(Z("feature-pipeline-3d-test")){const{Feature3DPipeline:s}=await G(()=>z(()=>import("./Feature3DPipeline-Bowu9_aK-M9uzqmic.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219])),k([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220]));return new s({layerView:this})}return new y({layerView:this})}async doRefresh(s){return await this.graphicsPipeline.doRefresh(s)}_popupFeatureHasRequiredFields(s,e){if(!super._popupFeatureHasRequiredFields(s,e))return!1;const i=K(s,this.layer.objectIdField);if(i==null)return!0;const t=this.graphicsPipeline.getMissingAttributesForFeature(i);if(t==null)return!0;for(const r of e)if(t.has(r))return!1;return!0}get usedMemory(){return this.graphicsPipeline?.usedMemory??0}get unloadedMemory(){return this.graphicsPipeline?.unloadedMemory??0}get ignoresMemoryFactor(){return this.graphicsPipeline?.ignoresMemoryFactor??!1}async _queryFeaturesMesh(s,e){this._validateQueryFeaturesMesh(s);const i=await e(),t=this.graphicsPipeline;if(s?.outStatistics||t==null)return i;const r=this.layer.objectIdField,l=[];for(const u of i.features)if(u.geometry){const p=t.getHydratedGeometry(u.attributes[r]);p&&(u.geometry=p,l.push(u))}else l.push(u);return i.features=l,i}_validateQueryFeaturesMesh(s){if(!s)return;const e=t=>{throw new A("feature-layer-view:unsupported-query",`Queries on Mesh feature collection layers do not support '${t}'`)},i=["quantizationParameters","geometryPrecision","maxAllowableOffset"];for(const t of i)s[t]!=null&&e(t);"returnM"in s&&s.returnM&&e("returnM"),"returnCentroid"in s&&s.returnCentroid&&e("returnCentroid"),s.outSpatialReference==null||s.outSpatialReference.equals(this.view.spatialReference)||e("outSpatialReference")}get test(){}};a([o()],m.prototype,"layer",void 0),a([o()],m.prototype,"graphicsPipeline",void 0),a([o()],m.prototype,"maximumNumberOfFeatures",null),a([o()],m.prototype,"maximumNumberOfFeaturesExceeded",null),a([o(me)],m.prototype,"updatingProgress",void 0),a([o({readOnly:!0})],m.prototype,"updatingProgressValue",null),a([o({readOnly:!0})],m.prototype,"updatePolicy",null),a([o()],m.prototype,"snappingComplexityExceeded",null),a([o({readOnly:!0})],m.prototype,"hasZ",null),a([o({readOnly:!0})],m.prototype,"hasM",null),a([o()],m.prototype,"availableFieldsForQuery",null),m=a([F("esri.views.3d.layers.FeatureLayerViewBase3D")],m);export{Ve as $,m as f};
