const x=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],E=["آ","أ","إ","ا"],X=["ﻵ","ﻷ","ﻹ","ﻻ"],tt=["ﻶ","ﻸ","ﻺ","ﻼ"],j=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],rt=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],et=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],nt=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],it=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],z=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],lt=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],Z=["ء","ف"],ot=["غ","ي"],ut=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ct=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],e=0,o=1,h=2,B=3,t=4,S=5,W=6,r=7,F=8,m=9,_=10,T=11,n=12,st=13,ft=14,at=15,ht=16,Tt=17,a=18,At=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],p=100,Lt=[p+0,e,e,e,e,p+1,p+2,p+3,o,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p+4,t,t,t,e,t,e,t,e,t,t,t,e,e,t,t,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,e,e,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,p+5,r,r,p+6,p+7],Ut=[[a,a,a,a,a,a,a,a,a,W,S,W,F,S,a,a,a,a,a,a,a,a,a,a,a,a,a,a,S,S,S,W,F,t,t,T,T,T,t,t,t,t,t,_,m,_,m,m,h,h,h,h,h,h,h,h,h,h,m,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,a,a,a,a,a,a,S,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,t,T,T,T,T,t,t,t,t,e,t,t,a,t,t,T,T,h,h,t,e,t,t,t,h,e,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,o,n,o,n,n,o,n,n,o,n,t,t,t,t,t,t,t,t,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,t,t,t,t,t,o,o,o,o,o,t,t,t,t,t,t,t,t,t,t,t],[B,B,B,B,t,t,t,t,r,T,T,r,m,r,t,t,n,n,n,n,n,n,n,n,n,n,n,r,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,B,B,B,B,B,B,B,B,B,B,T,B,B,r,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,B,t,n,n,n,n,n,n,r,r,n,n,t,n,n,n,n,r,r,h,h,h,h,h,h,h,h,h,h,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,n,n,n,n,n,n,n,n,n,o,o,t,t,t,t,o,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,a,a,a,e,o,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,S,st,ft,at,ht,Tt,m,T,T,T,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,a,a,a,a,a,t,t,t,t,t,a,a,a,a,a,a,h,e,t,t,h,h,h,h,h,h,_,_,t,t,t,e,h,h,h,h,h,h,h,h,h,h,_,_,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,t,t,t,t,t,o,n,o,o,o,o,o,o,o,o,o,o,_,o,o,o,o,o,o,o,o,o,o,o,o,o,t,o,o,o,o,o,t,o,t,o,o,t,o,o,t,o,o,o,o,o,o,o,o,o,o,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,t,m,t,t,m,t,t,t,t,t,t,t,t,t,T,t,t,_,_,t,t,t,t,t,T,T,t,t,t,t,t,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,a],[t,t,t,T,T,T,t,t,t,t,t,_,m,_,m,m,h,h,h,h,h,h,h,h,h,h,m,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,t,t,t,T,T,t,t,t,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class Dt{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(i,u,c){if(this.sourceToTarget=[],this.targetToSource=[],!i)return"";if(Ot(this.sourceToTarget,this.targetToSource,i.length),!this.checkParameters(u,c))return i;u=this.inputFormat,c=this.outputFormat;let s=i;const f=xt,L=G(u.charAt(1)),A=G(c.charAt(1)),U=(u.startsWith("I")?"L":u.charAt(0))+L,d=(c.startsWith("I")?"L":c.charAt(0))+A,g=u.charAt(2)+c.charAt(2);f.defInFormat=U,f.defOutFormat=d,f.defSwap=g;const w=V(i,U,d,g,f);let N=!1;return c.charAt(1)==="R"?N=!0:c.charAt(1)!=="C"&&c.charAt(1)!=="D"||(N=this.checkContextual(w)==="rtl"),this.sourceToTarget=R,this.targetToSource=It(this.sourceToTarget),D=this.targetToSource,s=u.charAt(3)===c.charAt(3)?w:c.charAt(3)==="S"?Bt(N,w):mt(w,N,!0),this.sourceToTarget=R,this.targetToSource=D,this.levels=y,s}_inputFormatSetter(i){if(!H.test(i))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=i}_outputFormatSetter(i){if(!H.test(i))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=i}checkParameters(i,u){return i?this._inputFormatSetter(i):i=this.inputFormat,u?this._outputFormatSetter(u):u=this.outputFormat,i!==u}checkContextual(i){let u=k(i);if(u!=="ltr"&&u!=="rtl"){try{u=document.dir.toLowerCase()}catch{}u!=="ltr"&&u!=="rtl"&&(u="ltr")}return u}hasBidiChar(i){return kt.test(i)}}function V(l,i,u,c,s){const f=dt(l,{inFormat:i,outFormat:u,swap:c},s);if(f.inFormat===f.outFormat)return l;i=f.inFormat,u=f.outFormat,c=f.swap;const L=i.slice(0,1),A=i.slice(1,4),U=u.slice(0,1),d=u.slice(1,4);if(s.inFormat=i,s.outFormat=u,s.swap=c,L==="L"&&u==="VLTR"){if(A==="LTR")return s.dir=v,b(l,s);if(A==="RTL")return s.dir=O,b(l,s)}if(L==="V"&&U==="V")return s.dir=A==="RTL"?O:v,Y(l,s);if(L==="L"&&u==="VRTL")return A==="LTR"?(s.dir=v,l=b(l,s)):(s.dir=O,l=b(l,s)),Y(l);if(i==="VLTR"&&u==="LLTR")return s.dir=v,b(l,s);if(L==="V"&&U==="L"&&A!==d)return l=Y(l),A==="RTL"?V(l,"LLTR","VLTR",c,s):V(l,"LRTL","VRTL",c,s);if(i==="VRTL"&&u==="LRTL")return V(l,"LRTL","VRTL",c,s);if(L==="L"&&U==="L"){const g=s.swap;return s.swap=g.slice(0,1)+"N",A==="RTL"?(s.dir=O,l=b(l,s),s.swap="N"+g.slice(1,3),s.dir=v,l=b(l,s)):(s.dir=v,l=b(l,s),s.swap="N"+g.slice(1,3),l=V(l,"VLTR","LRTL",s.swap,s)),l}return l}function dt(l,i,u){if(i.inFormat===void 0&&(i.inFormat=u.defInFormat),i.outFormat===void 0&&(i.outFormat=u.defOutFormat),i.swap===void 0&&(i.swap=u.defSwap),i.inFormat===i.outFormat)return i;const c=i.inFormat.slice(0,1),s=i.outFormat.slice(0,1);let f,L=i.inFormat.slice(1,4),A=i.outFormat.slice(1,4);return L.startsWith("C")&&(f=k(l),L=f==="ltr"||f==="rtl"?f.toUpperCase():i.inFormat.charAt(2)==="L"?"LTR":"RTL",i.inFormat=c+L),A.startsWith("C")&&(f=k(l),f==="rtl"?A="RTL":f==="ltr"?(f=Ft(l),A=f.toUpperCase()):A=i.outFormat.charAt(2)==="L"?"LTR":"RTL",i.outFormat=s+A),i}function Bt(l,i,u){if(i.length===0)return"";l===void 0&&(l=!0);const c=(i=String(i)).split("");let s=0,f=1,L=c.length;l||(s=c.length-1,f=-1,L=1);const A=gt(c,s,f,L);let U="";for(let d=0;d<c.length;d++)St(A,A.length,d)>-1?(Q(D,d,!l,-1),R.splice(d,1)):U+=c[d];return U}function gt(l,i,u,c,s){let f=0;const L=[];let A=0;for(let U=i;U*u<c;U+=u)if(K(l[U])||I(l[U])){if(l[U]==="ل"&&bt(l,U+u,u,c)){l[U]=Vt(l[U+u],f===0?X:tt),U+=u,Et(l,U,u,c),L[A]=U,A++,f=0;continue}const d=l[U];f===1?l[U]=$(l,U+u,u,c)?vt(l[U]):M(l[U],et):$(l,U+u,u,c)===!0?l[U]=M(l[U],it):l[U]=M(l[U],rt),I(d)||(f=1),Ct(d)===!0&&(f=0)}else f=0;return L}function k(l){const i=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(l);return i?i[0]<="z"?"ltr":"rtl":""}function Ft(l){const i=l.split("");return i.reverse(),k(i.join(""))}function mt(l,i,u){if(l.length===0)return"";i===void 0&&(i=!0);let c="";const s=(l=String(l)).split("");for(let f=0;f<l.length;f++){let L=!1;if(s[f]>="ﹰ"&&s[f]<"\uFEFF"){const A=l.charCodeAt(f);s[f]>="ﻵ"&&s[f]<="ﻼ"?(i?(f>0&&u&&s[f-1]===" "?c=c.slice(0,-1)+"ل":(c+="ل",L=!0),c+=E[(A-65269)/2]):(c+=E[(A-65269)/2],c+="ل",f+1<l.length&&u&&s[f+1]===" "?f++:L=!0),L&&(Q(D,f,!0,1),R.splice(f,0,R[f]))):c+=lt[A-65136]}else c+=s[f]}return c}function b(l,i){const u=l.split(""),c=[];return J(u,c,i),_t(u,c,i),q(2,u,c,i),q(1,u,c,i),y=c,u.join("")}function J(l,i,u){const c=l.length,s=u.dir?ct:ut;let f=0,L=-1;const A=[],U=[];u.hiLevel=u.dir,u.lastArabic=!1,u.hasUbatAl=!1,u.hasUbatB=!1,u.hasUbatS=!1;for(let d=0;d<c;d++)A[d]=pt(l[d]);for(let d=0;d<c;d++){const g=f,w=wt(l,A,U,d,u);U[d]=w,f=s[g][w];const N=240&f;f&=15;const P=s[f][Wt];if(i[d]=P,N>0)if(N===16){for(let C=L;C<d;C++)i[C]=1;L=-1}else L=-1;if(s[f][jt])L===-1&&(L=d);else if(L>-1){for(let C=L;C<d;C++)i[C]=P;L=-1}A[d]===S&&(i[d]=0),u.hiLevel|=P}u.hasUbatS&&Rt(A,i,c,u)}function Rt(l,i,u,c){for(let s=0;s<u;s++)if(l[s]===W){i[s]=c.dir;for(let f=s-1;f>=0&&l[f]===F;f--)i[f]=c.dir}}function _t(l,i,u){if(u.hiLevel!==0&&u.swap[0]!==u.swap[1])for(let c=0;c<l.length;c++)i[c]===1&&(l[c]=Nt(l[c]))}function pt(l){const i=l.charCodeAt(0),u=Lt[i>>8];return u<p?u:Ut[u-p][255&i]}function Y(l,i){const u=l.split("");if(i){const c=[];J(u,c,i),y=c}return u.reverse(),R.reverse(),u.join("")}function St(l,i,u){for(let c=0;c<i;c++)if(l[c]===u)return c;return-1}function K(l){for(let i=0;i<Z.length;i++)if(l>=Z[i]&&l<=ot[i])return!0;return!1}function $(l,i,u,c){for(;i*u<c&&I(l[i]);)i+=u;return!!(i*u<c&&K(l[i]))}function bt(l,i,u,c){for(;i*u<c&&I(l[i]);)i+=u;let s=" ";if(!(i*u<c))return!1;s=l[i];for(let f=0;f<E.length;f++)if(E[f]===s)return!0;return!1}function q(l,i,u,c){if(c.hiLevel<l)return;if(l===1&&c.dir===O&&!c.hasUbatB)return i.reverse(),void R.reverse();const s=i.length;let f,L,A,U,d,g=0;for(;g<s;){if(u[g]>=l){for(f=g+1;f<s&&u[f]>=l;)f++;for(L=g,A=f-1;L<A;L++,A--)U=i[L],i[L]=i[A],i[A]=U,d=R[L],R[L]=R[A],R[A]=d;g=f}g++}}function wt(l,i,u,c,s){const f=i[c];return{UBAT_L:()=>(s.lastArabic=!1,e),UBAT_R:()=>(s.lastArabic=!1,o),UBAT_ON:()=>t,UBAT_AN:()=>B,UBAT_EN:()=>s.lastArabic?B:h,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,o),UBAT_WS:()=>t,UBAT_CS:()=>{let L,A;return c<1||c+1>=i.length||(L=u[c-1])!==h&&L!==B||(A=i[c+1])!==h&&A!==B?t:(s.lastArabic&&(A=B),A===L?A:t)},UBAT_ES:()=>(c>0?u[c-1]:S)===h&&c+1<i.length&&i[c+1]===h?h:t,UBAT_ET:()=>{if(c>0&&u[c-1]===h)return h;if(s.lastArabic)return t;let L=c+1;const A=i.length;for(;L<A&&i[L]===T;)L++;return L<A&&i[L]===h?h:t},UBAT_NSM:()=>{if(s.inFormat==="VLTR"){const L=i.length;let A=c+1;for(;A<L&&i[A]===n;)A++;if(A<L){const U=l[c].charCodeAt(0),d=U>=1425&&U<=2303||U===64286,g=i[A];if(d&&(g===o||g===r))return o}}return c<1||i[c-1]===S?t:u[c-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,t),UBAT_LRE:()=>(s.lastArabic=!1,t),UBAT_RLE:()=>(s.lastArabic=!1,t),UBAT_LRO:()=>(s.lastArabic=!1,t),UBAT_RLO:()=>(s.lastArabic=!1,t),UBAT_PDF:()=>(s.lastArabic=!1,t),UBAT_BN:()=>t}[At[f]]()}function Nt(l){let i,u=0,c=x.length-1;for(;u<=c;)if(i=Math.floor((u+c)/2),l<x[i][0])c=i-1;else{if(!(l>x[i][0]))return x[i][1];u=i+1}return l}function Ct(l){for(let i=0;i<z.length;i++)if(z[i]===l)return!0;return!1}function vt(l){for(let i=0;i<j.length;i++)if(l===j[i])return nt[i];return l}function M(l,i){for(let u=0;u<j.length;u++)if(l===j[u])return i[u];return l}function I(l){return l>="ً"&&l<="ٕ"}function G(l){return l==="L"?"LTR":l==="R"?"RTL":l==="C"?"CLR":l==="D"?"CRL":""}function Et(l,i,u,c){for(;i*u<c&&I(l[i]);)i+=u;return i*u<c&&(l[i]=" ",!0)}function Vt(l,i){for(let u=0;u<E.length;u++)if(l===E[u])return i[u];return l}function Ot(l,i,u){R=[],y=[];for(let c=0;c<u;c++)l[c]=c,i[c]=c,R[c]=c}function It(l){const i=new Array(l.length);for(let u=0;u<l.length;u++)i[l[u]]=u;return i}function Q(l,i,u,c){for(let s=0;s<l.length;s++)(l[s]>i||!u&&l[s]===i)&&(l[s]+=c)}let R=[],D=[],y=[];const xt={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},Wt=5,jt=6,v=0,O=1,H=/^[(I|V)][(L|RCD)][(Y|N)][(S|N)]N$/,kt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{Dt as k};
