import{a7 as P,Y as l,H as h,G as g,K as R}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{B as z}from"./Color-CERqXxxY-BuYn26eI.js";import{u as S}from"./reader-DcGs6kKN-DHJfK-tm.js";import{z as F}from"./Extent-CgDMOSRD-CU1qE5Kr.js";import{b as X}from"./Point-BfTTZoMu-BAT2Wq6O.js";let y=class extends P{get affectsPixelSize(){return!1}forwardTransform(e){return e}inverseTransform(e){return e}};l([h()],y.prototype,"affectsPixelSize",null),l([h({json:{write:!0}})],y.prototype,"spatialReference",void 0),y=l([g("esri.layers.support.rasterTransforms.BaseRasterTransform")],y);var C;let d=C=class extends y{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(e){return(e=e.clone()).type==="point"?(e.x>180+this.tolerance&&(e.x-=360),e):(e.xmin>=180-this.tolerance?(e.xmax-=360,e.xmin-=360):e.xmax>180+this.tolerance&&(e.xmin=-180,e.xmax=180),e)}inverseTransform(e){return(e=e.clone()).type==="point"?(e.x<-this.tolerance&&(e.x+=360),e):(e.xmin<-this.tolerance&&(e.xmin+=360,e.xmax+=360),e)}clone(){return new C({tolerance:this.tolerance})}};l([z({GCSShiftXform:"gcs-shift"})],d.prototype,"type",void 0),l([h()],d.prototype,"tolerance",void 0),d=C=l([g("esri.layers.support.rasterTransforms.GCSShiftTransform")],d);var v;function w(e,o,s){const{x:r,y:t}=o;if(s<2)return{x:e[0]+r*e[2]+t*e[4],y:e[1]+r*e[3]+t*e[5]};if(s===2){const p=r*r,T=t*t,O=r*t;return{x:e[0]+r*e[2]+t*e[4]+p*e[6]+O*e[8]+T*e[10],y:e[1]+r*e[3]+t*e[5]+p*e[7]+O*e[9]+T*e[11]}}const n=r*r,a=t*t,u=r*t,i=n*r,m=n*t,x=r*a,f=t*a;return{x:e[0]+r*e[2]+t*e[4]+n*e[6]+u*e[8]+a*e[10]+i*e[12]+m*e[14]+x*e[16]+f*e[18],y:e[1]+r*e[3]+t*e[5]+n*e[7]+u*e[9]+a*e[11]+i*e[13]+m*e[15]+x*e[17]+f*e[19]}}function Y(e,o,s){const{xmin:r,ymin:t,xmax:n,ymax:a,spatialReference:u}=o;let i=[];if(s<2)i.push({x:r,y:a}),i.push({x:n,y:a}),i.push({x:r,y:t}),i.push({x:n,y:t});else{let f=10;for(let p=0;p<f;p++)i.push({x:r,y:t+(a-t)*p/(f-1)}),i.push({x:n,y:t+(a-t)*p/(f-1)});f=8;for(let p=1;p<=f;p++)i.push({x:r+(n-r)*p/f,y:t}),i.push({x:r+(n-r)*p/f,y:a})}i=i.map(f=>w(e,f,s));const m=i.map(f=>f.x),x=i.map(f=>f.y);return new F({xmin:Math.min.apply(null,m),xmax:Math.max.apply(null,m),ymin:Math.min.apply(null,x),ymax:Math.max.apply(null,x),spatialReference:u})}function G(e){const[o,s,r,t,n,a]=e,u=r*a-n*t,i=n*t-r*a;return[(n*s-o*a)/u,(r*s-o*t)/i,a/u,t/i,-n/u,-r/i]}let c=v=class extends y{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(e,o){const{coeffX:s,coeffY:r}=o;if(!s?.length||!r?.length||s.length!==r.length)return null;const t=[];for(let n=0;n<s.length;n++)t.push(s[n]),t.push(r[n]);return t}writeForwardCoefficients(e,o,s){const r=[],t=[];for(let n=0;n<e?.length;n++)n%2==0?r.push(e[n]):t.push(e[n]);o.coeffX=r,o.coeffY=t}get inverseCoefficients(){let e=this._get("inverseCoefficients");const o=this._get("forwardCoefficients");return!e&&o&&this.polynomialOrder<2&&(e=G(o)),e}set inverseCoefficients(e){this._set("inverseCoefficients",e)}readInverseCoefficients(e,o){const{inverseCoeffX:s,inverseCoeffY:r}=o;if(!s?.length||!r?.length||s.length!==r.length)return null;const t=[];for(let n=0;n<s.length;n++)t.push(s[n]),t.push(r[n]);return t}writeInverseCoefficients(e,o,s){const r=[],t=[];for(let n=0;n<e?.length;n++)n%2==0?r.push(e[n]):t.push(e[n]);o.inverseCoeffX=r,o.inverseCoeffY=t}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(e){if(e.type==="point"){const o=w(this.forwardCoefficients,e,this.polynomialOrder);return new X({x:o.x,y:o.y,spatialReference:e.spatialReference})}return Y(this.forwardCoefficients,e,this.polynomialOrder)}inverseTransform(e){if(e.type==="point"){const o=w(this.inverseCoefficients,e,this.polynomialOrder);return new X({x:o.x,y:o.y,spatialReference:e.spatialReference})}return Y(this.inverseCoefficients,e,this.polynomialOrder)}clone(){return new v({polynomialOrder:this.polynomialOrder,forwardCoefficients:this.forwardCoefficients?[...this.forwardCoefficients]:null,inverseCoefficients:this.inverseCoefficients?[...this.inverseCoefficients]:null})}};l([h({json:{write:!0}})],c.prototype,"polynomialOrder",void 0),l([h()],c.prototype,"forwardCoefficients",void 0),l([S("forwardCoefficients",["coeffX","coeffY"])],c.prototype,"readForwardCoefficients",null),l([R("forwardCoefficients")],c.prototype,"writeForwardCoefficients",null),l([h({json:{write:!0}})],c.prototype,"inverseCoefficients",null),l([S("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],c.prototype,"readInverseCoefficients",null),l([R("inverseCoefficients")],c.prototype,"writeInverseCoefficients",null),l([h()],c.prototype,"affectsPixelSize",null),l([z({PolynomialXform:"polynomial"})],c.prototype,"type",void 0),c=v=l([g("esri.layers.support.rasterTransforms.PolynomialTransform")],c);export{c,d,y as h};
