const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geodesicBufferOperator-Dht20fDo-CkoTMmkn.js","assets/index-B0z_nLWi.js","assets/index-Cv2ko1Ob.css","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/Point-BfTTZoMu-DeJwQYfh.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/operatorGeodesicBuffer-D6ghYdYS-BroAUXxL.js","assets/SimpleGeometryCursor-B92kdZ15-B1Z6elF7.js","assets/geodeticCurveType-CirnHLSB-CirnHLSB.js"])))=>i.map(i=>d[i]);
import{H as X,_ as Q}from"./index-B0z_nLWi.js";import{aM as ee,e as te,aK as S,I as se,ab as re,a7 as b,Y as i,H as o,G as g,L as B,bh as T}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{ah as k,R,aP as Z,a1 as _,aT as ie,$ as ne,ag as O,aI as ae,bi as oe}from"./Point-BfTTZoMu-DeJwQYfh.js";import{N as le,B as U,J as pe}from"./projectionUtils-BGH_5_I3-DGwchVO8.js";import{am as ue}from"./Polygon-D6wEPb3W-D2MPjRU4.js";import{P as me,y as q,m as E,s as ye}from"./jsonUtils-CmpazY1u-6pDLj5sx.js";import{l as ce}from"./normalizeUtils-85zLqeMi-C1bdAKNn.js";import{B as f}from"./Color-CERqXxxY-BuYn26eI.js";import{c as G}from"./NormalizationBinParametersMixin-BK9wNkI3-BKYeOhDN.js";import{Y as D}from"./collectionUtils-jDyktm0P-BDP2Oq99.js";const C=(e,t=C,s=t.f||(t.f=["assets/geodesicBufferOperator-Dht20fDo.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/jsonMap-Bs3hmeCU.js","assets/Point-BfTTZoMu.js","assets/reader-DcGs6kKN.js","assets/operatorGeodesicBuffer-D6ghYdYS.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/geodeticCurveType-CirnHLSB.js"]))=>e.map(r=>s[r]),F=[0,0];function H(e,t){if(!t)return null;if("x"in t){const s={x:0,y:0};return[s.x,s.y]=e(t.x,t.y,F),t.z!=null&&(s.z=t.z),t.m!=null&&(s.m=t.m),s}if("xmin"in t){const s={xmin:0,ymin:0,xmax:0,ymax:0};return[s.xmin,s.ymin]=e(t.xmin,t.ymin,F),[s.xmax,s.ymax]=e(t.xmax,t.ymax,F),t.hasZ&&(s.zmin=t.zmin,s.zmax=t.zmax,s.hasZ=!0),t.hasM&&(s.mmin=t.mmin,s.mmax=t.mmax,s.hasM=!0),s}return"rings"in t?{rings:P(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:P(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:L(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function P(e,t){const s=[];for(const r of e)s.push(L(r,t));return s}function L(e,t){const s=[];for(const r of e){const n=t(r[0],r[1],[0,0]);s.push(n),r.length>2&&n.push(r[2]),r.length>3&&n.push(r[3])}return s}async function Y(e,t){if(!e||!t)return;const s=Array.isArray(e)?e.map(r=>r.geometry!=null?r.geometry.spatialReference:null).filter(te):[e];await le(s.map(r=>({source:r,dest:t})))}const J=H.bind(null,ae),K=H.bind(null,oe);function V(e,t,s,r){if(!e)return null;if(s||(s=t,t=e.spatialReference),!k(t)||!k(s)||R(t,s))return e;if(Z(t,s)){const n=_(s)?J(e):K(e);return n.spatialReference=s,n}return U([e],t,s,r)[0]}class de{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,s,r,n){if(!t?.length||!s||!r||R(s,r))return t;const l={geometries:t,inSpatialReference:s,outSpatialReference:r,options:n,resolve:re()};return this._jobs.push(l),this._timer??=setTimeout(this._process,10),l.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:s,inSpatialReference:r,outSpatialReference:n,resolve:l,options:u}=t;Z(r,n)&&u?.extendedParams==null?_(n)?l(s.map(J)):l(s.map(K)):l(U(s,r,n,u)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const fe=new de;function $e(e,t,s,r){return fe.push(e,t,s,r)}const he=new S({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),z=Object.freeze({}),ve="frequency";async function Ze(e,t,s){const r=e.bin;return r.onField&&(r.onField=r.onField.trim()),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),"normalizationField"in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),e.outStatistics?.length||(e.outStatistics=[{statisticType:"count",onStatisticField:"1",outStatisticFieldName:ve}]),ge(e,t,s)}async function ge(e,t,s){const{outFields:r,orderByFields:n,groupByFieldsForStatistics:l,outStatistics:u}=e;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(l)for(let a=0;a<l.length;a++)l[a]=l[a].trim();if(u)for(let a=0;a<u.length;a++)u[a].onStatisticField&&(u[a].onStatisticField=u[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),xe(e,t,s)}async function xe(e,t,s){if(!e)return null;let{where:r}=e;if(e.where=r=r?.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let n=await we(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:l}=e.geometry;n=ue(n),n.spatialReference=l}if(n){await Y(n.spatialReference,s),n=Be(n,s);const l=(await ce(me(n)))[0];if(l==null)throw z;const u="quantizationParameters"in e&&e.quantizationParameters?.tolerance||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,a=u&&W(n,s)?{extendedParams:{densificationStep:8*u}}:void 0,h=l.toJSON(),j=V(h,h.spatialReference,s,a);if(!j)throw z;j.spatialReference=s,e.geometry=j}return e}function W(e,t){if(!e)return!1;const s=e.spatialReference;return(E(e)||q(e)||ye(e))&&!R(s,t)&&!pe(s,t)}function Be(e,t){const s=e.spatialReference;return W(e,t)&&E(e)?{spatialReference:s,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function we(e){const{distance:t,units:s}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const n=r.spatialReference,l=s?he.fromJSON(s):ie(n),u=n&&(ne(n)||_(n))?r:await Y(n,O).then(()=>V(r,O)),a=await X(()=>Q(()=>import("./geodesicBufferOperator-Dht20fDo-CkoTMmkn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),C([0,1,2,3,4,5,6,7,8]));await a.load();const h=a.execute(u,t||1,{unit:l})??void 0;if(!h||!q(h)||h.rings.length===0)throw new se("unsupported-query:invalid-parameters","Invalid parameters for query by distance");return h}function Ue(e,t){return e==null?null:typeof e=="string"?t?new Date(`1970-01-01T${e}Z`).getTime():new Date(e).getTime():e instanceof Date?e.getTime():e}const Se=new S({esriFieldTypeInteger:"integer",esriFieldTypeString:"string"});let y=class extends D(b){constructor(e){super(e),this.alias=null,this.responseType=null,this.type=null,this.value=null,this.valueType=null}};i([o({type:String,json:{name:"outAlias",write:!0}})],y.prototype,"alias",void 0),i([o({type:String})],y.prototype,"responseType",void 0),i([o({type:String,json:{write:!0}})],y.prototype,"type",void 0),i([o({type:String,json:{write:!0}})],y.prototype,"value",void 0),i([f(Se)],y.prototype,"valueType",void 0),y=i([g("esri.rest.support.AttributeBinsGrouping")],y);const w=y;y.from=B(y);const Te=new S({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeDate:"date",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"}),je=new S({naturalLog:"natural-log",squareRoot:"square-root"});let p=class extends D(b){constructor(e){super(e),this.expression=null,this.expressionValueType=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitBy=null,this.stackBy=null,this.transformation=null}};i([o({type:String,json:{name:"onExpression.value",write:!0}})],p.prototype,"expression",void 0),i([f(Te,{name:"onExpression.valueType"})],p.prototype,"expressionValueType",void 0),i([o({type:String,json:{name:"onField",write:!0}})],p.prototype,"field",void 0),i([o({type:String,json:{write:!0}})],p.prototype,"firstDayOfWeek",void 0),i([o({type:String,json:{write:!0}})],p.prototype,"hideUpperBound",void 0),i([o({type:w,json:{write:{overridePolicy(){return{enabled:this.splitBy?.value!=null||this.splitBy?.type!=null}}}}})],p.prototype,"splitBy",void 0),i([o({type:w,json:{write:{target:{stackBy:{type:w},jsonStyle:{type:String}},writer:(e,t)=>{e&&(t.stackBy=e.toJSON(),e.responseType!=null&&(t.jsonStyle=e.responseType))},overridePolicy(){return{enabled:this.stackBy?.value!=null||this.stackBy?.type!=null}}},read:{source:["stackBy","jsonStyle"],reader:(e,t)=>w.fromJSON({...t.stackBy,responseType:t.jsonStyle})}}})],p.prototype,"stackBy",void 0),i([f(je)],p.prototype,"transformation",void 0),p=i([g("esri.rest.support.BinParametersBase")],p);function I(e,t,s){T(s,e instanceof Date?e.getTime():e,t)}let c=class extends G(p){constructor(e){super(e),this.numBins=null,this.end=null,this.start=null,this.type="auto-interval"}};i([o({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],c.prototype,"numBins",void 0),i([o({json:{name:"parameters.end",write:{writer:I}}})],c.prototype,"end",void 0),i([o({json:{name:"parameters.start",write:{writer:I}}})],c.prototype,"start",void 0),i([f({autoIntervalBin:"auto-interval"},{readOnly:!0})],c.prototype,"type",void 0),c=i([g("esri.rest.support.AutoIntervalBinParameters")],c),c.from=B(c);const Fe=ee()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});let v=class extends D(b){constructor(e){super(e),this.value=null,this.unit=null}};i([o({type:Number,json:{name:"number",write:!0}})],v.prototype,"value",void 0),i([f(Fe)],v.prototype,"unit",void 0),v=i([g("esri.rest.support.DateBinTimeInterval")],v);const M=v;v.from=B(v);function A(e,t,s){T(s,typeof e=="string"?e:e?.getTime(),t)}function N(e,t){const s=e.parameters[t];return s?typeof s=="string"?s:new Date(s):null}let m=class extends p{constructor(e){super(e),this.end=null,this.interval=null,this.offset=null,this.returnFullIntervalBin=!1,this.start=null,this.snapToData=null,this.type="date"}};i([o({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.end",read:{reader:(e,t)=>N(t,"end")},write:{writer:A}}})],m.prototype,"end",void 0),i([o({type:M,json:{name:"parameters",write:!0}})],m.prototype,"interval",void 0),i([o({type:M,json:{name:"parameters.offset",write:!0}})],m.prototype,"offset",void 0),i([o({type:Boolean,json:{name:"parameters.returnFullIntervalBin",write:!0}})],m.prototype,"returnFullIntervalBin",void 0),i([o({cast:e=>e!=null?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.start",read:{reader:(e,t)=>N(t,"start")},write:{writer:A}}})],m.prototype,"start",void 0),i([o({type:String,json:{name:"parameters.snapToData",write:!0}})],m.prototype,"snapToData",void 0),i([f({dateBin:"date"},{readOnly:!0})],m.prototype,"type",void 0),m=i([g("esri.rest.support.DateBinParameters")],m),m.from=B(m);function be(e){return e[0]instanceof Date}function Re(e,t,s){T(s,e&&be(e)?e.map(r=>r.getTime()):e,t)}let x=class extends p{constructor(e){super(e),this.boundaries=[],this.type="fixed-boundaries"}};i([o({json:{name:"parameters.boundaries",write:{writer:Re}}})],x.prototype,"boundaries",void 0),i([f({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],x.prototype,"type",void 0),x=i([g("esri.rest.support.FixedBoundariesBinParameters")],x),x.from=B(x);function $(e,t,s){T(s,e instanceof Date?e.getTime():e,t)}let d=class extends G(p){constructor(e){super(e),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};i([o({json:{name:"parameters.end",write:{writer:$}}})],d.prototype,"end",void 0),i([o({type:Number,json:{name:"parameters.interval",write:!0}})],d.prototype,"interval",void 0),i([o({json:{name:"parameters.start",write:{writer:$}}})],d.prototype,"start",void 0),i([f({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],d.prototype,"type",void 0),d=i([g("esri.rest.support.FixedIntervalBinParameters")],d),d.from=B(d);export{Fe as $,z as A,V as K,Ze as M,Ue as N,Y as W,he as a,c,d,ge as h,m,p,xe as v,x,$e as z};
