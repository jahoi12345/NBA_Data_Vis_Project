const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ElevationQuery-DzlYa4L4-DkUTW9Ak.js","assets/asyncUtils-w6KfWU41-HenJ0UOu.js","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/Point-BfTTZoMu-DeJwQYfh.js","assets/index-B0z_nLWi.js","assets/index-Cv2ko1Ob.css","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/projectionUtils-BGH_5_I3-DGwchVO8.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/collectionUtils-jDyktm0P-BDP2Oq99.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/Extent-CgDMOSRD-Bod5LY6s.js","assets/Polyline-CoiTLswR-DTxpB2Yg.js","assets/Polygon-D6wEPb3W-D2MPjRU4.js","assets/aaBoundingRect-CjwcS2F3-ri8bmh30.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/TileKey-CXWFOqOI-Lra6v-mg.js"])))=>i.map(i=>d[i]);
import{H as c,_ as d}from"./index-B0z_nLWi.js";import{aq as w,I as g,J as T,o as m,Y as o,H as a,G as j}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{H as h,A as _}from"./Point-BfTTZoMu-DeJwQYfh.js";import{k as S}from"./MultiOriginJSONSupport-Bd1TKmh_-BHNF5tHX.js";import{u as y}from"./reader-DcGs6kKN-DHJfK-tm.js";import{r as b}from"./HeightModelInfo-D5IdRvJ2-23y6MRiu.js";import{o as I}from"./Layer-DZvC7bne-D3VLDrab.js";import{w as O}from"./ArcGISCachedService-DdpDXeQC-DLG4_JDB.js";import{c as D}from"./ArcGISService-SIwch9bz-DEFXc423.js";import{C,f as E}from"./OperationalLayer-B6zbJ5nR-DyK_ztCk.js";import{z as U}from"./PortalLayer-CbFNhtZ4-Doeialq-.js";import{V as L,d as P}from"./LercDecoder-DToR6m7T-BSHqwzYu.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./collectionUtils-jDyktm0P-BDP2Oq99.js";import"./Extent-CgDMOSRD-Bod5LY6s.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./TileInfo-Bz7QlefV-CdK7c8ef.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./TilemapCache-CjhKW_vj-8gKqgQfa.js";import"./LRUCache-fy84PBMi-Y56WPIvD.js";import"./ElevationInfo-Cw2HaA6E-CuK5hJ96.js";import"./lengthUtils-Dt1_RvOO-j3MEdmHu.js";import"./unitConversionUtils-4vB4Ezlp-DnY5MDxd.js";import"./asyncUtils-w6KfWU41-HenJ0UOu.js";import"./PortalItem-DnxMlRVo-CI4Ns2_M.js";import"./projectionUtils-BGH_5_I3-DGwchVO8.js";import"./Polyline-CoiTLswR-DTxpB2Yg.js";import"./Polygon-D6wEPb3W-D2MPjRU4.js";import"./workers-BEkgoq8Q-BM_Hz460.js";import"./intl-DRFqUect-DPhFaHB2.js";import"./TileInfoTilemapCache-B40skWYU-CeKS3ZnT.js";import"./layerContainerType-CSXZNpHb-BIF7XAYP.js";import"./opacityUtils-DuFH0EC9-DWspTgn2.js";import"./layerUtils-DZGhvm-W-CfyHx1TZ.js";import"./portalItemUtils-CaPNUJg6-CXDHI5LA.js";import"./WorkerHandle-B930SiRy-DglEKt53.js";import"./SimpleObservable-CvFyr0NA-DXpoMYph.js";import"./TileKey-CXWFOqOI-Lra6v-mg.js";import"./aaBoundingRect-CjwcS2F3-ri8bmh30.js";import"./memoryEstimations-Bd726a_p-0cVCY2Jz.js";import"./Queue-CYlrXMwB-CYJTUII-.js";const n=(t,r=n,e=r.f||(r.f=["assets/ElevationQuery-DzlYa4L4.js","assets/asyncUtils-w6KfWU41.js","assets/jsonMap-Bs3hmeCU.js","assets/Point-BfTTZoMu.js","assets/reader-DcGs6kKN.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/projectionUtils-BGH_5_I3.js","assets/SimpleObservable-CvFyr0NA.js","assets/collectionUtils-jDyktm0P.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-CgDMOSRD.js","assets/Polyline-CoiTLswR.js","assets/Polygon-D6wEPb3W.js","assets/aaBoundingRect-CjwcS2F3.js","assets/mathUtils-PIGhLnI9.js","assets/TileKey-CXWFOqOI.js"]))=>t.map(i=>e[i]);let s=class extends O(D(C(U(S(I))))){constructor(...t){super(...t),this.capabilities={operations:{supportsTileMap:!1}},this.copyright=null,this.heightModelInfo=null,this.path=null,this.minScale=void 0,this.maxScale=void 0,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=L()}normalizeCtorArgs(t,r){return typeof t=="string"?{url:t,...r}:t}destroy(){this._lercDecoder=w(this._lercDecoder)}readCapabilities(t,r){const e=r.capabilities&&r.capabilities.split(",").map(i=>i.toLowerCase().trim());return e?{operations:{supportsTileMap:e.includes("tilemap")}}:{operations:{supportsTileMap:!1}}}readVersion(t,r){let e=r.currentVersion;return e||(e=9.3),e}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{if(e.typeKeywords){for(let i=0;i<e.typeKeywords.length;i++)if(e.typeKeywords[i].toLowerCase()==="elevation 3d layer")return!0}throw new g("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},t).catch(T).then(()=>this._fetchImageService(r))),Promise.resolve(this)}fetchTile(t,r,e,i){const l=i?.signal,f={responseType:"array-buffer",signal:l},v={noDataValue:i?.noDataValue,returnFileInfo:!0};return this.load().then(()=>this._fetchTileAvailability(t,r,e,i)).then(()=>h(this.getTileUrl(t,r,e),f)).then(p=>this._lercDecoder.decode(p.data,v,l)).then(p=>new P(p))}getTileUrl(t,r,e){const i=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,l=_({...this.parsedUrl.query,blankTile:!i&&null});return`${this.parsedUrl.path}/tile/${t}/${r}/${e}${l?"?"+l:""}`}async queryElevation(t,r){const{query:e}=await c(()=>d(()=>import("./ElevationQuery-DzlYa4L4-DkUTW9Ak.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(i=>i.E),n([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]));return m(r),e(this,t,r)}async createElevationSampler(t,r){const{createSampler:e}=await c(()=>d(()=>import("./ElevationQuery-DzlYa4L4-DkUTW9Ak.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(i=>i.E),n([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]));return m(r),e(this,t,r)}_fetchTileAvailability(t,r,e,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(t,r,e,i):Promise.resolve("unknown")}async _fetchImageService(t){if(this.sourceJSON)return this.sourceJSON;const r={query:{f:"json",...this.parsedUrl.query},responseType:"json",signal:t},e=await h(this.parsedUrl.path,r);e.ssl&&(this.url=this.url?.replace(/^http:/i,"https:")),this.sourceJSON=e.data,this.read(e.data,{origin:"service",url:this.parsedUrl})}get hasOverriddenFetchTile(){return!this.fetchTile[u]}};o([a({readOnly:!0})],s.prototype,"capabilities",void 0),o([y("service","capabilities",["capabilities"])],s.prototype,"readCapabilities",null),o([a({json:{read:{source:"copyrightText"}}})],s.prototype,"copyright",void 0),o([a({readOnly:!0,type:b})],s.prototype,"heightModelInfo",void 0),o([a({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],s.prototype,"path",void 0),o([a({type:["show","hide"]})],s.prototype,"listMode",void 0),o([a({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],s.prototype,"minScale",void 0),o([a({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],s.prototype,"maxScale",void 0),o([a({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],s.prototype,"opacity",void 0),o([a({type:["ArcGISTiledElevationServiceLayer"]})],s.prototype,"operationalLayerType",void 0),o([a()],s.prototype,"sourceJSON",void 0),o([a({json:{read:!1},value:"elevation",readOnly:!0})],s.prototype,"type",void 0),o([a(E)],s.prototype,"url",void 0),o([a()],s.prototype,"version",void 0),o([y("version",["currentVersion"])],s.prototype,"readVersion",null),s=o([j("esri.layers.ElevationLayer")],s);const u=Symbol("default-fetch-tile");s.prototype.fetchTile[u]=!0;const Te=s;export{Te as default};
