function O(t){return typeof t=="function"}function v(t,r,n,e){return O(t)?t(r,n,e):t}const V=` /-,
`;function h(t){let r=t.length;for(;r--;)if(!V.includes(t.charAt(r)))return!1;return!0}function R(t,r){const n=[];let e=0,o=-1;do if(o=t.indexOf("[",e),o>=e){if(o>e){const l=t.slice(e,o);n.push([l,null,h(l)])}if(e=o+1,o=t.indexOf("]",e),o>=e){if(o>e){const l=r[t.slice(e,o)];l&&n.push([null,l,!1])}e=o+1}}while(o!==-1);if(e<t.length){const l=t.slice(e);n.push([l,null,h(l)])}return n}function X(t,r,n){let e="",o=null;for(const l of r){const[s,u,a]=l;if(s!=null&&s!=="")a?o=s:(o!=null&&(e+=o,o=null),e+=s);else{const i=t.readAttribute(u);i!=null&&i!==""&&(o!==null&&(e+=o,o=null),e+=i)}}return P(e,n)}function Y(t,r,n,e){let o="",l=null;for(const s of r){const[u,a,i]=s;if(u!=null&&u!=="")i?l=u:(l!=null&&(o+=l,l=null),o+=u);else{let f=a;n!=null&&(f=F(a,n));const c=t.attributes[f];c!=null&&c!==""&&(l!=null&&(o+=l,l=null),o+=c)}}return P(o,e)}function P(t,r){switch(typeof t!="string"&&(t=String(t)),r){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function j(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function D(t){return t.data?.symbol??null}function H(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function J(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function U(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const W=(t,r=0)=>t==null||isNaN(t)?r:t;class _{constructor(r){this._import=r}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(r=>this.module=r)),this._promise}}function E(t){return new _(t)}function K(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function $(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Q(t){let r="normal",n="normal";if(t){const e=t.toLowerCase();e.includes("italic")?r="italic":e.includes("oblique")&&(r="oblique"),e.includes("bold")?n="bold":e.includes("light")&&(n="lighter")}return{style:r,weight:n}}function Z(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function C(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const r of t.symbolLayers){const n=C(r);if(n!=null)return n}break;case"CIMTextSymbol":return C(t.symbol);case"CIMSolidFill":return t.color}return null}function b(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const r=t.symbolLayers;if(r)for(const n of r){const e=b(n);if(e!=null)return e}break}case"CIMTextSymbol":return b(t.symbol);case"CIMSolidStroke":return t.color}}function d(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const r of t.symbolLayers){const n=d(r);if(n!==void 0)return n}break;case"CIMTextSymbol":return d(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function tt(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function rt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function nt(t){return(t?Object.keys(t):[]).map(r=>({name:r,alias:r,type:typeof t[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const et=t=>t.includes("data:image/svg+xml");function ot(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function L(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function lt(t,r,n,e,o,l,s=!0){const{infos:u}=l;let a=1,i=0,f=0,c=0,m=1;for(const{absoluteAnchorPoint:A,offsetX:y,offsetY:M,rotation:T,size:N,frameHeight:p,rotateClockWise:G,scaleSymbolsProportionally:z}of u)m=A?1:a,f=k(y,M,i,m,f),c=S(y,M,i,m,c),p&&(z||s)&&(a*=N/p),i=g(T,G,i);const w=k(e,o,i,m,f),x=S(e,o,i,m,c);return{size:t*a,rotation:g(r,n,i),offsetX:w,offsetY:x}}function q(t){return t.split(" ").map(r=>Number(r))}function B(t){return typeof t=="string"?q(t):t}function it(t){return t?.dashTemplate&&(t.dashTemplate=B(t.dashTemplate)),t}function I(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=t.symbolLayers;if(!r)return"Normal";for(const n of r)if(n.type==="CIMVectorMarker")return I(n)}break;case"CIMVectorMarker":{const r=t.markerGraphics;if(!r)return"Normal";for(const n of r)if(n.symbol)return I(n.symbol)}}return"Normal"}function F(t,r){if(r!==null){const n=r.get(t);return n?n.name:t}return t}function st(t){return t.map(r=>({...r,propertyName:L(r.propertyName)}))}function ut(t){const r={};for(const n in t){const e=t[n];r[L(n)]=e}return r}function S(t,r,n,e,o){const l=n*Math.PI/180;if(l){const s=Math.cos(l);return(Math.sin(l)*t+s*r)*e+o}return r*e+o}function k(t,r,n,e,o){const l=n*Math.PI/180;return l?(Math.cos(l)*t-Math.sin(l)*r)*e+o:t*e+o}function g(t,r,n){return r?n-t:n+t}function at(t,r){return Math.max(Math.min((t??r)/100,1),0)}export{Z as A,it as B,J as C,L as D,tt as F,et as G,I as H,W as I,Q as L,j as M,b as N,ot as O,E as P,C as T,rt as V,st as X,ut as Y,R as a,Y as c,at as e,K as g,U as h,H as m,v as n,lt as q,X as s,d as v,$ as w,D as y,nt as z};
