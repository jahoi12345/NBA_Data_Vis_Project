import{u as l}from"./Color-CERqXxxY.js";import{G as f,s as h}from"./jsonMap-Bs3hmeCU.js";import{u as s}from"./screenUtils-BitdhK1O.js";import{u as p,r as c}from"./vec4f64-DPb6J-GU.js";import{r as o}from"./mathUtils-PIGhLnI9.js";function d(n){return n.type==="fill"}function $(n){return n.type==="extrude"}function P(n){return n&&n.enabled&&($(n)||d(n))&&n.edges!=null}function m(n){return n&&n.enabled&&n.edges||null}function A(n,e){return y(m(n),e)}function y(n,e){if(n==null)return null;const t=n.color!=null?p(l.toUnitRGBA(n.color)):c(0,0,0,0),r=s(n.size),u=s(n.extensionLength);switch(n.type){case"solid":return g({color:t,size:r,extensionLength:u,...e});case"sketch":return b({color:t,size:r,extensionLength:u,...e});default:return}}function g(n){return{...x,...n,type:0}}function b(n){return{...w,...n,type:1}}const x={color:c(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:1,hasSlicePlane:!1},w={color:c(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:1,hasSlicePlane:!1};function B(n){switch(n){case"multiply":default:return 1;case"ignore":return 2;case"replace":return 3;case"tint":return 4}}function O(n,e,t){if(n==null||e===2)return t[0]=255,t[1]=255,t[2]=255,void(t[3]=255);const r=o(Math.round(n[3]*a),0,a),u=r===0||e===4?0:e===3?z:L;t[0]=o(Math.round(n[0]*i),0,i),t[1]=o(Math.round(n[1]*i),0,i),t[2]=o(Math.round(n[2]*i),0,i),t[3]=r+u}function R(n,e){for(let t=0;t<4;t++)n[t]=S(e[t]);return n}function S(n){return isNaN(n)?255:n*(254/255)}const i=255,a=85,z=a,L=2*a;function U(n){return n&&typeof n.highlight=="function"}function q(n){return n&&typeof n.maskOccludee=="function"}function k(n,e,t){return n==null||n>=t&&(e===0||n<=e)}function C(n,e){if(e&&n){const{minScale:t,maxScale:r}=n;if(v(t,r))return k(e,t,r)}return!0}function v(n,e){return n!=null&&n>0||e!=null&&e>0}function D(n){return!n?.minScale||!n.maxScale||n.minScale>=n.maxScale}const E=()=>!f("disable-feature:layer-based-scale-visibility");function F(n,e,t){return new h("layerview:spatial-reference-incompatible",`The spatial reference of this ${n} (wkid: ${e??"undefined"}) is incompatible with the spatial reference of the view (wkid: ${t??"undefined"}).`,{})}export{E as a,g as b,v as c,y as d,k as e,R as f,A as g,O as h,q as i,F as l,U as n,B as r,P as s,C as t,D as u};
