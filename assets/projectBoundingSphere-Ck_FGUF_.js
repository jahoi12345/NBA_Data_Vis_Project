import{s as h}from"./mathUtils-PIGhLnI9.js";import{n as $}from"./collectionUtils-0LMOubEE.js";import{I as j,d as A,w as l,e as U}from"./projectionUtils-DgeaYumr.js";import{a6 as M}from"./Point-C1MrKtFQ.js";import{I as p,V as m}from"./sphere-CJMW5PSr.js";function X(r,u,t,a){if(u==null||a==null)return!1;const n=j(u,a);if(n?.projector==null)return!1;if(n.projector===A)return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3]),!0;const{source:e,dest:c,projector:I}=n;if(c.spatialReferenceId===3){const s=l[e.spatialReferenceId][2];if(s==null)return!1;s(p(r),0,d,0),U(d,0,o,0);const i=R(d[1],r[2],r[3],M.radius);return m(t,o,i),!0}if(e.spatialReferenceId!==2&&e.spatialReferenceId!==5||c.spatialReferenceId!==11){I(p(r),0,o,0);const s=e.metersPerUnit??1,i=c.metersPerUnit??1,f=r[3]*s/i;m(t,o,f)}else{const s=l[e.spatialReferenceId][1],i=l[1][11];let f=r[3];s!=null&&i!=null&&(f=R(r[1],r[2],r[3],M.radius)),I(p(r),0,o,0),m(t,o,f)}return!0}function R(r,u,t,a){const n=a+u;if(n<a/2||t>n)return Number.MAX_VALUE;const e=Math.abs(b*r)+Math.asin(t/n);return e>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(e)}const d=$(),o=$(),b=h(1);export{X as l};
