import"./index-B021OJ1T-DvI8VjwK.js";import"./customElement-2pnBnWCR-CobUMeR0.js";import{L as Et,C as ee,S as M,$ as P,y as yt,b as It,N as Rt}from"./modeUtils-BA-mAwuS-DSb1K26b.js";import{m as _e}from"./keyed-Bf4YB-TJ-CUmck11Z.js";import{s as he,y as di}from"./dom-B0I8tRvb-ClUiITAF.js";import"./index-DPItRse1-CoBiXKqx.js";import"./index-C4pc3vSs-DApDfAtd.js";import{n as At}from"./index-BpEhGnc8-BsrX6G9i.js";import{m as ut,M as hi}from"./ref-BDl3YEzd-B_a8OoM-.js";import{E as Ht,m as Xt}from"./interactive-CN95A_Z_-Cni5YKxj.js";import{s as Bt}from"./useCancelable-Ckk-I42I-DlFfNPAF.js";import{e as zt}from"./useT9n-CZ94CLEK-BDNIUQrj.js";import{L as Yt}from"./useSetFocus-ChPWRCQz-DMe7vK27.js";import{g as jt}from"./debounce-D0Dr7phT-CLXQuVIo.js";import{c as ui}from"./observers-BuKI3rEh-B77G_MNx.js";import{r as De,h as Ne,c as et,d as fi,o as ft,a as _t}from"./utils2-BdhOZDB1-C_tPoReQ.js";import{i as pi}from"./guid-LcV_DAvu-CBh637k4.js";import"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import"./intl-DRFqUect-DPhFaHB2.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./Point-BfTTZoMu-DeJwQYfh.js";import"./index-B0z_nLWi.js";import"./sanitizerUtils-BT_8V5US-CWQWUwZQ.js";import"./index-BydpoIod-BoRnEAlL.js";import"./uuid-Oe6SV2kF-IYX19xBA.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./static-DACmO_6Y-CeviQOdG.js";import"./form-CeAwoRly-DuT57cmk.js";import"./key-Cyh_1epf-CxH4ZZuS.js";import"./label-BEGL2zKa-uUQReu1t.js";function gi(e){return e}function mi(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}const pe={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},be={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"},vi=yt`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`;class bi extends Et{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}static{this.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=vi}handleActionsStartSlotChange(t){this.hasActionsStart=he(t)}handleActionsEndSlotChange(t){this.hasActionsEnd=he(t)}handleContentStartSlotChange(t){this.hasContentStart=he(t)}handleContentEndSlotChange(t){this.hasContentEnd=he(t)}renderActionsStart(){const{hasActionsStart:t}=this;return _e("actions-start-container",P`<div class=${M(pe.actionsStart)} .hidden=${!t}><slot name=${be.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:t}=this;return _e("actions-end-container",P`<div class=${M(pe.actionsEnd)} .hidden=${!t}><slot name=${be.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:t}=this;return P`<div class=${M(pe.contentStart)} .hidden=${!t}><slot name=${be.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return P`<div class=${M(pe.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:t}=this;return P`<div class=${M(pe.contentEnd)} .hidden=${!t}><slot name=${be.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return P`<div class=${M(pe.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}}It("calcite-stack",bi);function Ut(e){if(e==null)return"";if(typeof e=="string")return e;if(Array.isArray(e))return e.map(Ut).join(",");const t=String(e);return t==="0"&&Object.is(Number(e),-0)?"-0":t}function Ei(e,t=gi){if(e==null)return e;for(const i in e)if(t(e[i],i,e)===!1)break;return e}function yi(e){return mi(Ut(e))}const tt=(e,t,i)=>{const n=yi(t),a=new RegExp(n,"i");e.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const r=(o,s,l)=>{if(o?.constant||o?.filterDisabled)return!0;let c=!1;return Ei(o,(h,u)=>{typeof h=="function"||h==null||l&&!l.includes(u)||(Array.isArray(h)||typeof h=="object"&&h!==null?r(h,s)&&(c=!0):s.test(h)&&(c=!0))}),c};return e.filter(o=>r(o,a,i))},Ii={container:"container"},wi={search:"search"},Si=yt`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`;class Di extends Et{constructor(){super(...arguments),this.cancelable=Bt()(this),this.filterDebounced=jt((t,i=!1,n)=>this.updateFiltered(tt(this.items??[],t,this.filterProps),i,n),Rt.filter),this.textInput=hi(),this._value="",this.messages=zt(),this.focusSetter=Yt()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=ee({cancelable:!1})}static{this.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1}}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}static{this.styles=Si}get value(){return this._value}set value(t){const i=this._value;t!==i&&(this._value=t,this.valueHandler(t))}async filter(t=this.value){return new Promise(i=>{this.value=t,this.updateFiltered(tt(this.items??[],t,this.filterProps),!1,i)})}async setFocus(t){return this.focusSetter(()=>this.textInput.value,t)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(tt(this.items??[],this.value,this.filterProps))}willUpdate(t){(t.has("items")&&(this.hasUpdated||this.items?.length>0)||t.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Ht(this)}valueHandler(t){this.filterDebounced(t)}inputHandler(t){const i=t.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(t){t.defaultPrevented||(t.key==="Escape"&&(this.clear(),t.preventDefault()),t.key==="Enter"&&t.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(t,i=!1,n){this.filteredItems=t,i&&this.calciteFilterChange.emit(),n?.()}render(){const{disabled:t,scale:i}=this;return Xt({disabled:t,children:P`<div class=${M(Ii.container)}><label><calcite-input clearable .disabled=${t} .icon=${wi.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${ut(this.textInput)}></calcite-input></label></div>`})}}It("calcite-filter",Di);function Tt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,n)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(i),!0).forEach(function(n){xi(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function ze(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ze=function(t){return typeof t}:ze=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ze(e)}function xi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Z.apply(this,arguments)}function Ci(e,t){if(e==null)return{};var i={},n=Object.keys(e),a,r;for(r=0;r<n.length;r++)a=n[r],!(t.indexOf(a)>=0)&&(i[a]=e[a]);return i}function Ai(e,t){if(e==null)return{};var i=Ci(e,t),n,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _i="1.15.6";function K(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var q=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),$e=K(/Edge/i),Pt=K(/firefox/i),Te=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),wt=K(/iP(ad|od|hone)/i),Gt=K(/chrome/i)&&K(/android/i),Wt={capture:!1,passive:!1};function E(e,t,i){e.addEventListener(t,i,!q&&Wt)}function b(e,t,i){e.removeEventListener(t,i,!q&&Wt)}function We(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Vt(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function B(e,t,i,n){if(e){i=i||document;do{if(t!=null&&(t[0]===">"?e.parentNode===i&&We(e,t):We(e,t))||n&&e===i)return e;if(e===i)break}while(e=Vt(e))}return null}var Ot=/\s+/g;function N(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(Ot," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(Ot," ")}}function f(e,t,i){var n=e&&e.style;if(n){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),t===void 0?i:i[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=i+(typeof i=="string"?"":"px")}}function ye(e,t){var i="";if(typeof e=="string")i=e;else do{var n=f(e,"transform");n&&n!=="none"&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function Kt(e,t,i){if(e){var n=e.getElementsByTagName(t),a=0,r=n.length;if(i)for(;a<r;a++)i(n[a],a);return n}return[]}function Y(){var e=document.scrollingElement;return e||document.documentElement}function C(e,t,i,n,a){if(!(!e.getBoundingClientRect&&e!==window)){var r,o,s,l,c,h,u;if(e!==window&&e.parentNode&&e!==Y()?(r=e.getBoundingClientRect(),o=r.top,s=r.left,l=r.bottom,c=r.right,h=r.height,u=r.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(t||i)&&e!==window&&(a=a||e.parentNode,!q))do if(a&&a.getBoundingClientRect&&(f(a,"transform")!=="none"||i&&f(a,"position")!=="static")){var I=a.getBoundingClientRect();o-=I.top+parseInt(f(a,"border-top-width")),s-=I.left+parseInt(f(a,"border-left-width")),l=o+r.height,c=s+r.width;break}while(a=a.parentNode);if(n&&e!==window){var m=ye(a||e),v=m&&m.a,y=m&&m.d;m&&(o/=y,s/=v,u/=v,h/=y,l=o+h,c=s+u)}return{top:o,left:s,bottom:l,right:c,width:u,height:h}}}function Lt(e,t,i){for(var n=ne(e,!0),a=C(e)[t];n;){var r=C(n)[i],o=void 0;if(o=a>=r,!o)return n;if(n===Y())break;n=ne(n,!1)}return!1}function Ie(e,t,i,n){for(var a=0,r=0,o=e.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==p.ghost&&(n||o[r]!==p.dragged)&&B(o[r],i.draggable,e,!1)){if(a===t)return o[r];a++}r++}return null}function St(e,t){for(var i=e.lastElementChild;i&&(i===p.ghost||f(i,"display")==="none"||t&&!We(i,t));)i=i.previousElementSibling;return i||null}function H(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==p.clone&&(!t||We(e,t))&&i++;return i}function Mt(e){var t=0,i=0,n=Y();if(e)do{var a=ye(e),r=a.a,o=a.d;t+=e.scrollLeft*r,i+=e.scrollTop*o}while(e!==n&&(e=e.parentNode));return[t,i]}function Ti(e,t){for(var i in e)if(e.hasOwnProperty(i)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i)}return-1}function ne(e,t){if(!e||!e.getBoundingClientRect)return Y();var i=e,n=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=f(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Y();if(n||t)return i;n=!0}}while(i=i.parentNode);return Y()}function Pi(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function it(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Pe;function Zt(e,t){return function(){if(!Pe){var i=arguments,n=this;i.length===1?e.call(n,i[0]):e.apply(n,i),Pe=setTimeout(function(){Pe=void 0},t)}}}function Oi(){clearTimeout(Pe),Pe=void 0}function qt(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Qt(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function Jt(e,t,i){var n={};return Array.from(e.children).forEach(function(a){var r,o,s,l;if(!(!B(a,t.draggable,e,!1)||a.animated||a===i)){var c=C(a);n.left=Math.min((r=n.left)!==null&&r!==void 0?r:1/0,c.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,c.top),n.right=Math.max((s=n.right)!==null&&s!==void 0?s:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var F="Sortable"+new Date().getTime();function Li(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(n){if(!(f(n,"display")==="none"||n===p.ghost)){e.push({target:n,rect:C(n)});var a=j({},e[e.length-1].rect);if(n.thisAnimationDuration){var r=ye(n,!0);r&&(a.top-=r.f,a.left-=r.e)}n.fromRect=a}})}},addAnimationState:function(i){e.push(i)},removeAnimationState:function(i){e.splice(Ti(e,{target:i}),1)},animateAll:function(i){var n=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var a=!1,r=0;e.forEach(function(o){var s=0,l=o.target,c=l.fromRect,h=C(l),u=l.prevFromRect,I=l.prevToRect,m=o.rect,v=ye(l,!0);v&&(h.top-=v.f,h.left-=v.e),l.toRect=h,l.thisAnimationDuration&&it(u,h)&&!it(c,h)&&(m.top-h.top)/(m.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(s=$i(m,u,I,n.options)),it(h,c)||(l.prevFromRect=c,l.prevToRect=h,s||(s=n.options.animation),n.animate(l,m,h,s)),s&&(a=!0,r=Math.max(r,s),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},s),l.thisAnimationDuration=s)}),clearTimeout(t),a?t=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),e=[]},animate:function(i,n,a,r){if(r){f(i,"transition",""),f(i,"transform","");var o=ye(this.el),s=o&&o.a,l=o&&o.d,c=(n.left-a.left)/(s||1),h=(n.top-a.top)/(l||1);i.animatingX=!!c,i.animatingY=!!h,f(i,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=Mi(i),f(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),f(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){f(i,"transition",""),f(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function Mi(e){return e.offsetWidth}function $i(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}var ge=[],nt={initializeByDefault:!0},Fe={mount:function(e){for(var t in nt)nt.hasOwnProperty(t)&&!(t in e)&&(e[t]=nt[t]);ge.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ge.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var a=e+"Global";ge.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][a]&&t[r.pluginName][a](j({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](j({sortable:t},i)))})},initializePlugins:function(e,t,i,n){ge.forEach(function(o){var s=o.pluginName;if(!(!e.options[s]&&!o.initializeByDefault)){var l=new o(e,t,e.options);l.sortable=e,l.options=e.options,e[s]=l,Z(i,l.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var r=this.modifyOption(e,a,e.options[a]);typeof r<"u"&&(e.options[a]=r)}},getEventProperties:function(e,t){var i={};return ge.forEach(function(n){typeof n.eventProperties=="function"&&Z(i,n.eventProperties.call(t[n.pluginName],e))}),i},modifyOption:function(e,t,i){var n;return ge.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[t]=="function"&&(n=a.optionListeners[t].call(e[a.pluginName],i))}),n}};function Fi(e){var t=e.sortable,i=e.rootEl,n=e.name,a=e.targetEl,r=e.cloneEl,o=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,h=e.oldDraggableIndex,u=e.newDraggableIndex,I=e.originalEvent,m=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[F],!!t){var y,U=t.options,O="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!q&&!$e?y=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(n,!0,!0)),y.to=o||i,y.from=s||i,y.item=a||i,y.clone=r,y.oldIndex=l,y.newIndex=c,y.oldDraggableIndex=h,y.newDraggableIndex=u,y.originalEvent=I,y.pullMode=m?m.lastPutMode:void 0;var G=j(j({},v),Fe.getEventProperties(n,t));for(var _ in G)y[_]=G[_];i&&i.dispatchEvent(y),U[O]&&U[O].call(t,y)}}var ki=["evt"],$=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.evt,a=Ai(i,ki);Fe.pluginEvent.bind(p)(e,t,j({dragEl:d,parentEl:D,ghostEl:g,rootEl:w,nextEl:de,lastDownEl:Ye,cloneEl:S,cloneHidden:ie,dragStarted:xe,putSortable:A,activeSortable:p.active,originalEvent:n,oldIndex:Ee,oldDraggableIndex:Oe,newIndex:R,newDraggableIndex:te,hideGhostForTarget:ni,unhideGhostForTarget:ai,cloneNowHidden:function(){ie=!0},cloneNowShown:function(){ie=!1},dispatchSortableEvent:function(r){L({sortable:t,name:r,originalEvent:n})}},a))};function L(e){Fi(j({putSortable:A,cloneEl:S,targetEl:d,rootEl:w,oldIndex:Ee,oldDraggableIndex:Oe,newIndex:R,newDraggableIndex:te},e))}var d,D,g,w,de,Ye,S,ie,Ee,R,Oe,te,Re,A,ve=!1,Ve=!1,Ke=[],se,X,at,rt,$t,Ft,xe,me,Le,Me=!1,He=!1,je,T,ot=[],pt=!1,Ze=[],Qe=typeof document<"u",Xe=wt,kt=$e||q?"cssFloat":"float",Ni=Qe&&!Gt&&!wt&&"draggable"in document.createElement("div"),ei=(function(){if(Qe){if(q)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}})(),ti=function(e,t){var i=f(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=Ie(e,0,t),r=Ie(e,1,t),o=a&&f(a),s=r&&f(r),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+C(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+C(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&o.float&&o.float!=="none"){var h=o.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===h)?"vertical":"horizontal"}return a&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||l>=n&&i[kt]==="none"||r&&i[kt]==="none"&&l+c>n)?"vertical":"horizontal"},Ri=function(e,t,i){var n=i?e.left:e.top,a=i?e.right:e.bottom,r=i?e.width:e.height,o=i?t.left:t.top,s=i?t.right:t.bottom,l=i?t.width:t.height;return n===o||a===s||n+r/2===o+l/2},Hi=function(e,t){var i;return Ke.some(function(n){var a=n[F].options.emptyInsertThreshold;if(!(!a||St(n))){var r=C(n),o=e>=r.left-a&&e<=r.right+a,s=t>=r.top-a&&t<=r.bottom+a;if(o&&s)return i=n}}),i},ii=function(e){function t(a,r){return function(o,s,l,c){var h=o.options.group.name&&s.options.group.name&&o.options.group.name===s.options.group.name;if(a==null&&(r||h))return!0;if(a==null||a===!1)return!1;if(r&&a==="clone")return a;if(typeof a=="function")return t(a(o,s,l,c),r)(o,s,l,c);var u=(r?o:s).options.group.name;return a===!0||typeof a=="string"&&a===u||a.join&&a.indexOf(u)>-1}}var i={},n=e.group;(!n||ze(n)!="object")&&(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},ni=function(){!ei&&g&&f(g,"display","none")},ai=function(){!ei&&g&&f(g,"display","")};Qe&&!Gt&&document.addEventListener("click",function(e){if(Ve)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ve=!1,!1},!0);var ce=function(e){if(d){e=e.touches?e.touches[0]:e;var t=Hi(e.clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[F]._onDragOver(i)}}},Xi=function(e){d&&d.parentNode[F]._isOutsideThisEl(e.target)};function p(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Z({},t),e[F]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ti(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,o){r.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&(!Te||wt),emptyInsertThreshold:5};Fe.initializePlugins(this,e,i);for(var n in i)!(n in t)&&(t[n]=i[n]);ii(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:Ni,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?E(e,"pointerdown",this._onTapStart):(E(e,"mousedown",this._onTapStart),E(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(e,"dragover",this),E(e,"dragenter",this)),Ke.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Z(this,Li())}p.prototype={constructor:p,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(me=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,d):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,a=n.preventOnFilter,r=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=n.filter;if(Vi(i),!d&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||n.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&Te&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=B(s,n.draggable,i,!1),!(s&&s.animated)&&Ye!==s)){if(Ee=H(s),Oe=H(s,n.draggable),typeof c=="function"){if(c.call(this,e,s,this)){L({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),$("filter",t,{evt:e}),a&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=B(l,h.trim(),i,!1),h)return L({sortable:t,rootEl:h,name:"filter",targetEl:s,fromEl:i,toEl:i}),$("filter",t,{evt:e}),!0}),c)){a&&e.preventDefault();return}n.handle&&!B(l,n.handle,i,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,i){var n=this,a=n.el,r=n.options,o=a.ownerDocument,s;if(i&&!d&&i.parentNode===a){var l=C(i);if(w=a,d=i,D=d.parentNode,de=d.nextSibling,Ye=i,Re=r.group,p.dragged=d,se={target:d,clientX:(t||e).clientX,clientY:(t||e).clientY},$t=se.clientX-l.left,Ft=se.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,d.style["will-change"]="all",s=function(){if($("delayEnded",n,{evt:e}),p.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Pt&&n.nativeDraggable&&(d.draggable=!0),n._triggerDragStart(e,t),L({sortable:n,name:"choose",originalEvent:e}),N(d,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){Kt(d,c.trim(),lt)}),E(o,"dragover",ce),E(o,"mousemove",ce),E(o,"touchmove",ce),r.supportPointer?(E(o,"pointerup",n._onDrop),!this.nativeDraggable&&E(o,"pointercancel",n._onDrop)):(E(o,"mouseup",n._onDrop),E(o,"touchend",n._onDrop),E(o,"touchcancel",n._onDrop)),Pt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),$("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||t)&&(!this.nativeDraggable||!($e||q))){if(p.eventCanceled){this._onDrop();return}r.supportPointer?(E(o,"pointerup",n._disableDelayedDrag),E(o,"pointercancel",n._disableDelayedDrag)):(E(o,"mouseup",n._disableDelayedDrag),E(o,"touchend",n._disableDelayedDrag),E(o,"touchcancel",n._disableDelayedDrag)),E(o,"mousemove",n._delayedDragTouchMoveHandler),E(o,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&E(o,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&lt(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"pointerup",this._disableDelayedDrag),b(e,"pointercancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):t?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(d,"dragend",this),E(w,"dragstart",this._onDragStart));try{document.selection?Ue(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(ve=!1,w&&d){$("dragStarted",this,{evt:t}),this.nativeDraggable&&E(document,"dragover",Xi);var i=this.options;!e&&N(d,i.dragClass,!1),N(d,i.ghostClass,!0),p.active=this,e&&this._appendGhost(),L({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(X){this._lastX=X.clientX,this._lastY=X.clientY,ni();for(var e=document.elementFromPoint(X.clientX,X.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(X.clientX,X.clientY),e!==t);)t=e;if(d.parentNode[F]._isOutsideThisEl(e),t)do{if(t[F]){var i=void 0;if(i=t[F]._onDragOver({clientX:X.clientX,clientY:X.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=Vt(t));ai()}},_onTouchMove:function(e){if(se){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,a=e.touches?e.touches[0]:e,r=g&&ye(g,!0),o=g&&r&&r.a,s=g&&r&&r.d,l=Xe&&T&&Mt(T),c=(a.clientX-se.clientX+n.x)/(o||1)+(l?l[0]-ot[0]:0)/(o||1),h=(a.clientY-se.clientY+n.y)/(s||1)+(l?l[1]-ot[1]:0)/(s||1);if(!p.active&&!ve){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(g){r?(r.e+=c-(at||0),r.f+=h-(rt||0)):r={a:1,b:0,c:0,d:1,e:c,f:h};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");f(g,"webkitTransform",u),f(g,"mozTransform",u),f(g,"msTransform",u),f(g,"transform",u),at=c,rt=h,X=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!g){var e=this.options.fallbackOnBody?document.body:w,t=C(d,!0,Xe,!0,e),i=this.options;if(Xe){for(T=e;f(T,"position")==="static"&&f(T,"transform")==="none"&&T!==document;)T=T.parentNode;T!==document.body&&T!==document.documentElement?(T===document&&(T=Y()),t.top+=T.scrollTop,t.left+=T.scrollLeft):T=Y(),ot=Mt(T)}g=d.cloneNode(!0),N(g,i.ghostClass,!1),N(g,i.fallbackClass,!0),N(g,i.dragClass,!0),f(g,"transition",""),f(g,"transform",""),f(g,"box-sizing","border-box"),f(g,"margin",0),f(g,"top",t.top),f(g,"left",t.left),f(g,"width",t.width),f(g,"height",t.height),f(g,"opacity","0.8"),f(g,"position",Xe?"absolute":"fixed"),f(g,"zIndex","100000"),f(g,"pointerEvents","none"),p.ghost=g,e.appendChild(g),f(g,"transform-origin",$t/parseInt(g.style.width)*100+"% "+Ft/parseInt(g.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,a=i.options;if($("dragStart",this,{evt:e}),p.eventCanceled){this._onDrop();return}$("setupClone",this),p.eventCanceled||(S=Qt(d),S.removeAttribute("id"),S.draggable=!1,S.style["will-change"]="",this._hideClone(),N(S,this.options.chosenClass,!1),p.clone=S),i.cloneId=Ue(function(){$("clone",i),!p.eventCanceled&&(i.options.removeCloneOnHide||w.insertBefore(S,d),i._hideClone(),L({sortable:i,name:"clone"}))}),!t&&N(d,a.dragClass,!0),t?(Ve=!0,i._loopId=setInterval(i._emulateDragOver,50)):(b(document,"mouseup",i._onDrop),b(document,"touchend",i._onDrop),b(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",a.setData&&a.setData.call(i,n,d)),E(document,"drop",i),f(d,"transform","translateZ(0)")),ve=!0,i._dragStartId=Ue(i._dragStarted.bind(i,t,e)),E(document,"selectstart",i),xe=!0,window.getSelection().removeAllRanges(),Te&&f(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,n,a,r,o=this.options,s=o.group,l=p.active,c=Re===s,h=o.sort,u=A||l,I,m=this,v=!1;if(pt)return;function y(Se,si){$(Se,m,j({evt:e,isOwner:c,axis:I?"vertical":"horizontal",revert:r,dragRect:n,targetRect:a,canSort:h,fromSortable:u,target:i,completed:O,onMove:function(Ct,ci){return Be(w,t,d,n,Ct,C(Ct),e,ci)},changed:G},si))}function U(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==u&&u.captureAnimationState()}function O(Se){return y("dragOverCompleted",{insertion:Se}),Se&&(c?l._hideClone():l._showClone(m),m!==u&&(N(d,A?A.options.ghostClass:l.options.ghostClass,!1),N(d,o.ghostClass,!0)),A!==m&&m!==p.active?A=m:m===p.active&&A&&(A=null),u===m&&(m._ignoreWhileAnimating=i),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(i===d&&!d.animated||i===t&&!i.animated)&&(me=null),!o.dragoverBubble&&!e.rootEl&&i!==document&&(d.parentNode[F]._isOutsideThisEl(e.target),!Se&&ce(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function G(){R=H(d),te=H(d,o.draggable),L({sortable:m,name:"change",toEl:t,newIndex:R,newDraggableIndex:te,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=B(i,o.draggable,t,!0),y("dragOver"),p.eventCanceled)return v;if(d.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||m._ignoreWhileAnimating===i)return O(!1);if(Ve=!1,l&&!o.disabled&&(c?h||(r=D!==w):A===this||(this.lastPutMode=Re.checkPull(this,l,d,e))&&s.checkPut(this,l,d,e))){if(I=this._getDirection(e,i)==="vertical",n=C(d),y("dragOverValid"),p.eventCanceled)return v;if(r)return D=w,U(),this._hideClone(),y("revert"),p.eventCanceled||(de?w.insertBefore(d,de):w.appendChild(d)),O(!0);var _=St(t,o.draggable);if(!_||ji(e,I,this)&&!_.animated){if(_===d)return O(!1);if(_&&t===e.target&&(i=_),i&&(a=C(i)),Be(w,t,d,n,i,a,e,!!i)!==!1)return U(),_&&_.nextSibling?t.insertBefore(d,_.nextSibling):t.appendChild(d),D=t,G(),O(!0)}else if(_&&Yi(e,I,this)){var ae=Ie(t,0,o,!0);if(ae===d)return O(!1);if(i=ae,a=C(i),Be(w,t,d,n,i,a,e,!1)!==!1)return U(),t.insertBefore(d,ae),D=t,G(),O(!0)}else if(i.parentNode===t){a=C(i);var z=0,re,we=d.parentNode!==t,ue=!Ri(d.animated&&d.toRect||n,i.animated&&i.toRect||a,I),k=I?"top":"left",Q=Lt(i,"top","top")||Lt(d,"top","top"),ke=Q?Q.scrollTop:void 0;me!==i&&(re=a[k],Me=!1,He=!ue&&o.invertSwap||we),z=Ui(e,i,a,I,ue?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,He,me===i);var W;if(z!==0){var fe=H(d);do fe-=z,W=D.children[fe];while(W&&(f(W,"display")==="none"||W===g))}if(z===0||W===i)return O(!1);me=i,Le=z;var oe=i.nextElementSibling,J=!1;J=z===1;var le=Be(w,t,d,n,i,a,e,J);if(le!==!1)return(le===1||le===-1)&&(J=le===1),pt=!0,setTimeout(zi,30),U(),J&&!oe?t.appendChild(d):i.parentNode.insertBefore(d,J?oe:i),Q&&qt(Q,0,ke-Q.scrollTop),D=d.parentNode,re!==void 0&&!He&&(je=Math.abs(re-C(i)[k])),G(),O(!0)}if(t.contains(d))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",ce),b(document,"mousemove",ce),b(document,"touchmove",ce)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"pointercancel",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(R=H(d),te=H(d,i.draggable),$("drop",this,{evt:e}),D=d&&d.parentNode,R=H(d),te=H(d,i.draggable),p.eventCanceled){this._nulling();return}ve=!1,He=!1,Me=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),gt(this.cloneId),gt(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Te&&f(document.body,"user-select",""),f(d,"transform",""),e&&(xe&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(w===D||A&&A.lastPutMode!=="clone")&&S&&S.parentNode&&S.parentNode.removeChild(S),d&&(this.nativeDraggable&&b(d,"dragend",this),lt(d),d.style["will-change"]="",xe&&!ve&&N(d,A?A.options.ghostClass:this.options.ghostClass,!1),N(d,this.options.chosenClass,!1),L({sortable:this,name:"unchoose",toEl:D,newIndex:null,newDraggableIndex:null,originalEvent:e}),w!==D?(R>=0&&(L({rootEl:D,name:"add",toEl:D,fromEl:w,originalEvent:e}),L({sortable:this,name:"remove",toEl:D,originalEvent:e}),L({rootEl:D,name:"sort",toEl:D,fromEl:w,originalEvent:e}),L({sortable:this,name:"sort",toEl:D,originalEvent:e})),A&&A.save()):R!==Ee&&R>=0&&(L({sortable:this,name:"update",toEl:D,originalEvent:e}),L({sortable:this,name:"sort",toEl:D,originalEvent:e})),p.active&&((R==null||R===-1)&&(R=Ee,te=Oe),L({sortable:this,name:"end",toEl:D,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){$("nulling",this),w=d=D=g=de=S=Ye=ie=se=X=xe=R=te=Ee=Oe=me=Le=A=Re=p.dragged=p.ghost=p.clone=p.active=null,Ze.forEach(function(e){e.checked=!0}),Ze.length=at=rt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":d&&(this._onDragOver(e),Bi(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,n=0,a=i.length,r=this.options;n<a;n++)t=i[n],B(t,r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Wi(t));return e},sort:function(e,t){var i={},n=this.el;this.toArray().forEach(function(a,r){var o=n.children[r];B(o,this.options.draggable,n,!1)&&(i[a]=o)},this),t&&this.captureAnimationState(),e.forEach(function(a){i[a]&&(n.removeChild(i[a]),n.appendChild(i[a]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return B(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var n=Fe.modifyOption(this,e,t);typeof n<"u"?i[e]=n:i[e]=t,e==="group"&&ii(i)},destroy:function(){$("destroy",this);var e=this.el;e[F]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ke.splice(Ke.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ie){if($("hideClone",this),p.eventCanceled)return;f(S,"display","none"),this.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S),ie=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ie){if($("showClone",this),p.eventCanceled)return;d.parentNode==w&&!this.options.group.revertClone?w.insertBefore(S,d):de?w.insertBefore(S,de):w.appendChild(S),this.options.group.revertClone&&this.animate(d,S),f(S,"display",""),ie=!1}}};function Bi(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Be(e,t,i,n,a,r,o,s){var l,c=e[F],h=c.options.onMove,u;return window.CustomEvent&&!q&&!$e?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=a||t,l.relatedRect=r||C(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),h&&(u=h.call(c,l,o)),u}function lt(e){e.draggable=!1}function zi(){pt=!1}function Yi(e,t,i){var n=C(Ie(i.el,0,i.options,!0)),a=Jt(i.el,i.options,g),r=10;return t?e.clientX<a.left-r||e.clientY<n.top&&e.clientX<n.right:e.clientY<a.top-r||e.clientY<n.bottom&&e.clientX<n.left}function ji(e,t,i){var n=C(St(i.el,i.options.draggable)),a=Jt(i.el,i.options,g),r=10;return t?e.clientX>a.right+r||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>a.bottom+r||e.clientX>n.right&&e.clientY>n.top}function Ui(e,t,i,n,a,r,o,s){var l=n?e.clientY:e.clientX,c=n?i.height:i.width,h=n?i.top:i.left,u=n?i.bottom:i.right,I=!1;if(!o){if(s&&je<c*a){if(!Me&&(Le===1?l>h+c*r/2:l<u-c*r/2)&&(Me=!0),Me)I=!0;else if(Le===1?l<h+je:l>u-je)return-Le}else if(l>h+c*(1-a)/2&&l<u-c*(1-a)/2)return Gi(t)}return I=I||o,I&&(l<h+c*r/2||l>u-c*r/2)?l>h+c/2?1:-1:0}function Gi(e){return H(d)<H(e)?1:-1}function Wi(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function Vi(e){Ze.length=0;for(var t=e.getElementsByTagName("input"),i=t.length;i--;){var n=t[i];n.checked&&Ze.push(n)}}function Ue(e){return setTimeout(e,0)}function gt(e){return clearTimeout(e)}Qe&&E(document,"touchmove",function(e){(p.active||ve)&&e.cancelable&&e.preventDefault()});p.utils={on:E,off:b,css:f,find:Kt,is:function(e,t){return!!B(e,t,e,!1)},extend:Pi,throttle:Zt,closest:B,toggleClass:N,clone:Qt,index:H,nextTick:Ue,cancelNextTick:gt,detectDirection:ti,getChild:Ie,expando:F};p.get=function(e){return e[F]};p.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(p.utils=j(j({},p.utils),n.utils)),Fe.mount(n)})};p.create=function(e,t){return new p(e,t)};p.version=_i;var x=[],Ce,mt,vt=!1,st,ct,qe,Ae;function Ki(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):i.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),Nt(),Ge(),Oi()},nulling:function(){qe=mt=Ce=vt=Ae=st=ct=null,x.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var n=this,a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(a,r);if(qe=t,i||this.options.forceAutoScrollFallback||$e||q||Te){dt(t,this.options,o,i);var s=ne(o,!0);vt&&(!Ae||a!==st||r!==ct)&&(Ae&&Nt(),Ae=setInterval(function(){var l=ne(document.elementFromPoint(a,r),!0);l!==s&&(s=l,Ge()),dt(t,n.options,l,i)},10),st=a,ct=r)}else{if(!this.options.bubbleScroll||ne(o,!0)===Y()){Ge();return}dt(t,this.options,ne(o,!1),!1)}}},Z(e,{pluginName:"scroll",initializeByDefault:!0})}function Ge(){x.forEach(function(e){clearInterval(e.pid)}),x=[]}function Nt(){clearInterval(Ae)}var dt=Zt(function(e,t,i,n){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,l=Y(),c=!1,h;mt!==i&&(mt=i,Ge(),Ce=t.scroll,h=t.scrollFn,Ce===!0&&(Ce=ne(i,!0)));var u=0,I=Ce;do{var m=I,v=C(m),y=v.top,U=v.bottom,O=v.left,G=v.right,_=v.width,ae=v.height,z=void 0,re=void 0,we=m.scrollWidth,ue=m.scrollHeight,k=f(m),Q=m.scrollLeft,ke=m.scrollTop;m===l?(z=_<we&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),re=ae<ue&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(z=_<we&&(k.overflowX==="auto"||k.overflowX==="scroll"),re=ae<ue&&(k.overflowY==="auto"||k.overflowY==="scroll"));var W=z&&(Math.abs(G-a)<=o&&Q+_<we)-(Math.abs(O-a)<=o&&!!Q),fe=re&&(Math.abs(U-r)<=o&&ke+ae<ue)-(Math.abs(y-r)<=o&&!!ke);if(!x[u])for(var oe=0;oe<=u;oe++)x[oe]||(x[oe]={});(x[u].vx!=W||x[u].vy!=fe||x[u].el!==m)&&(x[u].el=m,x[u].vx=W,x[u].vy=fe,clearInterval(x[u].pid),(W!=0||fe!=0)&&(c=!0,x[u].pid=setInterval(function(){n&&this.layer===0&&p.active._onTouchMove(qe);var J=x[this.layer].vy?x[this.layer].vy*s:0,le=x[this.layer].vx?x[this.layer].vx*s:0;typeof h=="function"&&h.call(p.dragged.parentNode[F],le,J,e,qe,x[this.layer].el)!=="continue"||qt(x[this.layer].el,le,J)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&I!==l&&(I=ne(I,!1)));vt=c}},30),ri=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,a=e.activeSortable,r=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=i||a;o();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(h)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function Dt(){}Dt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=Ie(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:ri};Z(Dt,{pluginName:"revertOnSpill"});function xt(){}xt.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ri};Z(xt,{pluginName:"removeOnSpill"});p.mount(new Ki);p.mount(xt,Dt);const Je=new Set,Zi={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function qi(e){if(li(e))return;oi(e),Je.add(e);const t="id",{group:i,handleSelector:n,dragSelector:a,sortDisabled:r}=e;e.sortable=p.create(e.el,{dataIdAttr:t,swapThreshold:.5,...Zi,...!!a&&{draggable:a},...!!i&&{sort:!r,group:{name:i,...!!e.canPull&&{pull:(o,s,l,{newDraggableIndex:c,oldDraggableIndex:h})=>e.canPull({toEl:o.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:h})},...!!e.canPut&&{put:(o,s,l,{newDraggableIndex:c,oldDraggableIndex:h})=>e.canPut({toEl:o.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:h})}}},onMove:({from:o,dragged:s,to:l,related:c})=>{e.onDragMove&&e.onDragMove({fromEl:o,dragEl:s,toEl:l,relatedEl:c})},handle:n,filter:`${n}[disabled]`,onStart:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{bt.active=!0,Qi(),e.onDragStart({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:h})},onEnd:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{bt.active=!1,Ji(),e.onDragEnd({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:h})},onSort:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{e.onDragSort({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:h})}})}function oi(e){li(e)||(Je.delete(e),e.sortable?.destroy(),e.sortable=null)}const bt={active:!1};function li(e){return e.dragEnabled&&bt.active}function Qi(){Array.from(Je).forEach(e=>e.onGlobalDragStart())}function Ji(){Array.from(Je).forEach(e=>e.onGlobalDragEnd())}const V={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},ht={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},en=yt`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,tn=`${ft}, ${De}`;class nn extends Et{constructor(){super(),this.dragSelector=De,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=ui("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=Bt()(this),this.updateListItemsDebounced=jt(this.updateListItems,Rt.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=zt({blocking:!0}),this.focusSetter=Yt()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=ee({cancelable:!1}),this.calciteListChange=ee({cancelable:!1}),this.calciteListDragEnd=ee({cancelable:!1}),this.calciteListDragStart=ee({cancelable:!1}),this.calciteListFilter=ee({cancelable:!1}),this.calciteListMoveHalt=ee({cancelable:!1}),this.calciteListOrderChange=ee({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}static{this.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=en}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(t){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),t)}emitOrderChangeEvent(t){this.calciteListOrderChange.emit(t)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(t){(t.has("filterText")||t.has("filterProps")||t.has("filterPredicate"))&&this.performFilter(),(t.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||t.has("group")||t.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||t.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||t.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||t.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||t.has("displayMode")&&this.hasUpdated||t.has("scale")&&this.hasUpdated||t.has("canPull")&&this.hasUpdated||t.has("canPut")&&this.hasUpdated||t.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Ht(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),oi(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:t,selectionMode:i,interactionMode:n,dragEnabled:a,el:r,filterEl:o,displayMode:s,scale:l,sortDisabled:c,sortHandleMenuItems:h}=this,u=Array.from(this.el.querySelectorAll(De)),I=r,m=Array.from(I.children).filter(Ne);if(u.forEach(v=>{v.scale=l,v.selectionAppearance=t,v.selectionMode=i,v.interactionMode=n,v.closest(et)===r&&(v.moveToItems=h.filter(y=>this.validateSortMenuItem({type:"move",fromEl:I,toEl:y.element,dragEl:v,newIndex:0,oldIndex:m.indexOf(v)})),v.addToItems=this.sortHandleMenuItems.filter(y=>this.validateSortMenuItem({type:"add",fromEl:I,toEl:y.element,dragEl:v,newIndex:0,oldIndex:m.indexOf(v)})),v.dragHandle=a,v.displayMode=s,v.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=u,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(v=>!v.closed&&!v.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(v=>!v.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(t){this.parentListEl||(t.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(t){if(this.parentListEl)return;t.stopPropagation();const{focusableItems:i}=this,n=i.findIndex(a=>a.active)-1;i[n]&&this.focusRow(i[n])}handleCalciteInternalListItemActive(t){if(this.parentListEl)return;t.stopPropagation();const i=t.target,{listItems:n}=this;n.forEach(a=>{a.active=a===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(t){this.assistiveText=t.detail.message,t.stopPropagation()}handleSortReorder(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleReorder(t))}handleSortAdd(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleAdd(t))}handleSortMove(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleMove(t))}handleCalciteInternalListItemSelect(t){if(this.parentListEl)return;t.stopPropagation();const i=t.target,{listItems:n,selectionMode:a}=this;i.selected&&(a==="single"||a==="single-persist")&&n.forEach(r=>r.selected=r===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(t){if(this.parentListEl)return;t.stopPropagation();const{target:i,detail:n}=t,{focusableItems:a,lastSelectedInfo:r}=this,o=i;if(n.selectMultiple&&r){const s=a.indexOf(o),l=a.indexOf(r.selectedItem),c=Math.min(l,s),h=Math.max(l,s);a.slice(c,h+1).forEach(u=>u.selected=r.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(t){this.parentListEl||(t.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(t){t.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){const{dragEnabled:t,defaultSlotEl:i}=this;t&&(i&&fi(i),qi(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(t){this.calciteListDragEnd.emit(t)}onDragStart(t){t.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(t)}onDragSort(t){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(t)}setParentList(){this.parentListEl=this.el.parentElement?.closest(et)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(ft))}handleFilterActionsStartSlotChange(t){this.hasFilterActionsStart=he(t)}handleFilterActionsEndSlotChange(t){this.hasFilterActionsEnd=he(t)}handleFilterNoResultsSlotChange(t){this.hasFilterNoResults=he(t)}setActiveListItem(){const{focusableItems:t}=this;t.some(i=>i.active)||t[0]&&(t[0].active=!0)}async updateSelectedItems(t=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),t&&this.calciteListChange.emit()}filterElements({el:t,filteredItems:i,visibleParents:n}){const a=!n.has(t)&&!i.includes(t);t.filterHidden=a;const r=t.parentElement.closest(tn);r&&(a||n.add(r),this.filterElements({el:r,filteredItems:i,visibleParents:n}))}allParentListItemsExpanded(t){const i=t.parentElement?.closest(De);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const t=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));t.forEach(i=>i.bordered=i!==t[t.length-1])}updateFilteredItems(){const{visibleItems:t,filteredData:i,filterText:n,filterPredicate:a}=this,r=t?.filter(l=>t.every(c=>c===l||!l.contains(c))),o=a?t.filter(a):n?i.map(l=>l.el):t||[],s=new WeakSet;r.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:s})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:t}=this;t&&(t.filteredItems&&(this.filteredData=t.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(t=>t!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:t,filterText:i,effectiveFilterProps:n}=this;t&&(t.value=i,t.filterProps=n,this.filterAndUpdateData())}setDefaultSlotEl(t){this.defaultSlotEl=t}setFilterEl(t){this.filterEl=t,this.performFilter()}handleFilterChange(t){t.stopPropagation();const{value:i}=t.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(t=>({label:t.label,description:t.description,metadata:t.metadata,heading:this.getGroupHeading(t),el:t}))}getGroupHeading(t){return this.listItemGroups.filter(i=>i.contains(t)).map(i=>i.heading)}updateGroupItems(){const{el:t,group:i,scale:n}=this,a=di(t),r=i?Array.from(a.querySelectorAll(`${et}[group="${i}"]`)).filter(o=>!o.disabled&&o.dragEnabled):[];this.sortHandleMenuItems=r.map(o=>({element:o,label:o.label??o.id,id:pi()})),Array.from(this.el.querySelectorAll(ft)).forEach(o=>{o.scale=n})}focusRow(t){const{focusableItems:i}=this;t&&(i.forEach(n=>n.active=n===t),t.setFocus())}isNavigable(t){const i=t.parentElement?.closest(De);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(t){if(t.defaultPrevented||this.parentListEl)return;const{key:i}=t,n=this.focusableItems.filter(r=>this.isNavigable(r)),a=n.findIndex(r=>r.active);if(i==="ArrowDown"){t.preventDefault();const r=t.target===this.filterEl?0:a+1;n[r]&&this.focusRow(n[r])}else if(i==="ArrowUp"){if(t.preventDefault(),a===0&&this.filterEnabled){this.filterEl.setFocus();return}const r=a-1;n[r]&&this.focusRow(n[r])}else if(i==="Home"){t.preventDefault();const r=n[0];r&&this.focusRow(r)}else if(i==="End"){t.preventDefault();const r=n[n.length-1];r&&this.focusRow(r)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:t,toEl:i,dragEl:n,newIndex:a,oldIndex:r,type:o}){if(!t||!i||i===t||n.contains(i))return!1;const s=t.canPull?.({toEl:i,fromEl:t,dragEl:n,newIndex:a,oldIndex:r})??!0,l=i.canPut?.({toEl:i,fromEl:t,dragEl:n,newIndex:a,oldIndex:r})??!0;return(o==="add"?s==="clone":s===!0)&&l}handleAdd(t){const{addTo:i}=t.detail,n=t.target,a=n?.parentElement,r=i.element,o=Array.from(a.children).filter(Ne).indexOf(n),s=0;if(!this.validateSortMenuItem({type:"add",fromEl:a,toEl:r,dragEl:n,newIndex:s,oldIndex:o}))return;n.sortHandleOpen=!1,this.disconnectObserver();const l=n.cloneNode();r.prepend(l),_t(n),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:n,fromEl:a,toEl:r,newIndex:s,oldIndex:o};this.calciteListOrderChange.emit(c),r.emitOrderChangeEvent(c)}handleMove(t){const{moveTo:i}=t.detail,n=t.target,a=n?.parentElement,r=i.element,o=Array.from(a.children).filter(Ne).indexOf(n),s=0;if(!this.validateSortMenuItem({type:"move",fromEl:a,toEl:r,dragEl:n,newIndex:s,oldIndex:o}))return;n.sortHandleOpen=!1,this.disconnectObserver(),r.prepend(n),_t(n),this.updateListItemsDebounced(),this.connectObserver();const l={dragEl:n,fromEl:a,toEl:r,newIndex:s,oldIndex:o};this.calciteListOrderChange.emit(l),r.emitOrderChangeEvent(l)}handleReorder(t){const{reorder:i}=t.detail,n=t.target,a=n?.parentElement;if(!a)return;n.sortHandleOpen=!1;const r=Array.from(a.children).filter(Ne),o=r.length-1,s=r.indexOf(n);let l=s;switch(i){case"top":l=0;break;case"bottom":l=o;break;case"up":l=s===0?0:s-1;break;case"down":l=s===o?o:s+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?r[l]:r[l].nextSibling;a.insertBefore(n,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:n,fromEl:a,toEl:a,newIndex:l,oldIndex:s})}render(){const{loading:t,label:i,disabled:n,dataForFilter:a,filterEnabled:r,filterPlaceholder:o,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:u}=this;return Xt({disabled:this.disabled,children:P`<div class=${M({[V.container]:!0,[V.containerHeight]:this.listItems.length<1&&t})}>${this.dragEnabled?P`<span aria-live=assertive class=${M(V.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${t?P`<calcite-scrim class=${M(V.scrim)} .loading=${t}></calcite-scrim>`:null}<div .ariaBusy=${t} .ariaLabel=${i||""} class=${M(V.table)} @keydown=${this.handleListKeydown} role=treegrid>${r||c||h?P`<div class=${M(V.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${M(V.stack)}><slot name=${ht.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${be.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${n} .filterProps=${u} .items=${a} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${s} ${ut(this.setFilterEl)}></calcite-filter><slot name=${ht.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${be.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${M(V.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${ut(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${ht.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:t,filteredItems:i,parentListEl:n,messages:{_lang:a},numberingSystem:r}=this;return At.numberFormatOptions={locale:a,numberingSystem:r},n?null:P`<div aria-live=polite class=${M(V.assistiveText)}>${this.hasActiveFilter?_e("aria-filter-enabled",P`<div>${t.filterEnabled}</div>`):null}${_e("aria-item-count",P`<div>${t.total.replace("{count}",At.localize(i.length.toString()))}</div>`)}${i.length?_e("aria-item-list",P`<ol>${i.map(o=>P`<li>${o.label}</li>`)}</ol>`):null}</div>`}}It("calcite-list",nn);export{nn as List};
