function p(a){const n=[];for(let s=0,e=a.length;s<e;s++){let t=a.charCodeAt(s);t<128?n.push(t):t<2048?n.push(192|t>>6,128|63&t):t<55296||t>=57344?n.push(224|t>>12,128|t>>6&63,128|63&t):(s++,t=65536+((1023&t)<<10|1023&a.charCodeAt(s)),n.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|63&t))}return new Uint8Array(n)}class b{constructor(n){this._seed=n,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(n){const s=[];for(const e of n)isNaN(e)?s.push("NaN"):e===1/0?s.push("Infinity"):e===-1/0?s.push("-Infinity"):e===0?s.push("0"):s.push(e.toString(16));this.update(p(s.join("")))}updateIntArray(n){const s=Int32Array.from(n);this.update(new Uint8Array(s.buffer))}updateUint8Array(n){this.update(Uint8Array.from(n))}updateWithString(n){return this.update(p(n))}update(n){return this._bufs.push(n),this._totallen+=n.length,this}digest(){const n=new Uint8Array(this._totallen);let s=0;for(const e of this._bufs)n.set(e,s),s+=e.length;return this.init(),this._xxHash32(n,this._seed)}_xxHash32(n,s=0){const e=n;let t=s+374761393&4294967295,i=0;if(e.length>=16){const r=[s+2654435761+2246822519&4294967295,s+2246822519&4294967295,s+0&4294967295,s-2654435761&4294967295],h=n,f=h.length-16;let u=0;for(i=0;(4294967280&i)<=f;i+=4){const l=i,d=h[l]+(h[l+1]<<8),_=h[l+2]+(h[l+3]<<8),g=d*2246822519+(_*2246822519<<16);let o=r[u]+g&4294967295;o=o<<13|o>>>19;const y=65535&o,A=o>>>16;r[u]=y*2654435761+(A*2654435761<<16)&4294967295,u=u+1&3}t=(r[0]<<1|r[0]>>>31)+(r[1]<<7|r[1]>>>25)+(r[2]<<12|r[2]>>>20)+(r[3]<<18|r[3]>>>14)&4294967295}t=t+n.length&4294967295;const c=n.length-4;for(;i<=c;i+=4){const r=i,h=e[r]+(e[r+1]<<8),f=e[r+2]+(e[r+3]<<8);t=t+(h*3266489917+(f*3266489917<<16))&4294967295,t=t<<17|t>>>15,t=(65535&t)*668265263+((t>>>16)*668265263<<16)&4294967295}for(;i<e.length;++i)t+=e[i]*374761393,t=t<<11|t>>>21,t=(65535&t)*2654435761+((t>>>16)*2654435761<<16)&4294967295;return t^=t>>>15,t=((65535&t)*2246822519&4294967295)+((t>>>16)*2246822519<<16),t^=t>>>13,t=((65535&t)*3266489917&4294967295)+((t>>>16)*3266489917<<16),t^=t>>>16,t<0?t+4294967296:t}}export{b};
