import{F as H}from"./Color-CERqXxxY-BuYn26eI.js";import{j as G,o as b}from"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import{M as f}from"./collectionUtils-jDyktm0P-BDP2Oq99.js";import{k as O,q as _,c as P,v as T,G as g}from"./sliceToolConfig-BnawSSVt-BPWko_GQ.js";import{e as j,G as M,B as D,U}from"./SlicePlaneMaterial.glsl-Bk_6X0A4-BDF0yWid.js";import{B,Y as q,U as C,e as d}from"./ShadedColorMaterial.glsl-Cdsx30m0-BzzDoTK3.js";import{M as p}from"./RealisticTree.glsl-WN9nrQUl-QZiY3aPA.js";import{J as w}from"./ShadowCastClear.glsl-CeOT_rAo-BEYyVrmo.js";import{e as x,n as y}from"./colorUtils-CeIi7j7j-C2WVx6th.js";import{aq as R}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{a as v}from"./orientedBoundingBox-BLEx7wLU-ByGP9QG1.js";import{g as $}from"./Texture-CFNZjV2R-CxGjQ8pI.js";import{y as F}from"./ImageMaterial.glsl-CrPy6XFt-CUqeXvpG.js";let X=class extends B{constructor(r,s){const i=j(s),e=i?O:_,t=e*P,l=_,n={renderOccluded:4,isDecoration:!0},m=new w({...n,width:e},r.state.isGlobal),c=new w({...n,width:t},r.state.isGlobal),a=new w({...n,width:l},r.state.isGlobal);super({view:r,...q,...A({isCorner:i,unfocusedMaterial:m,focusedMaterial:c,outlineMaterial:a})}),this._themeHandle=G(()=>r.effectiveTheme.accentColor,o=>{const u=H.toUnitRGBA(o);m.setParameters({color:u}),c.setParameters({color:u}),a.setParameters({color:u})},b)}destroy(){this._themeHandle.remove(),super.destroy()}};function A({isCorner:r,unfocusedMaterial:s,focusedMaterial:i,outlineMaterial:e}){const t=r?[f(1,0,0),f(0,0,0),f(0,1,0)]:[f(1,0,0),f(-1,0,0)];return{renderObjects:[new d(p(s,t),1|M),new d(p(i,t),2|M),new d(p(e,t),D)],collisionType:{type:"line",paths:[t]},radius:r?T:g,state:M}}class ee extends B{constructor(s,i){const e=x(s.effectiveTheme.accentColor,.5),t=y(s.effectiveTheme.accentColor),l=i(e,t),n=new F({draped:!1,texture:l.texture,writeDepth:!1,renderOccluded:16,isDecoration:!0}),m=C.calloutWidth,c=new w({width:m,renderOccluded:4,isDecoration:!0},s.state.isGlobal);super({view:s,...Y({imageMaterial:n,calloutMaterial:c})}),this._material=n,this._textureHandle=l,this._themeHandle=G(()=>s.effectiveTheme.accentColor,a=>{const o=x(a,.5),u=y(a),h=this._textureHandle;this._textureHandle=i(o,u),n.setParameters({texture:this._textureHandle.texture}),h?.release(),c.setParameters({color:H.toUnitRGBA(a)})},b)}destroy(){this._textureHandle=R(this._textureHandle),this._themeHandle.remove(),this._material.dispose(),super.destroy()}}function Y({imageMaterial:r,calloutMaterial:s}){const{focusMultiplier:i,calloutLength:e,discRadius:t}=C,l=t*i,n=(o,u)=>{const h=[0,1,2,2,3,0];return new $(u,[["position",new v([e-o,-o,0,e+o,-o,0,e+o,o,0,e-o,o,0],h,3,!0)],["uv0",new v([0,0,1,0,1,1,0,1],h,2,!0)]])},m=p(s,[[0,0,0],[e-t,0,0]]),c=p(s,[[0,0,0],[e-l,0,0]]),a=U;return{autoScaleRenderObjects:!1,collisionPriority:1,collisionType:{type:"disc",direction:[0,0,1],offset:[e,0,0]},focusMultiplier:i,radius:t,renderObjects:[new d(n(t,r),1|a),new d(m,1|a),new d(n(l,r),2|a),new d(c,2|a)],state:a}}export{X as Z,ee as t};
