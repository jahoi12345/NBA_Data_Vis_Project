import{H as g}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{I as y}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";async function x(n,r,o,t,a,f,s){let i=null;if(o!=null){const e=`${n}/nodepages/`,p=e+Math.floor(o.rootIndex/o.nodesPerPage);try{return{type:"page",rootPage:(await g(p,{query:{f:"json",...t,token:a},responseType:"json",signal:s})).data,rootIndex:o.rootIndex,pageSize:o.nodesPerPage,lodMetric:o.lodSelectionMetricType,urlPrefix:e}}catch(c){f?.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",p,c),i=c}}if(!r)return null;const u=r?.split("/").pop(),l=`${n}/nodes/`,d=l+u;try{return{type:"node",rootNode:(await g(d,{query:{f:"json",...t,token:a},responseType:"json",signal:s})).data,urlPrefix:l}}catch(e){throw new y("sceneservice:root-node-missing","Root node missing.",{pageError:i,nodeError:e,url:d})}}export{x as P};
