const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AttributeBinsQuery-DmkXyj6Y-zPPLAaI-.js","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/collectionUtils-jDyktm0P-BDP2Oq99.js","assets/index-B0z_nLWi.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu-DeJwQYfh.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/Extent-CgDMOSRD-Bod5LY6s.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/Color-CERqXxxY-BuYn26eI.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/jsonUtils-CmpazY1u-6pDLj5sx.js","assets/Polyline-CoiTLswR-DTxpB2Yg.js","assets/Polygon-D6wEPb3W-D2MPjRU4.js","assets/aaBoundingRect-CjwcS2F3-ri8bmh30.js","assets/typeUtils-DqrRcjBx-DZ6_Gsbu.js","assets/FixedIntervalBinParameters-8snYOK8a-DXffLEh-.js","assets/projectionUtils-BGH_5_I3-DGwchVO8.js","assets/normalizeUtils-85zLqeMi-C1bdAKNn.js","assets/Cyclical-BLSxUpe7-Bj8R2Yk-.js","assets/normalizeUtilsCommon-CnhQye_A-UWhaH-kt.js","assets/utils-CylVuxNi--x86XOjU.js","assets/utils-Dpg4yj1D-CeFz2JVC.js","assets/NormalizationBinParametersMixin-BK9wNkI3-BKYeOhDN.js","assets/Query-BlS0WPDF-jdXS_Qhy.js","assets/Field-Cm_ZejYW-CwJZmSru.js","assets/fieldType-DVUzXtk_-tUuvnZJM.js","assets/Layer-DZvC7bne-D3VLDrab.js","assets/date-IqUzANpt-bLKO9IDT.js","assets/timeZoneUtils-BSc7-7qA-BAv3h8mh.js","assets/UnsupportedLayer-D7JhKwIy-DE61FUHB.js","assets/MultiOriginJSONSupport-Bd1TKmh_-BHNF5tHX.js","assets/PortalLayer-CbFNhtZ4-Doeialq-.js","assets/asyncUtils-w6KfWU41-HenJ0UOu.js","assets/layerUtils-DZGhvm-W-CfyHx1TZ.js","assets/PortalItem-DnxMlRVo-CI4Ns2_M.js","assets/portalItemUtils-CaPNUJg6-CXDHI5LA.js"])))=>i.map(i=>d[i]);
import{H as S,_ as x}from"./index-B0z_nLWi.js";import{J as M,I as f,y as V,n as G,i as C,Y as r,H as i,aG as N,G as j,a2 as g}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{H as Z,a_ as Q,D as P}from"./Point-BfTTZoMu-DeJwQYfh.js";import{R as $,l as R}from"./collectionUtils-jDyktm0P-BDP2Oq99.js";import{k as F}from"./MultiOriginJSONSupport-Bd1TKmh_-BHNF5tHX.js";import{o as h}from"./Layer-DZvC7bne-D3VLDrab.js";import{M as z}from"./LRUCache-fy84PBMi-Y56WPIvD.js";import{l as k}from"./ReactiveMap-B0by2bYu-DCsCfMj5.js";import{j as H}from"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import{n as K}from"./signal-BX9ezF8a-cf1Pn6io.js";import{y as I}from"./BlendLayer-HE_aYHHW-D0es7Iiq.js";import{s as O}from"./ScaleRangeLayer-DQr2T3Hh-Dh1UYk4i.js";import{C as J,I as _,a as A,O as Y,T as W,v as X,M as ee,j as te,L as re,$ as ie}from"./OperationalLayer-B6zbJ5nR-DyK_ztCk.js";import{m as oe,s as se}from"./OrderedLayer-DQAUgUTV-CpnQmtbN.js";import{n as B}from"./utils-BEeBypEk-DQLTC4jR.js";import{j as ae,A as ne}from"./getPopupProvider-CmskPttI-CzUWpGwk.js";import{x as le}from"./FormTemplate-DuPZvaVv-DtJsNdqp.js";import{m as pe}from"./Graphic-DgGzDmqW-d1CNicxz.js";import{e as de,r as ue}from"./GraphicOrigin-uE6TDXc9-DqbdmNAV.js";import{n as ye}from"./FeatureEffectLayer-BG_KTtPw-C05GQDNc.js";import{r as q}from"./lengthUtils-Dt1_RvOO-j3MEdmHu.js";import{e as me,i as he}from"./labelingInfo-BYG2hiVF-B7-dv03v.js";import ce from"./SimpleRenderer-CEmCWePp-BJ25mYcH.js";import{t as fe,e as ge}from"./typeUtils-DDFS4uuz-B7KgP61w.js";import{S as ve}from"./popupUtils-D4UavgYz-DI7Mb3me.js";import{o as be}from"./SimpleFillSymbol-CDawtd9z-CWD2KI2D.js";import we from"./FeatureLayerSource-BCS6pPRe-RSkKYiMw.js";import{o as je}from"./APIKeyMixin--YGbad8e-DJ-JJTX5.js";import{c as Fe}from"./ArcGISService-SIwch9bz-DEFXc423.js";import{i as Ie}from"./CustomParametersMixin-Dshqz1Zp-BFC165kX.js";import{E as Oe}from"./DisplayFilteredLayer-DyjtPayS-DLMYIA49.js";import{Y as _e}from"./EditBusLayer-rxUbWTiY-BxA39RQ7.js";import{h as Te}from"./FeatureLayerBase-BUeDgO3U-q6RnYMdc.js";import{z as Le}from"./PortalLayer-CbFNhtZ4-Doeialq-.js";import{O as Ee}from"./RefreshableLayer-CBbEkZf--DylHaNOC.js";import{j as Se}from"./TemporalLayer-D4R0YvXo-PSBzKw25.js";import{H as xe,q as Ce,o as Pe,B as Re,a as Be}from"./featureLayerUtils-FKjLNPl_-Cv8vWd4i.js";import{o as qe}from"./FeatureType-CFJlAOcG-DepIzvPz.js";import{h as De}from"./fieldProperties-BoJj55FN-DI1Lssr9.js";import{l as Ue}from"./versionUtils-BfuZvWmP-RYMRQmOM.js";import Ve from"./PortalItem-DnxMlRVo-CI4Ns2_M.js";import{o as m}from"./Query-BlS0WPDF-jdXS_Qhy.js";import"./Extent-CgDMOSRD-Bod5LY6s.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./Color-CERqXxxY-BuYn26eI.js";import"./mat4f32-Djp3mnm5-DzYG3LYB.js";import"./mat4-C96X-Nn0-BrMLOLCb.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./Polygon-D6wEPb3W-D2MPjRU4.js";import"./ElevationInfo-Cw2HaA6E-CuK5hJ96.js";import"./unitConversionUtils-4vB4Ezlp-DnY5MDxd.js";import"./ClassBreaksDefinition-BGOzyovZ-K0U0wKo_.js";import"./Field-Cm_ZejYW-CwJZmSru.js";import"./fieldType-DVUzXtk_-tUuvnZJM.js";import"./Polyline-CoiTLswR-DTxpB2Yg.js";import"./typeUtils-DqrRcjBx-DZ6_Gsbu.js";import"./typeUtils-CXW_VpOn-BGgLp_TK.js";import"./lineMarkers-CDwLe3J6-CNUjJvs3.js";import"./PolygonSymbol3D-BXRHZiCQ-BjPAY2LA.js";import"./ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js";import"./aaBoundingBox-Cn49X7ge-BcYPaJ58.js";import"./mat4f64-q_b6UJoq-Dh6sWB_w.js";import"./Font-BwmnW7d2-Dwh3xjKw.js";import"./PictureMarkerSymbol-CaSh-vZk-xhjZ61bb.js";import"./SimpleMarkerSymbol-BGAFRS9_-CVQ5NLIA.js";import"./TextSymbol-hRGhyDHs-CoS7dSjf.js";import"./FeatureEffect-mVCOF1v6--fvFHZv2.js";import"./FeatureFilter-G4_pWMVe-D0hu4KAy.js";import"./defaults-BDN9qxeN-C-EfxQM4.js";import"./defaults3D-C2hXSee1-CTj29-Ly.js";import"./commonProperties-DbO613LF-CHjBvYhj.js";import"./colorRamps-DswZzxkO-BqSFavfl.js";import"./ColorStop-De5gQTjr-C1lw16u9.js";import"./visualVariableUtils-ma4r7Z2K-Df6C3Hkh.js";import"./ClassBreaksRenderer-BvgdqtTq-D2fU8Sng.js";import"./RendererLegendOptions-ByGHYLtx-Bwoo6l33.js";import"./UnknownTimeZone-B697BDFv-CBbtul7O.js";import"./vec42-B8VM4vXb-B6OGOEI9.js";import"./vec4f64-DPb6J-GU-C7c2DqbZ.js";import"./UniqueValueRenderer-JPjz9Qvs-Duu1CubQ.js";import"./MeshLocalVertexSpace-BGd1IdEs-C0HJG4wR.js";import"./vec32-CewSdTn3-VRto2OOh.js";import"./projectionUtils-BGH_5_I3-DGwchVO8.js";import"./MeshTransform-Bl0zl104-SaBiGlTx.js";import"./quat-B7J5v7rV-CZ9akUv-.js";import"./quatf64-CCm9z-pX-CQ7_sSji.js";import"./axisAngleDegrees-CjbXmycq-DcVVDR1-.js";import"./normalizeUtils-85zLqeMi-C1bdAKNn.js";import"./normalizeUtilsCommon-CnhQye_A-UWhaH-kt.js";import"./QueryTask-DtLshCh_-CZwCFWQz.js";import"./pbf-2SIhMekG-LK438LAR.js";import"./FeatureSet-BF7daP96-B_JvMbY7.js";import"./asyncUtils-w6KfWU41-HenJ0UOu.js";import"./NormalizationBinParametersMixin-BK9wNkI3-BKYeOhDN.js";import"./HeightModelInfo-D5IdRvJ2-23y6MRiu.js";import"./LayerFloorInfo-CTubHTci-DciGdwJt.js";import"./Relationship-CrANqG2c-DiHDOAEy.js";import"./TimeInfo-D7ssmbZO-Burc-nDV.js";import"./FeatureTemplate-Bur8tORn-C24tlGMe.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./SimpleObservable-CvFyr0NA-DXpoMYph.js";import"./layerContainerType-CSXZNpHb-BIF7XAYP.js";import"./jsonUtils-CY6YsQMo-LM0PY-PG.js";import"./screenUtils-BitdhK1O-L0FLPAMi.js";import"./opacityUtils-DuFH0EC9-DWspTgn2.js";import"./jsonUtils-CmpazY1u-6pDLj5sx.js";import"./createFeatureId-CVwTD0fV-3fKpJDrk.js";import"./labelUtils-BtizwBfq-Zegx4520.js";import"./layerUtils-DZGhvm-W-CfyHx1TZ.js";import"./jsonUtils-C9q_FK4K-GRCbm_Pe.js";import"./aaBoundingRect-CjwcS2F3-ri8bmh30.js";import"./DoubleArray-DExKNiTh-CvVpHySW.js";import"./defaultsJSON-GKolV7NZ-GKolV7NZ.js";import"./DictionaryScriptEvaluator-G73uSGpN-ErvAW-Hm.js";import"./Version-BtYZEj58-LyRHDnSJ.js";import"./FieldsIndex-CimK-TqD--24JoCkp.js";import"./timeZoneUtils-BSc7-7qA-BAv3h8mh.js";import"./ArcadeExpression-BlIRq-oN-VZkrwLVE.js";import"./TimeOnly-BERR31kg-CQiLyUZi.js";import"./enum-BzLwmiID-CcyIdWlQ.js";import"./utils-DX2muIr3-DiPfFKSl.js";import"./heatmapUtils-B-AXnq0l-BF3Q_jd2.js";import"./uuid-Oe6SV2kF-IYX19xBA.js";import"./meshVertexSpaceUtils-CtG7DPVT-kybwngCt.js";import"./External-DqWxNHeL-BMl9kTYf.js";import"./infoFor3D-DhzudQro-CCYgWfsv.js";import"./editingSupport-DvBiDsO_-ChSwHhBh.js";import"./Cyclical-BLSxUpe7-Bj8R2Yk-.js";import"./utils-CylVuxNi--x86XOjU.js";import"./utils-Dpg4yj1D-CeFz2JVC.js";import"./clientSideDefaults-3DdoYkYX-n_psRtPH.js";import"./QueryEngineCapabilities-DJC_YILC-CshvWf3J.js";import"./executeQueryJSON-DgYznOlB-CNRcR1CA.js";import"./query-DeNEvEsQ-DfFlUyui.js";import"./pbfQueryUtils-DlZBMNQk-rXCy_evW.js";import"./OptimizedFeature-CwRGZPwv-Ddclhn0A.js";import"./memoryEstimations-Bd726a_p-0cVCY2Jz.js";import"./OptimizedFeatureSet-BR8EEvDc-CgsRgxJh.js";import"./queryZScale-CRP3Sh_E-F3y679Wx.js";import"./editsZScale-D3N5iH_c-CCATcpvE.js";import"./executeForIds-CuyQNBvQ-B6yiG3wW.js";import"./featureConversionUtils-BDA_FXJx-CDxX1Wik.js";import"./featureQueryAll-BfDWA5Wx-BKksFkIA.js";import"./diffUtils-wTC1YzlE-DCTUTUs8.js";import"./styleUtils-DWvicjTN-DL6_BIk4.js";import"./scaleUtils-yfx9kKWT-D9SVsyM-.js";import"./displayFilterUtils-CIXGrQzt-XEoxkZ3i.js";import"./multiLayerServiceUtils-CpHWiXA7-HO_F3Kjq.js";import"./serviceCapabilitiesUtils-BV_pcUiO-Dw-u7_oZ.js";import"./portalItemUtils-CaPNUJg6-CXDHI5LA.js";const b=(e,t=b,a=t.f||(t.f=["assets/AttributeBinsQuery-DmkXyj6Y.js","assets/jsonMap-Bs3hmeCU.js","assets/collectionUtils-jDyktm0P.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu.js","assets/reader-DcGs6kKN.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-CgDMOSRD.js","assets/SimpleObservable-CvFyr0NA.js","assets/Color-CERqXxxY.js","assets/mathUtils-PIGhLnI9.js","assets/jsonUtils-CmpazY1u.js","assets/Polyline-CoiTLswR.js","assets/Polygon-D6wEPb3W.js","assets/aaBoundingRect-CjwcS2F3.js","assets/typeUtils-DqrRcjBx.js","assets/FixedIntervalBinParameters-8snYOK8a.js","assets/projectionUtils-BGH_5_I3.js","assets/normalizeUtils-85zLqeMi.js","assets/Cyclical-BLSxUpe7.js","assets/normalizeUtilsCommon-CnhQye_A.js","assets/utils-CylVuxNi.js","assets/utils-Dpg4yj1D.js","assets/NormalizationBinParametersMixin-BK9wNkI3.js","assets/Query-BlS0WPDF.js","assets/Field-Cm_ZejYW.js","assets/fieldType-DVUzXtk_.js","assets/Layer-DZvC7bne.js","assets/date-IqUzANpt.js","assets/timeZoneUtils-BSc7-7qA.js","assets/UnsupportedLayer-D7JhKwIy.js","assets/MultiOriginJSONSupport-Bd1TKmh_.js","assets/PortalLayer-CbFNhtZ4.js","assets/asyncUtils-w6KfWU41.js","assets/layerUtils-DZGhvm-W.js","assets/PortalItem-DnxMlRVo.js","assets/portalItemUtils-CaPNUJg6.js"]))=>e.map(s=>a[s]);let d=class extends O(I(F(h))){constructor(e){super(e),this._layerCache=new z(20,t=>t.destroy()),this._oidToReference=new k,this._layerToReference=new Map,this.legendEnabled=!0,this.layers=new $,this.maximumVisibleSublayers=10,this.opacity=1,this.parent=null,this.persistenceEnabled=!0,this.title="Layers in view",this.type="catalog-dynamic-group",this.visible=!0}initialize(){this.addHandles([this.layers.on("after-add",({item:e})=>{e.parent=this}),this.layers.on("after-remove",({item:e})=>{e.parent=null}),H(()=>this._orderBy,()=>{this._updateLayerSortValues(),this._sortAllLayers()})])}load(e){return this.addResolvingPromise(this.parent.load()),Promise.resolve(this)}destroy(){this._layerCache.destroy(),this._oidToReference.clear(),this._layerToReference.clear()}get _orderBy(){return this.parent?this.parent.orderBy?.find(e=>!e.valueExpression&&e.field)??new se({field:this.parent.objectIdField}):null}get _referenceComparator(){const e=this._orderBy;if(!this.parent||!e)return()=>0;const t=this.parent.fieldsIndex.get(e.field),a=B(t?.toJSON().type,e.order==="descending"),s=B("esriFieldTypeOID",e.order==="descending");return(p,l)=>a(l.sortValue,p.sortValue)||s(l.objectId,p.objectId)}get fullExtent(){return this.parent?.fullExtent??null}get updating(){return G(this._oidToReference,({pending:e})=>e!=null)}acquireLayer(e){if(this.destroyed)return C();const t=this._getLayerReference(e);return t.count++,C(()=>{t.count--,t.count||this._destroyLayerReference(t)})}_getLayerReference(e){const t=e.getObjectId();return V(this._oidToReference,t,()=>{const a=e.getObjectId(),s=`${a}`,p=e.getAttribute(this.parent.itemSourceField),l=new $e(e,a,p),u=this._layerCache.pop(s);return u?(this._addLayer(l,u),l):(l.pending=this.parent.createLayerFromFootprint(e).then(y=>{l.count?this._addLayer(l,y):(this.destroyed||this._layerCache.get(s)||this._layerCache.put(s,y),l.layer=null)}).catch(()=>{}).finally(()=>{l.pending=null}),l)})}_destroyLayerReference(e){e.layer&&(this._layerToReference.delete(e.layer),this.layers.remove(e.layer),this.destroyed?e.layer.destroy():this._layerCache.put(`${e.objectId}`,e.layer),e.layer=null),this._oidToReference.delete(e.objectId)}_addLayer(e,t){e.layer=t,t.persistenceEnabled=!1,this._layerToReference.set(t,e),this._updateLayerSortValue(e),this.layers.add(t),this._sortAllLayers()}_updateLayerSortValues(){for(const e of this._layerToReference.values())this._updateLayerSortValue(e)}_updateLayerSortValue(e){this._orderBy&&(e.sortValue=e.footprint.getAttribute(this._orderBy.field))}_sortAllLayers(){this.layers.sort((e,t)=>this._referenceComparator(this._layerToReference.get(e),this._layerToReference.get(t)))}};r([i()],d.prototype,"_orderBy",null),r([i({readOnly:!0})],d.prototype,"_referenceComparator",null),r([i(_)],d.prototype,"legendEnabled",void 0),r([i({type:["show","hide","hide-children"],json:{write:!0}})],d.prototype,"listMode",void 0),r([i({readOnly:!0})],d.prototype,"fullExtent",null),r([i({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0,isRequired:!0}}})],d.prototype,"id",void 0),r([i({readOnly:!0})],d.prototype,"layers",void 0),r([i({type:N,range:{min:0,max:50},json:{write:!0,default:10}})],d.prototype,"maximumVisibleSublayers",void 0),r([i(A)],d.prototype,"opacity",void 0),r([i({clonable:!1})],d.prototype,"parent",void 0),r([i({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],d.prototype,"title",void 0),r([i({json:{read:!1}})],d.prototype,"type",void 0),r([i({readOnly:!0})],d.prototype,"updating",null),r([i({type:Boolean,json:{name:"visibility",write:!0}})],d.prototype,"visible",void 0),d=r([j("esri.layers.catalog.CatalogDynamicGroupLayer")],d);class $e{constructor(t,a,s){this.footprint=t,this.objectId=a,this.itemSource=s,this.count=0,this.layer=null,this.sortValue=void 0,this._pending=K(null)}get pending(){return this._pending.value}set pending(t){this._pending.value=t}}const Ae=Symbol("isCatalogGraphicOrigin");var D;class Me extends de{get[(D=Ae,ae)](){return this.layer}get[pe](){return this.layer}get[ue](){return this.layer}constructor(t){super(),this[D]=!0,this.type="catalog",this.layer=t}get id(){return this.layer.id}}function Ge(){const e=new be({style:"solid",color:[0,0,0,0],outline:{style:"solid",color:[96,96,96,.75],width:.75}});return new ce({symbol:e})}let o=class extends O(ye(I(F(h)))){constructor(e){super(e),this.attributeTableTemplate=null,this.charts=null,this.editingEnabled=!0,this.elevationInfo=null,this.formTemplate=null,this.graphicOrigin=new Me(this),this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.opacity=1,this.parent=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.title="Footprints",this.type="catalog-footprint",this.visible=!0}load(e){return this.addResolvingPromise(this._doLoad(e)),Promise.resolve(this)}async _doLoad(e){await this.parent.load(e),q(this.renderer,this.fieldsIndex),this.addHandles([this.parent.on("apply-edits",t=>this.emit("apply-edits",t)),this.parent.on("edits",t=>this.emit("edits",t)),this.parent.on("refresh",t=>this.emit("refresh",t))])}get apiKey(){return this.parent?.apiKey}get capabilities(){return this.parent?.capabilities}get customParameters(){return this.parent?.customParameters}get dateFieldsTimeZone(){return this.parent?.dateFieldsTimeZone??null}get datesInUnknownTimezone(){return this.parent?.datesInUnknownTimezone??!1}get definitionExpression(){return this.parent?.definitionExpression}get editingInfo(){return this.parent?.editingInfo}get effectiveCapabilities(){return this.parent?.effectiveCapabilities}get createQueryVersion(){return this.parent?.createQueryVersion}get defaultPopupTemplate(){return this.createPopupTemplate()}get displayField(){return this.parent?.displayField}get displayFilterEnabled(){return this.parent?.displayFilterEnabled??!0}get displayFilterInfo(){return this.parent?.displayFilterInfo??null}get effectiveEditingEnabled(){return!1}get fields(){return this.parent?.fields}get fieldsIndex(){return this.parent?.fieldsIndex}get fullExtent(){return this.parent?.fullExtent}get geometryFieldsInfo(){return this.parent?.geometryFieldsInfo}get geometryType(){return this.parent?.geometryType}get globalIdField(){return this.parent?.globalIdField}get hasM(){return this.parent?.hasM??!1}get hasZ(){return this.parent?.hasZ??!1}get objectIdField(){return this.parent?.objectIdField}get orderBy(){return this.parent?.orderBy??null}get outFields(){return this.parent?.outFields}get parsedUrl(){return this.parent?.parsedUrl??null}get preferredTimeZone(){return this.parent?.preferredTimeZone??null}set renderer(e){q(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){return this._isOverridden("renderer")?this._get("renderer"):Ge()}get returnM(){return this.parent?.returnM}get returnZ(){return this.parent?.returnZ}get source(){return this.parent?.source}get timeExtent(){return this.parent?.timeExtent}get timeInfo(){return this.parent?.timeInfo}get timeOffset(){return this.parent?.timeOffset}get typeIdField(){return this.parent?.typeIdField}get types(){return this.parent?.types}get useViewTime(){return this.parent?.useViewTime??!0}get version(){return this.parent?.version}async applyEdits(e,t){return await this.load(),this.parent.applyEdits(e,t)}createPopupTemplate(e){const t={fields:this.fields,objectIdField:this.objectIdField,title:this.title};return ve(t,e)}createQuery(){return this.parent?.createQuery()}getField(e){return this.parent?.getField(e)}getFieldDomain(e,t){return this.parent?.getFieldDomain(e,t)}async queryExtent(e,t){return await this.load(),this.parent.queryExtent(e,t)}async queryFeatures(e,t){return await this.load(),this.parent.queryFeatures(e,t)}async queryFeatureCount(e,t){return await this.load(),this.parent.queryFeatureCount(e,t)}async queryObjectIds(e,t){return await this.load(),this.parent.queryObjectIds(e,t)}async queryAttributeBins(e,t){return await this.load(),this.parent.queryAttributeBins(e,t)}};r([i(Y)],o.prototype,"attributeTableTemplate",void 0),r([i({readOnly:!0})],o.prototype,"apiKey",null),r([i({readOnly:!0})],o.prototype,"capabilities",null),r([i({readOnly:!0})],o.prototype,"customParameters",null),r([i()],o.prototype,"dateFieldsTimeZone",null),r([i({readOnly:!0})],o.prototype,"datesInUnknownTimezone",null),r([i({readOnly:!0})],o.prototype,"definitionExpression",null),r([i({readOnly:!0})],o.prototype,"editingInfo",null),r([i({readOnly:!0})],o.prototype,"effectiveCapabilities",null),r([i({json:{origins:{"web-scene":{write:!1}},write:!0}})],o.prototype,"charts",void 0),r([i({readOnly:!0})],o.prototype,"createQueryVersion",null),r([i({readOnly:!0})],o.prototype,"defaultPopupTemplate",null),r([i({readOnly:!0})],o.prototype,"displayField",null),r([i({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],o.prototype,"editingEnabled",void 0),r([i({readOnly:!0})],o.prototype,"effectiveEditingEnabled",null),r([i((()=>{const e=g(W);return e.json.origins["web-map"]={read:!1,write:!1},e})())],o.prototype,"elevationInfo",void 0),r([i({readOnly:!0})],o.prototype,"fields",null),r([i({readOnly:!0})],o.prototype,"fieldsIndex",null),r([i({type:le,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],o.prototype,"formTemplate",void 0),r([i({readOnly:!0})],o.prototype,"fullExtent",null),r([i({readOnly:!0})],o.prototype,"geometryFieldsInfo",null),r([i({readOnly:!0})],o.prototype,"geometryType",null),r([i({readOnly:!0})],o.prototype,"globalIdField",null),r([i({readOnly:!0,clonable:!1})],o.prototype,"graphicOrigin",void 0),r([i({readOnly:!0})],o.prototype,"hasM",null),r([i({readOnly:!0})],o.prototype,"hasZ",null),r([i({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0,isRequired:!0}}})],o.prototype,"id",void 0),r([i({type:[he],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:me,write:!0}})],o.prototype,"labelingInfo",void 0),r([i(X)],o.prototype,"labelsVisible",void 0),r([i(_)],o.prototype,"legendEnabled",void 0),r([i({type:["show","hide"],json:{write:!0}})],o.prototype,"listMode",void 0),r([i((()=>{const e=g(ee);return e.json.origins.service.read=!1,e})())],o.prototype,"maxScale",void 0),r([i((()=>{const e=g(te);return e.json.origins.service.read=!1,e})())],o.prototype,"minScale",void 0),r([i({readOnly:!0})],o.prototype,"objectIdField",null),r([i(A)],o.prototype,"opacity",void 0),r([i({readOnly:!0})],o.prototype,"orderBy",null),r([i({readOnly:!0})],o.prototype,"outFields",null),r([i({clonable:!1})],o.prototype,"parent",void 0),r([i({readOnly:!0})],o.prototype,"parsedUrl",null),r([i(re)],o.prototype,"popupEnabled",void 0),r([i({type:ne,json:{name:"popupInfo",write:!0}})],o.prototype,"popupTemplate",void 0),r([i({readOnly:!0})],o.prototype,"preferredTimeZone",null),r([i({types:ge,json:{origins:{"web-scene":{types:fe}},name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(e,t){return{ignoreOrigin:this.originIdOf(t)<3}}}}})],o.prototype,"renderer",null),r([i({readOnly:!0})],o.prototype,"returnM",null),r([i({readOnly:!0})],o.prototype,"returnZ",null),r([i({readOnly:!0})],o.prototype,"source",null),r([i({readOnly:!0})],o.prototype,"timeExtent",null),r([i({readOnly:!0})],o.prototype,"timeInfo",null),r([i({readOnly:!0})],o.prototype,"timeOffset",null),r([i({type:String,nonNullable:!0,json:{write:{ignoreOrigin:!0,isRequired:!0}}})],o.prototype,"title",void 0),r([i({json:{read:!1}})],o.prototype,"type",void 0),r([i({readOnly:!0})],o.prototype,"typeIdField",null),r([i({readOnly:!0})],o.prototype,"types",null),r([i({readOnly:!0})],o.prototype,"useViewTime",null),r([i({type:Boolean,json:{name:"visibility",write:!0}})],o.prototype,"visible",void 0),o=r([j("esri.layers.catalog.CatalogFootprintLayer")],o);const v=De();function Ne(e){return typeof e=="object"&&e!=null&&"itemId"in e&&"portalUrl"in e}function Ze(e){return typeof e=="object"&&e!=null&&"url"in e}function Qe(e){if(e==null)return!0;const t=Object.keys(e);return!t.length||t.length===1&&t[0]==="id"}function U(e,t,a,s){const p=e.write({},s);Qe(p)||(t[a]=p)}let n=class extends Oe(Te(_e(I(oe(Se(O(Ee(Fe(J(Le(F(Ie(je(h)))))))))))))){constructor(e){super(e),this.legendEnabled=!0,this._portals=new Map,this._layerToFootprint=new WeakMap,this.drawOrderField="cd_draworder",this.dynamicGroupLayer=new d({parent:this}),this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.footprintLayer=new o({parent:this}),this.itemNameField="cd_itemname",this.itemSourceField="cd_itemsource",this.itemTypeField="cd_itemtype",this.layers=new $([this.dynamicGroupLayer,this.footprintLayer]),this.maxScaleField="cd_maxscale",this.minScaleField="cd_minscale",this.orderBy=null,this.outFields=null,this.supportedSourceTypes=new Set(["Catalog Layer"]),this.source=new we({layer:this,supportedSourceTypes:this.supportedSourceTypes}),this.type="catalog",this.typeIdField=null,this.types=null}load(e){const t=e!=null?e.signal:null,a=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(M).then(async()=>{const{url:s,source:p,portalItem:l}=this;if(!s)throw new f("catalog-layer:missing-url","Catalog layer must be created with a url");if(this.layerId==null){const y=await this._fetchFirstValidLayerId(t);if(y==null)throw new f("catalog-layer:missing-layerId","There is no Catalog Layer in the service",{service:s});this.layerId=y}await p.load({signal:t});const{sourceJSON:u}=p;u&&(this.sourceJSON=u,this.read(u,{origin:"service",portalItem:l,portal:l?.portal,url:this.parsedUrl}))}).then(()=>{const s=[this.itemNameField,this.itemSourceField,this.itemTypeField,this.minScaleField,this.maxScaleField],p=s.filter(l=>!this.fieldsIndex.has(l));if(p.length)throw new f("catalog-layer:missing-fields","There are missing fields to operate properly",{requiredFields:s,missingFields:p})}).then(()=>xe(this,"load",e));return this.addResolvingPromise(a),Promise.resolve(this)}destroy(){this.footprintLayer.destroy(),this.dynamicGroupLayer.destroy();for(const e of this._portals.values())e.destroy();this._portals.clear()}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&this.capabilities!=null&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return!1}async applyEdits(e,t){return Ce(this,e,t)}async createLayerFromFootprint(e){const t=await this._createLayer(e);return this._configureLayer(t,e),this._layerToFootprint.set(t,e),t}createFootprintFromLayer(e){return this._layerToFootprint.get(e)?.clone()}createQuery(){const e=new m,t=this.capabilities?.query;e.returnGeometry=!0,t&&(e.compactGeometryEnabled=t.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=t.supportsDefaultSpatialReference),e.outFields=["*"];const{timeOffset:a,timeExtent:s}=this;return e.timeExtent=a!=null&&s!=null?s.offset(-a.value,a.unit):s||null,e.where=this.definitionExpression||"1=1",e}getFeatureType(e){return Pe(this.types,this.typeIdField,e)}getFieldDomain(e,t){const a=t?.feature,s=this.getFeatureType(a);if(s){const p=s.domains&&s.domains[e];if(p&&p.type!=="inherited")return p}return this.getField(e)?.domain}async hasDataChanged(){return Re(this)}async queryFeatures(e,t){const a=await this.load(),s=await a.source.queryFeatures(m.from(e)??a.createQuery(),t),p=a.footprintLayer.graphicOrigin;if(s?.features)for(const l of s.features)l.layer=l.sourceLayer=a.footprintLayer,l.origin=p;return s}async queryObjectIds(e,t){return(await this.load()).source.queryObjectIds(m.from(e)??this.createQuery(),t)}async queryFeatureCount(e,t){return(await this.load()).source.queryFeatureCount(m.from(e)??this.createQuery(),t)}async queryExtent(e,t){return(await this.load()).source.queryExtent(m.from(e)??this.createQuery(),t)}serviceSupportsSpatialReference(e){return this.loaded&&Ue(this,e)}read(e,t){if(super.read(e,t),e){const{footprintLayer:a,dynamicGroupLayer:s}=e;a&&this.footprintLayer.read(a,t),s&&this.dynamicGroupLayer.read(s,t)}}async queryAttributeBins(e,t){const{source:a,capabilities:s}=await this.load();Be(e,s,"CatalogLayer");const p=await S(()=>x(()=>import("./AttributeBinsQuery-DmkXyj6Y-zPPLAaI-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])),b([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30])),l=await a.queryAttributeBins(p.default.from(e),t);if(l.features)for(const u of l.features)u.layer=u.sourceLayer=this.footprintLayer;return l}async _fetchFirstValidLayerId(e){const{data:t}=await Z(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e});if(this.applyPreferredHost(t),Array.isArray(t?.layers))return t.layers.find(({type:a})=>this.supportedSourceTypes.has(a))?.id}async _createLayer(e){const t=e.getAttribute(this.itemSourceField);if(!t)throw new f("catalog-layer:item-source-missing",`The footprint is missing the "${this.itemSourceField}" attribute`);const a=JSON.parse(t);if(Ne(a)){const{itemId:p,portalUrl:l}=a,u=Q(l),y=this.portalItem?.portal,T=R.getDefault();let c,L=!0;y&&P(l,y.url)?c=y:P(l,T.url)?c=T:(c=V(this._portals,u,()=>new R({url:u})),L=!1);const E=await h.fromPortalItem(new Ve({id:p,portal:c}));return L||await w(E),E}if(Ze(a))return h.fromArcGISServerUrl({url:a.url});const{default:s}=await S(()=>x(()=>import("./UnsupportedLayer-D7JhKwIy-DE61FUHB.js"),__vite__mapDeps([31,1,32,28,3,4,5,6,7,2,8,9,29,33,34,35,36,37,18,13,14,15,11])),b([31,1,32,28,3,4,5,6,7,2,8,9,29,33,34,35,36,37,18,13,14,15,11]));return new s}_configureLayer(e,t){const a=t.getAttribute(this.itemNameField);a&&(e.title=a);const s=t.getAttribute(this.maxScaleField);s!=null&&"maxScale"in e&&(e.maxScale=s);const p=t.getAttribute(this.minScaleField);p!=null&&"minScale"in e&&(e.minScale=p)}};async function w(e){if("portalItem"in e&&e.portalItem){try{await e.load()}catch{}e.portalItem=null,e.type==="group"&&await Promise.allSettled([...e.layers.map(t=>w(t)),...e.tables.map(t=>w(t))])}}r([i(_)],n.prototype,"legendEnabled",void 0),r([i({readOnly:!0})],n.prototype,"createQueryVersion",null),r([i({readOnly:!0})],n.prototype,"drawOrderField",void 0),r([i({type:d,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:U}}})],n.prototype,"dynamicGroupLayer",void 0),r([i({readOnly:!0})],n.prototype,"editingEnabled",null),r([i({readOnly:!0})],n.prototype,"effectiveEditingEnabled",null),r([i({json:{origins:{"web-scene":{name:"layerDefinition.elevationInfo",read:!1,write:!1}}}})],n.prototype,"elevationInfo",void 0),r([i({...v.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],n.prototype,"fields",void 0),r([i(v.fieldsIndex)],n.prototype,"fieldsIndex",void 0),r([i({json:{origins:{"web-scene":{name:"layerDefinition.floorInfo",read:!1,write:!1}}}})],n.prototype,"floorInfo",void 0),r([i({type:o,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:U}}})],n.prototype,"footprintLayer",void 0),r([i(ie)],n.prototype,"id",void 0),r([i({readOnly:!0})],n.prototype,"itemNameField",void 0),r([i({readOnly:!0})],n.prototype,"itemSourceField",void 0),r([i({readOnly:!0})],n.prototype,"itemTypeField",void 0),r([i({readOnly:!0})],n.prototype,"layers",void 0),r([i({type:["show","hide","hide-children"]})],n.prototype,"listMode",void 0),r([i({readOnly:!0})],n.prototype,"maxScaleField",void 0),r([i({readOnly:!0})],n.prototype,"minScaleField",void 0),r([i({value:"CatalogLayer",type:["CatalogLayer"]})],n.prototype,"operationalLayerType",void 0),r([i({json:{origins:{"web-scene":{name:"layerDefinition.orderBy",write:!0,read:!0}}}})],n.prototype,"orderBy",void 0),r([i(v.outFields)],n.prototype,"outFields",void 0),r([i({readOnly:!0})],n.prototype,"source",void 0),r([i({json:{read:!1}})],n.prototype,"type",void 0),r([i({type:String})],n.prototype,"typeIdField",void 0),r([i({type:[qe]})],n.prototype,"types",void 0),n=r([j("esri.layers.CatalogLayer")],n);const Bi=n;export{Bi as default};
