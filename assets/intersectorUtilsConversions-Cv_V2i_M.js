import{O as V}from"./mat4-Bjnccznk.js";import{n as w}from"./collectionUtils-CB98pReO.js";import{F as U}from"./aaBoundingBox-DO0Hqciy.js";import{L as x}from"./sphere-DGD4QNOm.js";import{p as a,i as c}from"./HUDIntersectorResult-Ds4yeNc-.js";import{s as m,r as o,a as d}from"./Intersector-BFu7YAUe.js";let M=class extends o{constructor(r,e){super(e,null),this.point=r}},W=class extends o{constructor(r,e,n,i){super(e,n),this.point=r,this.createGraphic=i}};function b(t){return a(t)&&t.intersector===6&&!!t.target}class q extends m{constructor(r,e,n,i,s){super(r),this.layerViewUid=r,this.sublayerId=e,this.nodeIndex=n,this.componentIndex=i,this.triangleNr=s}}class z extends o{constructor(r,e,n){super(e,null),this.point=r,this.createVoxelGraphic=n}}class C extends m{}function f(t){return a(t)&&t.intersector===2&&!!t.target}function L(t){return a(t)&&t.intersector===9&&!!t.target}function I(t){return a(t)&&t.intersector===7&&!!t.target}function D(t,r){if(!a(r)||!r.target||!("layerViewUid"in r.target))return!1;const e=r.target.layerViewUid;switch(t.allLayerViews.find(i=>i.uid===e)?.layer.type){case"integrated-mesh":case"integrated-mesh-3dtiles":return!0}return!1}class E extends o{constructor(r,e,n){super(r,e),this.triangleNr=n}}function G(t){return a(t)&&t.intersector===5&&!!t.target}function g(t){return a(t)&&t.intersector===4&&!!t.target}function J(t,r){return g(t)||c(t)?l(t.target?.object,r):I(t)?r.map?.ground:t.target&&"layerViewUid"in t.target?l(t.target,r):null}function K(t,r){const e=B(t,r);return e?.type==="graphic"?e.graphic:null}function B(t,r,e={}){if(t==null)return null;if(g(t)||c(t))return h(t.target?.object,r,e);if(b(t)){const n=t.target.createGraphic();return{type:"graphic",graphic:n,layer:n.layer}}if(L(t)){const n=t.target.createVoxelGraphic();return{type:"graphic",graphic:n,layer:n.layer}}return G(t)||d(t)?h(t.target,r,e):f(t)?F(t.target,r,e):null}function h(t,r,e){if(t?.graphicUid==null)return null;const n=l(t,r);if(n==null)return null;if(n===r.graphics)return r.graphicsView==null||typeof t.graphicUid!="number"?null:r.graphicsView.getHit(t.graphicUid,e);const i=r.allLayerViews.find(s=>s.layer===n);return!i||i.suspended||t.graphicUid==null?null:"getHit"in i?i.getHit(t.graphicUid,e):null}function F(t,r,e){const n=l(t,r);if(n==null)return null;const i=r.allLayerViews.find(p=>p.layer===n);if(!i||i.suspended||!("getGraphicFromIntersectorTarget"in i))return null;const s=e.defer;return y(i.getGraphicFromIntersectorTarget(t,{defer:s?p=>s(async()=>y(await p())):void 0}))}function j(t,r){const e=l(t,r);if(e==null)return null;const n=r.allLayerViews.find(i=>i.layer===e);return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(t):null}function y(t){return t!=null?{type:"graphic",graphic:t,layer:t.layer}:null}function l(t,r){return t?.layerViewUid==null?null:r.graphicsView!=null&&t.layerViewUid===r.graphicsView.uid?r.graphics:r.allLayerViews.find(e=>e.uid===t.layerViewUid)?.layer}function P(t,r){if(g(t)||c(t))return x(t.target.object.boundingVolumeWorldSpace.bounds);if(d(t)){V(u,t.transformation);const e=Math.max(u[0],u[1],u[2]);return t.target.baseBoundingSphere.radius*e}if(f(t)){const e=j(t.target,r);return e?.5*U(e):null}return null}function Q(t){return!g(t)&&!c(t)&&(d(t)?t.target.numLodLevels>1:!!f(t))}const u=w();export{W as a,Q as b,z as c,B as d,K as f,E as i,C as l,D as n,q as o,J as p,I as r,M as s,P as w};
