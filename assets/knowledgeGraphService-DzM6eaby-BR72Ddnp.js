const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/arcgis-knowledge-client-core-simd-MWuc4M46-Cr1e2etg.js","assets/_commonjsHelpers-DCkdB7M8-DwXtFsJ3.js","assets/arcgis-knowledge-client-core-C35p-7p7-DGzozVbE.js","assets/FeatureLayer-BRWpcy_W-BoHEkHsh.js","assets/index-CTl7hdrJ.js","assets/index-Cv2ko1Ob.css","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/getPopupProvider-CmskPttI-C4PqyuPF.js","assets/collectionUtils-jDyktm0P-ArdXNs6F.js","assets/Point-BfTTZoMu-BAT2Wq6O.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/Extent-CgDMOSRD-CU1qE5Kr.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/lengthUtils-Dt1_RvOO-bleznLOi.js","assets/date-IqUzANpt-bLKO9IDT.js","assets/Color-CERqXxxY-BuYn26eI.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/Layer-DZvC7bne-m1cEC_yw.js","assets/MultiOriginJSONSupport-Bd1TKmh_-BHNF5tHX.js","assets/layerContainerType-CSXZNpHb-BIF7XAYP.js","assets/FormTemplate-DuPZvaVv-Bo80W65Y.js","assets/Field-Cm_ZejYW-CwJZmSru.js","assets/fieldType-DVUzXtk_-tUuvnZJM.js","assets/Graphic-DgGzDmqW-CFzg0c4i.js","assets/jsonUtils-CmpazY1u-ateEpj4Q.js","assets/Polyline-CoiTLswR-BLagWJLS.js","assets/Polygon-D6wEPb3W-CpL9Efjx.js","assets/aaBoundingRect-CjwcS2F3-D7aII9DY.js","assets/typeUtils-DqrRcjBx-ZWdHcSIJ.js","assets/createFeatureId-CVwTD0fV-3fKpJDrk.js","assets/typeUtils-CXW_VpOn-BoSnXkME.js","assets/lineMarkers-CDwLe3J6-CNUjJvs3.js","assets/PolygonSymbol3D-BXRHZiCQ-Vi0-2Gvc.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js","assets/screenUtils-BitdhK1O-L0FLPAMi.js","assets/opacityUtils-DuFH0EC9-DWspTgn2.js","assets/aaBoundingBox-Cn49X7ge-DORLZxoS.js","assets/DoubleArray-DExKNiTh-CvVpHySW.js","assets/mat4f64-q_b6UJoq-Dh6sWB_w.js","assets/Font-BwmnW7d2-D-oIm_Md.js","assets/SimpleFillSymbol-CDawtd9z-CWD2KI2D.js","assets/SimpleMarkerSymbol-BGAFRS9_-CVQ5NLIA.js","assets/PictureMarkerSymbol-CaSh-vZk-BNpExnAb.js","assets/TextSymbol-hRGhyDHs-C0NgASym.js","assets/GraphicOrigin-uE6TDXc9-DqbdmNAV.js","assets/isFeatureGraphicOrigin-YA2hudPe-Bk2FjH_E.js","assets/workers-BEkgoq8Q-BNWfkyQs.js","assets/Queue-CYlrXMwB-CYJTUII-.js","assets/intl-DRFqUect-ClAS7BRt.js","assets/editsZScale-D3N5iH_c-CePEFiUi.js","assets/queryZScale-CRP3Sh_E-0yf18ElE.js","assets/projectionUtils-BGH_5_I3-BySNUA-B.js","assets/FeatureSet-BF7daP96-BqhMUjXs.js","assets/APIKeyMixin--YGbad8e-DJ-JJTX5.js","assets/ArcGISService-SIwch9bz-BD00xz4C.js","assets/BlendLayer-HE_aYHHW-CZa4IAJu.js","assets/jsonUtils-CY6YsQMo-SliJcuqs.js","assets/mat4f32-Djp3mnm5-DzYG3LYB.js","assets/mat4-C96X-Nn0-Do6fKsNS.js","assets/CustomParametersMixin-Dshqz1Zp-BFC165kX.js","assets/DisplayFilteredLayer-DyjtPayS-DEIdkBF3.js","assets/scaleUtils-yfx9kKWT-BPfZ-Fh2.js","assets/uuid-Oe6SV2kF-IYX19xBA.js","assets/displayFilterUtils-CIXGrQzt-Ck5cgHqb.js","assets/EditBusLayer-rxUbWTiY-BI2sZl38.js","assets/FeatureEffectLayer-BG_KTtPw-CZiOOvL9.js","assets/FeatureEffect-mVCOF1v6-NIKVGK4R.js","assets/FeatureFilter-G4_pWMVe-vo0uU6rO.js","assets/Query-BlS0WPDF-BdshFBMz.js","assets/FeatureLayerBase-BUeDgO3U-BWuQV9AM.js","assets/HeightModelInfo-D5IdRvJ2-BK9di2bT.js","assets/OperationalLayer-B6zbJ5nR-sYdHUfAL.js","assets/ElevationInfo-Cw2HaA6E-Br1RWTYu.js","assets/unitConversionUtils-4vB4Ezlp-B0eWR3Ls.js","assets/timeZoneUtils-BSc7-7qA-BAv3h8mh.js","assets/featureLayerUtils-FKjLNPl_-DLktjSPx.js","assets/asyncUtils-w6KfWU41-HenJ0UOu.js","assets/featureQueryAll-BfDWA5Wx-ZgjJqs6l.js","assets/layerUtils-DZGhvm-W-DLw3QMll.js","assets/SimpleRenderer-CEmCWePp-xiwnMlto.js","assets/commonProperties-DbO613LF-DeJ_ZDUB.js","assets/colorRamps-DswZzxkO-BqSFavfl.js","assets/ColorStop-De5gQTjr-C1lw16u9.js","assets/visualVariableUtils-ma4r7Z2K-C4Gu8Tj6.js","assets/jsonUtils-C9q_FK4K-Cuz7ImzI.js","assets/defaults3D-C2hXSee1-DVT6WkAf.js","assets/defaults-BDN9qxeN-CCVK4JpS.js","assets/defaultsJSON-GKolV7NZ-GKolV7NZ.js","assets/UniqueValueRenderer-JPjz9Qvs-C1w5-GWR.js","assets/diffUtils-wTC1YzlE-JuqUWoWa.js","assets/RendererLegendOptions-ByGHYLtx-C9PvCikc.js","assets/styleUtils-DWvicjTN-DYvOM9HS.js","assets/NormalizationBinParametersMixin-BK9wNkI3-BKYeOhDN.js","assets/LayerFloorInfo-CTubHTci-DKf2wu5F.js","assets/multiLayerServiceUtils-CpHWiXA7-B9JDcSQL.js","assets/Relationship-CrANqG2c-DztISWOP.js","assets/serviceCapabilitiesUtils-BV_pcUiO-CjqWUbfp.js","assets/infoFor3D-DhzudQro-CCYgWfsv.js","assets/portalItemUtils-CaPNUJg6-JsqddoLx.js","assets/FeatureReductionLayer-Bhh5MvS_-BFfoYl9g.js","assets/FeatureReductionSelection-Du7o8OIG-DmruV-ou.js","assets/labelingInfo-BYG2hiVF-Dmkr19gA.js","assets/labelUtils-BtizwBfq-Zegx4520.js","assets/jsonUtils-BCGKNxno-Cm1OfGeu.js","assets/typeUtils-DDFS4uuz-Cx8qHFHN.js","assets/ClassBreaksRenderer-BvgdqtTq-DxMHNS7X.js","assets/LRUCache-fy84PBMi-Y56WPIvD.js","assets/DictionaryScriptEvaluator-G73uSGpN-Cn2sp0hZ.js","assets/Version-BtYZEj58-LyRHDnSJ.js","assets/FieldsIndex-CimK-TqD-CrSnohIk.js","assets/UnknownTimeZone-B697BDFv-CBbtul7O.js","assets/ArcadeExpression-BlIRq-oN-DGzfhzBj.js","assets/TimeOnly-BERR31kg-PKcKegNB.js","assets/enum-BzLwmiID-CcyIdWlQ.js","assets/utils-DX2muIr3-DiPfFKSl.js","assets/heatmapUtils-B-AXnq0l-G7fD8L97.js","assets/vec42-B8VM4vXb-BnA9MysM.js","assets/vec4f64-DPb6J-GU-C7c2DqbZ.js","assets/MD5-MtSiOt06-jWr180Yc.js","assets/OrderedLayer-DQAUgUTV-CpnQmtbN.js","assets/PortalLayer-CbFNhtZ4-CCXE0v4V.js","assets/PortalItem-DnxMlRVo-Dhq4alsp.js","assets/RefreshableLayer-CBbEkZf--CC_b3xaQ.js","assets/ScaleRangeLayer-DQr2T3Hh-Dh1UYk4i.js","assets/TemporalLayer-D4R0YvXo-CzgQNAIr.js","assets/TimeInfo-D7ssmbZO-CCS1Im5i.js","assets/TrackableLayer-B-086Hm8-Bm00-8pN.js","assets/FeatureTemplate-Bur8tORn-iLlvjnYm.js","assets/FeatureType-CFJlAOcG-Dk8Ixr4n.js","assets/fieldProperties-BoJj55FN-yR5ddqST.js","assets/TitleCreator-BosRD8XX-DSGT-m9r.js","assets/sanitizerUtils-BT_8V5US-CWQWUwZQ.js","assets/versionUtils-BfuZvWmP-BDnOmw3Z.js","assets/styleUtils-CZJC3pZm-BNE6B1Si.js","assets/popupUtils-D4UavgYz-4fibcgIL.js","assets/MapImageLayer-CfQN2r84-DXbOsQ8c.js","assets/loadAll-BCyxerwc-DK9uHnLK.js","assets/SublayersOwner-BDnxg7TB-DBdAiHYc.js","assets/CollectionFlattener-D6h2Fkvj-qnUHjb1M.js","assets/QueryTask-DtLshCh_-BDkI4_Zx.js","assets/utils-CylVuxNi-CqOfmBVG.js","assets/executeForIds-CuyQNBvQ-BEkKvDan.js","assets/query-DeNEvEsQ-piAD5C2I.js","assets/normalizeUtils-85zLqeMi-DCF9gKvo.js","assets/Cyclical-BLSxUpe7-Bj8R2Yk-.js","assets/normalizeUtilsCommon-CnhQye_A-zWtr51r8.js","assets/utils-Dpg4yj1D-BVnuoMV8.js","assets/pbfQueryUtils-DlZBMNQk-B4EJfzeq.js","assets/pbf-2SIhMekG-LK438LAR.js","assets/memoryEstimations-Bd726a_p-0cVCY2Jz.js","assets/OptimizedFeature-CwRGZPwv-Ddclhn0A.js","assets/OptimizedFeatureSet-BR8EEvDc-CgsRgxJh.js","assets/executeQueryJSON-DgYznOlB-DXG9oqHS.js","assets/featureConversionUtils-BDA_FXJx-CUwkrHf5.js","assets/sublayerUtils-BEQnBRaB-BKtQCtZt.js","assets/ExportImageParameters-O9hPdhyJ-DU8D07mU.js","assets/floorFilterUtils-DKzVzLpH-C2F2Cy-S.js","assets/imageBitmapUtils-BP4sA6iR-DQ78ujMy.js"])))=>i.map(i=>d[i]);
import{H as _e,_ as ve}from"./index-CTl7hdrJ.js";import{H as I,a as Dt,an as Ze,f as J,c as Le,b as st}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{l as kt,I as p,v as je,w as Rt,q as Y,a7 as D,aD as Ct,a5 as Ye,S as he,aC as Z,aK as It,Y as o,H as l,G as f,aM as Ft}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{z as nt}from"./Extent-CgDMOSRD-CU1qE5Kr.js";import{l as Et}from"./normalizeUtils-85zLqeMi-DCF9gKvo.js";import{o as At}from"./Field-Cm_ZejYW-CwJZmSru.js";import{J as X,d as Mt}from"./utils-CylVuxNi-CqOfmBVG.js";import{B as xe}from"./Color-CERqXxxY-BuYn26eI.js";import{a as Nt,s as Ot}from"./networkEnums-DcxQ-KKD-B7fWvtQx.js";import{c as Se}from"./FeatureSet-BF7daP96-BqhMUjXs.js";import{u as Ut}from"./reader-DcGs6kKN-DHJfK-tm.js";import{y as qt}from"./GPMessage-D_4FfUD9-H-J6FJ7I.js";import{o as ot,n as Be}from"./Polyline-CoiTLswR-BLagWJLS.js";import{P as ze}from"./Polygon-D6wEPb3W-CpL9Efjx.js";import{d as Lt,a as Bt,u as zt,y as $t}from"./GraphQueryStreaming-ERTkxqUb-CWY79OsJ.js";import"./Cyclical-BLSxUpe7-Bj8R2Yk-.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./normalizeUtilsCommon-CnhQye_A-zWtr51r8.js";import"./jsonUtils-CmpazY1u-ateEpj4Q.js";import"./utils-Dpg4yj1D-BVnuoMV8.js";import"./fieldType-DVUzXtk_-tUuvnZJM.js";import"./Graphic-DgGzDmqW-CFzg0c4i.js";import"./getPopupProvider-CmskPttI-C4PqyuPF.js";import"./collectionUtils-jDyktm0P-ArdXNs6F.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./SimpleObservable-CvFyr0NA-DXpoMYph.js";import"./lengthUtils-Dt1_RvOO-bleznLOi.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./Layer-DZvC7bne-m1cEC_yw.js";import"./typeUtils-DqrRcjBx-ZWdHcSIJ.js";import"./createFeatureId-CVwTD0fV-3fKpJDrk.js";import"./typeUtils-CXW_VpOn-BoSnXkME.js";import"./lineMarkers-CDwLe3J6-CNUjJvs3.js";import"./PolygonSymbol3D-BXRHZiCQ-Vi0-2Gvc.js";import"./ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js";import"./screenUtils-BitdhK1O-L0FLPAMi.js";import"./opacityUtils-DuFH0EC9-DWspTgn2.js";import"./aaBoundingBox-Cn49X7ge-DORLZxoS.js";import"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";import"./DoubleArray-DExKNiTh-CvVpHySW.js";import"./mat4f64-q_b6UJoq-Dh6sWB_w.js";import"./Font-BwmnW7d2-D-oIm_Md.js";import"./SimpleFillSymbol-CDawtd9z-CWD2KI2D.js";import"./SimpleMarkerSymbol-BGAFRS9_-CVQ5NLIA.js";import"./PictureMarkerSymbol-CaSh-vZk-BNpExnAb.js";import"./TextSymbol-hRGhyDHs-C0NgASym.js";const de=(e,r=de,t=r.f||(r.f=["assets/arcgis-knowledge-client-core-simd-MWuc4M46.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/arcgis-knowledge-client-core-C35p-7p7.js","assets/FeatureLayer-BRWpcy_W.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/jsonMap-Bs3hmeCU.js","assets/getPopupProvider-CmskPttI.js","assets/collectionUtils-jDyktm0P.js","assets/Point-BfTTZoMu.js","assets/reader-DcGs6kKN.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-CgDMOSRD.js","assets/SimpleObservable-CvFyr0NA.js","assets/lengthUtils-Dt1_RvOO.js","assets/date-IqUzANpt.js","assets/Color-CERqXxxY.js","assets/mathUtils-PIGhLnI9.js","assets/Layer-DZvC7bne.js","assets/MultiOriginJSONSupport-Bd1TKmh_.js","assets/layerContainerType-CSXZNpHb.js","assets/FormTemplate-DuPZvaVv.js","assets/Field-Cm_ZejYW.js","assets/fieldType-DVUzXtk_.js","assets/Graphic-DgGzDmqW.js","assets/jsonUtils-CmpazY1u.js","assets/Polyline-CoiTLswR.js","assets/Polygon-D6wEPb3W.js","assets/aaBoundingRect-CjwcS2F3.js","assets/typeUtils-DqrRcjBx.js","assets/createFeatureId-CVwTD0fV.js","assets/typeUtils-CXW_VpOn.js","assets/lineMarkers-CDwLe3J6.js","assets/PolygonSymbol3D-BXRHZiCQ.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x.js","assets/screenUtils-BitdhK1O.js","assets/opacityUtils-DuFH0EC9.js","assets/aaBoundingBox-Cn49X7ge.js","assets/DoubleArray-DExKNiTh.js","assets/mat4f64-q_b6UJoq.js","assets/Font-BwmnW7d2.js","assets/SimpleFillSymbol-CDawtd9z.js","assets/SimpleMarkerSymbol-BGAFRS9_.js","assets/PictureMarkerSymbol-CaSh-vZk.js","assets/TextSymbol-hRGhyDHs.js","assets/GraphicOrigin-uE6TDXc9.js","assets/isFeatureGraphicOrigin-YA2hudPe.js","assets/workers-BEkgoq8Q.js","assets/Queue-CYlrXMwB.js","assets/intl-DRFqUect.js","assets/editsZScale-D3N5iH_c.js","assets/queryZScale-CRP3Sh_E.js","assets/projectionUtils-BGH_5_I3.js","assets/FeatureSet-BF7daP96.js","assets/APIKeyMixin--YGbad8e.js","assets/ArcGISService-SIwch9bz.js","assets/BlendLayer-HE_aYHHW.js","assets/jsonUtils-CY6YsQMo.js","assets/mat4f32-Djp3mnm5.js","assets/mat4-C96X-Nn0.js","assets/CustomParametersMixin-Dshqz1Zp.js","assets/DisplayFilteredLayer-DyjtPayS.js","assets/scaleUtils-yfx9kKWT.js","assets/uuid-Oe6SV2kF.js","assets/displayFilterUtils-CIXGrQzt.js","assets/EditBusLayer-rxUbWTiY.js","assets/FeatureEffectLayer-BG_KTtPw.js","assets/FeatureEffect-mVCOF1v6.js","assets/FeatureFilter-G4_pWMVe.js","assets/Query-BlS0WPDF.js","assets/FeatureLayerBase-BUeDgO3U.js","assets/HeightModelInfo-D5IdRvJ2.js","assets/OperationalLayer-B6zbJ5nR.js","assets/ElevationInfo-Cw2HaA6E.js","assets/unitConversionUtils-4vB4Ezlp.js","assets/timeZoneUtils-BSc7-7qA.js","assets/featureLayerUtils-FKjLNPl_.js","assets/asyncUtils-w6KfWU41.js","assets/featureQueryAll-BfDWA5Wx.js","assets/layerUtils-DZGhvm-W.js","assets/SimpleRenderer-CEmCWePp.js","assets/commonProperties-DbO613LF.js","assets/colorRamps-DswZzxkO.js","assets/ColorStop-De5gQTjr.js","assets/visualVariableUtils-ma4r7Z2K.js","assets/jsonUtils-C9q_FK4K.js","assets/defaults3D-C2hXSee1.js","assets/defaults-BDN9qxeN.js","assets/defaultsJSON-GKolV7NZ.js","assets/UniqueValueRenderer-JPjz9Qvs.js","assets/diffUtils-wTC1YzlE.js","assets/RendererLegendOptions-ByGHYLtx.js","assets/styleUtils-DWvicjTN.js","assets/NormalizationBinParametersMixin-BK9wNkI3.js","assets/LayerFloorInfo-CTubHTci.js","assets/multiLayerServiceUtils-CpHWiXA7.js","assets/Relationship-CrANqG2c.js","assets/serviceCapabilitiesUtils-BV_pcUiO.js","assets/infoFor3D-DhzudQro.js","assets/portalItemUtils-CaPNUJg6.js","assets/FeatureReductionLayer-Bhh5MvS_.js","assets/FeatureReductionSelection-Du7o8OIG.js","assets/labelingInfo-BYG2hiVF.js","assets/labelUtils-BtizwBfq.js","assets/jsonUtils-BCGKNxno.js","assets/typeUtils-DDFS4uuz.js","assets/ClassBreaksRenderer-BvgdqtTq.js","assets/LRUCache-fy84PBMi.js","assets/DictionaryScriptEvaluator-G73uSGpN.js","assets/Version-BtYZEj58.js","assets/FieldsIndex-CimK-TqD.js","assets/UnknownTimeZone-B697BDFv.js","assets/ArcadeExpression-BlIRq-oN.js","assets/TimeOnly-BERR31kg.js","assets/enum-BzLwmiID.js","assets/utils-DX2muIr3.js","assets/heatmapUtils-B-AXnq0l.js","assets/vec42-B8VM4vXb.js","assets/vec4f64-DPb6J-GU.js","assets/MD5-MtSiOt06.js","assets/OrderedLayer-DQAUgUTV.js","assets/PortalLayer-CbFNhtZ4.js","assets/PortalItem-DnxMlRVo.js","assets/RefreshableLayer-CBbEkZf-.js","assets/ScaleRangeLayer-DQr2T3Hh.js","assets/TemporalLayer-D4R0YvXo.js","assets/TimeInfo-D7ssmbZO.js","assets/TrackableLayer-B-086Hm8.js","assets/FeatureTemplate-Bur8tORn.js","assets/FeatureType-CFJlAOcG.js","assets/fieldProperties-BoJj55FN.js","assets/TitleCreator-BosRD8XX.js","assets/sanitizerUtils-BT_8V5US.js","assets/versionUtils-BfuZvWmP.js","assets/styleUtils-CZJC3pZm.js","assets/popupUtils-D4UavgYz.js","assets/MapImageLayer-CfQN2r84.js","assets/loadAll-BCyxerwc.js","assets/SublayersOwner-BDnxg7TB.js","assets/CollectionFlattener-D6h2Fkvj.js","assets/QueryTask-DtLshCh_.js","assets/utils-CylVuxNi.js","assets/executeForIds-CuyQNBvQ.js","assets/query-DeNEvEsQ.js","assets/normalizeUtils-85zLqeMi.js","assets/Cyclical-BLSxUpe7.js","assets/normalizeUtilsCommon-CnhQye_A.js","assets/utils-Dpg4yj1D.js","assets/pbfQueryUtils-DlZBMNQk.js","assets/pbf-2SIhMekG.js","assets/memoryEstimations-Bd726a_p.js","assets/OptimizedFeature-CwRGZPwv.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/executeQueryJSON-DgYznOlB.js","assets/featureConversionUtils-BDA_FXJx.js","assets/sublayerUtils-BEQnBRaB.js","assets/ExportImageParameters-O9hPdhyJ.js","assets/floorFilterUtils-DKzVzLpH.js","assets/imageBitmapUtils-BP4sA6iR.js"]))=>e.map(a=>t[a]),Xe="esri/rest/knowledgeGraph/wasmInterface/";let Te;async function m(){const e=Te;if(e)return e;const r=!!kt("wasm-simd");return Te=Vt(r),Te}async function Vt(e){if(e){const{default:t}=await _e(()=>ve(()=>import("./arcgis-knowledge-client-core-simd-MWuc4M46-Cr1e2etg.js"),__vite__mapDeps([0,1])),de([0,1])).then(a=>a.a);return t({locateFile:a=>Ze(Xe+a)})}const{default:r}=await _e(()=>ve(()=>import("./arcgis-knowledge-client-core-C35p-7p7-DGzozVbE.js"),__vite__mapDeps([2,1])),de([2,1])).then(t=>t.a);return r({locateFile:t=>Ze(Xe+t)})}const it={Regular:0,Provenance:1,Document:2},lt={esriFieldTypeSmallInteger:0,esriFieldTypeInteger:1,esriFieldTypeSingle:2,esriFieldTypeDouble:3,esriFieldTypeString:4,esriFieldTypeDate:5,esriFieldTypeOID:6,esriFieldTypeGeometry:7,esriFieldTypeBlob:8,esriFieldTypeRaster:9,esriFieldTypeGUID:10,esriFieldTypeGlobalID:11,esriFieldTypeXML:12,esriFieldTypeBigInteger:13,esriFieldTypeDateOnly:14,esriFieldTypeTimeOnly:15,esriFieldTypeTimestampOffset:16},De={esriGeometryNull:0,esriGeometryPoint:1,esriGeometryMultipoint:2,esriGeometryPolyline:3,esriGeometryPolygon:4,esriGeometryEnvelope:5,esriGeometryAny:7,esriGeometryMultiPatch:9},Jt={esriMethodHintUNSPECIFIED:0,esriUUIDESRI:1,esriUUIDRFC4122:2},Kt={esriTypeUNSPECIFIED:0,esriTypeEntity:1,esriTypeRelationship:2,esriTypeBoth:4,esriTypeMetaEntityProvenance:8},dt={esriGraphPropertyUNSPECIFIED:0,esriGraphPropertyRegular:1,esriGraphPropertyDocumentName:2,esriGraphPropertyDocumentTitle:3,esriGraphPropertyDocumentUrl:4,esriGraphPropertyDocumentText:5,esriGraphPropertyDocumentKeywords:6,esriGraphPropertyDocumentContentType:7,esriGraphPropertyDocumentMetadata:8,esriGraphPropertyDocumentFileExtension:9,esriGraphPropertyProvenanceInstanceId:10,esriGraphPropertyProvenanceSourceType:11,esriGraphPropertyProvenanceSourceName:12,esriGraphPropertyProvenanceSource:13,esriGraphPropertyProvenanceComment:14,esriGraphPropertyProvenanceTypeName:15,esriGraphPropertyProvenancePropertyName:16},Qt={esriIdentifierInfoTypeUNSPECIFIED:0,esriIdentifierInfoTypeDatabaseNative:1,esriIdentifierInfoTypeUniformProperty:2};var ke;let E=ke=class extends Y{constructor(e){super(e),this.outSpatialReference=null,this.processExtent=null,this.processSpatialReference=null,this.returnColumnName=!1,this.returnFeatureCollection=!1,this.returnM=!1,this.returnZ=!1}static from(e){return Ct(ke,e)}};o([l({type:J})],E.prototype,"outSpatialReference",void 0),o([l({type:nt})],E.prototype,"processExtent",void 0),o([l({type:J})],E.prototype,"processSpatialReference",void 0),o([l({nonNullable:!0})],E.prototype,"returnColumnName",void 0),o([l({nonNullable:!0})],E.prototype,"returnFeatureCollection",void 0),o([l({nonNullable:!0})],E.prototype,"returnM",void 0),o([l({nonNullable:!0})],E.prototype,"returnZ",void 0),E=ke=o([f("esri.rest.geoprocessor.GPOptions")],E);let F=class extends D{constructor(e){super(e),this.extent=null,this.height=null,this.href=null,this.opacity=1,this.rotation=0,this.scale=null,this.visible=!0,this.width=null}};o([l({type:nt})],F.prototype,"extent",void 0),o([l()],F.prototype,"height",void 0),o([l()],F.prototype,"href",void 0),o([l()],F.prototype,"opacity",void 0),o([l()],F.prototype,"rotation",void 0),o([l()],F.prototype,"scale",void 0),o([l()],F.prototype,"visible",void 0),o([l()],F.prototype,"width",void 0),F=o([f("esri.layers.support.MapImage")],F);let ne=class extends D{constructor(e){super(e),this.area=0,this.units=null}};o([l({json:{write:!0}})],ne.prototype,"area",void 0),o([xe(Nt)],ne.prototype,"units",void 0),ne=o([f("esri.rest.support.ArealUnit")],ne);let W=class extends D{constructor(e){super(e),this.itemId=null,this.url=null}};o([l({type:String,json:{read:{source:"itemID"},write:{target:"itemID"}}})],W.prototype,"itemId",void 0),o([l({type:String,json:{write:!0}})],W.prototype,"url",void 0),W=o([f("esri.rest.support.DataFile")],W);let oe=class extends D{constructor(e){super(e),this.distance=0,this.units=null}};o([l({json:{write:!0}})],oe.prototype,"distance",void 0),o([xe(Ot)],oe.prototype,"units",void 0),oe=o([f("esri.rest.support.LinearUnit")],oe);const x="multi-value-",$e=new It({GPArealUnit:"areal-unit",GPBoolean:"boolean",GPComposite:"composite",GPDataFile:"data-file",GPDate:"date",GPDouble:"double",GPFeatureRecordSetLayer:"feature-record-set-layer",Field:"field",GPLinearUnit:"linear-unit",GPLong:"long",GPRasterData:"raster-data",GPRasterDataLayer:"raster-data-layer",GPRecordSet:"record-set",GPString:"string",GPValueTable:"value-table","GPMultiValue:GPArealUnit":`${x}areal-unit`,"GPMultiValue:GPBoolean":`${x}boolean`,"GPMultiValue:GPComposite":`${x}composite`,"GPMultiValue:GPDataFile":`${x}data-file`,"GPMultiValue:GPDate":`${x}date`,"GPMultiValue:GPDouble":`${x}double`,"GPMultiValue:GPFeatureRecordSetLayer":`${x}feature-record-set-layer`,"GPMultiValue:Field":`${x}field`,"GPMultiValue:GPLinearUnit":`${x}linear-unit`,"GPMultiValue:GPLong":`${x}long`,"GPMultiValue:GPRasterData":`${x}raster-data`,"GPMultiValue:GPRasterDataLayer":`${x}raster-data-layer`,"GPMultiValue:GPRecordSet":`${x}record-set`,"GPMultiValue:GPString":`${x}string`});let ee=class extends D{constructor(e){super(e),this.dataType=null,this.paramName=null,this.value=null}};o([xe($e,{ignoreUnknown:!1})],ee.prototype,"dataType",void 0),o([l()],ee.prototype,"paramName",void 0),o([l()],ee.prototype,"value",void 0),ee=o([f("esri.rest.support.ParameterValue")],ee);let $=class extends D{constructor(e){super(e),this.format=null,this.itemId=null,this.type=null,this.url=null}readType(e){return e==="ImageService"?"image-service":null}};o([l()],$.prototype,"format",void 0),o([l({json:{name:"itemID",write:!0}})],$.prototype,"itemId",void 0),o([l()],$.prototype,"type",void 0),o([Ut("type")],$.prototype,"readType",null),o([l({json:{write:!0}})],$.prototype,"url",void 0),$=o([f("esri.rest.support.RasterData")],$);async function Ht(e,r,t,a,s){const n={},i={},d=[];return Wt(a,d,n),Et(d).then(u=>{const{outSpatialReference:y,processExtent:c,processSpatialReference:h,returnColumnName:_,returnFeatureCollection:C,returnM:G,returnZ:g}=t,{path:ce}=X(e);for(const We in n){const[Pt,St]=n[We];i[We]=u.slice(Pt,St)}const ye=y?y.wkid||y:null,z=h?h.wkid||h:null,Gt=null,xt=be({...c?{context:{extent:c,outSR:ye,processSR:z}}:{"env:outSR":ye,"env:processSR":z},...a,...Gt,f:"json"},null,i),Tt={...s,query:xt};return I(`${ce}/${r}`,Tt)})}function Wt(e,r,t){for(const a in e){const s=e[a];if(s&&typeof s=="object"&&s instanceof Se){const{features:n}=s;t[a]=[r.length,r.length+n.length],n.forEach(i=>{r.push(i.geometry)})}}}async function Re(e,r){switch(e){case"areal-unit":return ne.fromJSON(r);case"boolean":case"double":case"long":case"string":case"value-table":return r;case"date":return new Date(r);case"data-file":return W.fromJSON(r);case"linear-unit":return oe.fromJSON(r);case"feature-record-set-layer":if("url"in r)return W.fromJSON(r);if("layerDefinition"in r){const t=new(await _e(async()=>{const{default:n}=await ve(()=>import("./FeatureLayer-BRWpcy_W-BoHEkHsh.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135]));return{default:n}},de([3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135]))).default,{layerDefinition:a,featureSet:s}=r;return t.read({layerDefinition:a,featureSet:s},{origin:"portal-item"}),t.spatialReference=J.fromJSON(s.spatialReference??a.spatialReference??a.extent.spatialReference),t}return Se.fromJSON(r);case"record-set":return"url"in r?W.fromJSON(r):Se.fromJSON(r);case"raster-data":case"raster-data-layer":return"mapImage"in r?F.fromJSON(r.mapImage):$.fromJSON(r);case"field":return At.fromJSON(r)}}function Zt(e){return e.startsWith(x)}function Yt(e){return e.replace(x,"")}async function Xt(e,r){const t=Yt(e),a=t==="composite"?r.map(s=>Re($e.fromJSON(s.dataType),s.value)):r.map(s=>Re(t,s));return Promise.all(a)}async function et(e){const r=$e.fromJSON(e.dataType),{paramName:t}=e,a=Zt(r)?await Xt(r,e.value):await Re(r,e.value);return new ee({dataType:r,paramName:t,value:a})}function be(e,r,t){for(const a in e){const s=e[a];Array.isArray(s)?e[a]=JSON.stringify(s.map(n=>be({item:n},!0).item)):s instanceof Date&&(e[a]=s.getTime())}return Mt(e,r,t)}var me;const er=Ft()({esriJobCancelled:"job-cancelled",esriJobCancelling:"job-cancelling",esriJobDeleted:"job-deleted",esriJobDeleting:"job-deleting",esriJobTimedOut:"job-timed-out",esriJobExecuting:"job-executing",esriJobFailed:"job-failed",esriJobNew:"job-new",esriJobSubmitted:"job-submitted",esriJobSucceeded:"job-succeeded",esriJobWaiting:"job-waiting"},{ignoreUnknown:!1}),Pe=1e3;let O=class extends D{static{me=this}constructor(e){super(e),this.jobId=null,this.jobStatus=null,this.messages=null,this.progress=null,this.requestOptions=null,this.sourceUrl=null,this._cancelJobTimer=void 0,this._jobCompletionTimer=void 0}async cancelJob(e){const{jobId:r,sourceUrl:t}=this,{path:a}=X(t),s={...this.requestOptions,...e,query:{f:"json"}},n=`${a}/jobs/${r}/cancel`,{data:i}=await I(n,s),{messages:d,jobStatus:u,progress:y}=me.fromJSON(i);return this.set({messages:d,jobStatus:u,progress:y}),u==="job-cancelled"?this:new Promise((c,h)=>{Ye(s.signal,()=>{this.clearCancelJobTimer(),h(he())}),this.clearCancelJobTimer();const _=()=>{this._cancelJobTimer||h(he()),this.checkJobStatus(e).then(({jobStatus:C})=>{switch(C){case"job-cancelling":default:this._cancelJobTimer=setTimeout(_,Pe);break;case"job-deleted":case"job-deleting":case"job-executing":case"job-failed":case"job-new":case"job-submitted":case"job-succeeded":case"job-timed-out":case"job-waiting":h(this);break;case"job-cancelled":c(this)}}).catch(C=>{h(C)})};this._cancelJobTimer=setTimeout(_,Pe)})}destroy(){clearInterval(this._cancelJobTimer),clearInterval(this._jobCompletionTimer)}async checkJobStatus(e){const{path:r}=X(this.sourceUrl),t={...this.requestOptions,...e,query:{...e?.query,f:"json"}},a=`${r}/jobs/${this.jobId}`,{data:s}=await I(a,t),{messages:n,jobStatus:i,progress:d}=me.fromJSON(s);return this.set({messages:n,jobStatus:i,progress:d}),this}async fetchResultData(e,r,t){r=E.from(r||{});const{returnColumnName:a,returnFeatureCollection:s,returnM:n,returnZ:i,outSpatialReference:d}=r,{path:u}=X(this.sourceUrl),y={returnColumnName:a||null,returnFeatureCollection:s||null,returnM:n||null,returnZ:i||null,outSR:d,returnType:"data",f:"json",...t?.query},c=be(y,null),h={...this.requestOptions,...t,query:c},_=`${u}/jobs/${this.jobId}/results/${e}`,{data:C}=await I(_,h);return et(C)}async fetchResultImage(e,r,t){const{path:a}=X(this.sourceUrl),s={...r.toJSON(),f:"json"},n=be(s),i={...this.requestOptions,...t,query:n},d=`${a}/jobs/${this.jobId}/results/${e}`,{data:u}=await I(d,i);return et(u)}async fetchResultMapImageLayer(){const{path:e}=X(this.sourceUrl),r=e.indexOf("/GPServer/"),t=`${e.slice(0,Math.max(0,r))}/MapServer/jobs/${this.jobId}`;return new(await _e(async()=>{const{default:a}=await ve(()=>import("./MapImageLayer-CfQN2r84-DXbOsQ8c.js"),__vite__mapDeps([136,4,5,6,9,10,137,77,8,11,12,13,19,62,17,18,15,54,138,109,72,20,73,14,74,36,99,52,26,27,28,139,7,16,29,45,140,98,69,25,22,23,141,142,143,144,145,146,147,148,149,150,151,152,51,153,53,24,30,31,32,33,34,35,37,38,39,40,41,42,43,44,154,120,76,63,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,129,128,110,111,75,102,103,94,96,97,105,106,107,108,112,113,114,115,116,117,118,135,155,55,56,57,58,59,60,121,122,123,124,125,126,156,157,158,133]));return{default:a}},de([136,4,5,6,9,10,137,77,8,11,12,13,19,62,17,18,15,54,138,109,72,20,73,14,74,36,99,52,26,27,28,139,7,16,29,45,140,98,69,25,22,23,141,142,143,144,145,146,147,148,149,150,151,152,51,153,53,24,30,31,32,33,34,35,37,38,39,40,41,42,43,44,154,120,76,63,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,129,128,110,111,75,102,103,94,96,97,105,106,107,108,112,113,114,115,116,117,118,135,155,55,56,57,58,59,60,121,122,123,124,125,126,156,157,158,133]))).default({url:t})}async waitForJobCompletion(e={}){const{interval:r=Pe,signal:t,statusCallback:a,apiKey:s}=e;return new Promise((n,i)=>{Ye(t,()=>{this.clearJobCompletionTimer(),i(he())}),this.clearJobCompletionTimer();const d=()=>{this._jobCompletionTimer||i(he()),this.checkJobStatus({query:{token:s}}).then(({jobStatus:u})=>{switch(u){case"job-succeeded":n(this);break;case"job-executing":case"job-new":case"job-submitted":case"job-waiting":a&&a(this),this._jobCompletionTimer=setTimeout(d,r);break;case"job-cancelled":case"job-cancelling":case"job-deleted":case"job-deleting":case"job-failed":case"job-timed-out":i(this);break;default:this._jobCompletionTimer=setTimeout(d,r)}}).catch(u=>{i(u)})};this._jobCompletionTimer=setTimeout(d,r)})}clearCancelJobTimer(){clearTimeout(this._cancelJobTimer),this._cancelJobTimer=void 0}clearJobCompletionTimer(){clearTimeout(this._jobCompletionTimer),this._jobCompletionTimer=void 0}};o([l()],O.prototype,"jobId",void 0),o([xe(er,{ignoreUnknown:!1})],O.prototype,"jobStatus",void 0),o([l({type:[qt]})],O.prototype,"messages",void 0),o([l()],O.prototype,"progress",void 0),o([l()],O.prototype,"requestOptions",void 0),o([l({json:{write:!0}})],O.prototype,"sourceUrl",void 0),O=me=o([f("esri.rest.support.JobInfo")],O);async function tr(e,r,t,a){return t=E.from(t||{}),Ht(e,"submitJob",t,r??{},a).then(({data:s})=>{const n=O.fromJSON(s);return n.sourceUrl=e,n})}let q=class extends Y{constructor(e){super(e),this.headerKeys=[],this.outSpatialReference=null,this.exceededTransferLimit=!1}};o([l()],q.prototype,"headerKeys",void 0),o([l()],q.prototype,"outSpatialReference",void 0),o([l()],q.prototype,"exceededTransferLimit",void 0),q=o([f("esri.rest.knowledgeGraph.GraphQueryResultHeader")],q);let re=class extends Y{constructor(e){super(e),this.resultRows=[],this.resultHeader=new q}};o([l()],re.prototype,"resultRows",void 0),o([l()],re.prototype,"resultHeader",void 0),re=o([f("esri.rest.knowledgeGraph.GraphQueryResult")],re);let ae=class extends Y{constructor(e){super(e),this.resultRowsStream=new ReadableStream,this.resultHeader=new q}};o([l()],ae.prototype,"resultRowsStream",void 0),o([l()],ae.prototype,"resultHeader",void 0),ae=o([f("esri.rest.knowledgeGraph.GraphQueryStreamingResult")],ae);let U=class extends D{constructor(e){super(e),this.name=null,this.unique=null,this.ascending=!0,this.description="",this.fieldNames=[]}};o([l({type:String,json:{write:!0}})],U.prototype,"name",void 0),o([l({type:Boolean,json:{write:!0}})],U.prototype,"unique",void 0),o([l({type:Boolean,json:{write:!0}})],U.prototype,"ascending",void 0),o([l({type:String,json:{write:!0}})],U.prototype,"description",void 0),o([l({type:[String],json:{write:!0}})],U.prototype,"fieldNames",void 0),U=o([f("esri.rest.knowledgeGraph.FieldIndex")],U);let b=class extends D{constructor(e){super(e),this.name=null,this.alias=null,this.fieldType=null,this.geometryType=null,this.hasM=null,this.hasZ=null,this.nullable=null,this.editable=!0,this.required=!1,this.defaultVisibility=!0,this.systemMaintained=null,this.role="esriGraphPropertyUNSPECIFIED",this.defaultValue=null}};o([l({type:String,json:{write:!0}})],b.prototype,"name",void 0),o([l({type:String,json:{write:!0}})],b.prototype,"alias",void 0),o([l({type:String,json:{write:!0}})],b.prototype,"fieldType",void 0),o([l({type:String,json:{write:!0}})],b.prototype,"geometryType",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"hasM",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"hasZ",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"required",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"defaultVisibility",void 0),o([l({type:Boolean,json:{write:!0}})],b.prototype,"systemMaintained",void 0),o([l({type:String,json:{write:!0}})],b.prototype,"role",void 0),o([l({json:{write:!0}})],b.prototype,"defaultValue",void 0),b=o([f("esri.rest.knowledgeGraph.GraphProperty")],b);let M=class extends D{constructor(e){super(e),this.name=null,this.alias=null,this.role="Regular",this.strict=null,this.properties=[],this.fieldIndexes=[],this.type=null}};o([l({type:String,json:{write:!0}})],M.prototype,"name",void 0),o([l({type:String,json:{write:!0}})],M.prototype,"alias",void 0),o([l({type:String,json:{write:!0}})],M.prototype,"role",void 0),o([l({type:Boolean,json:{write:!0}})],M.prototype,"strict",void 0),o([l({type:[b],json:{write:!0}})],M.prototype,"properties",void 0),o([l({type:[U],json:{write:!0}})],M.prototype,"fieldIndexes",void 0),M=o([f("esri.rest.knowledgeGraph.GraphObjectType")],M);let ue=class extends M{constructor(e){super(e),this.type="entity"}};ue=o([f("esri.rest.knowledgeGraph.EntityType")],ue);let ie=class extends M{constructor(e){super(e),this.endPoints=[],this.type="relationship"}};o([l({json:{write:!0}})],ie.prototype,"endPoints",void 0),ie=o([f("esri.rest.knowledgeGraph.RelationshipType")],ie);let se=class extends D{constructor(e){super(e),this.value=null,this.behavior=null}};o([l({type:String,json:{write:!0}})],se.prototype,"value",void 0),o([l({type:String,json:{write:!0}})],se.prototype,"behavior",void 0),se=o([f("esri.rest.knowledgeGraph.SourceTypeValueBehavior")],se);let T=class extends D{constructor(e){super(e),this.timestamp=null,this.spatialReference=null,this.strict=null,this.objectIdField=null,this.globalIdField=null,this.arcgisManaged=null,this.identifierInfo=null,this.searchIndexes=[],this.entityTypes=[],this.relationshipTypes=[],this.metaEntityTypes=[],this.provenanceSourceTypeValues=[]}};o([l({type:Date,json:{type:Number,write:{writer:(e,r)=>{r.timestamp=e?.getTime()}}}})],T.prototype,"timestamp",void 0),o([l({type:J,json:{write:!0}})],T.prototype,"spatialReference",void 0),o([l({type:Boolean,json:{write:!0}})],T.prototype,"strict",void 0),o([l({type:String,json:{write:!0}})],T.prototype,"objectIdField",void 0),o([l({type:String,json:{write:!0}})],T.prototype,"globalIdField",void 0),o([l()],T.prototype,"arcgisManaged",void 0),o([l()],T.prototype,"identifierInfo",void 0),o([l()],T.prototype,"searchIndexes",void 0),o([l({type:[ue],json:{write:!0}})],T.prototype,"entityTypes",void 0),o([l({type:[ie],json:{write:!0}})],T.prototype,"relationshipTypes",void 0),o([l({type:[ue],json:{write:!0}})],T.prototype,"metaEntityTypes",void 0),o([l({type:[se],json:{write:!0}})],T.prototype,"provenanceSourceTypeValues",void 0),T=o([f("esri.rest.knowledgeGraph.DataModel")],T);let v=class extends D{constructor(e){super(e),this.capabilities=[],this.supportsSearch=!1,this.supportedQueryFormats=[],this.allowGeometryUpdates=!1,this.searchMaxRecordCount=null,this.serviceCapabilities=null,this.maxRecordCount=null,this.description="",this.copyrightText="",this.units="",this.spatialReference=null,this.currentVersion=null,this.dateFieldsTimeReference=null,this.serviceItemId="",this.supportsDocuments=!1,this.dataEditingNotSupported=!1,this.schemaEditingNotSupported=!1,this.supportsProvenance=!1}};o([l({type:[String],json:{write:!0}})],v.prototype,"capabilities",void 0),o([l({type:Boolean,json:{write:!0}})],v.prototype,"supportsSearch",void 0),o([l({type:[String],json:{write:!0}})],v.prototype,"supportedQueryFormats",void 0),o([l({type:Boolean,json:{write:!0}})],v.prototype,"allowGeometryUpdates",void 0),o([l({type:Number,json:{write:!0}})],v.prototype,"searchMaxRecordCount",void 0),o([l({type:Object,json:{write:!0}})],v.prototype,"serviceCapabilities",void 0),o([l({type:Number,json:{write:!0}})],v.prototype,"maxRecordCount",void 0),o([l({type:String,json:{write:!0}})],v.prototype,"description",void 0),o([l({type:String,json:{write:!0}})],v.prototype,"copyrightText",void 0),o([l({type:String,json:{write:!0}})],v.prototype,"units",void 0),o([l({type:J,json:{write:!0}})],v.prototype,"spatialReference",void 0),o([l({type:Number,json:{write:!0}})],v.prototype,"currentVersion",void 0),o([l({type:Object,json:{write:!0}})],v.prototype,"dateFieldsTimeReference",void 0),o([l({type:String,json:{write:!0}})],v.prototype,"serviceItemId",void 0),o([l({type:Boolean,json:{write:!0}})],v.prototype,"supportsDocuments",void 0),o([l({type:Boolean,json:{write:!0}})],v.prototype,"dataEditingNotSupported",void 0),o([l({type:Boolean,json:{write:!0}})],v.prototype,"schemaEditingNotSupported",void 0),o([l({type:Boolean,json:{write:!0}})],v.prototype,"supportsProvenance",void 0),v=o([f("esri.rest.knowledgeGraph.ServiceDefinition")],v);let te=class extends D{constructor(e){super(e),this.url=null,this.dataModel=null,this.serviceDefinition=null}};o([l({type:String,json:{write:!0}})],te.prototype,"url",void 0),o([l({type:T,json:{write:!0}})],te.prototype,"dataModel",void 0),o([l({type:v,json:{write:!0}})],te.prototype,"serviceDefinition",void 0),te=o([f("esri.rest.knowledgeGraph.KnowledgeGraph")],te);function P(e,r,t){if(e.error_code!==0)throw new p(r,t,{errorCode:e.error_code,errorMessage:e.error_message})}function j(e){return e?.error_code?new p("knowledgeGraphService:server-or-decoding-error",e.error_message,{errorCode:e.error_code}):void 0}function rr(e,r,t,a=!1){const s=new t.ClientDataFetchRequestEncoder;s.deleteLater();for(const i of e){const d=ar(i,r,t,a);s.add_client_data_fetch_request_parameter(d)}s.encode();const n=s.get_encoding_result();return P(n.error,"knowledge-graph:fetchClientDataAtKeys-encoding-failed","Attempting to encode the fetchClientDataAtKeys failed"),structuredClone(n.get_byte_buffer())}function ar(e,r,t,a){const s=new t.ClientDataKey;s.deleteLater(),s.key_string=e;const n=new t.ClientDataFetchRequestParameter;n.deleteLater(),n.set_key(s);const i=r.get(e);return i&&!a&&(n.v_tag={v_tag:i.version}),n}const sr={exclude:0,include:1};function ut(e,r){const t=new r.ArrayValue;return t.deleteLater(),e.forEach(a=>{t.add_value(Je(a,r))}),t}function pt(e,r){const t=new r.ObjectValue;t.deleteLater();for(const[a,s]of Object.entries(e))t.set_key_value(a,Je(s,r));return t}function Ve(e,r){if(e instanceof ot)return dr(e,r);if(e instanceof st)return ur(e,r);if(e instanceof Be||e instanceof ze)return lr(e,r);throw new p("knowledge-graph:unsupported-geometry","Only Point, Multipoint, Polyline, and Polygon geometry are supported by ArcGIS Knowledge",{geometry:e})}function nr(e,r){r.input_quantization_parameters={xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}}function or(e,r,t){if(!e.extent)throw new p("knowledge-graph:illegal-output-quantization","The Output quantization provided to the encoder had an illegal value as part of its extent",e.extent);if(!e.quantizeMode)throw new p("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal mode setting",e.quantizeMode);if(!e.tolerance)throw new p("knowledge-graph:illegal-output-quantization","The Output quantization contained an illegal tolerance setting",e.quantizeMode);r.output_quantization_parameters={extent:{xmax:e.extent.xmax,ymax:e.extent.ymax,xmin:e.extent.xmin,ymin:e.extent.ymin},quantize_mode:t.esriQuantizeMode[e.quantizeMode],tolerance:e.tolerance}}function ir(e,r){r.provenance_behavior={value:sr[e]}}function Je(e,r){if(e==null)return"";if(typeof e!="object"||e instanceof Date)return e;if(e instanceof Le)return Ve(e,r);if(Array.isArray(e)){const t=new r.ArrayValue;return t.deleteLater(),e.forEach(a=>{t.add_value(Je(a,r))}),t}return pt(e,r)}function lr(e,r){const t=new r.GeometryValue;t.deleteLater(),t.has_z=e.hasZ,t.has_m=e.hasM;const a=[],s=[];let n=[];e instanceof Be?(t.geometry_type=r.esriGeometryType.esriGeometryPolyline,n=e.paths):e instanceof ze&&(t.geometry_type=r.esriGeometryType.esriGeometryPolygon,n=e.rings);let i=0,d=0;return n.forEach(u=>{let y=0;u.forEach(c=>{y++,c.forEach(h=>{a[d]=h,d++})}),s[i]=y,i++}),t.coords=new Float64Array(a),t.lengths=new Uint32Array(s),t}function dr(e,r){const t=new r.GeometryValue;t.deleteLater(),t.geometry_type=t.geometry_type=r.esriGeometryType.esriGeometryMultipoint,t.has_z=e.hasZ,t.has_m=e.hasM;const a=[],s=[];s[0]=e.points.length;let n=0;return e.points.forEach(i=>{i.forEach(d=>{a[n]=d,n++})}),t.coords=new Float64Array(a),t.lengths=new Uint32Array(s),t}function ur(e,r){const t=new r.GeometryValue;t.deleteLater(),t.geometry_type=r.esriGeometryType.esriGeometryPoint,t.has_z=e.hasZ,t.has_m=e.hasM;const a=[],s=[];s[0]=1,a[0]=e.x,a[1]=e.y;let n=2;return e.hasZ&&(a[n]=e.z,n++),e.hasM&&(a[n]=e.m,n++),t.coords=new Float64Array(a),t.lengths=new Uint32Array(s),t}function fe(e,r){if(!e.typeName)throw new p("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits");if(!("originId"in e)){const t=new r.EntityValue;t.deleteLater(),t.type_name=e.typeName;for(const[a,s]of Object.entries(e.properties))t.set_key_value(a,Ge(s,r));return e.id&&t.set_id(e.id),t}if("originId"in e&&"destinationId"in e){const t=new r.RelationshipValue;t.deleteLater(),t.type_name=e.typeName;for(const[a,s]of Object.entries(e.properties))t.set_key_value(a,Ge(s,r));return e.id&&t.set_id(e.id),e.originId&&e.destinationId&&t.set_related_entity_ids(e.originId,e.destinationId),t}throw new p("knowledge-graph:applyEdits-encoding-failure","Could not determine the type of a named graph object passed to the encoder")}function pr(e){return{xy_resolution:e.xyResolution,x_false_origin:e.xFalseOrigin,y_false_origin:e.yFalseOrigin,z_resolution:e.zResolution,z_false_origin:e.zFalseOrigin,m_resolution:e.mResolution,m_false_origin:e.mFalseOrigin}}function cr(e,r){const t=new r.EntityType;return t.deleteLater(),yt(e,r,t)}function yr(e,r){const t=new r.RelationshipType;t.deleteLater();for(const a of e.endPoints){const s=new r.EndPoint;s.deleteLater(),s.origin_entity_type=a.originEntityType,s.dest_entity_type=a.destinationEntityType,t.add_end_point(s)}return yt(e,r,t)}function hr(e,r){const t=new r.EntityType;return t.deleteLater(),ht(e,t)}function fr(e,r){const t=new r.RelationshipType;return t.deleteLater(),ht(e,t)}function ct(e,r){const t=new r.GraphProperty;return t.deleteLater(),t.name=e.name,t.alias=e.alias??"",t.field_type={value:lt[e.fieldType]},t.geometry_type={value:e.geometryType?De[e.geometryType]:De.esriGeometryNull},t.has_m=e.hasM??!1,t.has_z=e.hasZ??!1,t.nullable=e.nullable??!1,t.editable=e.editable,t.required=e.required,t.default_visibility=e.defaultVisibility,t.system_maintained=e.systemMaintained??!1,t.role={value:dt[e.role]},t.default_value=Ge(e.defaultValue,r),t}function gr(e,r){const t=new r.GraphProperty;return t.deleteLater(),e.hasOwnProperty("alias")&&(t.alias=e.alias),e.hasOwnProperty("editable")&&(t.editable=e.editable),e.hasOwnProperty("required")&&(t.required=e.required),e.hasOwnProperty("defaultVisibility")&&(t.default_visibility=e.defaultVisibility),e.hasOwnProperty("defaultValue")&&(t.default_value=Ge(e.defaultValue,r)),t}function tt(e,r){const t=new r.SearchIndexProperties;t.deleteLater();for(const a of e.propertyNames)t.add_search_property_name(a);return t}function mr(e,r){const t=new r.FieldIndex;t.deleteLater(),t.name=e.name,t.unique=e.unique,t.ascending=e.ascending,t.description=e.description??"";for(const a of e.fieldNames)t.add_field(a);return t}function yt(e,r,t){t.name=e.name,t.alias=e.alias??"",t.role={value:it[e.role]},t.strict=e.strict;for(const a of e.properties){const s=ct(a,r);t.add_property(s)}return t}function ht(e,r){return e.hasOwnProperty("alias")&&(r.alias=e.alias),r}function Ge(e,r){return e==null?null:typeof e!="object"||e instanceof Date?e:e instanceof Le?Ve(e,r):null}function wr(e,r,t,a=!1){const s=new Map;for(let n=0;n<e.get_results_count();n++){const i=e.get_result_at(n);if(i.get_fetch_result_case().value!==2||i.error().error_code!==0){const h=i.get_key().key_string;t.has(h)&&r.delete(h);continue}const d=i.get_value(),u=i.get_key().key_string,y=t.get(u);let c;if(d.get_data_case().value===2&&y)c=y.value;else{if(d.get_data_case().value!==1)continue;{c=d.get_data().client_data_string;const h=i.get_value().get_v_tag().v_tag;a||r.set(u,{key:u,version:h,value:c})}}s.set(u,c)}return s}function _r(e){const r=e.get_keys(),t=new Array;for(let a=0;a<r.get_keys_count();a++){const s=r.get_key_at(a);s.get_client_data_key_type().value===1&&t.push(s.key_string)}return t}let K=class extends Y{constructor(e){super(e),this.decoderError=null,this.resultsCount=0,this.results=[],this.updatedKnowledgeGraph=null}};o([l()],K.prototype,"decoderError",void 0),o([l()],K.prototype,"resultsCount",void 0),o([l()],K.prototype,"results",void 0),o([l()],K.prototype,"updatedKnowledgeGraph",void 0),K=o([f("esri.rest.knowledgeGraph.GraphDataModelOperationResult")],K);const L=K;let Ce=class extends L{constructor(e){super(e)}};Ce=o([f("esri.rest.knowledgeGraph.GraphAddFieldIndexResult")],Ce);const vr=Ce;let Q=class extends L{constructor(e){super(e),this.entityAddResultsCount=0,this.relationshipAddResultsCount=0,this.entityAddResults=[],this.relationshipAddResults=[]}};o([l()],Q.prototype,"entityAddResultsCount",void 0),o([l()],Q.prototype,"relationshipAddResultsCount",void 0),o([l()],Q.prototype,"entityAddResults",void 0),o([l()],Q.prototype,"relationshipAddResults",void 0),Q=o([f("esri.rest.knowledgeGraph.GraphAddNamedTypesResult")],Q);const jr=Q;let Ie=class extends L{constructor(e){super(e)}};Ie=o([f("esri.rest.knowledgeGraph.GraphAddPropertyResult")],Ie);const br=Ie;let Fe=class extends L{constructor(e){super(e)}};Fe=o([f("esri.rest.knowledgeGraph.GraphDeleteFieldIndexResult")],Fe);const Gr=Fe;let Ee=class extends L{constructor(e){super(e)}};Ee=o([f("esri.rest.knowledgeGraph.GraphDeleteNamedTypeResult")],Ee);const xr=Ee;let Ae=class extends L{constructor(e){super(e)}};Ae=o([f("esri.rest.knowledgeGraph.GraphDeletePropertyResult")],Ae);const Tr=Ae;let Me=class extends L{constructor(e){super(e)}};Me=o([f("esri.rest.knowledgeGraph.GraphUpdateNamedTypesResult")],Me);const Pr=Me;let Ne=class extends L{constructor(e){super(e)}};Ne=o([f("esri.rest.knowledgeGraph.GraphUpdatePropertyResult")],Ne);const Sr=Ne;let Oe=class extends L{constructor(e){super(e)}};Oe=o([f("esri.rest.knowledgeGraph.GraphUpdateSearchIndexResult")],Oe);const Dr=Oe;function B(e,r){const t=[];for(let a=0;a<r;a++){const s=e.get_result_at(a);t.push({name:s.get_name(),error:j(s.get_error())})}return t}function kr(e){const r=e.get_results_count(),t=e.get_entity_type_add_results_count(),a=e.get_relationship_type_add_results_count(),s=new jr({resultsCount:r,results:B(e,r),decoderError:j(e.error),entityAddResultsCount:t,relationshipAddResultsCount:a});for(let n=0;n<t;n++){const i=e.get_entity_type_add_results_at(n),d=i.get_name(),u=i.get_error();s.entityAddResults.push({name:d,error:j(u)})}for(let n=0;n<a;n++){const i=e.get_relationship_type_add_results_at(n),d=i.get_name(),u=i.get_error();s.relationshipAddResults.push({name:d,error:j(u)})}return s}function Rr(e){const r=e.get_results_count();return new Pr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Cr(e){const r=e.get_results_count();return new xr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Ir(e){const r=e.get_results_count();return new br({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Fr(e){const r=e.get_results_count();return new Tr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Er(e){const r=e.get_results_count();return new Sr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Ar(e){const r=e.get_results_count();return new Dr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Mr(e){const r=e.get_results_count();return new vr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}function Nr(e){const r=e.get_results_count();return new Gr({resultsCount:r,results:B(e,r),decoderError:j(e.error)})}let H=class extends Y{constructor(e){super(e),this.name=null,this.supportedCategory="esriTypeUNSPECIFIED",this.analyzers=[],this.searchProperties=new Map}};o([l()],H.prototype,"name",void 0),o([l()],H.prototype,"supportedCategory",void 0),o([l()],H.prototype,"analyzers",void 0),o([l()],H.prototype,"searchProperties",void 0),H=o([f("esri.rest.knowledgeGraph.SearchIndex")],H);let Ue=!1;function Or(e){e.deleteLater(),Ue=!1;const r=new T({timestamp:e.timestamp,spatialReference:new J(e.spatial_reference),strict:e.strict,objectIdField:e.objectid_property,globalIdField:e.globalid_property,arcgisManaged:e.arcgis_managed,identifierInfo:{identifierMappingInfo:{identifierInfoType:Z(Qt,e.identifier_info?.identifier_mapping_info?.identifier_info_type?.value),databaseNativeIdentifier:e.identifier_info?.identifier_mapping_info?.database_native_identifier,uniformPropertyIdentifier:{identifierPropertyName:e.identifier_info?.identifier_mapping_info?.uniform_property_identifier?.identifier_property_name}},identifierGenerationInfo:{uuidMethodHint:Z(Jt,e.identifier_info?.identifier_generation_info?.uuid_method_hint?.value)}},searchIndexes:Hr(e.search_indexes),entityTypes:rt(e.entity_types),relationshipTypes:Kr(e.relationship_types),metaEntityTypes:rt(e.meta_entity_types),provenanceSourceTypeValues:Qr(e.provenance_source_type_values.value_behavior_array)});return Ue&&je.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("A big integer field was detected in the retrieved data model.  The `big-integer` field type is not fully supported in web clients.  Please see https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-Field.html#type"),r}function Ur(e){return e.deleteLater(),new ue(ft(e))}function qr(e){return e.deleteLater(),new U({name:e.name,unique:e.unique,ascending:e.ascending,description:e.description,fieldNames:$r(e.fields)})}function ft(e){return{name:e.name,alias:e.alias,role:Z(it,e.role.value),strict:e.strict,properties:Vr(e.properties),fieldIndexes:Jr(e.field_indexes)}}function Lr(e){return e.deleteLater(),new b({alias:e.alias,name:e.name,fieldType:Z(lt,e.field_type.value)??void 0,geometryType:Z(De,e.geometry_type.value)??null,hasM:e.has_m,hasZ:e.has_z,nullable:e.nullable,editable:e.editable,required:e.required,defaultVisibility:e.default_visibility,systemMaintained:e.system_maintained,role:Z(dt,e.role.value),defaultValue:e.default_value})}function Br(e){e.deleteLater();const r=ft(e),t=[];for(let a=0;a<e.end_points.size();a++){const s=e.end_points.get(a);t.push({originEntityType:s.origin_entity_type,destinationEntityType:s.dest_entity_type})}return e.end_points.delete(),new ie(Object.assign({endPoints:t},r))}function zr(e){return new se({behavior:e.behavior,value:e.value})}function rt(e){const r=[];for(let t=0;t<e.size();t++)r.push(Ur(e.get(t)));return e.delete(),r}function $r(e){const r=[];for(let t=0;t<e.size();t++)r.push(e.get(t));return e.delete(),r}function Vr(e){const r=[];for(let t=0;t<e.size();t++){const a=Lr(e.get(t));a.fieldType==="esriFieldTypeBigInteger"&&(Ue=!0),r.push(a)}return e.delete(),r}function Jr(e){const r=[];for(let t=0;t<e.size();t++)r.push(qr(e.get(t)));return e.delete(),r}function Kr(e){const r=[];for(let t=0;t<e.size();t++)r.push(Br(e.get(t)));return e.delete(),r}function Qr(e){const r=[];for(let t=0;t<e.size();t++){const a=e.get(t);a.deleteLater(),r.push(zr(a))}return e.delete(),r}function Hr(e){const r=[];for(let t=0;t<e.size();t++){const a=new H,s=e.get(t);a.name=s.name,a.supportedCategory=Z(Kt,s.supported_category.value);const n=s.analyzers.size();for(let i=0;i<n;i++)a.analyzers.push({name:s.analyzers.get(i).name});s.analyzers.delete();for(let i=0;i<s.search_properties.keys().size();i++){const d=s.search_properties.keys().get(i),u=s.search_properties.get(d),y=[];for(let c=0;c<u.property_names.size();c++)y.push(u.property_names.get(c));a.searchProperties.set(d,{propertyNames:y})}r.push(a)}return e.delete(),r}function Wr(e,r){const t={spatialReference:r},a=Ke(e,t),s=e.lengths,n=e.coords,i=s[0];t.points=[];let d=0;for(let u=0;u<i;u++){const y=[];for(let c=0;c<a;c++)y[c]=n[d],d++;t.points.push(y)}return new ot(t)}function Zr(e,r){const t={spatialReference:r};let a=2;Ke(e,t);const s=e.coords;return t.x=s[0],t.y=s[1],e.has_z&&(t.z=s[a],a++),e.has_m&&(t.m=s[a]),new st(t)}function Yr(e,r){const{paths:t,hasM:a,hasZ:s}=gt(e,3);return new Be({paths:t,hasM:a,hasZ:s,spatialReference:r})}function Xr(e,r){const{paths:t,hasM:a,hasZ:s}=gt(e,4);return new ze({rings:t,hasM:a,hasZ:s,spatialReference:r})}function gt(e,r){const t={paths:[],hasM:!1,hasZ:!1},a=Ke(e,t),{coords:s,geometry_type:n,lengths:i}=e;if(n.value!==r)throw new p("KnowledgeGraph:illegal-geometry-type","Illegal Geometry type for multipath conversion");let d=0;return i.forEach(u=>{const y=[];for(let c=0;c<u;c++){const h=[];for(let _=0;_<a;_++)h[_]=s[d],d++;y.push(h)}t.paths.push(y)}),t}function Ke(e,r){let t=2;return e.has_z?(r.hasZ=e.has_z,t++):r.hasZ=!1,e.has_m?(r.hasM=e.has_m,t++):r.hasM=!1,t}const ge=()=>je.getLogger("esri.rest.knowledgeGraph.WasmToQueryResponseObjConstructors"),ea={decodedWasmObjToQueryResponseObj:(e,r,t)=>{if(e==null)return null;if(typeof e!="object"||"getDate"in e)return e;if("geometry_type"in e)switch(e.geometry_type.value){case null:return null;case 1:return Zr(e,t);case 2:return Wr(e,t);case 3:return Yr(e,t);case 4:return Xr(e,t);case 5:case 7:return ge().warnOnce("Envelope and Multipatch are not supported on knowledge entities, but one of those geometry types was detected. Result interpreted as null"),null;default:return ge().warnOnce("Unknown or blank geometry type returned - Result interpreted as null"),null}else{if(!("object_value_type"in e))return ge().warnOnce("A decoded value came back of a type that is not supported. Result interpreted as null"),null;switch(e.object_value_type.value){case 0:return ra(e,r,t);case 1:return mt(e,r,t);case 2:return wt(e,r,t);case 3:return aa(e,r,t);case 4:return ta(e,r,t);default:return ge().warnOnce("Unknown graph object type detected!  Result interpreted as null"),null}}}};function ta(e,r,t){const a=[],s=e.count();for(let n=0;n<s;n++){const i=e.get_value_at(n);a.push(Qe(i,r,t))}return a}function Qe(e,r,t){return ea.decodedWasmObjToQueryResponseObj(e,r,t)}function mt(e,r,t){const a=e.type_name,s=He(e,r,t),n=e.get_id();return new zt(Object.assign({typeName:a,id:n},s))}function He(e,r,t){const a={},s=e.key_count();for(let n=0;n<s;n++)a[e.get_key_at(n)]=Qe(e.get_value_at(n),r,t);return{properties:a}}function ra(e,r,t){return new $t(He(e,r,t))}function aa(e,r,t){const a=e.entity_count(),s=e.relationship_count(),n=[];for(let i=0;i<a;i++)n.push(mt(e.get_entity_at(i),r,t)),i<s&&n.push(wt(e.get_relationship_at(i),r,t));return new Lt({path:n})}function wt(e,r,t){const a=e.type_name,s=He(e,r,t);return new Bt(Object.assign({typeName:a,id:e.get_id(),originId:e.get_origin_entity_id(),destinationId:e.get_destination_entity_id()},s))}function sa(e){const r=[];for(let a=0;a<e.get_header_keys().size();a++)r.push(e.get_header_keys().get(a));const t=new J(e.get_out_sr());return new q({headerKeys:r,outSpatialReference:t,exceededTransferLimit:e.exceeded_transfer_limit()})}let V=class extends Y{constructor(e){super(e),this.hasError=!1,this.error=null,this.editResults=[],this.cascadeRelationshipDeleteResults=[],this.cascadeProvenanceDeleteResults=[]}};o([l()],V.prototype,"hasError",void 0),o([l()],V.prototype,"error",void 0),o([l()],V.prototype,"editResults",void 0),o([l()],V.prototype,"cascadeRelationshipDeleteResults",void 0),o([l()],V.prototype,"cascadeProvenanceDeleteResults",void 0),V=o([f("esri.rest.knowledgeGraph.GraphApplyEditsResult")],V);const na=V;function oa(e){const r=e.has_error(),t=new na({hasError:r,error:r?j(e.error):null}),a=e.get_edit_results_count();for(let n=0;n<a;n++){const i=e.get_edit_results_at(n);i.deleteLater();const d=e.get_edit_results_type_name_at(n),u=[],y=[],c=[],h=i.get_add_results_count(),_=i.get_update_results_count(),C=i.get_delete_results_count();for(let G=0;G<h;G++){const g=i.get_add_result_at(G);g.deleteLater(),u.push({id:g.id,error:j(g.error)})}for(let G=0;G<_;G++){const g=i.get_update_result_at(G);g.deleteLater(),y.push({id:g.id,error:j(g.error)})}for(let G=0;G<C;G++){const g=i.get_delete_result_at(G);g.deleteLater(),c.push({id:g.id,error:j(g.error)})}t.editResults.push({typeName:d,adds:u,updates:y,deletes:c})}const s=e.get_cascaded_rel_deletes_count();for(let n=0;n<s;n++){const i=e.get_cascaded_rel_deletes_at(n);i.deleteLater();const d=e.get_cascaded_rel_deletes_type_name_at(n),u=[];for(let y=0;y<i.get_count();y++){const c=i.get_result_at(y);c.deleteLater(),u.push({id:c.id,originId:c.origin_id,destinationId:c.dest_id,error:j(c.error)})}t.cascadeRelationshipDeleteResults.push({typeName:d,cascadeRelationshipDeletes:u})}if(e.has_cascading_provenance_deletes()){const n=e.get_cascading_provenance_deletes();n.deleteLater();const i=n.get_count();for(let d=0;d<i;d++){const u=n.get_result_at(d);u.deleteLater(),t.cascadeProvenanceDeleteResults.push({id:u.id,error:j(u.error)})}}return t}const le=new Map,ia=()=>new Map(le.entries()),w={fetchKnowledgeGraph:async e=>{const r=new te({url:e}),t=[];return t.push(pe(r)),t.push(_t(r)),await Promise.all(t),r},refreshDataModel:async e=>{e.dataModel=await bt(e)},refreshServiceDefinition:async e=>{const r=(await I(e.url,{query:{f:"json"}})).data;return r.capabilities=r?.capabilities?.split(","),r.supportedQueryFormats=r?.supportedQueryFormats?.split(","),e.serviceDefinition=new v(r),e.serviceDefinition},executeFindPathsAsynchronous:async(e,r)=>{const t=e.inKnowledgeGraphUrl.split("/rest/services");if(t.length<2)throw new p("knowledge-graph:invalid-tool-url","The URL for the KG Service was not correctly formatted.  It should contain /rest/services/");const a=t[0],s=(await we(`${a}/rest/info`,{query:{f:"json"}})).data.currentVersion,n=`/rest/services/${s&&s<12?"System":"Utilities"}/KnowledgeGraphServerToolsAsync/GPServer/ServerFilteredFindPaths`;return await vt(`${a}${n}`,{in_knowledge_graph_url:e.inKnowledgeGraphUrl,config_type:"STRING",config_string:e.config.toJSON(),result_type:"STRING"},{},r)},executeFindPaths:async(e,r)=>{const t=e.inKnowledgeGraphUrl.split("/rest/services");if(t.length<2)throw new p("knowledge-graph:invalid-tool-url","The URL for the KG Service was not correctly formatted.  It should contain /rest/services/");const a=t[0],s=(await we(`${a}/rest/info`,{query:{f:"json"}})).data.currentVersion,n=`/rest/services/${s&&s<12?"System":"Utilities"}/KnowledgeGraphServerTools/GPServer/ServerFilteredFindPaths/execute`,i=await we(`${a}${n}`,{method:"post",query:{f:"pjson",in_knowledge_graph_url:e.inKnowledgeGraphUrl,config_type:"STRING",config_string:JSON.stringify(e.config),result_type:"STRING"},...r});if(i.data.results.length<1)throw new p("knowledge-graph:no-results","No results were returned from the FindPaths tool - no results returned",i);let d;for(const u of i.data.results)if(u.paramName==="out_results_string"){d=u.value;break}if(!d)throw new p("knowledge-graph:no-results","No results were returned from the FindPaths tool - no results were returned on the expected paramater out_results_string",i);return d},fetchAsynchronousFindPathsResultData:async(e,r)=>(await e.fetchResultData("out_results_string",null,r)).value,executeQueryStreaming:async(e,r,t)=>{const a="include",s=`${e.url}/graph/query`;await R(e);const n=await k(s,t);if(!e.serviceDefinition?.supportsProvenance&&r.provenanceBehavior===a)throw new p("knowledge-graph:provenance-not-supported","The Knowledge Graph Service definition indicated that provenance is not supported");n.data.body=await Oa(r,e);const i=await S(n.data.url,n.data);if(e.dataModel){const d=await at(i,e.dataModel);return new ae({resultRowsStream:d.readableStream,resultHeader:d.resultHeader})}throw new p("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")},executeApplyEdits:async(e,r,t)=>{if(e.serviceDefinition?.dataEditingNotSupported)throw new p("knowledge-graph:data-editing-not-supported","The Knowledge Graph Service definition indicated that data editing is not supported");const a=`${e.url}/graph/applyEdits`;await R(e);const s=await k(a,t);return s.data.body=await ka(r,e),qa(await S(s.data.url,s.data))},executeAddNamedTypes:async(e,r,t)=>{if(!r.newEntityTypes?.length&&!r.newRelationshipTypes?.length)throw new p("knowledge-graph:no-arguments","The operation to add types to the data model contained no values");const a=`${e.url}/dataModel/edit/namedTypes/add`;await R(e);const s=await k(a,t);s.data.body=await Ra(r);const n=await S(s.data.url,s.data),i=await La(n);return i.updatedKnowledgeGraph=await A(e.url),i},executeDeleteNamedType:async(e,r,t)=>{if(!r)throw new p("knowledge-graph:no-arguments","The operation to delete a named type from the data model contained no value");const a=`${e.url}/dataModel/edit/namedTypes/${r}/delete`;await R(e);const s=await k(a,t);s.data.body="";const n=await S(s.data.url,s.data),i=await Ba(n);return i.updatedKnowledgeGraph=await A(e.url),i},executeUpdateNamedType:async(e,r,t,a)=>{if(!r&&!Object.keys(t).length)throw new p("knowledge-graph:no-arguments","The operation to update types in the data model contained missing or empty values");const s=`${e.url}/dataModel/edit/namedTypes/${r}/update`;await R(e);const n=await k(s,a);n.data.body=await Ca(t,r,e.dataModel);const i=await S(n.data.url,n.data),d=await za(i);return d.updatedKnowledgeGraph=await A(e.url),d},executeAddGraphProperties:async(e,r,t,a)=>{if(!r&&!t.length)throw new p("knowledge-graph:no-arguments","The operation to add properties to the data model contained missing or empty values");const s=`${e.url}/dataModel/edit/namedTypes/${r}/fields/add`;await R(e);const n=await k(s,a);n.data.body=await Ia(t);const i=await S(n.data.url,n.data),d=await $a(i);return d.updatedKnowledgeGraph=await A(e.url),d},executeDeleteGraphProperty:async(e,r,t,a)=>{if(!r&&!t)throw new p("knowledge-graph:no-arguments","The operation to delete property contained missing or empty values");const s=`${e.url}/dataModel/edit/namedTypes/${r}/fields/delete`;await R(e);const n=await k(s,a);n.data.body=await Fa(t);const i=await S(n.data.url,n.data),d=await Va(i);return d.updatedKnowledgeGraph=await A(e.url),d},executeUpdateGraphProperty:async(e,r,t,a,s)=>{if(!r&&!t&&!Object.keys(a).length)throw new p("knowledge-graph:no-arguments","The operation to update properties in the data model contained missing or empty values");const n=`${e.url}/dataModel/edit/namedTypes/${r}/fields/update`;await R(e);const i=await k(n,s);i.data.body=await Ea(t,a);const d=await S(i.data.url,i.data),u=await Ja(d);return u.updatedKnowledgeGraph=await A(e.url),u},executeAddGraphFieldIndex:async(e,r,t,a)=>{if(!r)throw new p("knowledge-graph:no-arguments","The operation to update search index in the data model contained missing named type");if(!t?.length)throw new p("knowledge-graph:no-arguments","The operation to update search index in the data model contained missing or empty field index values");const s=`${e.url}/dataModel/edit/namedTypes/${r}/indexes/add`;await R(e);const n=await k(s,a);n.data.body=await Aa(t);const i=await S(n.data.url,n.data),d=await Ka(i);return d.updatedKnowledgeGraph=await A(e.url),d},executeDeleteGraphFieldIndex:async(e,r,t,a)=>{if(!r)throw new p("knowledge-graph:no-arguments","The operation to update search index in the data model contained missing named type");if(!t?.length)throw new p("knowledge-graph:no-arguments","The operation to update search index in the data model contained missing or empty field index values");const s=`${e.url}/dataModel/edit/namedTypes/${r}/indexes/delete`;await R(e);const n=await k(s,a);n.data.body=await Ma(t);const i=await S(n.data.url,n.data),d=await Qa(i);return d.updatedKnowledgeGraph=await A(e.url),d},executeUpdateSearchIndex:async(e,r,t,a)=>{if(!r)throw new p("knowledge-graph:no-arguments","The operation to update search index in the data model contained missing named type");if(!Object.keys(t.addSearchProperties??{}).length&&!Object.keys(t.removeSearchProperties??{}).length)throw new p("knowledge-graph:no-arguments","The operation to update search index in the data model contained missing or empty properties values");const s=`${e.url}/dataModel/searchIndex/update`;await R(e);const n=await k(s,a);n.data.body=await Na(r,t);const i=await S(n.data.url,n.data),d=await Ha(i);return d.updatedKnowledgeGraph=await A(e.url),d},executeQuery:async(e,r,t)=>{const a=`${e.url}/graph/query`,s=await I(a,{responseType:"array-buffer",query:{f:"pbf",openCypherQuery:r.openCypherQuery,...t?.query},signal:t?.signal,timeout:t?.timeout}),n=s.getHeader?.("content-type"),i=s.data;if(n?.includes("application/x-protobuf")){const d=new(await m()).GraphQueryDecoder;if(d.deleteLater(),e.dataModel){const u=qe({wasmQueryDecoder:d,newArrayBufferToParse:i,dataModel:e.dataModel});return new re({resultRows:u.resultRows,resultHeader:u.resultHeader})}throw new p("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:n,data:s.data})},executeSearch:async(e,r,t)=>{const a=r.typeCategoryFilter==="provenance"?"metaEntityProvenance":r.typeCategoryFilter,s=`${e.url}/graph/search`,n=await I(s,{responseType:"array-buffer",query:{f:"pbf",searchQuery:`"${r.searchQuery}"`,typeCategoryFilter:a,...t?.query},signal:t?.signal,timeout:t?.timeout}),i=n.getHeader?.("content-type"),d=n.data;if(i?.includes("application/x-protobuf")){const u=new(await m()).GraphQueryDecoder;if(u.deleteLater(),e.dataModel){const y=qe({wasmQueryDecoder:u,newArrayBufferToParse:d,dataModel:e.dataModel});return new re({resultRows:y.resultRows,resultHeader:y.resultHeader})}throw new p("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:i,data:n.data})},executeSearchStreaming:async(e,r,t)=>{const a=`${e.url}/graph/search`;await R(e);const s=await k(a,t);s.data.body=await Ua(r);const n=await S(s.data.url,s.data);if(e.dataModel){const i=await at(n,e.dataModel);return new ae({resultRowsStream:i.readableStream,resultHeader:i.resultHeader})}throw new p("knowledge-graph:undefined-data-model","The KnowledgeGraph supplied did not have a data model")},fetchClientDataAtKeys:async(e,r,t={ignoreCache:!1})=>{if(!r.length)return new Map;let a=le.get(e.url||"");a||(a=new Map,le.set(e.url||"",a));const s=new Map(a.entries()),n=`${e.url}/clientData/fetch`;r=Array.from(new Set(r));const i=await m(),d=rr(r,a,i,t.ignoreCache),u=await k(n,t.requestOptions);u.data.body=d;const y=await S(u.data.url,u.data),c=y.headers.get("content-type");if(c?.includes("application/x-protobuf")){const h=new i.ClientDataFetchResponseDecoder;h.deleteLater();const _=await y.arrayBuffer();return h.decode(new Uint8Array(_)),h.has_error()&&P(h.error,"knowledge-graph:fetchClientDataAtKeys-decoding-error","An error occurred while decoding the client data keys response"),wr(h,a,s,t.ignoreCache)}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response when fetching client data",{responseType:c,data:y})},fetchAllClientDataKeys:async(e,r)=>{const t=`${e.url}/clientData`,a=await I(t,{responseType:"array-buffer",query:{f:"pbf"},signal:r?.signal,timeout:r?.timeout}),s=a.getHeader?.("content-type"),n=a.data;if(s?.includes("application/x-protobuf")){const i=new(await m()).ClientDataKeysResponseDecoder;return i.deleteLater(),i.decode(new Uint8Array(n)),i.has_error()&&P(i.error,"knowledge-graph:fetchAllClientDataKeys-decoding-error","An error occurred while decoding the client data keys response"),_r(i)}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:s,data:a.data})},clearClientDataCache:()=>le.clear(),_fetchWrapper:async(e,r)=>fetch(e,r),_submitJobWrapper:async(e,r,t,a)=>tr(e,r,t,a),_esriRequestWrapper:async(e,r)=>I(e,r)};async function la(e,r,t){return w.executeApplyEdits(e,r,t)}async function da(e,r,t){return w.executeAddNamedTypes(e,r,t)}async function ua(e,r,t){return w.executeDeleteNamedType(e,r,t)}async function pa(e,r,t,a){return w.executeUpdateNamedType(e,r,t,a)}async function ca(e,r,t,a){return w.executeAddGraphProperties(e,r,t,a)}async function ya(e,r,t,a){return w.executeDeleteGraphProperty(e,r,t,a)}async function ha(e,r,t,a,s){return w.executeUpdateGraphProperty(e,r,t,a,s)}async function fa(e,r,t,a){return w.executeAddGraphFieldIndex(e,r,t,a)}async function ga(e,r,t,a){return w.executeDeleteGraphFieldIndex(e,r,t,a)}async function ma(e,r,t,a){return w.executeUpdateSearchIndex(e,r,t,a)}async function wa(e,r,t){return w.executeQuery(e,r,t)}async function _a(e,r,t){return w.executeQueryStreaming(e,r,t)}async function va(e,r,t){return w.executeSearch(e,r,t)}async function ja(e,r,t){return w.executeSearchStreaming(e,r,t)}function ba(e,r){return w.fetchAllClientDataKeys(e,r)}function Ga(e,r,t){return w.fetchClientDataAtKeys(e,r,t)}async function A(e){return w.fetchKnowledgeGraph(e)}async function pe(e){return w.refreshDataModel(e)}async function _t(e){return w.refreshServiceDefinition(e)}async function xa(e,r){return w.executeFindPathsAsynchronous(e,r)}async function Ta(e,r){return w.executeFindPaths(e,r)}async function Pa(e,r){return w.fetchAsynchronousFindPathsResultData(e,r)}function Sa(){return w.clearClientDataCache()}async function S(e,r){return w._fetchWrapper(e,r)}async function vt(e,r,t,a){return w._submitJobWrapper(e,r,t,a)}async function we(e,r){return w._esriRequestWrapper(e,r)}async function R(e){Dt?.findCredential(e.url)||(e.dataModel?await bt(e):await pe(e))}function Da(e,r,t,a){r==null?t.set_param_key_value(e,""):typeof r!="object"||r instanceof Date?t.set_param_key_value(e,r):r instanceof Le?t.set_param_key_value(e,Ve(r,a)):Array.isArray(r)?t.set_param_key_value(e,ut(r,a)):t.set_param_key_value(e,pt(r,a))}async function ka(e,r){if(r.dataModel||await pe(r),!r.dataModel)throw new p("knowledge-graph:data-model-undefined","Encoding could not proceed because a data model was not provided and it could not be determined from the service");const t=await m(),a=!!e.options?.cascadeDelete,s=!!e.options?.cascadeProvenanceDelete,n=new t.GraphApplyEditsEncoder(t.SpatialReferenceUtil.WGS84(),e.options?.inputQuantizationParameters?pr(e.options?.inputQuantizationParameters):t.InputQuantizationUtil.WGS84_lossless());n.deleteLater(),n.cascade_delete=a,n.cascade_delete_provenance=s;try{let d;e.entityAdds?.forEach(u=>{d=n.add_entity(fe(u,t)),P(d,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - an entity failed to be added to the encoder")}),e.relationshipAdds?.forEach(u=>{if(!u.originId||!u.destinationId)throw new p("knowledge-graph:relationship-origin-destination-missing","When adding a new relationship, you must provide both an origin and destination id on the appropriate class property");d=n.add_relationship(fe(u,t)),P(d,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - a relationship failed to be added to the encoder")}),e.entityUpdates?.forEach(u=>{if(!u.id)throw new p("knowledge-graph:entity-id-missing","When updating an entity or relationship, you must specify the id on the class level property");d=n.update_entity(fe(u,t)),P(d,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - an entity failed to be added to the encoder")}),e.relationshipUpdates?.forEach(u=>{if(!u.id)throw new p("knowledge-graph:relationship-id-missing","When updating an entity or relationship, you must specify the id on the class level property");d=n.update_relationship(fe(u,t)),P(d,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits - a relationship failed to be added to the encoder")}),e.entityDeletes?.forEach(u=>{if(!u.typeName)throw new p("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits - delete");const y=n.make_delete_helper(u.typeName,!0);y.deleteLater(),u.ids?.forEach(c=>{y.delete_by_id(c)})}),e.relationshipDeletes?.forEach(u=>{if(!u.typeName)throw new p("knowledge-graph:no-type-name","You must indicate the entity/relationship named object type to apply edits - delete");const y=n.make_delete_helper(u.typeName,!1);u.ids?.forEach(c=>{y.delete_by_id(c)})}),n.encode()}catch(d){throw new p("knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits failed",{error:d})}const i=n.get_encoding_result();return P(i.error,"knowledge-graph:applyEdits-encoding-failed","Attempting to encode the applyEdits failed"),structuredClone(i.get_byte_buffer())}async function Ra(e){const r=await m(),t=new r.GraphNamedObjectTypeAddsRequestEncoder;t.deleteLater(),e.newEntityTypes?.forEach(s=>{t.add_entity_type(cr(s,r))}),e.newRelationshipTypes?.forEach(s=>{t.add_relationship_type(yr(s,r))});try{t.encode()}catch(s){throw new p("knowledge-graph:addNamedTypes-encoding-failed","Attempting to encode the addNamedTypes failed",{error:s})}const a=t.get_encoding_result();return P(a.error,"knowledge-graph:addNamedTypes-encoding-failed","Attempting to encode the addNamedTypes failed"),structuredClone(a.get_byte_buffer())}async function Ca(e,r,t){const a=await m(),s=new a.GraphNamedObjectTypeUpdateRequestEncoder;if(s.deleteLater(),t.entityTypes.some(i=>i.name===r))s.update_entity_type(hr(e,a));else{if(!t.relationshipTypes.some(i=>i.name===r))throw new p("knowledge-graph:updateNamedType-encoding-failed","The named type you are trying to update does not exist in the data model");s.update_relationship_type(fr(e,a))}s.update_alias=e.hasOwnProperty("alias");try{s.encode()}catch(i){throw new p("knowledge-graph:updateNamedType-encoding-failed","Attempting to encode the updateNamedType failed",{error:i})}const n=s.get_encoding_result();return P(n.error,"knowledge-graph:updateNamedType-encoding-failed","Attempting to encode the updateNamedType failed"),structuredClone(n.get_byte_buffer())}async function Ia(e){const r=await m(),t=new r.GraphPropertyAddsRequestEncoder;t.deleteLater(),e.forEach(s=>{t.add_graph_property(ct(s,r))});try{t.encode()}catch(s){throw new p("knowledge-graph:addGraphProperties-encoding-failed","Attempting to encode the addGraphProperties failed",{error:s})}const a=t.get_encoding_result();return P(a.error,"knowledge-graph:addGraphProperties-encoding-failed","Attempting to encode the addGraphProperties failed"),structuredClone(a.get_byte_buffer())}async function Fa(e){const r=new(await m()).GraphPropertyDeleteRequestEncoder;r.deleteLater(),r.field_name=e;try{r.encode()}catch(a){throw new p("knowledge-graph:deleteGraphProperty-encoding-failed","Attempting to encode the deleteGraphProperty failed",{error:a})}const t=r.get_encoding_result();return P(t.error,"knowledge-graph:deleteGraphProperty-encoding-failed","Attempting to encode the deleteGraphProperty failed"),structuredClone(t.get_byte_buffer())}async function Ea(e,r){const t=await m(),a=new t.GraphPropertyUpdateRequestEncoder;a.deleteLater(),a.update_graph_property(gr(r,t)),a.set_property_name(e),a.update_alias=r.hasOwnProperty("alias"),a.update_editable=r.hasOwnProperty("editable"),a.update_required=r.hasOwnProperty("required"),a.update_visible=r.hasOwnProperty("defaultVisibility"),a.update_default_value=r.hasOwnProperty("defaultValue");try{a.encode()}catch(n){throw new p("knowledge-graph:updateGraphProperty-encoding-failed","Attempting to encode the updateGraphProperty failed",{error:n})}const s=a.get_encoding_result();return P(s.error,"knowledge-graph:updateGraphProperty-encoding-failed","Attempting to encode the updateGraphProperty failed"),structuredClone(s.get_byte_buffer())}async function Aa(e){const r=await m(),t=new r.GraphIndexAddsRequestEncoder;t.deleteLater(),e.forEach(s=>{t.add_field_index(mr(s,r))});try{t.encode()}catch(s){throw new p("knowledge-graph:addGraphFieldIndex-encoding-failed","Attempting to encode the addGraphFieldIndex failed",{error:s})}const a=t.get_encoding_result();return P(a.error,"knowledge-graph:addGraphFieldIndex-encoding-failed","Attempting to encode the addGraphFieldIndex failed"),structuredClone(a.get_byte_buffer())}async function Ma(e){const r=new(await m()).GraphIndexDeleteRequestEncoder;r.deleteLater(),e.forEach(a=>{r.add_index_name(a)});try{r.encode()}catch(a){throw new p("knowledge-graph:deleteGraphFieldIndex-encoding-failed","Attempting to encode the deleteGraphFieldIndex failed",{error:a})}const t=r.get_encoding_result();return P(t.error,"knowledge-graph:deleteGraphFieldIndex-encoding-failed","Attempting to encode the deleteGraphFieldIndex failed"),structuredClone(t.get_byte_buffer())}async function Na(e,r){const t=await m(),a=new t.GraphUpdateSearchIndexRequestEncoder;a.deleteLater(),r.hasOwnProperty("addSearchProperties")&&a.insert_add_search_property(e,tt(r.addSearchProperties,t)),r.hasOwnProperty("removeSearchProperties")&&a.insert_delete_search_property(e,tt(r.removeSearchProperties,t));try{a.encode()}catch(n){throw new p("knowledge-graph:updateSearchIndex-encoding-failed","Attempting to encode the updateSearchIndex failed",{error:n})}const s=a.get_encoding_result();return P(s.error,"knowledge-graph:updateSearchIndex-encoding-failed","Attempting to encode the updateSearchIndex failed"),structuredClone(s.get_byte_buffer())}async function Oa(e,r){const t=await m(),a=new t.GraphQueryRequestEncoder;if(a.deleteLater(),e.outputSpatialReference?a.output_spatial_reference={wkid:e.outputSpatialReference.wkid,latestWkid:e.outputSpatialReference.latestWkid,vcsWkid:e.outputSpatialReference.vcsWkid,latestVcsWkid:e.outputSpatialReference.latestVcsWkid,wkt:e.outputSpatialReference.wkt??""}:a.output_spatial_reference=t.SpatialReferenceUtil.WGS84(),a.open_cypher_query=e.openCypherQuery,e.bindParameters)for(const[n,i]of Object.entries(e.bindParameters))Da(n,i,a,t);if(e.bindGeometryQuantizationParameters)nr(e.bindGeometryQuantizationParameters,a);else{if(r.dataModel||await pe(r),r.dataModel?.spatialReference?.wkid!==4326)throw new p("knowledge-graph:SR-quantization-mismatch","If the DataModel indicates a coordinate system other than WGS84, inputQuantizationParameters must be provided to the query encoder");a.input_quantization_parameters=t.InputQuantizationUtil.WGS84_lossless()}e.outputQuantizationParameters&&or(e.outputQuantizationParameters,a,t),e.provenanceBehavior&&ir(e.provenanceBehavior,a);try{a.encode()}catch(n){throw new p("knowledge-graph:query-encoding-failed","Attempting to encode the query failed",{error:n})}const s=a.get_encoding_result();if(s.error.error_code!==0)throw new p("knowledge-graph:query-encoding-failed","Attempting to encode the query failed",{errorCode:s.error.error_code,errorMessage:s.error.error_message});return structuredClone(s.get_byte_buffer())}async function Ua(e){const r=await m(),t=new r.GraphSearchRequestEncoder;t.deleteLater(),t.search_query=e.searchQuery;const a=e.typeCategoryFilter==="provenance"?"meta_entity_provenance":e.typeCategoryFilter;if(t.type_category_filter=r.esriNamedTypeCategory[a],e.returnSearchContext===!0&&(t.return_search_context=e.returnSearchContext),e.start!=null&&e.start>0&&(t.start_index=e.start),e.num!=null&&(t.max_num_results=e.num),e.idsFilter!=null&&Array.isArray(e.idsFilter)&&e.idsFilter.length>0)try{t.set_ids_filter(ut(e.idsFilter,r))}catch(n){throw new p("knowledge-graph:ids-format-error","Attempting to set ids filter failed.  This is usually caused by an incorrectly formatted UUID string",{error:n})}e.namedTypesFilter?.forEach(n=>{t.add_named_type_filter(n)});try{t.encode()}catch(n){throw new p("knowledge-graph:search-encoding-failed","Attempting to encode the search failed",{error:n})}const s=t.get_encoding_result();if(s.error.error_code!==0)throw new p("knowledge-graph:search-encoding-failed","Attempting to get encoding result from the query failed",{errorCode:s.error.error_code,errorMessage:s.error.error_message});return structuredClone(s.get_byte_buffer())}async function k(e,r){return I(e,{responseType:"native-request-init",method:"post",query:{f:"pbf",...r?.query},body:"x",headers:{"Content-Type":"application/octet-stream"},signal:r?.signal,timeout:r?.timeout})}async function N(e,r,t){const a=e.headers.get("content-type");if(a?.includes("application/x-protobuf")){const s=await e.arrayBuffer(),n=new r;try{return n.decode(new Uint8Array(s)),t(n)}finally{n.deleteLater()}}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:a,data:await e.text()})}async function qa(e){return N(e,(await m()).GraphApplyEditsDecoder,oa)}async function La(e){return N(e,(await m()).GraphNamedObjectTypeAddsResponseDecoder,kr)}async function Ba(e){return N(e,(await m()).GraphNamedObjectTypeDeleteResponseDecoder,Cr)}async function za(e){return N(e,(await m()).GraphNamedObjectTypeUpdateResponseDecoder,Rr)}async function $a(e){return N(e,(await m()).GraphPropertyAddsResponseDecoder,Ir)}async function Va(e){return N(e,(await m()).GraphPropertyDeleteResponseDecoder,Fr)}async function Ja(e){return N(e,(await m()).GraphPropertyUpdateResponseDecoder,Er)}async function Ka(e){return N(e,(await m()).GraphIndexAddsResponseDecoder,Mr)}async function Qa(e){return N(e,(await m()).GraphIndexDeleteResponseDecoder,Nr)}async function Ha(e){return N(e,(await m()).GraphUpdateSearchIndexResponseDecoder,Ar)}let jt=50;function Wa(e){jt=e}function qe({wasmQueryDecoder:e,newArrayBufferToParse:r,dataModel:t,decodedHeader:a,limitMaxProcessingTime:s=!1}){r&&e.push_buffer(new Uint8Array(r));const n=[];let i,d,u=0;const y=Date.now();let c=!0;for(;e.next_row();){i&&d||(i=a??sa(e),d=i.outSpatialReference??new J({wkid:4326})),u||(u=e.get_header_keys().size());const h=new Array(u);for(let _=0;_<u;_++){const C=e.get_value(_);h[_]=Qe(C,t,d)}if(n.push(h),s&&Date.now()-y>jt){c=!1;break}}if(e.has_error())throw new p("knowledge-graph:stream-decoding-error","One or more result rows were not successfully decoded - inner row decoding",{errorCode:e.error.error_code,errorMessage:e.error.error_message});return{resultHeader:i,resultRows:n,parsedAllResultsFromBuffer:c}}async function at(e,r){const t=e.headers.get("content-type");if(e.headers.get("content-length")&&je.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").warnOnce("Found `Content-Length` header when expecting a streaming HTTP response! Please investigate whether all intermediate HTTP proxies and/or load balancers are configured such that they don't forcefully buffer the entire response before returning it to the client. A valid HTTP streaming response should use Chunked Transfer Encoding and not have a Content Length defined."),t?.includes("application/x-protobuf")){const a=e.body?.getReader(),s=new(await m()).GraphQueryDecoder;let n,i,d;s.deleteLater();const u=new Promise((h,_)=>{i=h,d=_});let y=!1,c=null;return{readableStream:new ReadableStream({pull:async function h(_){if(!a){const g=new p("knowledge-graph:stream-decoding-error","Error reading from stream - reader is undefined");throw d(g),g}const{done:C,value:G}=c?{done:!1,value:null}:await a.read().catch(g=>{throw d(g),a.releaseLock(),g});G&&(c=G);try{if(C){let z;if(s.has_error()?z=new p("knowledge-graph:stream-decoding-error","One or more result rows were not successfully decoded - query stream done",{errorCode:s.error.error_code,errorMessage:s.error.error_message}):y||i(new q),a.releaseLock(),z)throw _.error(z),d(z),z;return void _.close()}const{resultHeader:g,resultRows:ce,parsedAllResultsFromBuffer:ye}=qe({wasmQueryDecoder:s,newArrayBufferToParse:G,dataModel:r,decodedHeader:n,limitMaxProcessingTime:!0});return ye&&(c=null),!n&&g&&(n=g,i(g),y=!0),ce.length>0?void _.enqueue(ce):await h(_)}catch(g){throw je.getLogger("esri.rest.knowledgeGraph.knowledgeGraphService").error(g),d(g),a.releaseLock(),Rt(g)?g:new p("knowledge-graph:unexpected-server-response","Error inside streaming data return parsing",{error:g})}}}),resultHeader:await u}}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:t,data:e.text()})}async function bt(e){const r=`${e.url}/dataModel/queryDataModel`,t=await I(r,{responseType:"array-buffer",query:{f:"pbf"}}),a=t.getHeader?.("content-type"),s=t.data;if(a?.includes("application/x-protobuf")){const n=(await m()).decode_data_model_from_protocol_buffer(new Uint8Array(s));if(!n)throw new p("knowledge-graph:data-model-decode-failure","The server responded to the data model query, but the response failed to be decoded.  This typically occurs when the Knowledge JS API (4.26 or later) is used with an unsupported backend (11.0 or earlier)");return Or(n)}throw new p("knowledge-graph:unexpected-server-response","server returned an unexpected response",{responseType:a,data:t.data})}const zs=Object.freeze(Object.defineProperty({__proto__:null,_checkAuthentication:R,_esriRequestWrapper:we,_fetchWrapper:S,_getClientDataCacheCopy:ia,_setMaxQueryParsingDurationForTesting:Wa,_submitJobWrapper:vt,clearClientDataCache:Sa,clientDataCache:le,executeAddGraphFieldIndex:fa,executeAddGraphProperties:ca,executeAddNamedTypes:da,executeApplyEdits:la,executeDeleteGraphFieldIndex:ga,executeDeleteGraphProperty:ya,executeDeleteNamedType:ua,executeFindPaths:Ta,executeFindPathsAsynchronous:xa,executeQuery:wa,executeQueryStreaming:_a,executeSearch:va,executeSearchStreaming:ja,executeUpdateGraphProperty:ha,executeUpdateNamedType:pa,executeUpdateSearchIndex:ma,fetchAllClientDataKeys:ba,fetchAsynchronousFindPathsResultData:Pa,fetchClientDataAtKeys:Ga,fetchKnowledgeGraph:A,kgRestServices:w,refreshDataModel:pe,refreshServiceDefinition:_t},Symbol.toStringTag,{value:"Module"}));export{la as V,_a as a,De as i,zs as k,Ga as l,m as n,lt as r,A as u};
