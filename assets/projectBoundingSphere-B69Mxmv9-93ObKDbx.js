import{y as b}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{t as h}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";import{I as A,d as U,w as u,e as j}from"./projectionUtils-BGH_5_I3-BySNUA-B.js";import{a6 as R}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{h as p,Q as m}from"./sphere-DLQ6p7mp-DmnRpHXV.js";function N(e,f,t,a){if(f==null||a==null)return!1;const r=A(f,a);if(r?.projector==null)return!1;if(r.projector===U)return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),!0;const{source:n,dest:l,projector:I}=r;if(l.spatialReferenceId===3){const s=u[n.spatialReferenceId][2];if(s==null)return!1;s(p(e),0,d,0),j(d,0,o,0);const i=M(d[1],e[2],e[3],R.radius);return m(t,o,i),!0}if(n.spatialReferenceId!==2&&n.spatialReferenceId!==5||l.spatialReferenceId!==11){I(p(e),0,o,0);const s=n.metersPerUnit??1,i=l.metersPerUnit??1,c=e[3]*s/i;m(t,o,c)}else{const s=u[n.spatialReferenceId][1],i=u[1][11];let c=e[3];s!=null&&i!=null&&(c=M(e[1],e[2],e[3],R.radius)),I(p(e),0,o,0),m(t,o,c)}return!0}function M(e,f,t,a){const r=a+f;if(r<a/2||t>r)return Number.MAX_VALUE;const n=Math.abs(P*e)+Math.asin(t/r);return n>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(n)}const d=h(),o=h(),P=b(1);export{N as X};
