import{l as h,I as l,J as p,v as n,Y as i,H as r,G as d}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{f,H as c}from"./Point-BfTTZoMu-DeJwQYfh.js";import{k as v}from"./MultiOriginJSONSupport-Bd1TKmh_-BHNF5tHX.js";import{z as o}from"./Extent-CgDMOSRD-Bod5LY6s.js";import{o as S}from"./Layer-DZvC7bne-D3VLDrab.js";import{o as x}from"./APIKeyMixin--YGbad8e-DJ-JJTX5.js";import{c as w}from"./ArcGISService-SIwch9bz-DEFXc423.js";import{i as g}from"./CustomParametersMixin-Dshqz1Zp-BFC165kX.js";import{C as T,f as E,T as R}from"./OperationalLayer-B6zbJ5nR-DyK_ztCk.js";import{z as C}from"./PortalLayer-CbFNhtZ4-Doeialq-.js";import{s as L}from"./ScaleRangeLayer-DQr2T3Hh-Dh1UYk4i.js";import{T as $,j as m}from"./tiles3DUtils-CDSpqUp9-BNKy0CHl.js";import{K as u,G,J as I}from"./elevationInfoUtils-B8MpdRMP-CDlK86wO.js";import"./index-B0z_nLWi.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./collectionUtils-jDyktm0P-BDP2Oq99.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./ElevationInfo-Cw2HaA6E-CuK5hJ96.js";import"./lengthUtils-Dt1_RvOO-j3MEdmHu.js";import"./unitConversionUtils-4vB4Ezlp-DnY5MDxd.js";import"./asyncUtils-w6KfWU41-HenJ0UOu.js";import"./PortalItem-DnxMlRVo-CI4Ns2_M.js";import"./projectionUtils-BGH_5_I3-DGwchVO8.js";import"./Polyline-CoiTLswR-DTxpB2Yg.js";import"./Polygon-D6wEPb3W-D2MPjRU4.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./vec32-CewSdTn3-VRto2OOh.js";import"./HeightModelInfo-D5IdRvJ2-23y6MRiu.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./layerContainerType-CSXZNpHb-BIF7XAYP.js";import"./opacityUtils-DuFH0EC9-DWspTgn2.js";import"./layerUtils-DZGhvm-W-CfyHx1TZ.js";import"./portalItemUtils-CaPNUJg6-CXDHI5LA.js";import"./SimpleObservable-CvFyr0NA-DXpoMYph.js";import"./aaBoundingRect-CjwcS2F3-ri8bmh30.js";let t=class extends w(T(C(L(v(g(x(S))))))){constructor(e){super(e),this.operationalLayerType="GaussianSplatLayer",this.type="gaussian-splat",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new o(-180,-90,180,90,this.spatialReference),this.spatialReference=new f({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){e!=null&&e.mode!=="absolute-height"||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const a=e!=null?e.signal:null;if(!h("enable-feature:gaussianSplatLayer"))throw new l("GaussianSplatLayer-init:not-supported","This layer is currently not supported.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:s=>{if(s.typeKeywords?.includes("GaussianSplat"))return!0;throw new l("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service"})}},e)}catch(s){p(s)}this.url&&await c(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:a}).then(s=>{this.rootTilesetJSON=s.data;const y=$(this.rootTilesetJSON);this.fullExtent=m(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,y&&(this.esriCrsFullExtent=m(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},s=>{p(s)})}_validateElevationInfo(e){const a="Gaussian Splat layers";u(n.getLogger(this),G(a,"absolute-height",e)),u(n.getLogger(this),I(a,e))}};i([r({type:["GaussianSplatLayer"]})],t.prototype,"operationalLayerType",void 0),i([r({readOnly:!0})],t.prototype,"type",void 0),i([r({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),i([r({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"minScale",void 0),i([r({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"maxScale",void 0),i([r(E)],t.prototype,"url",void 0),i([r({type:o})],t.prototype,"fullExtent",void 0),i([r({type:f})],t.prototype,"spatialReference",void 0),i([r({readOnly:!0})],t.prototype,"supportedSpatialReferences",null),i([r({type:[o]})],t.prototype,"fullExtents",null),i([r({type:["show","hide"]})],t.prototype,"listMode",void 0),i([r(R)],t.prototype,"elevationInfo",null),t=i([d("esri.layers.GaussianSplatLayer")],t);const ue=t;export{ue as default};
