import{n as s}from"./workerHelper-gnhZ_iny-jO9IrZbp.js";import{EdgeInputBufferLayout as u}from"./bufferLayouts-f-kO2Y2_-DYZYueGx.js";import{v as c}from"./edgePreprocessing-D_eX-fWy-DqE-06Ss.js";import{extract as l,extractEdgeInformation as p,extractComponentsEdgeLocationsLayout as d,extractEdgeLocationsLayout as m}from"./edgeProcessing-XRp0V_T8-Dt2LvMOy.js";import"./InterleavedLayout-B7roQAzV-CdGz7mlm.js";import"./BufferView-Cj2sQaht-avJ4OGB_.js";import"./Polygon-D6wEPb3W-D2MPjRU4.js";import"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import"./Extent-CgDMOSRD-Bod5LY6s.js";import"./Point-BfTTZoMu-DeJwQYfh.js";import"./index-B0z_nLWi.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./vec32-CewSdTn3-VRto2OOh.js";import"./collectionUtils-jDyktm0P-BDP2Oq99.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./vec42-B8VM4vXb-B6OGOEI9.js";import"./vec2f64-rIxtbMRN-Kai9mK1i.js";import"./vec4f64-DPb6J-GU-C7c2DqbZ.js";import"./Indices-D0_UQPPr-t1Qev6md.js";import"./VertexElementDescriptor-BlxU8vCE-BwuKQkTU.js";import"./types-BKo2foNY-DE0QfIFp.js";import"./enums-B4pqBiXb-BO-3hS_8.js";import"./aaBoundingRect-CjwcS2F3-ri8bmh30.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./SimpleObservable-CvFyr0NA-DXpoMYph.js";import"./deduplicate-Lzwo1kX7-CSf-1ZcR.js";class J{async extract(t){const e=a(t),n=l(e),i=[e.data.buffer];return{result:f(n,i),transferList:i}}async extractComponentsEdgeLocations(t){const e=a(t),n=p(e.data,e.skipDeduplicate,e.indices,e.indicesLength),i=c(n,y),o=[];return{result:s(i.regular.instancesData,o),transferList:o}}async extractEdgeLocations(t){const e=a(t),n=p(e.data,e.skipDeduplicate,e.indices,e.indicesLength),i=c(n,L),o=[];return{result:s(i.regular.instancesData,o),transferList:o}}}function a(r){return{data:u.createView(r.dataBuffer),indices:r.indicesType==="Uint32Array"?new Uint32Array(r.indices):r.indicesType==="Uint16Array"?new Uint16Array(r.indices):r.indices,indicesLength:r.indicesLength,writerSettings:r.writerSettings,skipDeduplicate:r.skipDeduplicate}}function f(r,t){return t.push(r.regular.lodInfo.lengths.buffer),t.push(r.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:s(r.regular.instancesData,t),lodInfo:{lengths:r.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:s(r.silhouette.instancesData,t),lodInfo:{lengths:r.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:r.averageEdgeLength}}class g{allocate(t){return m.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1)}}class h{allocate(t){return d.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex)}}const L=new g,y=new h;export{J as default};
