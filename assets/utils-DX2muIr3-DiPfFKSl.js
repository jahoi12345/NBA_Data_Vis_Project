function O(e){return typeof e=="function"}function R(e,r,n,t){return O(e)?e(r,n,t):e}const V=` /-,
`;function h(e){let r=e.length;for(;r--;)if(!V.includes(e.charAt(r)))return!1;return!0}function v(e,r){const n=[];let t=0,o=-1;do if(o=e.indexOf("[",t),o>=t){if(o>t){const l=e.slice(t,o);n.push([l,null,h(l)])}if(t=o+1,o=e.indexOf("]",t),o>=t){if(o>t){const l=r[e.slice(t,o)];l&&n.push([null,l,!1])}t=o+1}}while(o!==-1);if(t<e.length){const l=e.slice(t);n.push([l,null,h(l)])}return n}function U(e,r,n){let t="",o=null;for(const l of r){const[s,u,a]=l;if(s!=null&&s!=="")a?o=s:(o!=null&&(t+=o,o=null),t+=s);else{const i=e.readAttribute(u);i!=null&&i!==""&&(o!==null&&(t+=o,o=null),t+=i)}}return P(t,n)}function X(e,r,n,t){let o="",l=null;for(const s of r){const[u,a,i]=s;if(u!=null&&u!=="")i?l=u:(l!=null&&(o+=l,l=null),o+=u);else{let f=a;n!=null&&(f=F(a,n));const c=e.attributes[f];c!=null&&c!==""&&(l!=null&&(o+=l,l=null),o+=c)}}return P(o,t)}function P(e,r){switch(typeof e!="string"&&(e=String(e)),r){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Y(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function j(e){return e.data?.symbol??null}function D(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function E(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function H(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const J=(e,r=0)=>e==null||isNaN(e)?r:e;class _{constructor(r){this._import=r}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(r=>this.module=r)),this._promise}}function W(e){return new _(e)}function K(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Q(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Z(e){let r="normal",n="normal";if(e){const t=e.toLowerCase();t.includes("italic")?r="italic":t.includes("oblique")&&(r="oblique"),t.includes("bold")?n="bold":t.includes("light")&&(n="lighter")}return{style:r,weight:n}}function $(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function C(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const r of e.symbolLayers){const n=C(r);if(n!=null)return n}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidFill":return e.color}return null}function b(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const r=e.symbolLayers;if(r)for(const n of r){const t=b(n);if(t!=null)return t}break}case"CIMTextSymbol":return b(e.symbol);case"CIMSolidStroke":return e.color}}function d(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const r of e.symbolLayers){const n=d(r);if(n!==void 0)return n}break;case"CIMTextSymbol":return d(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function ee(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function re(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function ne(e){return(e?Object.keys(e):[]).map(r=>({name:r,alias:r,type:typeof e[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const te=e=>e.includes("data:image/svg+xml");function oe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function L(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function le(e,r,n,t,o,l,s=!0){const{infos:u}=l;let a=1,i=0,f=0,c=0,m=1;for(const{absoluteAnchorPoint:A,offsetX:y,offsetY:M,rotation:T,size:N,frameHeight:p,rotateClockWise:G,scaleSymbolsProportionally:z}of u)m=A?1:a,f=k(y,M,i,m,f),c=S(y,M,i,m,c),p&&(z||s)&&(a*=N/p),i=g(T,G,i);const w=k(t,o,i,m,f),x=S(t,o,i,m,c);return{size:e*a,rotation:g(r,n,i),offsetX:w,offsetY:x}}function q(e){return e.split(" ").map(r=>Number(r))}function B(e){return typeof e=="string"?q(e):e}function ie(e){return e?.dashTemplate&&(e.dashTemplate=B(e.dashTemplate)),e}function I(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=e.symbolLayers;if(!r)return"Normal";for(const n of r)if(n.type==="CIMVectorMarker")return I(n)}break;case"CIMVectorMarker":{const r=e.markerGraphics;if(!r)return"Normal";for(const n of r)if(n.symbol)return I(n.symbol)}}return"Normal"}function F(e,r){if(r!==null){const n=r.get(e);return n?n.name:e}return e}function se(e){return e.map(r=>({...r,propertyName:L(r.propertyName)}))}function ue(e){const r={};for(const n in e){const t=e[n];r[L(n)]=t}return r}function S(e,r,n,t,o){const l=n*Math.PI/180;if(l){const s=Math.cos(l);return(Math.sin(l)*e+s*r)*t+o}return r*t+o}function k(e,r,n,t,o){const l=n*Math.PI/180;return l?(Math.cos(l)*e-Math.sin(l)*r)*t+o:e*t+o}function g(e,r,n){return r?n-e:n+e}function ae(e,r){return Math.max(Math.min((e??r)/100,1),0)}export{Q as $,C,j as D,W as E,D as H,I,E as J,K,L,Z as Q,v as R,H as U,J as W,U as X,X as Y,$ as Z,ae as a,b,d,te as e,ie as i,Y as j,le as l,ne as n,oe as o,re as r,se as s,ee as t,ue as u,R as v};
