import{aa as A,q as D}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{R as g}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";const k=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function y(t){return t instanceof D}function h(t){return t instanceof g?Object.keys(t.items):y(t)?A(t).keys():t?Object.keys(t):[]}function a(t,e){return t instanceof g?t.items[e]:t[e]}function C(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function c(t){return t?t.declaredClass:null}function V(t,e){const o=t.diff;if(o&&typeof o=="function")return o(t,e);const i=h(t),u=h(e);if(i.length===0&&u.length===0)return;if(!i.length||!u.length||C(t,e))return{type:"complete",oldValue:t,newValue:e};const b=u.filter(n=>!i.includes(n)),w=i.filter(n=>!u.includes(n)),d=i.filter(n=>u.includes(n)&&a(t,n)!==a(e,n)).concat(b,w).sort(),m=c(t);if(m&&k.has(m)&&d.length)return{type:"complete",oldValue:t,newValue:e};let s;const j=y(t)&&y(e);for(const n of d){const r=a(t,n),l=a(e,n);let f;if((j||typeof r!="function"&&typeof l!="function")&&r!==l&&(r!=null||l!=null)){if(o&&o[n]&&typeof o[n]=="function")f=o[n]?.(r,l);else if(r instanceof Date&&l instanceof Date){if(r.getTime()===l.getTime())continue;f={type:"complete",oldValue:r,newValue:l}}else f=typeof r=="object"&&typeof l=="object"&&c(r)===c(l)?V(r,l):{type:"complete",oldValue:r,newValue:l};f!=null&&(s!=null?s.diff[n]=f:s={type:"partial",diff:{[n]:f}})}}return s}function S(t,e){if(typeof t!="function"&&typeof e!="function"&&(t!=null||e!=null))return t==null||e==null||typeof t=="object"&&typeof e=="object"&&c(t)!==c(e)?{type:"complete",oldValue:t,newValue:e}:V(t,e)}function p(t){if(t==null)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const o of e.added)if(!p(o))return!1;for(const o of e.removed)if(!p(o))return!1;for(const o of e.changed)if(!p(o))return!1;return!0}case"partial":for(const e in t.diff)if(!p(t.diff[e]))return!1;return!0}}export{S as C,p};
