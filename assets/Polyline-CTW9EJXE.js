import{y as l,_ as a,m as p,r as c,a as m}from"./jsonMap-Bs3hmeCU.js";import{z as P}from"./Extent-DY3BG_6i.js";import{c as d,b as h,f as v}from"./Point-vWR8_ZMt.js";import{v as g,x as u,z as R}from"./Polygon-CHS6Qlya.js";var f;function A(t){if(!t)return;let{points:e,hasM:s,hasZ:i,spatialReference:r}=t;switch(e??=[],e?.at(0)?.length){case 4:i??=!0,s??=!0;break;case 3:i??=s!==!0,s??=!i;break;default:i??=!1,s??=!1}return r??=v.WGS84,{...t,hasM:s,hasZ:i,points:e,spatialReference:r}}let o=f=class extends d{constructor(t){super(A(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=g(this);return t?new P({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=l(this.points)}clone(){const{points:t,spatialReference:e,hasM:s,hasZ:i}=this;return new f({points:l(t),spatialReference:e.clone(),hasM:s,hasZ:i})}addPoint(t){return u(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],s={x:e[0],y:e[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(s.z=e[2],i=3),this.hasM&&(s.m=e[i]),new h(s)}removePoint(t){if(!this._validateInputs(t))return null;const e=new h(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(u(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};a([p({readOnly:!0})],o.prototype,"cache",null),a([p({readOnly:!0})],o.prototype,"extent",null),a([p({type:[[Number]],json:{write:{isRequired:!0}}})],o.prototype,"points",void 0),a([c("points")],o.prototype,"writePoints",null),o=f=a([m("esri.geometry.Multipoint")],o),o.prototype.toJSON.isDefaultToJSON=!0;var y;function _(t){return!Array.isArray(t[0])}function M(t){return typeof t[0]?.[0]=="number"}function Z(t){if(!t)return;let{paths:e,hasM:s,hasZ:i,spatialReference:r}=t;switch(e??=[],M(e)&&(e=[e]),e[0]?.[0]?.length){case 4:i??=!0,s??=!0;break;case 3:i??=s!==!0,s??=!i;break;default:i??=!1,s??=!1}return r??=v.WGS84,{...t,hasM:s,hasZ:i,paths:e,spatialReference:r}}let n=y=class extends d{constructor(t){super(Z(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=l(t)}get extent(){const t=R(this),{spatialReference:e}=this;return t?new P({...t,spatialReference:e}):null}writePaths(t,e){e.paths=l(this.paths)}addPath(t){if(!t)return;const e=this.paths,s=e.length;if(_(t)){const i=[];for(let r=0,w=t.length;r<w;r++)i[r]=t[r].toArray();e[s]=i}else e[s]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new y;return t.spatialReference=this.spatialReference,t.paths=l(this.paths),t.curvePaths=l(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const s=this.paths[t][e],i=this.hasZ,r=this.hasM;return i&&!r?new h(s[0],s[1],s[2],void 0,this.spatialReference):r&&!i?new h(s[0],s[1],void 0,s[2],this.spatialReference):i&&r?new h(s[0],s[1],s[2],s[3],this.spatialReference):new h(s[0],s[1],this.spatialReference)}insertPoint(t,e,s){return this._validateInputs(t,e,!0)?(u(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t].splice(e,0,s),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],s=this.spatialReference,i=e.map(r=>new h(r,s));return this.notifyChange("paths"),i}removePoint(t,e){if(!this._validateInputs(t,e))return null;const s=new h(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),s}setPoint(t,e,s){return this._validateInputs(t,e)?(u(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t][e]=s,this.notifyChange("paths"),this):this}_validateInputs(t,e,s=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const i=this.paths[t];if(s&&(e<0||e>i.length)||!s&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};a([p({readOnly:!0})],n.prototype,"cache",null),a([p({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],n.prototype,"curvePaths",void 0),a([c("curvePaths")],n.prototype,"writeCurvePaths",null),a([p({readOnly:!0})],n.prototype,"extent",null),a([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],n.prototype,"paths",void 0),a([c("paths")],n.prototype,"writePaths",null),n=y=a([m("esri.geometry.Polyline")],n),n.prototype.toJSON.isDefaultToJSON=!0;export{o as m,n as y};
