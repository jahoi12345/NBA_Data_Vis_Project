import{B as y}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{$ as z,O as a,V as A,I as U,T as W,X as k,h as f}from"./vec32-CewSdTn3-VRto2OOh.js";import{M as x,t as _}from"./collectionUtils-jDyktm0P-BDP2Oq99.js";import{f as b,B as V}from"./Point-BfTTZoMu-DeJwQYfh.js";import{z as S}from"./Extent-CgDMOSRD-Bod5LY6s.js";import{r as R}from"./HeightModelInfo-D5IdRvJ2-23y6MRiu.js";import{b as v}from"./projectionUtils-BGH_5_I3-DGwchVO8.js";function p(r,d){if(!Array.isArray(r)||r.length<d)return!1;for(const l of r)if(typeof l!="number")return!1;return!0}const I=7645211,G={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},N=new Map([[5773,new R({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new R({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new R({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new R({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new R({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new R({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function H(r){if(!r)return null;const d=r.vcsWkid||r.latestVcsWkid;return d?N.get(d):null}function O(r){return!(!(r.extensions?.ESRI_crs?.wkid||r.extensions?.ESRI_crs?.latestWkid||r.extensions?.ESRI_crs?.wkt)||!r.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!r.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function j(r,d=!1){let l=new b({wkid:4326,vcsWkid:115700}),s=r.root?.boundingVolume,E=!1,g=r?.root?.transform;if(d&&(r.extensions?.ESRI_crs?.wkid||r.extensions?.ESRI_crs?.latestWkid||r.extensions?.ESRI_crs?.wkt)&&(r.root?.extensions?.ESRI_crs?.boundingVolume?.box||r.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))l=new b(r.extensions?.ESRI_crs),s=r.root?.extensions?.ESRI_crs?.boundingVolume,g=r.root?.transform,E=!0;else if(!s)return new S(-180,-90,180,90,l);if(s.box){const t=s?.box;if(t[3]>I&&t[7]>I&&t[11]>I)return new S({...G,spatialReference:l})}const w=_();if(!E&&s.region&&p(s.region,6)){const t=s.region,m=y(t[0]),n=y(t[1]),i=t[4],o=y(t[2]),e=y(t[3]),h=t[5];return new S({xmin:m,ymin:n,zmin:i,xmax:o,ymax:e,zmax:h,spatialReference:l})}if(s.sphere&&p(s.sphere,4)){const t=s.sphere,m=x(t[0],t[1],t[2]),n=t[3]/Math.sqrt(3),i=_();z(i,m,x(n,n,n));const o=_();if(a(o,m,x(n,n,n)),g&&p(g,16)){const c=g;A(w,i,c),U(i,w),A(w,o,c),U(o,w)}E||(v(i,V,0,i,b.WGS84,0),v(o,V,0,o,b.WGS84,0));const e=_(),h=_();return W(e,i,o),k(h,i,o),new S({xmin:e[0],ymin:e[1],zmin:e[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:l})}if(s.box&&p(s.box,12)){const t=s.box,m=x(t[0],t[1],t[2]),n=x(t[3],t[4],t[5]),i=x(t[6],t[7],t[8]),o=x(t[9],t[10],t[11]),e=[];for(let u=0;u<8;++u)e.push(_());if(a(e[0],m,n),a(e[0],e[0],i),a(e[0],e[0],o),f(e[1],m,n),a(e[1],e[1],i),a(e[1],e[1],o),a(e[2],m,n),f(e[2],e[2],i),a(e[2],e[2],o),f(e[3],m,n),f(e[3],e[3],i),a(e[3],e[3],o),a(e[4],m,n),a(e[4],e[4],i),f(e[4],e[4],o),f(e[5],m,n),a(e[5],e[5],i),f(e[5],e[5],o),a(e[6],m,n),f(e[6],e[6],i),f(e[6],e[6],o),f(e[7],m,n),f(e[7],e[7],i),f(e[7],e[7],o),g&&p(g,16)){const u=g;for(let M=0;M<8;++M)A(e[M],e[M],u)}const h=x(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),c=x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let u=0;u<8;++u)E||v(e[u],V,0,e[u],b.WGS84,0),W(c,c,e[u]),k(h,h,e[u]);return new S({xmin:c[0],ymin:c[1],zmin:c[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:l})}return new S(-180,-90,180,90,l)}export{H as B,O as T,j};
