import{bS as d,bT as h}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{F as P,P as G,B as y,V as T,R as E}from"./Point2D-CMz7woHH-BVbGGL7p.js";import{u as v}from"./OperatorShapePreservingLength-CNZ8HKmB-C5pkSoFs.js";import{I as w,K as X,i as C,m as F,N as Y,T as b,Q as q,Z as D,S as I,U as L}from"./ProjectionTransformation-PJc9H7Gq-Rbz84pUM.js";import"./Envelope2D-mFnl8dXR-MYac-bfa.js";import"./Transformation2D-CrydmBdC-D4jE8w-_.js";import"./SimpleGeometryCursor-B92kdZ15-B1Z6elF7.js";import"./OperatorDefinitions-DP7_WWTp-DP7_WWTp.js";class V{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,n,u){return!1}canAccelerateGeometry(t){return!1}execute(t,n,u,a){if(u===4)return new v().execute(t,n,a);if(n.getCoordinateSystemType()===0&&P(""),G(t),t.isEmpty()||t.getDimension()<1)return 0;const s=n.getGCS(),r=w();s.querySpheroidData(r);const c=r.majorSemiAxis,l=r.e2,m=s.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===y.enumPolygon?e=t.getBoundary():o===y.enumEnvelope?e=X(t):T(o)?(e=new C({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new F().execute(e,0,n.getTolerance(0),0,a)),s!==n){const i=n.getSRToGCSTransform();if(n.isPannable()){e=Y(e,n),o===y.enumPolyline&&e===t&&(e=t.clone());const S=new E;n.getPannableExtent().queryIntervalX(S);for(let g=0,x=e.getPointCount();g<x;g++){const p=e.getXY(g);p.x=b(p.x,S),e.setXY(g,p)}}const f=e.createInstance();e=D(i,e,f,a)?f:new q().execute(e,i,a)}return this._ExecuteMultiPathGeodeticLength(e,u,c,l,m)}_ExecuteMultiPathGeodeticLength(t,n,u,a,s){const r={stack:[],error:void 0,hasError:!1};try{const c=d(r,new I,!1);let l=0;const m=t.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(s),i.scale(s),L.geodeticDistance(u,a,o.x,o.y,i.x,i.y,c,null,null,n),l+=c.val}return l}catch(c){r.error=c,r.hasError=!0}finally{h(r)}}}export{V as OperatorGeodeticLength};
