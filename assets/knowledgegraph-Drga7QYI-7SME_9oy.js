const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/knowledgeGraphService-DzM6eaby-BR72Ddnp.js","assets/index-CTl7hdrJ.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu-BAT2Wq6O.js","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/Extent-CgDMOSRD-CU1qE5Kr.js","assets/normalizeUtils-85zLqeMi-DCF9gKvo.js","assets/Cyclical-BLSxUpe7-Bj8R2Yk-.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/Polygon-D6wEPb3W-CpL9Efjx.js","assets/aaBoundingRect-CjwcS2F3-D7aII9DY.js","assets/Polyline-CoiTLswR-BLagWJLS.js","assets/normalizeUtilsCommon-CnhQye_A-zWtr51r8.js","assets/jsonUtils-CmpazY1u-ateEpj4Q.js","assets/utils-CylVuxNi-CqOfmBVG.js","assets/utils-Dpg4yj1D-BVnuoMV8.js","assets/Field-Cm_ZejYW-CwJZmSru.js","assets/Color-CERqXxxY-BuYn26eI.js","assets/fieldType-DVUzXtk_-tUuvnZJM.js","assets/networkEnums-DcxQ-KKD-B7fWvtQx.js","assets/FeatureSet-BF7daP96-BqhMUjXs.js","assets/Graphic-DgGzDmqW-CFzg0c4i.js","assets/getPopupProvider-CmskPttI-C4PqyuPF.js","assets/collectionUtils-jDyktm0P-ArdXNs6F.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/lengthUtils-Dt1_RvOO-bleznLOi.js","assets/date-IqUzANpt-bLKO9IDT.js","assets/Layer-DZvC7bne-m1cEC_yw.js","assets/typeUtils-DqrRcjBx-ZWdHcSIJ.js","assets/createFeatureId-CVwTD0fV-3fKpJDrk.js","assets/typeUtils-CXW_VpOn-BoSnXkME.js","assets/lineMarkers-CDwLe3J6-CNUjJvs3.js","assets/PolygonSymbol3D-BXRHZiCQ-Vi0-2Gvc.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js","assets/screenUtils-BitdhK1O-L0FLPAMi.js","assets/opacityUtils-DuFH0EC9-DWspTgn2.js","assets/aaBoundingBox-Cn49X7ge-DORLZxoS.js","assets/DoubleArray-DExKNiTh-CvVpHySW.js","assets/mat4f64-q_b6UJoq-Dh6sWB_w.js","assets/Font-BwmnW7d2-D-oIm_Md.js","assets/SimpleFillSymbol-CDawtd9z-CWD2KI2D.js","assets/SimpleMarkerSymbol-BGAFRS9_-CVQ5NLIA.js","assets/PictureMarkerSymbol-CaSh-vZk-BNpExnAb.js","assets/TextSymbol-hRGhyDHs-C0NgASym.js","assets/GPMessage-D_4FfUD9-H-J6FJ7I.js","assets/GraphQueryStreaming-ERTkxqUb-CWY79OsJ.js"])))=>i.map(i=>d[i]);
import{H as T,_ as F}from"./index-CTl7hdrJ.js";import{aH as A}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{t as E}from"./arcade-zfxT_nQK-Bom8OZ03.js";import{K as v,a as x,ae as M,U as R,A as C,i as z,c as P,k as K,m as L,o as N,$ as I}from"./Dictionary-B4WY1XGX-DTk60YkO.js";import{u as l}from"./enum-BzLwmiID-CcyIdWlQ.js";import{l as O}from"./portalUtils-CnpwenOG-TsxpxhO_.js";import{c as b,S as V,f as U,ar as Z}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{G as J,L as Q,W as H}from"./projectionUtils-BGH_5_I3-BySNUA-B.js";import{l as k}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";import Y from"./PortalItem-DnxMlRVo-Dhq4alsp.js";import{o as X,_ as ee}from"./project-C1P0PqN_-B9wpkoKv.js";import{s as se,u as te,y as ae,a as re,d as ie}from"./GraphQueryStreaming-ERTkxqUb-CWY79OsJ.js";import{f as j,Z as D,J as W,Y as oe}from"./lengthUtils-Dt1_RvOO-bleznLOi.js";import"./Feature-BVRwBUzm-DHfbEf0J.js";import"./UnknownTimeZone-B697BDFv-CBbtul7O.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./Extent-CgDMOSRD-CU1qE5Kr.js";import"./Polyline-CoiTLswR-BLagWJLS.js";import"./Polygon-D6wEPb3W-CpL9Efjx.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./aaBoundingBox-Cn49X7ge-DORLZxoS.js";import"./mat4f64-q_b6UJoq-Dh6sWB_w.js";import"./aiServices-BQaMAyiK-DY1ybKXH.js";import"./Field-Cm_ZejYW-CwJZmSru.js";import"./Color-CERqXxxY-BuYn26eI.js";import"./fieldType-DVUzXtk_-tUuvnZJM.js";import"./WhereClause-BSVqskBz-DANRwfyr.js";import"./unitConversion-C1kMoaUu-D70TyOlq.js";import"./arcadeEnvironment-DqZGrNFy-B7LAcj80.js";import"./ImmutableArray-BPVd6ESQ-BGk4ZTNG.js";import"./TimeOnly-BERR31kg-PKcKegNB.js";import"./shared-yd-CR64C-r_XSstFM.js";import"./streamLayerUtils-DFlbJ4P1-DFlbJ4P1.js";import"./jsonUtils-CmpazY1u-ateEpj4Q.js";import"./number-D_FvV3D1-OQFavbmh.js";import"./hash-CcEbRgUF-DpReY683.js";import"./uuid-Oe6SV2kF-IYX19xBA.js";import"./featureConversionUtils-BDA_FXJx-CUwkrHf5.js";import"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";import"./OptimizedFeature-CwRGZPwv-Ddclhn0A.js";import"./memoryEstimations-Bd726a_p-0cVCY2Jz.js";import"./OptimizedFeatureSet-BR8EEvDc-CgsRgxJh.js";import"./createFeatureId-CVwTD0fV-3fKpJDrk.js";import"./DoubleArray-DExKNiTh-CvVpHySW.js";import"./FieldsIndex-CimK-TqD-CrSnohIk.js";import"./timeZoneUtils-BSc7-7qA-BAv3h8mh.js";import"./commonProperties-DHiB1uzW-DHiB1uzW.js";import"./utils-CylVuxNi-CqOfmBVG.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./SimpleObservable-CvFyr0NA-DXpoMYph.js";import"./utils-Dpg4yj1D-BVnuoMV8.js";const S=(e,s=S,a=s.f||(s.f=["assets/knowledgeGraphService-DzM6eaby.js","assets/Point-BfTTZoMu.js","assets/jsonMap-Bs3hmeCU.js","assets/reader-DcGs6kKN.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/Extent-CgDMOSRD.js","assets/normalizeUtils-85zLqeMi.js","assets/Cyclical-BLSxUpe7.js","assets/mathUtils-PIGhLnI9.js","assets/Polygon-D6wEPb3W.js","assets/aaBoundingRect-CjwcS2F3.js","assets/Polyline-CoiTLswR.js","assets/normalizeUtilsCommon-CnhQye_A.js","assets/jsonUtils-CmpazY1u.js","assets/utils-CylVuxNi.js","assets/utils-Dpg4yj1D.js","assets/Field-Cm_ZejYW.js","assets/Color-CERqXxxY.js","assets/fieldType-DVUzXtk_.js","assets/networkEnums-DcxQ-KKD.js","assets/FeatureSet-BF7daP96.js","assets/Graphic-DgGzDmqW.js","assets/getPopupProvider-CmskPttI.js","assets/collectionUtils-jDyktm0P.js","assets/reactiveUtils-SO2Ko3sy.js","assets/SimpleObservable-CvFyr0NA.js","assets/lengthUtils-Dt1_RvOO.js","assets/date-IqUzANpt.js","assets/Layer-DZvC7bne.js","assets/typeUtils-DqrRcjBx.js","assets/createFeatureId-CVwTD0fV.js","assets/typeUtils-CXW_VpOn.js","assets/lineMarkers-CDwLe3J6.js","assets/PolygonSymbol3D-BXRHZiCQ.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x.js","assets/screenUtils-BitdhK1O.js","assets/opacityUtils-DuFH0EC9.js","assets/aaBoundingBox-Cn49X7ge.js","assets/DoubleArray-DExKNiTh.js","assets/mat4f64-q_b6UJoq.js","assets/Font-BwmnW7d2.js","assets/SimpleFillSymbol-CDawtd9z.js","assets/SimpleMarkerSymbol-BGAFRS9_.js","assets/PictureMarkerSymbol-CaSh-vZk.js","assets/TextSymbol-hRGhyDHs.js","assets/GPMessage-D_4FfUD9.js","assets/GraphQueryStreaming-ERTkxqUb.js"]))=>e.map(i=>a[i]);let m=null;async function ne(e){const s=A.geometryServiceUrl??"";if(!s){J()||await Q();for(const t of e)t.container[t.indexer]=H(t.container[t.indexer],U.WGS84);return}const a=e.map(t=>t.container[t.indexer]),i=new X({geometries:a,outSpatialReference:U.WGS84}),n=await ee(s,i);for(let t=0;t<n.length;t++){const r=e[t];r.container[r.indexer]=n[t]}}async function G(e,s){const a=new Y({portal:e,id:s});return await a.load(),m===null&&(m=await T(()=>F(()=>import("./knowledgeGraphService-DzM6eaby-BR72Ddnp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])).then(i=>i.k),S([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47]))),await m.fetchKnowledgeGraph(a.url)}function w(e,s,a,i,n){if(e===null)return null;if(j(e)||W(e))return e;if(P(e)||P(e))return e.toJSDate();if(K(e))return e.toStorageFormat();if(L(e))return e.toStorageString();if(N(e)){const t={};for(const r of e.keys())t[r]=w(e.field(r),s,a,i,n),t[r]instanceof b&&n.push({container:t,indexer:r});return t}if(D(e)){const t=e.map(r=>w(r,s,a,i,n));for(let r=0;r<t.length;r++)t[r]instanceof b&&n.push({container:t,indexer:r});return t}return I(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&s?V(e):e:void 0}function pe(e,s){if(!e)return e;if(e.spatialReference.isWGS84&&s.spatialReference.isWebMercator)return Z(e);if(e.spatialReference.equals(s.spatialReference))return e;throw new l(s,"WrongSpatialReference",null)}function g(e,s){if(!e)return null;const a={};for(const i in e)a[i]=u(e[i],s);return a}function u(e,s){return e===null?null:D(e)?e.map(a=>u(a,s)):e instanceof te?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:g(e.properties,s)}:e instanceof ae?{graphType:"object",properties:g(e.properties,s)}:e instanceof re?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:g(e.properties,s)}:e instanceof ie?{graphType:"path",path:e.path?e.path.map(a=>u(a,s)):null}:I(e)?pe(e,s):j(e)||W(e)||oe(e)?e:null}function ns(e){e.mode==="async"&&(e.functions.knowledgegraphbyportalitem=function(s,a){return e.standardFunctionAsync(s,a,(i,n,t)=>{if(v(t,2,2,s,a),t[0]===null)throw new l(s,"PortalRequired",a);if(t[0]instanceof E){const f=x(t[1]);let c;return c=s.services?.portal?s.services.portal:k.getDefault(),G(O(t[0],c),f)}if(j(t[0])===!1)throw new l(s,"InvalidParameter",a);const r=x(t[0]);return G(s.services?.portal??k.getDefault(),r)})},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(s,a){return e.standardFunctionAsync(s,a,async(i,n,t)=>{v(t,2,4,s,a);const r=t[0];if(!M(r))throw new l(s,"InvalidParameter",a);const f=t[1];if(!j(f))throw new l(s,"InvalidParameter",a);m===null&&(m=await T(()=>F(()=>import("./knowledgeGraphService-DzM6eaby-BR72Ddnp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])).then(o=>o.k),S([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47])));let c=null;const d=R(t[2],null);if(!(d instanceof C||d===null))throw new l(s,"InvalidParameter",a);if(d){let o=[];c=w(d,!0,!1,s,o),o=o.filter(p=>!p.container[p.indexer].spatialReference.isWGS84),o.length>0&&await ne(o)}const B=R(t[3],!1),_=new se({openCypherQuery:f,bindParameters:c,provenanceBehavior:B?"include":"exclude"});(r?.serviceDefinition?.currentVersion??11.3)>11.2&&(_.outputSpatialReference=s.spatialReference);const $=(await m.executeQueryStreaming(r,_)).resultRowsStream.getReader(),y=[];try{for(;;){const{done:o,value:p}=await $.read();if(o)break;if(D(p))for(const h of p)y.push(u(h,s));else{const h=[];for(const q of p)h.push(u(p[q],s));y.push(h)}}}catch(o){throw o}return C.convertJsonToArcade(y,z(s),!1,!0)})},e.signatures.push({name:"querygraph",min:2,max:4}))}export{ns as registerFunctions};
