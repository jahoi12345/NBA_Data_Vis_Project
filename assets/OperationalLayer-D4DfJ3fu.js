import{_ as e,m as a,a as y,v as A,E as B,y as $,r as b,aW as q,s as I,bx as P,by as k}from"./jsonMap-Bs3hmeCU.js";import{av as J,f as K,Z as _}from"./Point-B6yFWNoR.js";import{o as j}from"./reader-DcGs6kKN.js";import{a as l}from"./layerContainerType-CSXZNpHb.js";import{z as M}from"./Extent-D4kxmHSf.js";import{c as z}from"./ElevationInfo-DevipqE4.js";import{l as f}from"./collectionUtils-yEu3-UXw.js";import{r as O}from"./opacityUtils-DuFH0EC9.js";import{m as C}from"./Layer-B6AWeI6O.js";let c=class extends A{constructor(r){super(r),this.description=null,this.label=null,this.type=null}};e([a({type:String,json:{write:!0}})],c.prototype,"description",void 0),e([a({type:String,json:{write:!0}})],c.prototype,"label",void 0),e([a()],c.prototype,"type",void 0),c=e([y("esri.tables.elements.AttributeTableElement")],c);const m=c;let S=class extends f(m){constructor(r){super(r),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};e([a({type:["auto"],json:{write:!0}})],S.prototype,"displayType",void 0),e([a({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S.prototype,"type",void 0),S=e([y("esri.tables.elements.AttributeTableAttachmentElement")],S);const W=S;let d=class extends f(m){constructor(r){super(r),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};e([a({type:String,json:{read:!1,write:!1}})],d.prototype,"description",void 0),e([a({type:String,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"fieldName",void 0),e([a({type:String,json:{read:!1,write:!1}})],d.prototype,"label",void 0),e([a({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],d.prototype,"type",void 0),d=e([y("esri.tables.elements.AttributeTableFieldElement")],d);const D=d;let g=class extends f(m){constructor(r){super(r),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};e([a({type:Number,json:{type:B,write:{enabled:!0,isRequired:!0}}})],g.prototype,"relationshipId",void 0),e([a({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],g.prototype,"type",void 0),g=e([y("esri.tables.elements.AttributeTableRelationshipElement")],g);const N=g,F={base:m,key:"type",typeMap:{attachment:W,field:D,relationship:N}};function H(s){return{typesWithGroup:{base:m,key:"type",typeMap:{attachment:W,field:D,group:s,relationship:N}},typesWithoutGroup:F}}let w=class extends f(m){constructor(r){super(r),this.elements=null,this.type="group"}clone(){return super.clone()}};e([a({types:[F],json:{name:"attributeTableElements",write:!0}})],w.prototype,"elements",void 0),e([a({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],w.prototype,"type",void 0),w=e([y("esri.tables.elements.AttributeTableGroupElement")],w);const U=w;let L=class extends f(A){constructor(r){super(r),this.field=null,this.order=null}};e([a({type:String,json:{write:!0}})],L.prototype,"field",void 0),e([a({type:["asc","desc"],json:{write:!0}})],L.prototype,"order",void 0),L=e([y("esri.tables.support.FieldOrder")],L);const Z=L;var h;const Q=H(U);let v=h=class extends A{constructor(s){super(s),this.elements=null,this.orderByFields=null}clone(){return new h({elements:$(this.elements),orderByFields:$(this.orderByFields)})}};e([a({types:[Q.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],v.prototype,"elements",void 0),e([a({type:[Z],json:{write:!0}})],v.prototype,"orderByFields",void 0),v=h=e([y("esri.tables.AttributeTableTemplate")],v);const X=v,we={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:l}}},Le={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(s,r)=>!r.disablePopup},write:{enabled:!0,writer(s,r,t){r[t]=!s}}}},ve={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:l}}},fe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:J}}},Ie={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:l}}},Te={value:null,type:z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:l}}};function he(s){return{type:s,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const V={write:{enabled:!0,layerContainerTypes:l},read:!0},G={type:Number,json:{origins:{"web-document":V,"portal-item":{write:{layerContainerTypes:l}}}}},Ge={...G,json:{...G.json,origins:{"web-document":{...V,write:{enabled:!0,layerContainerTypes:l,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(s,r,t)=>t&&t.origin!=="service"||!r.drawingInfo||r.drawingInfo.transparency===void 0?r.layerDefinition?.drawingInfo&&r.layerDefinition.drawingInfo.transparency!==void 0?O(r.layerDefinition.drawingInfo.transparency):void 0:O(r.drawingInfo.transparency)}}},Ae={type:M,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(s,r)=>{const t=M.fromJSON(s);return r.spatialReference!=null&&typeof r.spatialReference=="object"&&(t.spatialReference=K.fromJSON(r.spatialReference)),t}}}},read:!1}},$e={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},je={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:l}}},Me={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:l}}},Y={json:{write:{ignoreOrigin:!0,layerContainerTypes:l},origins:{"web-map":{read:!1,write:!1}}}},Oe={type:X,json:{name:"attributeTableInfo",write:!0}},E={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},x={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},R={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},ee={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":E,"web-map/basemap-base-layers":x,"web-map/tables":R,"link-chart/operational-layers":{...E,LinkChartLayer:!0},"link-chart/basemap-base-layers":x,"link-chart/tables":R,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}},Ce=s=>{const r=s;let t=class extends r{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(n,i,o){return o?.portalItem?.type==="Group Layer"?void 0:n}writeListMode(n,i,o,u){(u&&u.layerContainerType==="ground"||n&&q(this,o,{},u))&&(i[o]=n)}writeOperationalLayerType(n,i,o){n&&(i[o]=n)}writeTitle(n,i){i.title=n??"Layer"}readVisibilityTimeExtent(n){return n?C.fromArray(n):null}writeVisibilityTimeExtent(n,i,o,u){n&&u.layerContainerType!=="tables"&&(n.isEmpty?u?.messages&&u.messages.push(new I("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[o]=n.toArray())}read(n,i){i&&(i.layer=this),P(this,n,o=>super.read(n,o),i)}write(n,i){if(!this.persistenceEnabled&&!i?.ignorePersistenceEnabled)return null;if(i?.origin){const p=`${i.origin}/${i.layerContainerType||"operational-layers"}`;let T=!!ee[p]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&p==="web-scene/operational-layers"&&(T=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&p==="web-map/operational-layers"&&(T=!1),!T)return i.messages?.push(new I("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${p}'`,{layer:this})),null}const o=super.write(n,{...i,layer:this}),u=!!i&&!!i.messages&&!!i.messages.filter(p=>p instanceof I&&p.name==="web-document-write:property-required").length;return _(o?.url)?(i?.messages?.push(new I("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&u?null:o}beforeSave(){}};return e([a({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),e([j("id",["id"])],t.prototype,"readId",null),e([a(Y)],t.prototype,"listMode",void 0),e([b("listMode")],t.prototype,"writeListMode",null),e([a({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:l,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),e([b("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),e([a(G)],t.prototype,"opacity",void 0),e([a({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),e([a({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),e([b("title"),b(["web-scene"],"title")],t.prototype,"writeTitle",null),e([a({type:C,json:{origins:{"web-scene":{write:{layerContainerTypes:l}}}}})],t.prototype,"visibilityTimeExtent",void 0),e([j("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),e([b(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[B,k]]}})],t.prototype,"writeVisibilityTimeExtent",null),e([a({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:l}}})],t.prototype,"visible",void 0),t=e([y("esri.layers.mixins.OperationalLayer")],t),t};export{Oe as I,Y as T,Ge as a,Ce as b,he as c,Ie as d,X as e,Ae as g,je as j,Le as l,Te as m,ve as p,we as s,$e as u,Me as v,G as w,fe as y};
