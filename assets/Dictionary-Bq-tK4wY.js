import{m as D,r as xn,i as On,h as vn}from"./TimeOnly-CyjHJh3J.js";import{a7 as Jn,h as Mn}from"./jsonMap-Bs3hmeCU.js";import{b as O,c as k,b6 as Rn,f as In}from"./Point-B6yFWNoR.js";import{n as Z}from"./enum-BzLwmiID.js";import{t as C}from"./ImmutableArray-BPVd6ESQ.js";import{l as Pn,D as yn}from"./shared-FB9t6kGf.js";import{l as Ln,p as jn}from"./number-D_FvV3D1.js";import{z as K}from"./Extent-D4kxmHSf.js";import{y as Q,m as X}from"./Polyline-CiznIgZG.js";import{P as nn,C as Yn}from"./Polygon-BUi4eoGW.js";import{f as zn}from"./jsonUtils-BGiBUdmT.js";import{b as Sn}from"./reactiveUtils-SO2Ko3sy.js";import{t as p,n as b,s as y,y as Y,u as N,O as Gn,i as $n}from"./lengthUtils-BsZbNiqt.js";import{D as pn}from"./date-IqUzANpt.js";let tn=class{};class R{constructor(){}}function bn(n,t,e){if(n instanceof R&&!(n instanceof H)){const i=new H;return i.fn=n,i.parameterEvaluator=e,i.context=t,i}return n}class jt extends R{constructor(t){super(),this.fn=t}createFunction(t){return(...e)=>this.fn(t,{preparsed:!0,arguments:e})}call(t,e){return this.fn(t,e)}marshalledCall(t,e,i,r){return r(t,e,(s,u,o)=>{o=o.map(f=>f instanceof R&&!(f instanceof H)?bn(f,t,r):f);const d=this.call(i,{args:o});return Jn(d)?d.then(f=>bn(f,i,r)):d})}}class H extends R{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(t){return this.fn.createFunction(this.context)}call(t,e){return this.fn.marshalledCall(t,e,this.context,this.parameterEvaluator)}marshalledCall(t,e,i){return this.fn.marshalledCall(t,e,this.context,this.parameterEvaluator)}}let P=class Nn extends C{constructor(t,e,i,r,s,u){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=e,this._hasZ=i,this._hasM=r,this._cacheId=s,this._partId=u}get(t){if(this._lazyPt[t]===void 0){const e=this._elements[t];if(e===void 0)return;const i=new O(e[0],e[1],this._spRef);this._hasZ&&(i.z=e[2]),this._hasM&&(i.m=this._hasZ?e[3]:e[2]),i.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=i}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Nn&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};class en extends C{constructor(t,e,i,r,s){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=i,this._hasM=r,this._spRef=e,this._cacheId=s}get(t){if(this._lazyPath[t]===void 0){const e=this._elements[t];if(e===void 0)return;this._lazyPath[t]=new P(e,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof en&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class qn{constructor(t){this.value=t}}class Vn{constructor(t){this.value=t}}const g={type:"VOID"},En=Symbol("BREAK"),Hn=Symbol("CONTINUE");function I(n,t,e){return t===""||t==null||t===e||t===e?n:n=n.split(t).join(e)}function M(n){return n instanceof R}function rn(n){return n instanceof tn}function v(n){return!!y(n)||!!b(n)||!!c(n)||!!h(n)||!!m(n)||!!p(n)||n===null||n===g}function Un(n,t){return n===void 0?t:n}function Wn(n){return n==null?"":N(n)||w(n)?"Array":c(n)?"Date":m(n)?"Time":h(n)?"DateOnly":y(n)?"String":p(n)?"Boolean":b(n)?"Number":n?.declaredClass==="esri.arcade.Attachment"?"Attachment":n?.declaredClass==="esri.arcade.Portal"?"Portal":n?.declaredClass==="esri.arcade.Dictionary"?"Dictionary":cn(n)?"KnowledgeGraph":n instanceof tn?"Module":L(n)?"Feature":n instanceof O?"Point":n instanceof nn?"Polygon":n instanceof Q?"Polyline":n instanceof X?"Multipoint":n instanceof K?"Extent":M(n)?"Function":un(n)?"FeatureSet":ln(n)?"FeatureSetCollection":sn(n)?"Voxel":an(n)?"Pixel":n===g?"":typeof n=="number"&&isNaN(n)?"Number":"Unrecognized Type"}function Zn(n){return n===g}function $(n){return n instanceof k}function L(n){return n?.arcadeDeclaredClass==="esri.arcade.Feature"}function sn(n){return n?.arcadeDeclaredClass==="esri.arcade.Voxel"}function an(n){return n?.arcadeDeclaredClass==="esri.arcade.Pixel"}function un(n){return n?.declaredRootClass==="esri.arcade.featureset.support.FeatureSet"}function on(n){return n?.declaredClass==="esri.arcade.Dictionary"}function Bn(n){return on(n)||L(n)||sn(n)||an(n)}function ln(n){return n?.declaredRootClass==="esri.arcade.featureSetCollection"}function cn(n){return n?.declaredClass==="esri.rest.knowledgeGraph.KnowledgeGraph"}function w(n){return n instanceof C}function c(n){return n instanceof D}function h(n){return n instanceof On}function m(n){return n instanceof xn}function U(n){return n!=null&&typeof n=="object"}function Kn(n,t,e,i,r){if(n.length<t||n.length>e)throw new Z(i,"WrongNumberOfParameters",r)}function Qn(n){return n==null||Zn(n)||n===""}function Xn(n){return n<0?-Math.round(-n):Math.round(n)}function fn(n,t){return isNaN(n)||t==null||t===""?n.toString():(t=I(t,"‰",""),t=I(t,"¤",""),Ln(n,{pattern:t}))}function q(n,t){return t==null||t===""?n.toISOString(!0):n.toFormat(wn(t),{locale:Sn(),numberingSystem:"latn"})}function wn(n,t=!1){n=n.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let e="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const r of n.match(i)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"Z":e+="Z";break;case"ZZ":e+="ZZ";break;case"ZZZ":e+="ZZZ";break;case"ZZZZ":e+=t?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":e+=t?"[ZZZZZ]":"ZZZZZ";break;case"S":e+="'S'";break;case"SS":e+="'SS'";break;case"SSS":e+="u";break;case"A":case"a":e+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":e+=r;break;default:r.length>=2&&r.startsWith("[")&&r.endsWith("]")?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}function a(n,t,e){switch(e){case">":return n>t;case"<":return n<t;case">=":return n>=t;case"<=":return n<=t}return!1}function nt(n,t,e){if(n===null){if(t===null||t===g)return a(null,null,e);if(b(t))return a(0,t,e);if(y(t)||p(t))return a(0,l(t),e);if(c(t))return a(0,t.toNumber(),e);if(m(t)||h(t))return a(n,t.toNumber(),e)}if(n===g){if(t===null||t===g)return a(null,null,e);if(b(t))return a(0,t,e);if(y(t)||p(t))return a(0,l(t),e);if(c(t))return a(0,t.toNumber(),e);if(m(t)||h(t))return a(n,t.toNumber(),e)}else if(b(n)){if(b(t))return a(n,t,e);if(p(t))return a(n,l(t),e);if(t===null||t===g)return a(n,0,e);if(y(t))return a(n,l(t),e);if(c(t)||m(t)||h(t))return a(n,t.toNumber(),e)}else if(y(n)){if(y(t))return a(_(n),_(t),e);if(c(t)||m(t)||h(t))return a(l(n),t.toNumber(),e);if(b(t))return a(l(n),t,e);if(t===null||t===g)return a(l(n),0,e);if(p(t))return a(l(n),l(t),e)}else if(c(n)){if(c(t))return n.timeZone!==t.timeZone&&(n.isUnknownTimeZone?n=D.arcadeDateAndZoneToArcadeDate(n,t.timeZone):t.isUnknownTimeZone&&(t=D.arcadeDateAndZoneToArcadeDate(t,n.timeZone))),a(n.toNumber(),t.toNumber(),e);if(t===null||t===g)return a(n.toNumber(),0,e);if(b(t))return a(n.toNumber(),t,e);if(p(t)||y(t))return a(n.toNumber(),l(t),e);if(m(t))throw new Z(null,"CannotCompareDateAndTime",null);if(h(t))return a(n.toNumber(),t.toNumber(),e)}else if(p(n)){if(p(t))return a(n,t,e);if(b(t))return a(l(n),l(t),e);if(c(t)||m(t)||h(t))return a(l(n),t.toNumber(),e);if(t===null||t===g)return a(l(n),0,e);if(y(t))return a(l(n),l(t),e)}else if(h(n)){if(c(t))return a(n.toNumber(),t.toNumber(),e);if(t===null||t===g)return a(n.toNumber(),0,e);if(b(t))return a(n.toNumber(),t,e);if(p(t)||y(t))return a(n.toNumber(),l(t),e);if(m(t))throw new Z(null,"CannotCompareDateAndTime",null);if(h(t))return a(n.toNumber(),t.toNumber(),e)}else if(m(n)){if(c(t))throw new Z(null,"CannotCompareDateAndTime",null);if(t===null||t===g)return a(n.toNumber(),0,e);if(b(t))return a(n.toNumber(),t,e);if(p(t)||y(t))return a(n.toNumber(),l(t),e);if(m(t))return a(n.toNumber(),t.toNumber(),e);if(h(t))throw new Z(null,"CannotCompareDateAndTime",null)}return!!Tn(n,t)&&(e==="<="||e===">=")}function Tn(n,t){if(n===t||n===null&&t===g||t===null&&n===g)return!0;if(c(n)&&c(t)||m(n)&&m(t)||h(n)&&h(t))return n.equals(t);if(n instanceof en||n instanceof P)return n.equalityTest(t);if(n instanceof O&&t instanceof O){const e=n.cache._arcadeCacheId,i=t.cache._arcadeCacheId;if(e!=null)return e===i}return!!(U(n)&&U(t)&&(n._arcadeCacheId===t._arcadeCacheId&&n._arcadeCacheId!==void 0&&n._arcadeCacheId!==null||n._underlyingGraphic===t._underlyingGraphic&&n._underlyingGraphic!==void 0&&n._underlyingGraphic!==null))}function _n(n,{useNumbersForDates:t}){let e="";for(const i in n){e!==""&&(e+=",");const r=n[i];r==null?e+=JSON.stringify(i)+":null":p(r)||b(r)||y(r)?e+=JSON.stringify(i)+":"+JSON.stringify(r):$(r)?e+=JSON.stringify(i)+":"+x(r):m(r)||h(r)?e+=`${JSON.stringify(i)}:${JSON.stringify(r.toString())}`:w(r)||Array.isArray(r)?e+=JSON.stringify(i)+":"+x(r,null,t):c(r)?e+=t?JSON.stringify(i)+":"+JSON.stringify(r.getTime()):JSON.stringify(i)+":"+r.stringify():r!==null&&typeof r=="object"&&"castToText"in r&&(e+=JSON.stringify(i)+":"+r.castToText(t))}return"{"+e+"}"}function _(n,t){if(y(n))return n;if(n===null)return"";if(b(n))return fn(n,t);if(p(n))return n.toString();if(c(n))return q(n,t);if(m(n)||h(n))return n.toFormat(t);if(n instanceof k)return JSON.stringify(n.toJSON());if(N(n)){const e=[];for(let i=0;i<n.length;i++)e[i]=z(n[i]);return"["+e.join(",")+"]"}if(n instanceof C){const e=[];for(let i=0;i<n.length();i++)e[i]=z(n.get(i));return"["+e.join(",")+"]"}return n!==null&&typeof n=="object"&&"castToText"in n?n.castToText():M(n)?"object, Function":n===g?"":rn(n)?"object, Module":""}function tt(n){const t=[];if(n instanceof C){for(let e=0;e<n.length();e++)t[e]=l(n.get(e));return t}if(!N(n))return null;for(let e=0;e<n.length;e++)t[e]=l(n[e]);return t}function x(n,t,e=!1){if(y(n))return n;if(n===null)return"";if(b(n))return fn(n,t);if(p(n))return n.toString();if(c(n))return q(n,t);if(m(n)||h(n))return n.toFormat(t);if(n instanceof k)return n instanceof K?'{"xmin":'+n.xmin.toString()+',"ymin":'+n.ymin.toString()+","+(n.hasZ?'"zmin":'+n.zmin.toString()+",":"")+(n.hasM?'"mmin":'+n.mmin.toString()+",":"")+'"xmax":'+n.xmax.toString()+',"ymax":'+n.ymax.toString()+","+(n.hasZ?'"zmax":'+n.zmax.toString()+",":"")+(n.hasM?'"mmax":'+n.mmax.toString()+",":"")+'"spatialReference":'+W(n.spatialReference)+"}":W(n.toJSON(),(i,r)=>i.key===r.key?0:i.key==="spatialReference"?1:r.key==="spatialReference"||i.key<r.key?-1:i.key>r.key?1:0);if(N(n)){const i=[];for(let r=0;r<n.length;r++)i[r]=z(n[r],e);return"["+i.join(",")+"]"}if(n instanceof C){const i=[];for(let r=0;r<n.length();r++)i[r]=z(n.get(r),e);return"["+i.join(",")+"]"}return n!==null&&typeof n=="object"&&"castToText"in n?n.castToText(e):M(n)?"object, Function":n===g?"":rn(n)?"object, Module":""}function z(n,t=!1){if(n===null)return"null";if(p(n)||y(n))return JSON.stringify(n);if(b(n))return n.toString();if(n instanceof k||n instanceof C||Array.isArray(n))return x(n,null,t);if(c(n))return JSON.stringify(t?n.getTime():q(n,""));if(m(n)||h(n))return JSON.stringify(n.toString());if(n!==null&&typeof n=="object"){if("castToText"in n)return n.castToText(t)}else if(n===g)return"null";return"null"}function l(n,t){return b(n)?n:n===null||n===""?0:c(n)||h(n)||m(n)?NaN:p(n)?n?1:0:N(n)||n===""||n===void 0?NaN:t!==void 0&&y(n)?(t=I(t,"‰",""),t=I(t,"¤",""),jn(n,{pattern:t})):n===g?0:Number(n)}function et(n,t){if(c(n))return n;if(y(n)){const e=rt(n,t);if(e)return D.dateTimeToArcadeDate(e)}return null}function rt(n,t){const e=/ (\d\d)/,i=vn(t);let r=pn.fromISO(n,{zone:i});return r.isValid||e.test(n)&&(n=n.replace(e,"T$1"),r=pn.fromISO(n,{zone:t}),r.isValid)?r:null}function it(n){return p(n)?n:y(n)?(n=n.toLowerCase())==="true":!!b(n)&&n!==0&&!isNaN(n)}function st(n,t){const e=JSON.parse(n);return e&&!e.spatialReference&&(e.spatialReference=t),zn(e)}function at(n,t){return n==null?null:(n.spatialReference!==null&&n.spatialReference!==void 0||(n.spatialReference=t),n)}function ut(n){if(n===null)return null;if(n instanceof O)return n.x==="NaN"||n.x===null||isNaN(n.x)?null:n;if(n instanceof nn){if((n.curveRings??n.rings).length===0)return null;for(const t of n.curveRings??n.rings)if(t.length>0)return n;return null}if(n instanceof Q){if((n.curvePaths??n.paths).length===0)return null;for(const t of n.curvePaths??n.paths)if(t.length>0)return n;return null}return n instanceof X?n.points.length===0?null:n:n instanceof K?n.xmin==="NaN"||n.xmin===null||isNaN(n.xmin)?null:n:null}function Cn(n,t){if(!n||!n.domain)return t;let e=null,i=null;if(c(t))e=t.toNumber();else if(h(t))e=t.toString();else if(m(t))e=t.toStorageString();else if(n.field.type==="string"||n.field.type==="esriFieldTypeString")e=_(t);else{if(t==null)return null;if(t==="")return t;e=l(t)}for(let r=0;r<n.domain.codedValues.length;r++){const s=n.domain.codedValues[r];s.code===e&&(i=s)}return i===null?_(t):i.name}function kn(n,t){if(!n||!n.domain)return t;let e=null;const i=_(t);for(let r=0;r<n.domain.codedValues.length;r++){const s=n.domain.codedValues[r];s.name===i&&(e=s)}return e===null?t:e.code}function V(n,t,e=null,i=null){if(!t||!t.fields)return null;let r,s,u=null;for(let S=0;S<t.fields.length;S++){const T=t.fields[S];T.name.toLowerCase()===n.toString().toLowerCase()&&(u=T)}if(u===null)throw new Z(null,"FieldNotFound",null,{key:n});let o=t.typeIdField,d="id",f=t.types;if(t.subtypeField&&(o=t.subtypeField,d="code",f=t.subtypes??[]),i===null&&e&&o)i=e.hasField(o)?e.field(o):null;else if(o&&i!==null){let S=!1;for(const T of f||[])if(i===T[d]){S=!0;break}if(!S){for(const T of f||[])if(i===T.name){i=T[d],S=!0;break}}S||(i=null,e&&o&&(i=e.hasField(o)?e.field(o):null))}return i!=null&&f.some(S=>S[d]===i&&(r=S.domains?.[u.name],r&&r.type==="inherited"&&(r=gn(u.name,t),s=!0),!0)),s||r||(r=gn(n,t)),{field:u,domain:r}}function gn(n,t){let e;return t.fields.some(i=>(i.name.toLowerCase()===n.toLowerCase()&&(e=i.domain),!!e)),e}function W(n,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const e=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(r=t.cmp,function(u){return function(o,d){const f={key:o,value:u[o]},S={key:d,value:u[d]};return r(f,S)}});var r;const s=[];return(function u(o){if(o?.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o===void 0)return;if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);let d,f;if(Array.isArray(o)){for(f="[",d=0;d<o.length;d++)d&&(f+=","),f+=u(o[d])||"null";return f+"]"}if(o===null)return"null";if(s.includes(o)){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const S=s.push(o)-1,T=Object.keys(o).sort(i?.(o));for(f="",d=0;d<T.length;d++){const mn=T[d],dn=u(o[mn]);dn&&(f&&(f+=","),f+=JSON.stringify(mn)+":"+dn)}return s.splice(S,1),"{"+f+"}"})(n)}function ot(n){if(n===null)return null;const t=[];for(const e of n)L(e)?t.push(e.geometry()):t.push(e);return t}function J(n,t){if(!(t instanceof O))throw new Z(null,"InvalidParameter",null);n.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function lt(n,t){if(N(n)||w(n)){let e=!1,i=!1,r=[],s=t;if(N(n)){for(const u of n)J(r,u);r.length>0&&(s=n[0].spatialReference,e=n[0].hasZ,i=n[0].hasM)}else if(n instanceof P)r=n._elements,r.length>0&&(e=n._hasZ,i=n._hasM,s=n.get(0).spatialReference);else{if(!w(n))throw new Z(null,"InvalidParameter",null);for(const u of n.toArray())J(r,u);r.length>0&&(s=n.get(0).spatialReference,e=n.get(0).hasZ===!0,i=n.get(0).hasM===!0)}return r.length===0?null:(Yn(r)||(r=r.slice().reverse()),new nn({rings:[r],spatialReference:s,hasZ:e,hasM:i}))}return n}function ct(n,t){if(N(n)||w(n)){let e=!1,i=!1,r=[],s=t;if(N(n)){for(const u of n)J(r,u);r.length>0&&(s=n[0].spatialReference,e=n[0].hasZ===!0,i=n[0].hasM===!0)}else if(n instanceof P)r=n._elements,r.length>0&&(e=n._hasZ,i=n._hasM,s=n.get(0).spatialReference);else if(w(n)){for(const u of n.toArray())J(r,u);r.length>0&&(s=n.get(0).spatialReference,e=n.get(0).hasZ===!0,i=n.get(0).hasM===!0)}return r.length===0?null:new Q({paths:[r],spatialReference:s,hasZ:e,hasM:i})}return n}function ft(n,t){if(N(n)||w(n)){let e=!1,i=!1,r=[],s=t;if(N(n)){for(const u of n)J(r,u);r.length>0&&(s=n[0].spatialReference,e=n[0].hasZ===!0,i=n[0].hasM===!0)}else if(n instanceof P)r=n._elements,r.length>0&&(e=n._hasZ,i=n._hasM,s=n.get(0).spatialReference);else if(w(n)){for(const u of n.toArray())J(r,u);r.length>0&&(s=n.get(0).spatialReference,e=n.get(0).hasZ===!0,i=n.get(0).hasM===!0)}return r.length===0?null:new X({points:r,spatialReference:s,hasZ:e,hasM:i})}return n}function ht(n,t=!0){if(n==null)return[];if(N(n)){const e=[];for(const i of n){const r=_(i);(t||r!=="")&&e.push(r)}return e}if(w(n)){const e=[];for(let i=0;i<n.length();i++){const r=_(n.get(i));(t||r!=="")&&e.push(r)}return e}if(v(n)){const e=_(n);if(t||e!=="")return[e]}return[]}let E=0;function mt(n){return E++,E%100==0?(E=0,new Promise(t=>{setTimeout(()=>{t(n)},0)})):n}function dt(n,t,e){switch(e){case"&":return n&t;case"|":return n|t;case"^":return n^t;case"<<":return n<<t;case">>":return n>>t;case">>>":return n>>>t}}function F(n,t=null){return n==null?null:p(n)||b(n)||y(n)?n:n instanceof k?t?.keepGeometryType===!0?n:n.toJSON():n instanceof C?n.toArray().map(e=>F(e,t)):Array.isArray(n)?n.map(e=>F(e,t)):Y(n)?n:c(n)?n.toJSDate():m(n)?n.toString():h(n)?n.toJSDate():n!==null&&typeof n=="object"&&n.castAsJson!==void 0?n.castAsJson(t):null}async function yt(n,t,e,i,r){const s=await hn(n,t,e);r[i]=s}async function hn(n,t=null,e=null){if(n instanceof C&&(n=n.toArray()),n==null)return null;if(v(n)||n instanceof k||Y(n)||c(n))return F(n,e);if(Array.isArray(n)){const i=[],r=[];for(const s of n)s===null||v(s)||s instanceof k||Y(s)||c(s)?r.push(F(s,e)):(r.push(null),i.push(yt(s,t,e,r.length-1,r)));return i.length>0&&await Promise.all(i),r}return n!==null&&typeof n=="object"&&n.castAsJsonAsync!==void 0?n.castAsJsonAsync(t,e):null}function j(n){return An(n)?n.parent:n}function An(n){return n&&"declaredClass"in n&&n.declaredClass==="esri.layers.support.SubtypeSublayer"}function pt(n){return n&&"declaredClass"in n&&n.declaredClass==="esri.layers.SubtypeGroupLayer"}function bt(n,t,e){const i=j(n.fullSchema());return i===null||!i.fields?null:V(t,i,n,e)}function gt(n){const t=j(n.fullSchema());return t===null?null:t.fields?t.subtypeField?{subtypeField:t.subtypeField,subtypes:t.subtypes?t.subtypes.map(e=>({name:e.name,code:e.code})):[]}:t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(e=>({name:e.name,code:e.id})):[]}:null:null}function St(n,t,e,i){const r=j(n.fullSchema());if(r===null||!r.fields)return null;const s=V(t,r,n,i);if(e===void 0)try{e=n.field(t)}catch{return null}return Cn(s,e)}function Nt(n,t,e,i){const r=j(n.fullSchema());if(r===null||!r.fields)return null;if(e===void 0){try{e=n.field(t)}catch{return null}return e}return kn(V(t,r,n,i),e)}function Zt(n){return n?.timeZone??"system"}function wt(n){const t=j(n.fullSchema());if(t===null||!t.fields)return null;const e=[];for(const i of t.fields)e.push(Pn(i));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField??"",geometryType:yn[t.geometryType]===void 0?"":yn[t.geometryType],fields:e}}function Tt(n,t){const e=D.systemTimeZoneCanonicalName;return n==="system"&&(n=e),{version:Dn,engineVersion:Rn,timeZone:n,userTimeZone:e,spatialReference:t instanceof In?t.toJSON():t,application:Mn.applicationName??"",engine:"web",locale:Sn()}}const Dn="1.34",Yt=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:Vn,ReturnResult:qn,absRound:Xn,arcadeVersion:Dn,autoCastArrayOfPointsToMultiPoint:ft,autoCastArrayOfPointsToPolygon:lt,autoCastArrayOfPointsToPolyline:ct,autoCastFeatureToGeometry:ot,binaryOperator:dt,breakResult:En,castAsJson:F,castAsJsonAsync:hn,castRecordToText:_n,continueResult:Hn,defaultExecutingContext:Tt,defaultTimeZone:Zt,defaultUndefined:Un,equalityTest:Tn,featureDomainCodeLookup:Nt,featureDomainValueLookup:St,featureFullDomain:bt,featureSchema:wt,featureSubtypes:gt,fixNullGeometry:ut,fixSpatialReference:at,formatDate:q,formatNumber:fn,getDomain:V,getDomainCode:kn,getDomainValue:Cn,getType:Wn,greaterThanLessThan:nt,isArray:N,isBoolean:p,isDate:c,isDateOnly:h,isDictionary:on,isDictionaryLike:Bn,isEmpty:Qn,isFeature:L,isFeatureSet:un,isFeatureSetCollection:ln,isFunctionParameter:M,isGeometry:$,isGraphic:$n,isImmutableArray:w,isInteger:Gn,isJsDate:Y,isKnowledgeGraph:cn,isModule:rn,isNumber:b,isObject:U,isPixel:an,isSimpleType:v,isString:y,isSubtypeGrouplayer:pt,isSubtypeSublayer:An,isTime:m,isVoid:Zn,isVoxel:sn,multiReplace:I,parseGeometryFromJson:st,pcCheck:Kn,stableStringify:W,standardiseDateFormat:wn,tick:mt,toBoolean:it,toDate:et,toNumber:l,toNumberArray:tt,toString:_,toStringArray:ht,toStringExplicit:x,voidOperation:g},Symbol.toStringTag,{value:"Module"}));function zt(n){Fn=n}let Fn;function B(n){return n===null?null:c(n)?n.clone():v(n)?n:$(n)?n.clone():w(n)?n.toArray().map(t=>B(t)):N(n)?n.map(t=>B(t)):L(n)?Fn.createFromArcadeFeature(n):ln(n)||un(n)?n:on(n)||n?.declaredClass==="esri.arcade.Attachment"?n.deepClone():(n?.declaredClass==="esri.arcade.Portal"||cn(n)||n instanceof tn||M(n),n)}function G(n,t,e=!1,i=!1){if(n==null)return null;if(b(n)||p(n)||y(n)||c(n)||h(n)||m(n))return n;if(N(n)){const s=[];for(const u of n)s.push(G(u,t,e,i));return s}if(i&&$(n))return n;const r=new A;r.immutable=!1;for(const[s,u]of Object.entries(n))u!==void 0&&r.setField(s,G(u,t,e,i));return r.immutable=e,r}class A{constructor(t){this.declaredClass="esri.arcade.Dictionary",this.plain=!1,this.immutable=!0,t instanceof A?this.attributes=t.attributes:t==null?this.attributes=Object.create(null):Object.getPrototypeOf(t)!=null?this.attributes={__proto__:null,...t}:this.attributes=t}static containerEntry(t,e){return new A({__proto__:null,key:t,value:e})}static textFormatting(){const t=new A({__proto__:null,newline:`
`,tab:"	",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});return t.immutable=!1,t}field(t){const e=t.toLowerCase(),i=this.attributes[t];if(i!==void 0)return i;for(const r in this.attributes)if(r.toLowerCase()===e)return this.attributes[r];throw new Z(null,"FieldNotFound",null,{key:t})}setField(t,e){if(this.immutable)throw new Z(null,"Immutable",null);if(M(e))throw new Z(null,"NoFunctionInDictionary",null);const i=t.toLowerCase();if(e instanceof Date&&(e=D.dateJSToArcadeDate(e)),this.attributes[t]===void 0){for(const r in this.attributes)if(r.toLowerCase()===i)return void(this.attributes[r]=e);this.attributes[t]=e}else this.attributes[t]=e}eraseField(t){if(this.immutable)throw new Z(null,"Immutable",null);if(t in this.attributes)return void delete this.attributes[t];const e=t.toLowerCase();for(const i in this.attributes)if(i.toLowerCase()===e)return void delete this.attributes[i]}hasField(t){const e=t.toLowerCase();if(this.attributes[t]!==void 0)return!0;for(const i in this.attributes)if(i.toLowerCase()===e)return!0;return!1}keys(){let t=[];for(const e in this.attributes)t.push(e);return t=t.sort(),t}values(){return this.keys().map(t=>this.attributes[t])}entryCount(){return Object.keys(this.attributes).length}isEmpty(){return this.entryCount()<=0}castToText(t=!1){return _n(this.attributes,{useNumbersForDates:t})}static convertObjectToArcadeDictionary(t,e,i=!0,r=!1){const s=new A;s.immutable=!1;for(const u in t){const o=t[u];o!==void 0&&s.setField(u.toString(),G(o,e,i,r))}return s.immutable=i,s}static convertJsonToArcade(t,e,i=!1,r=!1){return G(t,e,i,r)}castAsJson(t=null){const e=Object.create(null);for(let i in this.attributes){const r=this.attributes[i];r!==void 0&&(t?.keyTranslate&&(i=t.keyTranslate(i)),e[i]=F(r,t))}return e}async castDictionaryValueAsJsonAsync(t,e,i,r=null,s){const u=await hn(i,r,s);return t[e]=u,u}async castAsJsonAsync(t=null,e=null){const i=Object.create(null),r=[];for(let s in this.attributes){const u=this.attributes[s];e?.keyTranslate&&(s=e.keyTranslate(s)),u!==void 0&&(v(u)||u instanceof k||u instanceof D?i[s]=F(u,e):r.push(this.castDictionaryValueAsJsonAsync(i,s,u,t,e)))}return r.length>0&&await Promise.all(r),i}deepClone(){const t=new A;t.immutable=!1;for(const e of this.keys())t.setField(e,B(this.field(e)));return t}}export{St as $,_n as A,un as B,V as C,zt as D,at as E,lt as F,F as G,L as H,Hn as I,ot as J,on as K,M as L,ct as M,ft as N,kn as O,g as P,Bn as Q,qn as R,l as S,it as T,$ as U,v as V,gt as W,ln as X,ht as Y,et as Z,En as _,dt as a,I as a0,mt as a1,An as a2,P as a3,en as a4,B as a5,Wn as a6,wn as a7,Xn as a8,ut as a9,sn as aa,an as ab,tt as ac,Tt as ad,Yt as ae,H as b,Zt as c,nt as d,jt as e,bt as f,_ as g,Nt as h,x as i,wt as j,cn as k,c as l,h as m,bn as n,Kn as o,A as p,Zn as q,R as r,tn as s,w as t,Qn as u,Vn as v,m as w,Cn as x,Tn as y,Un as z};
