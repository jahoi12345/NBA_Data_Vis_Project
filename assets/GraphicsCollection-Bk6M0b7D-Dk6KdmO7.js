import{Y as o,H as p,G as a,L as w}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{s as l}from"./Graphic-DgGzDmqW-d1CNicxz.js";import{R as i,T as y,w as m,C as _}from"./collectionUtils-jDyktm0P-BDP2Oq99.js";let r=class extends i{constructor(e){super(e),this.addHandles([this.on("before-add",t=>{t.item==null&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(i.ofType(this.itemType.Type))(e):new i(e)}};function f(e,t){return{type:e,cast:m,set(h){const s=_(h,this._get(t),e);s&&!s.destroyed&&(s.owner=this),this._set(t,s)}}}o([p()],r.prototype,"owner",null),r=o([a("esri.core.support.OwningCollection")],r);let n=class extends r{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};o([y({Type:l,ensureType:w(l)})],n.prototype,"itemType",void 0),n=o([a("esri.support.GraphicsCollection")],n);export{n as i,r as o,f as u};
