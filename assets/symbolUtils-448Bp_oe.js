const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/visualVariableUtils-CQqBkcYu.js","assets/Color-CERqXxxY.js","assets/jsonMap-Bs3hmeCU.js","assets/mathUtils-PIGhLnI9.js","assets/Graphic-BiQTZi7k.js","assets/getPopupProvider-DjIxdahS.js","assets/collectionUtils-Dk3LoVuX.js","assets/index-C-2WWcaK.js","assets/index-Cv2ko1Ob.css","assets/Point-BN8RINcc.js","assets/reader-DcGs6kKN.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-Bbnm65bN.js","assets/SimpleObservable-CvFyr0NA.js","assets/lengthUtils-Ceo6858g.js","assets/date-IqUzANpt.js","assets/Layer-Ciy6IOGe.js","assets/jsonUtils-UGNxUp3z.js","assets/Polyline-BtUG5wiC.js","assets/Polygon-BdLNJfwi.js","assets/aaBoundingRect-CrU5VtR_.js","assets/typeUtils-Dk-Jta7H.js","assets/createFeatureId-CVwTD0fV.js","assets/typeUtils-W6WEjFtn.js","assets/lineMarkers-CDwLe3J6.js","assets/PolygonSymbol3D-D50k8Fcq.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x.js","assets/screenUtils-BitdhK1O.js","assets/opacityUtils-DuFH0EC9.js","assets/aaBoundingBox-CtkshuSS.js","assets/DoubleArray-DExKNiTh.js","assets/mat4f64-q_b6UJoq.js","assets/Font-Ct7_LYCJ.js","assets/SimpleFillSymbol-CDawtd9z.js","assets/SimpleMarkerSymbol-BGAFRS9_.js","assets/PictureMarkerSymbol-LudhOruE.js","assets/TextSymbol-DH6PXxVy.js"])))=>i.map(i=>d[i]);
import{_ as F}from"./index-C-2WWcaK.js";import{G as f}from"./jsonMap-Bs3hmeCU.js";import"./Point-BN8RINcc.js";import"./collectionUtils-Dk3LoVuX.js";import"./Layer-Ciy6IOGe.js";import{a as L}from"./lengthUtils-Ceo6858g.js";import{L as c,M as R,N as k}from"./utils-DLXV1Jpi.js";import"./Color-CERqXxxY.js";import"./mathUtils-PIGhLnI9.js";import"./vec42-CkbV-zLi.js";import"./vec4f64-DPb6J-GU.js";import{j as z}from"./modeUtils-DKmpkquP.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2d-B5KT8MVP.js";import{S as O}from"./typeUtils-W6WEjFtn.js";import"./PolygonSymbol3D-D50k8Fcq.js";import"./PictureMarkerSymbol-LudhOruE.js";import"./SimpleFillSymbol-CDawtd9z.js";import"./SimpleMarkerSymbol-BGAFRS9_.js";import"./TextSymbol-DH6PXxVy.js";import"./defaults3D-DhBThCZk.js";const d=f("android");f("chrome")||d&&d>=4;z();function g(r){return r&&r.opacity!==void 0?r.opacity*("parent"in r?g(r.parent):1):1}async function rr(r,e){if(!r)return;const m=r.sourceLayer,p=(e!=null&&e.useSourceLayer?m:r.layer)??m,l=e?.ignoreOpacity?1:g(p);if(r.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const o=r.symbol.type==="web-style"?await r.symbol.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):r.symbol.clone();return c(o,null,{add:l}),o}const a=e?.renderer??j(p);let i=a&&"getSymbolAsync"in a?await a.getSymbolAsync(r,e):null;if(!i)return;if(i=i.type==="web-style"?await i.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):i.clone(),!(a&&"visualVariables"in a&&a.visualVariables?.length&&C(i)))return c(i,null,{add:l}),i;if("arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&e?.arcade==null){const o={...e};o.arcade=await L(),e=o}const{getColor:h,getOpacity:w,getAllSizes:S,getRotationAngle:V}=await F(()=>import("./visualVariableUtils-CQqBkcYu.js").then(o=>o.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36])),t=[],n=[],s=[],u=[];for(const o of a.visualVariables)switch(o.type){case"color":t.push(o);break;case"opacity":n.push(o);break;case"rotation":u.push(o);break;case"size":o.target||s.push(o)}const y=!!t.length&&t[t.length-1],v=y?h(y,r,e):null,_=!!e?.ignoreOpacity,b=!!n.length&&n[n.length-1],A=b?w(b,r,e):null;if(c(i,v,_?void 0:{override:A,add:l}),s.length&&e?.ignoreSizeVariables!==!0){const o=S(s,r,e);await R(i,o)}if(e?.ignoreRotationVariables!==!0)for(const o of u)k(i,V(o,r,e),o.axis);return i}function C(r){return!O(r)||r.symbolLayers.at(0)?.type!=="water"}function j(r){if(r)return"renderer"in r?r.renderer:void 0}export{rr as F};
