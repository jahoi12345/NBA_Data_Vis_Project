const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SelfSnappingEngine-Du5ij8bo-BYG79SID.js","assets/jsonMap-Bs3hmeCU-Cusd0Fmz.js","assets/collectionUtils-jDyktm0P-ArdXNs6F.js","assets/index-CTl7hdrJ.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu-BAT2Wq6O.js","assets/reader-DcGs6kKN-DHJfK-tm.js","assets/reactiveUtils-SO2Ko3sy-BCLX8Jdy.js","assets/Extent-CgDMOSRD-CU1qE5Kr.js","assets/SimpleObservable-CvFyr0NA-DXpoMYph.js","assets/Cyclical-BLSxUpe7-Bj8R2Yk-.js","assets/mathUtils-PIGhLnI9-B1tKUlUb.js","assets/ShadowCastClear.glsl-CeOT_rAo-iOFMl8eB.js","assets/Texture-CFNZjV2R-lGBztxVp.js","assets/mat4f64-q_b6UJoq-Dh6sWB_w.js","assets/vec32-CewSdTn3-DHOFKD0R.js","assets/Polygon-D6wEPb3W-CpL9Efjx.js","assets/aaBoundingRect-CjwcS2F3-D7aII9DY.js","assets/Indices-D0_UQPPr-t1Qev6md.js","assets/BufferView-Cj2sQaht-DuP-iLZg.js","assets/vec42-B8VM4vXb-BnA9MysM.js","assets/vec2f64-rIxtbMRN-Kai9mK1i.js","assets/vec4f64-DPb6J-GU-C7c2DqbZ.js","assets/sphere-DLQ6p7mp-DmnRpHXV.js","assets/mat4-C96X-Nn0-Do6fKsNS.js","assets/vector-B8ZDYGQ6-B1uNywRb.js","assets/quatf64-CCm9z-pX-CQ7_sSji.js","assets/frustum-CMzahy3--CFytpSYl.js","assets/plane-BNdSPG2o-Cq7jmU6w.js","assets/Emissions.glsl-B8XKMjLy-DXfiRNVX.js","assets/Color-CERqXxxY-BuYn26eI.js","assets/enums-B4pqBiXb-BO-3hS_8.js","assets/aaBoundingBox-Cn49X7ge-DORLZxoS.js","assets/DoubleArray-DExKNiTh-CvVpHySW.js","assets/orientedBoundingBox-BLEx7wLU-CPBtS4XC.js","assets/quat-B7J5v7rV-i-DOMCm_.js","assets/spatialReferenceEllipsoidUtils-D2JabnKt-Cip58jmo.js","assets/computeTranslationToOriginAndRotation-Bjd4esRf-CXUng2L4.js","assets/projectionUtils-BGH_5_I3-BySNUA-B.js","assets/Polyline-CoiTLswR-BLagWJLS.js","assets/InterleavedLayout-B7roQAzV-CC2VYRPC.js","assets/types-BKo2foNY-DE0QfIFp.js","assets/VertexElementDescriptor-BlxU8vCE-BwuKQkTU.js","assets/screenUtils-BitdhK1O-L0FLPAMi.js","assets/lengthUtils-Dt1_RvOO-bleznLOi.js","assets/date-IqUzANpt-bLKO9IDT.js","assets/projectPointToVector-DL7Z4uvb-BbcUuq8O.js","assets/projectVectorToVector-Csv3NYZI-BsIKHfQD.js","assets/HUDIntersectorResult-1xTExS7z-CU1-YQoW.js","assets/normalizeUtils-85zLqeMi-DCF9gKvo.js","assets/normalizeUtilsCommon-CnhQye_A-zWtr51r8.js","assets/jsonUtils-CmpazY1u-ateEpj4Q.js","assets/utils-CylVuxNi-CqOfmBVG.js","assets/utils-Dpg4yj1D-BVnuoMV8.js","assets/videoUtils-Dwx3AEgj-CduhpDRk.js","assets/typeUtils-DqrRcjBx-ZWdHcSIJ.js","assets/modeUtils-BA-mAwuS-UrytRxLw.js","assets/intl-DRFqUect-ClAS7BRt.js","assets/uuid-Oe6SV2kF-IYX19xBA.js","assets/sanitizerUtils-BT_8V5US-CWQWUwZQ.js","assets/workers-BEkgoq8Q-BNWfkyQs.js","assets/Queue-CYlrXMwB-CYJTUII-.js","assets/PooledRBush-Dco5QkUp-DX3CMhf3.js","assets/quickselect-QQC62dOK-Br2Ahhru.js","assets/GraphicsCollection-Bk6M0b7D-ByzFamPI.js","assets/Graphic-DgGzDmqW-CFzg0c4i.js","assets/getPopupProvider-CmskPttI-C4PqyuPF.js","assets/Layer-DZvC7bne-m1cEC_yw.js","assets/createFeatureId-CVwTD0fV-3fKpJDrk.js","assets/typeUtils-CXW_VpOn-BoSnXkME.js","assets/lineMarkers-CDwLe3J6-CNUjJvs3.js","assets/PolygonSymbol3D-BXRHZiCQ-Vi0-2Gvc.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x-CsVYZCeG.js","assets/opacityUtils-DuFH0EC9-DWspTgn2.js","assets/Font-BwmnW7d2-D-oIm_Md.js","assets/SimpleFillSymbol-CDawtd9z-CWD2KI2D.js","assets/SimpleMarkerSymbol-BGAFRS9_-CVQ5NLIA.js","assets/PictureMarkerSymbol-CaSh-vZk-BNpExnAb.js","assets/TextSymbol-hRGhyDHs-C0NgASym.js","assets/HeightModelInfo-D5IdRvJ2-BK9di2bT.js","assets/RealisticTree.glsl-WN9nrQUl-CRRcYwOn.js","assets/meshVertexSpaceUtils-CtG7DPVT-V_uCtHpB.js","assets/MeshLocalVertexSpace-BGd1IdEs-DqCdtROz.js","assets/vec3f32-WCVSSNPR-9V6Uhrx-.js","assets/memoryEstimations-Bd726a_p-0cVCY2Jz.js","assets/Intersector-DS9YtyQY-CuzM48xl.js","assets/scaleUtils-yfx9kKWT-BPfZ-Fh2.js","assets/layerUtils-DZGhvm-W-DLw3QMll.js","assets/TilemapCache-CjhKW_vj-BYOTuKe8.js","assets/LRUCache-fy84PBMi-Y56WPIvD.js","assets/TileKey-CXWFOqOI-CcilLir8.js","assets/tagSymbols-BPcGfZon-BPcGfZon.js","assets/UpdatingHandles-D2RI_3Hb-dwLPjVun.js","assets/asyncUtils-w6KfWU41-HenJ0UOu.js","assets/signal-BX9ezF8a-cf1Pn6io.js","assets/Map-AEYszeHg-D2YZkc1e.js","assets/Basemap-CL_uaRmk-ChnHJfg0.js","assets/loadAll-BCyxerwc-DK9uHnLK.js","assets/PortalItem-DnxMlRVo-Dhq4alsp.js","assets/writeUtils-DEFpwIW1-D44H3UWs.js","assets/CollectionFlattener-D6h2Fkvj-qnUHjb1M.js","assets/persistable-CdoDQOTR-CH9U-JJT.js","assets/MD5-MtSiOt06-jWr180Yc.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw-DH8sdIsE.js","assets/resourceExtension-DOTCeiZj-BXiJr75H.js","assets/PolygonCollection-HNNpnBH7-C5NQ6xHr.js","assets/mat4f32-Djp3mnm5-DzYG3LYB.js","assets/TablesMixin-Q80MT3nU-CFBTh0j7.js","assets/timeZoneUtils-BSc7-7qA-BAv3h8mh.js","assets/ReactiveMap-B0by2bYu-DCsCfMj5.js","assets/Query-BlS0WPDF-BdshFBMz.js","assets/Field-Cm_ZejYW-CwJZmSru.js","assets/fieldType-DVUzXtk_-tUuvnZJM.js","assets/ElevationQuery-DzlYa4L4-BxQXlEAE.js","assets/TileInfo-Bz7QlefV-tjhen9qQ.js","assets/Scheduler-CNrsbccs-Bcg8fWoS.js","assets/constants-D67WmGms-H7IOwEdB.js","assets/floatRGBA-D-Q4FzNN-BzjdY1tU.js","assets/labelUtils-BtizwBfq-Zegx4520.js","assets/ArcadeExpression-BlIRq-oN-DGzfhzBj.js","assets/TimeOnly-BERR31kg-PKcKegNB.js","assets/enum-BzLwmiID-CcyIdWlQ.js","assets/UnknownTimeZone-B697BDFv-CBbtul7O.js","assets/FieldsIndex-CimK-TqD-CrSnohIk.js","assets/TileKey-C44YQC4_-BW7BBbYp.js","assets/layerViewUtils-BTa15X3o-BjQlX2q8.js","assets/unitConversionUtils-4vB4Ezlp-B0eWR3Ls.js","assets/vec2f32-CaVKkSa6-BjkBmyoj.js","assets/dehydratedFeatures-Ql-uVzLq-DehgeO5I.js","assets/quantizationUtils-Ceq-Uxsu-CDK8m1qL.js","assets/featureConversionUtils-BDA_FXJx-CUwkrHf5.js","assets/OptimizedFeature-CwRGZPwv-Ddclhn0A.js","assets/OptimizedFeatureSet-BR8EEvDc-CgsRgxJh.js","assets/Octree-DckBBpQ7-BC8mmFdF.js","assets/elevationInfoUtils-B8MpdRMP-CN_w2fPT.js","assets/intersectorUtilsConversions-pLQPEbcN-rV-4Q5_m.js","assets/DefaultLoadingContext-DXgBe4GE-Colk9t6X.js","assets/wosrLoader-CIPfz1Cl-qtGxLmBP.js","assets/Version-BtYZEj58-LyRHDnSJ.js","assets/axisAngleDegrees-CjbXmycq-LMRXo165.js","assets/edgePreprocessing-D_eX-fWy-CRLN12td.js","assets/config-Dg972SSE-D9DBKeq5.js","assets/GeometryUtils-C354xUs0-CG8X9WjO.js","assets/definitions-Dvg4hMIw-CdK2DzFN.js","assets/WorkerHandle-B930SiRy-b7IwaSpV.js","assets/colorUtils-CeIi7j7j-nwrKvQYb.js","assets/vec3-B_phcnZY-DHC7I6xa.js","assets/vec33-CWJeyzxV-Me4sF5XB.js","assets/capabilities-Bi6C4OG6-CpURufko.js","assets/imageUtils-142g71N8-CjUugWaS.js","assets/angularMeasurementUtils-CP9gTlx0-Cmcd-Fla.js","assets/geometry2dUtils-B4vDf2wH-D5Eyn-ve.js","assets/utils-DTE-xBiC-uxMmcNif.js","assets/geodeticLengthOperator-ysQZ6ofQ-CX26XL0i.js","assets/geodeticCurveType-CirnHLSB-CirnHLSB.js","assets/GridSnappingEngine-BrpXC0if-BAp3APmm.js","assets/FeatureSnappingEngine-BAl7xoIm-E9b7xkAo.js","assets/FeatureFilter-G4_pWMVe-vo0uU6rO.js","assets/floorFilterUtils-DKzVzLpH-C2F2Cy-S.js"])))=>i.map(i=>d[i]);
import{H as ot,_ as lt}from"./index-CTl7hdrJ.js";import{q as Xt,v as Xs,a9 as Ks,a7 as Kt,o as ut,a4 as Js,I as Te,c5 as en,e as tn,ar as sn,Y as p,H as d,G as De,aD as nn}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{H as rn}from"./asyncUtils-w6KfWU41-HenJ0UOu.js";import{J as an,j as jt,l as Jt,i as on}from"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import{W as kt,N as ln,h as L,j as un,k as cn}from"./projectionUtils-BGH_5_I3-BySNUA-B.js";import{R as ye,C as hn,D as es,v as pn}from"./elevationInfoUtils-B8MpdRMP-CN_w2fPT.js";import{t as y,R as xe,M as Ae,X as oe,o as dn}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";import{x as ct,v as ts,h as Ce}from"./projectVectorToVector-Csv3NYZI-BsIKHfQD.js";import{F as Fe}from"./Color-CERqXxxY-BuYn26eI.js";import{G as fn}from"./lengthUtils-Dt1_RvOO-bleznLOi.js";import{e as gn}from"./Layer-DZvC7bne-m1cEC_yw.js";import{v as Me,L as ce,y as _t,$ as Xe,O as yn,c as b,J as mn,I as Mt,t as vn,h as $,A as B,w as R,F as Ze,d as St,z as jn,l as _n}from"./vec32-CewSdTn3-DHOFKD0R.js";import{o as Sn}from"./Query-BlS0WPDF-BdshFBMz.js";import{aB as H,a8 as wn,bh as Ut}from"./ShadowCastClear.glsl-CeOT_rAo-iOFMl8eB.js";import{o as bn}from"./utils-DTE-xBiC-uxMmcNif.js";import{i as xn,S as Mn}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{b as he,Y as Tn,aj as Pn,j as Ke,e as Pe,q as Dn,d as Ue,az as Cn,p as Ge,ak as Rn,U as ss,F as ns,aA as It,P as En}from"./Polygon-D6wEPb3W-CpL9Efjx.js";import{o as fe,r as Ie,m as zn}from"./vec2f64-rIxtbMRN-Kai9mK1i.js";import{z as Ln,F as qn}from"./vec42-B8VM4vXb-BnA9MysM.js";import{o as Bn}from"./vec4f64-DPb6J-GU-C7c2DqbZ.js";import{R as Re,ax as Nn,aD as On,a0 as $n,a1 as Tt,az as kn,b9 as Un,bs as is,af as rs,$ as In,f as as}from"./Point-BfTTZoMu-BAT2Wq6O.js";import{n as os}from"./Polyline-CoiTLswR-BLagWJLS.js";import{K as A,Y as Vn,X as Je,I as ls,c as wt,T as us,j as Hn,z as cs,x as hs,b as An}from"./plane-BNdSPG2o-Cq7jmU6w.js";import{L as Fn,d as Zn,m as Gn,I as Wn}from"./sphere-DLQ6p7mp-DmnRpHXV.js";import{E as Qn}from"./geometry2dUtils-B4vDf2wH-D5Eyn-ve.js";import{y as ps,s as Yn,a as Xn}from"./screenUtils-BitdhK1O-L0FLPAMi.js";import{m as Kn,l as ds}from"./geodeticLengthOperator-ysQZ6ofQ-CX26XL0i.js";import{x as Jn,z as ei}from"./spatialReferenceEllipsoidUtils-D2JabnKt-Cip58jmo.js";const Ve=(t,e=Ve,s=e.f||(e.f=["assets/SelfSnappingEngine-Du5ij8bo.js","assets/jsonMap-Bs3hmeCU.js","assets/collectionUtils-jDyktm0P.js","assets/index-BzxsWNRw.js","assets/index-Cv2ko1Ob.css","assets/Point-BfTTZoMu.js","assets/reader-DcGs6kKN.js","assets/reactiveUtils-SO2Ko3sy.js","assets/Extent-CgDMOSRD.js","assets/SimpleObservable-CvFyr0NA.js","assets/Cyclical-BLSxUpe7.js","assets/mathUtils-PIGhLnI9.js","assets/ShadowCastClear.glsl-CeOT_rAo.js","assets/Texture-CFNZjV2R.js","assets/mat4f64-q_b6UJoq.js","assets/vec32-CewSdTn3.js","assets/Polygon-D6wEPb3W.js","assets/aaBoundingRect-CjwcS2F3.js","assets/Indices-D0_UQPPr.js","assets/BufferView-Cj2sQaht.js","assets/vec42-B8VM4vXb.js","assets/vec2f64-rIxtbMRN.js","assets/vec4f64-DPb6J-GU.js","assets/sphere-DLQ6p7mp.js","assets/mat4-C96X-Nn0.js","assets/vector-B8ZDYGQ6.js","assets/quatf64-CCm9z-pX.js","assets/frustum-CMzahy3-.js","assets/plane-BNdSPG2o.js","assets/Emissions.glsl-B8XKMjLy.js","assets/Color-CERqXxxY.js","assets/enums-B4pqBiXb.js","assets/aaBoundingBox-Cn49X7ge.js","assets/DoubleArray-DExKNiTh.js","assets/orientedBoundingBox-BLEx7wLU.js","assets/quat-B7J5v7rV.js","assets/spatialReferenceEllipsoidUtils-D2JabnKt.js","assets/computeTranslationToOriginAndRotation-Bjd4esRf.js","assets/projectionUtils-BGH_5_I3.js","assets/Polyline-CoiTLswR.js","assets/InterleavedLayout-B7roQAzV.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BlxU8vCE.js","assets/screenUtils-BitdhK1O.js","assets/lengthUtils-Dt1_RvOO.js","assets/date-IqUzANpt.js","assets/projectPointToVector-DL7Z4uvb.js","assets/projectVectorToVector-Csv3NYZI.js","assets/HUDIntersectorResult-1xTExS7z.js","assets/normalizeUtils-85zLqeMi.js","assets/normalizeUtilsCommon-CnhQye_A.js","assets/jsonUtils-CmpazY1u.js","assets/utils-CylVuxNi.js","assets/utils-Dpg4yj1D.js","assets/videoUtils-Dwx3AEgj.js","assets/typeUtils-DqrRcjBx.js","assets/modeUtils-BA-mAwuS.js","assets/intl-DRFqUect.js","assets/uuid-Oe6SV2kF.js","assets/sanitizerUtils-BT_8V5US.js","assets/modeUtils-OCMtRbrJ.css","assets/workers-BEkgoq8Q.js","assets/Queue-CYlrXMwB.js","assets/PooledRBush-Dco5QkUp.js","assets/quickselect-QQC62dOK.js","assets/GraphicsCollection-Bk6M0b7D.js","assets/Graphic-DgGzDmqW.js","assets/getPopupProvider-CmskPttI.js","assets/Layer-DZvC7bne.js","assets/createFeatureId-CVwTD0fV.js","assets/typeUtils-CXW_VpOn.js","assets/lineMarkers-CDwLe3J6.js","assets/PolygonSymbol3D-BXRHZiCQ.js","assets/ExtrudeSymbol3DLayer-DSc1ou2x.js","assets/opacityUtils-DuFH0EC9.js","assets/Font-BwmnW7d2.js","assets/SimpleFillSymbol-CDawtd9z.js","assets/SimpleMarkerSymbol-BGAFRS9_.js","assets/PictureMarkerSymbol-CaSh-vZk.js","assets/TextSymbol-hRGhyDHs.js","assets/HeightModelInfo-D5IdRvJ2.js","assets/RealisticTree.glsl-WN9nrQUl.js","assets/meshVertexSpaceUtils-CtG7DPVT.js","assets/MeshLocalVertexSpace-BGd1IdEs.js","assets/vec3f32-WCVSSNPR.js","assets/memoryEstimations-Bd726a_p.js","assets/Intersector-DS9YtyQY.js","assets/scaleUtils-yfx9kKWT.js","assets/layerUtils-DZGhvm-W.js","assets/TilemapCache-CjhKW_vj.js","assets/LRUCache-fy84PBMi.js","assets/TileKey-CXWFOqOI.js","assets/tagSymbols-BPcGfZon.js","assets/UpdatingHandles-D2RI_3Hb.js","assets/asyncUtils-w6KfWU41.js","assets/signal-BX9ezF8a.js","assets/Map-AEYszeHg.js","assets/Basemap-CL_uaRmk.js","assets/loadAll-BCyxerwc.js","assets/PortalItem-DnxMlRVo.js","assets/writeUtils-DEFpwIW1.js","assets/CollectionFlattener-D6h2Fkvj.js","assets/persistable-CdoDQOTR.js","assets/MD5-MtSiOt06.js","assets/multiOriginJSONSupportUtils-C0wm8_Yw.js","assets/resourceExtension-DOTCeiZj.js","assets/PolygonCollection-HNNpnBH7.js","assets/mat4f32-Djp3mnm5.js","assets/TablesMixin-Q80MT3nU.js","assets/timeZoneUtils-BSc7-7qA.js","assets/ReactiveMap-B0by2bYu.js","assets/Query-BlS0WPDF.js","assets/Field-Cm_ZejYW.js","assets/fieldType-DVUzXtk_.js","assets/ElevationQuery-DzlYa4L4.js","assets/TileInfo-Bz7QlefV.js","assets/Scheduler-CNrsbccs.js","assets/constants-D67WmGms.js","assets/floatRGBA-D-Q4FzNN.js","assets/labelUtils-BtizwBfq.js","assets/ArcadeExpression-BlIRq-oN.js","assets/TimeOnly-BERR31kg.js","assets/enum-BzLwmiID.js","assets/UnknownTimeZone-B697BDFv.js","assets/FieldsIndex-CimK-TqD.js","assets/TileKey-C44YQC4_.js","assets/layerViewUtils-BTa15X3o.js","assets/unitConversionUtils-4vB4Ezlp.js","assets/vec2f32-CaVKkSa6.js","assets/dehydratedFeatures-Ql-uVzLq.js","assets/quantizationUtils-Ceq-Uxsu.js","assets/featureConversionUtils-BDA_FXJx.js","assets/OptimizedFeature-CwRGZPwv.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/Octree-DckBBpQ7.js","assets/elevationInfoUtils-B8MpdRMP.js","assets/intersectorUtilsConversions-pLQPEbcN.js","assets/DefaultLoadingContext-DXgBe4GE.js","assets/wosrLoader-CIPfz1Cl.js","assets/Version-BtYZEj58.js","assets/axisAngleDegrees-CjbXmycq.js","assets/edgePreprocessing-D_eX-fWy.js","assets/config-Dg972SSE.js","assets/GeometryUtils-C354xUs0.js","assets/definitions-Dvg4hMIw.js","assets/WorkerHandle-B930SiRy.js","assets/colorUtils-CeIi7j7j.js","assets/vec3-B_phcnZY.js","assets/vec33-CWJeyzxV.js","assets/capabilities-Bi6C4OG6.js","assets/imageUtils-142g71N8.js","assets/angularMeasurementUtils-CP9gTlx0.js","assets/geometry2dUtils-B4vDf2wH.js","assets/utils-DTE-xBiC.js","assets/geodeticLengthOperator-ysQZ6ofQ.js","assets/geodeticCurveType-CirnHLSB.js","assets/GridSnappingEngine-BrpXC0if.js","assets/FeatureSnappingEngine-BAl7xoIm.js","assets/FeatureFilter-G4_pWMVe.js","assets/floorFilterUtils-DKzVzLpH.js"]))=>t.map(n=>s[n]);let ae=class extends Xt{constructor(t){super(t),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new xe}};p([d({constructOnly:!0})],ae.prototype,"layer",void 0),p([d()],ae.prototype,"enabled",void 0),p([d()],ae.prototype,"updating",void 0),p([d()],ae.prototype,"availability",void 0),p([d()],ae.prototype,"sublayerSources",void 0),ae=p([De("esri.views.interactive.snapping.FeatureSnappingLayerSource")],ae);let W=class extends Kt{constructor(){super(...arguments),this.enabled=!0}};p([d({type:Boolean})],W.prototype,"enabled",void 0),W=p([De("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],W);let S=class extends Kt{constructor(t){super(t),this.lineSnapper=new W,this.parallelLineSnapper=new W,this.rightAngleSnapper=new W,this.rightAngleTriangleSnapper=new W,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Fe([255,127,0]),this.orangeTransparent=new Fe([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};p([d({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],S.prototype,"lineSnapper",void 0),p([d({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],S.prototype,"parallelLineSnapper",void 0),p([d({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],S.prototype,"rightAngleSnapper",void 0),p([d({type:W,constructOnly:!0,nonNullable:!0,json:{write:!0}})],S.prototype,"rightAngleTriangleSnapper",void 0),p([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],S.prototype,"shortLineThreshold",void 0),p([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],S.prototype,"distance",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],S.prototype,"pointThreshold",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],S.prototype,"intersectionParallelLineThreshold",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],S.prototype,"parallelLineThreshold",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],S.prototype,"verticalLineThresholdMeters",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],S.prototype,"touchSensitivityMultiplier",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],S.prototype,"pointOnLineThreshold",void 0),p([d({type:Fe,nonNullable:!0})],S.prototype,"orange",void 0),p([d({type:Fe,nonNullable:!0})],S.prototype,"orangeTransparent",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],S.prototype,"lineHintWidthReference",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],S.prototype,"lineHintWidthTarget",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],S.prototype,"lineHintFadedExtensions",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],S.prototype,"parallelLineHintWidth",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],S.prototype,"parallelLineHintLength",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],S.prototype,"parallelLineHintOffset",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],S.prototype,"rightAngleHintSize",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],S.prototype,"rightAngleHintOutlineSize",void 0),p([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],S.prototype,"satisfiesConstraintScreenThreshold",void 0),S=p([De("esri.views.interactive.snapping.Settings.Defaults")],S);const We=new S;let D=class extends Xt{constructor(t){super(t),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new xe,this.distance=We.distance,this.touchSensitivityMultiplier=We.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const t=this.featureSources;t.some(Vt)&&Xs.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const e=t.filter(si),s=this._get("_effectiveFeatureSources")?.filter(Vt)??new xe;for(const o of e){const l=s.find(u=>u.layer===o.layer.parent);if(l)l.sublayerSources.includes(o)||l.sublayerSources.add(o);else if(o.layer.parent){const u=new ae({layer:o.layer.parent});u.sublayerSources.add(o),s.add(u)}}for(const o of s){const l=o.sublayerSources.filter(u=>!e.includes(u));o.sublayerSources.removeMany(l)}s.removeMany(s.filter(o=>o.sublayerSources.length===0));const n=t.filter(ti),i=this._get("_effectiveFeatureSources")??new xe,{added:r,removed:a}=Ks(i.toArray(),[...n,...s]);return i.removeMany(a),i.addMany(r),i}};function Vt(t){return t.layer.type==="subtype-group"}function ti(t){return t.layer.type!=="subtype-group"}function si(t){return t.layer.type==="subtype-sublayer"}p([d()],D.prototype,"enabled",void 0),p([d()],D.prototype,"enabledToggled",void 0),p([d()],D.prototype,"forceDisabled",void 0),p([d()],D.prototype,"selfEnabled",void 0),p([d()],D.prototype,"featureEnabled",void 0),p([d()],D.prototype,"gridEnabled",void 0),p([d()],D.prototype,"attributeRulesEnabled",void 0),p([d({type:xe.ofType(ae)})],D.prototype,"featureSources",void 0),p([d()],D.prototype,"distance",void 0),p([d()],D.prototype,"touchSensitivityMultiplier",void 0),p([d({readOnly:!0})],D.prototype,"effectiveEnabled",null),p([d({readOnly:!0})],D.prototype,"effectiveGridEnabled",null),p([d({readOnly:!0})],D.prototype,"effectiveSelfEnabled",null),p([d({readOnly:!0})],D.prototype,"effectiveFeatureEnabled",null),p([d({readOnly:!0})],D.prototype,"_effectiveFeatureSources",null),D=p([De("esri.views.interactive.snapping.SnappingOptions")],D);function fs(t,e,s){return k(t,e,s)}function k(t=0,e=0,s=0){return Ae(t,e,s)}function Xr(t){return t}function Kr(t){return t}function pe(t,e,s){return Ae(t,e,s)}function me(t){const[e,s,n]=t;return t.length>3?[e,s,n,t[3]]:[e,s,n]}function ht(t){return t[3]=1|((t.length>3?t[3]:void 0)??0),t}function Jr(t){return!!(1&((t.length>3?t[3]:void 0)??0))}function Ht(t,e,{coordinateHelper:s,elevationInfo:n},i){return t?be(s.vectorToDehydratedPoint(t,ni),e,n,i):null}function be(t,e,s,n=k()){return n[0]=t.x,n[1]=t.y,n[2]=t.z??0,e==null||(e.type==="2d"?n[2]=0:n[2]=hn(e,t,s,ye)??0),n}function ea(t,e,s){return s?(ts(s,t[0],t[1],t[2],e),s):Ce(t[0],t[1],t[2],e)}function At(t,e,{z:s,m:n},i,r){const{spatialReference:a,elevationInfo:o}=i;let l;s==null&&n==null?l=void 0:e==null||e.type==="2d"?l=s??void 0:l=es(e,t,a,ye,o)??0;const[u,h]=t;return r?ts(r,u,h,l,a):r=Ce(u,h,l,a),n!=null&&(r.m=n,r.hasM=!0),r}function ta(t,e,s,n,i=k()){const[r,a]=t;return i[0]=r,i[1]=a,t.length>3&&(i[3]=t[3]??0),s?.type!=="3d"?(i[2]=e.value,i):(i[2]=pn(s,r,a,e.value,n,e.elevationInfo,ye)??0,i)}const ni=Ce(0,0,0,null),sa=Symbol("grid-placement-graphic");function gs(t,e){const s=t.x-e.x,n=t.y-e.y;return s*s+n*n}function na(t,e){return Math.sqrt(gs(t,e))}function ii(t,e){e.sort((s,n)=>_t(s.targetPoint,t)-_t(n.targetPoint,t))}function ia({parameters:{point:t,distance:e,returnEdge:s,vertexMode:n,coordinateHelper:{spatialReference:i},filter:r},mode:a,returnZ:o,filter:l}){const u=l?.clone()??new Sn({where:"1=1"});return u.returnZ=o??a==="3d",r&&(u.geometry=r.geometry,u.distance=r.distance,u.spatialRelationship=r.spatialRelationship,u.where=fn(u.where,r.where),u.timeExtent=gn(u.timeExtent,r.timeExtent),u.objectIds=ri(u.objectIds,r.objectIds)),{point:Ce(t[0],t[1],t[2],i.toJSON()),mode:a,distance:e,returnEdge:s,vertexMode:n,query:u.toJSON()}}function ri(t,e){return t||e?e?t?Array.from(en(new Set(t),new Set(e))):e:t:null}function ra(t,e,s){return{left:Ht(t.leftVertex.pos,e,s),right:Ht(t.rightVertex.pos,e,s)}}const Ft=Symbol("snapping-toggle");function aa(t,e=()=>{}){const s=jt(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:n,snappingOptions:i})=>{if(t.removeHandles(Ft),!n||!i)return;const r=wn.TOOL,a=[n.on("key-down",o=>{o.key!==Ut.toggle||o.repeat||(i.enabledToggled=!0,e())},r),n.on("key-up",o=>{o.key===Ut.toggle&&(i.enabledToggled=!1,e())},r),n.on("pointer-move",o=>{const l=o.native.ctrlKey;i.enabledToggled!==l&&(i.enabledToggled=l,e())},r)];t.addHandles(a,Ft)},Jt);t.addHandles(s)}function oa(t){return bn(t)&&"utilityNetworks"in t&&!!t.utilityNetworks?.length}function la(t){return t?.type==="line"}function ys(t){if(!t)return null;const e=t.wkid;if(e)return un[e];const s=t.wkt2??t.wkt;return s?ai(s):null}function ai(t){const e=cn.exec(t);if(!e||e.length!==2)return null;const s=e[1].split(",");if(!s||s.length<3)return null;const n=parseFloat(s[1]),i=parseFloat(s[2]);return isNaN(n)||isNaN(i)?null:{a:n,f:i===0?0:1/i}}function et(t){const e=ys(t);if(oi(e))return e;const s=e.a*(1-e.f);return Object.assign(e,{b:s,eSq:1-(s/e.a)**2,radius:(2*e.a+s)/3,densificationRatio:1e4/((2*e.a+s)/3)})}function oi(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function qe(t,e,s){const{a:n,eSq:i}=et(s),r=Math.sqrt(i),a=Math.sin(e[1]*L),o=n*e[0]*L;let l;return i>0?l=n*((1-i)*(a/(1-i*(a*a))-1/(2*r)*Math.log((1-r*a)/(1+r*a))))*.5:l=n*a,t[0]=o,t[1]=l,t}function ve(t){return In(t)&&!!ys(t)}function ua(t,e="square-meters"){if(t.some(a=>!ve(a.spatialReference)))throw new Te("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=o.spatialReference,{radius:u,densificationRatio:h}=et(l),c=u*h;s.push(ui(o,c))}const n=[],i=[0,0],r=[0,0];for(let a=0;a<s.length;a++){const{rings:o,spatialReference:l}=s[a];let u=0;for(let h=0;h<o.length;h++){const c=o[h];qe(i,c[0],l),qe(r,c[c.length-1],l);let g=r[0]*i[1]-i[0]*r[1];for(let f=0;f<c.length-1;f++)qe(i,c[f+1],l),qe(r,c[f],l),g+=r[0]*i[1]-i[0]*r[1];u+=g}u=rs(u,"square-meters",e),n.push(u/-2)}return n}function li(t,e="meters"){if(!t)throw new Te("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(n=>!ve(n.spatialReference)))throw new Te("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const s=[];for(let n=0;n<t.length;n++){const i=t[n],{spatialReference:r}=i,a=i.type==="polyline"?i.paths:i.rings;let o=0;for(let l=0;l<a.length;l++){const u=a[l];let h=0;for(let c=1;c<u.length;c++){const g=u[c-1][0],f=u[c][0],m=u[c-1][1],v=u[c][1];if(m!==v||g!==f){const j=new Ee;ze(j,[g,m],[f,v],r),h+=j.distance}}o+=h}o=rs(o,"meters",e),s.push(o)}return s}function ui(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new Te("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:s}=t;if(!ve(s))throw new Te("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n=t.type==="polyline"?t.paths:t.rings,i=[],r=[0,0],a=new Ee;for(const l of n){const u=[];i.push(u),u.push([l[0][0],l[0][1]]);let h,c,g=l[0][0],f=l[0][1];for(let m=0;m<l.length-1;m++){if(h=l[m+1][0],c=l[m+1][1],g===h&&f===c)continue;const v=[g,f];ze(a,[g,f],[h,c],s);const{azimuth:j,distance:x}=a,P=x/e;if(P>1){for(let E=1;E<=P-1;E++)ge(r,v,j,E*e,s),u.push(r.slice());ge(r,v,j,(x+Math.floor(P-1)*e)/2,s),u.push(r.slice())}ge(r,v,j,x,s),u.push(r.slice()),g=r[0],f=r[1]}}const o=nn(as,s);return t.type==="polyline"?new os({paths:i,spatialReference:o}):new En({rings:i,spatialReference:o})}let Ee=class{constructor(t=0,e=void 0,s=void 0){this.distance=t,this.azimuth=e,this.reverseAzimuth=s}};function ge(t,e,s,n,i){const r=e[0],a=e[1],o=r*L,l=a*L,u=(s??0)*L,{a:h,b:c,f:g}=et(i),f=Math.sin(u),m=Math.cos(u),v=(1-g)*Math.tan(l),j=1/Math.sqrt(1+v*v),x=v*j,P=Math.atan2(v,m),E=j*f,N=E*E,C=1-N,w=C*(h*h-c*c)/(c*c),O=1+w/16384*(4096+w*(w*(320-175*w)-768)),U=w/1024*(256+w*(w*(74-47*w)-128));let q,Z,z,I=n/(c*O),Se=2*Math.PI;for(;Math.abs(I-Se)>1e-12;)z=Math.cos(2*P+I),q=Math.sin(I),Z=Math.cos(I),Se=I,I=n/(c*O)+U*q*(z+U/4*(Z*(2*z*z-1)-U/6*z*(4*q*q-3)*(4*z*z-3)));const V=x*q-j*Z*m,Y=Math.atan2(x*Z+j*q*m,(1-g)*Math.sqrt(N+V*V)),de=g/16*C*(4+g*(4-3*C)),at=Math.atan2(q*f,j*Z-x*q*m)-(1-de)*g*E*(I+de*q*(z+de*Z*(2*z*z-1)));return t[0]=(o+at)/L,t[1]=Y/L,t}function ze(t,e,s,n){const i=e[0]*L,r=e[1]*L,a=s[0]*L,o=s[1]*L,{a:l,b:u,f:h,radius:c}=et(n),g=a-i,f=Math.atan((1-h)*Math.tan(r)),m=Math.atan((1-h)*Math.tan(o)),v=Math.sin(f),j=Math.cos(f),x=Math.sin(m),P=Math.cos(m);let E,N,C,w,O,U,q,Z,z,I,Se=1e3,V=g;do{if(q=Math.sin(V),Z=Math.cos(V),C=Math.sqrt(P*q*(P*q)+(j*x-v*P*Z)*(j*x-v*P*Z)),C===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;O=v*x+j*P*Z,U=Math.atan2(C,O),z=j*P*q/C,N=1-z*z,w=O-2*v*x/N,isNaN(w)&&(w=0),I=h/16*N*(4+h*(4-3*N)),E=V,V=g+(1-I)*h*z*(U+I*C*(w+I*O*(2*w*w-1)))}while(Math.abs(V-E)>1e-12&&--Se>0);if(Se===0){const Zs=c,Gs=Math.acos(Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(a-i))*Zs,$t=a-i,Ws=Math.sin($t)*Math.cos(o),Qs=Math.cos(r)*Math.sin(o)-Math.sin(r)*Math.cos(o)*Math.cos($t),Ys=Math.atan2(Ws,Qs);return t.azimuth=Ys/L,t.distance=Gs,t.reverseAzimuth=void 0,t}const Y=N*(l*l-u*u)/(u*u),de=Y/1024*(256+Y*(Y*(74-47*Y)-128)),at=u*(1+Y/16384*(4096+Y*(Y*(320-175*Y)-768)))*(U-de*C*(w+de/4*(O*(2*w*w-1)-de/6*w*(4*C*C-3)*(4*w*w-3)))),As=Math.atan2(P*Math.sin(V),j*x-v*P*Math.cos(V)),Fs=Math.atan2(j*Math.sin(V),j*x*Math.cos(V)-v*P);return t.azimuth=As/L,t.distance=at,t.reverseAzimuth=Fs/L,t}function ca(t){return ve(t)?t:Tt(t)?as.WGS84:null}function Pt({start:t,end:e,type:s},n,i){const r=[],a=he(Le,e,t),o=he(tt,t,n),l=Ge(a),u=2*Ke(a,o),h=u*u-4*l*(Ge(o)-i*i);if(h===0){const c=-u/(2*l);(s===0||c>=0)&&r.push(Ue(fe(),t,a,c))}else if(h>0){const c=Math.sqrt(h),g=(-u+c)/(2*l);(s===0||g>=0)&&r.push(Ue(fe(),t,a,g));const f=(-u-c)/(2*l);(s===0||f>=0)&&r.push(Ue(fe(),t,a,f))}return r}function ms(t,e){const s=t.start,n=t.end,i=he(Le,n,s),r=ce(nt,-i[1],i[0],0),a=e.start,o=e.end,l=$(Ct,o,a),u=B(l,r),h=ce(Ms,s[0],s[1],0),c=$(Ts,h,a),g=B(c,r),f=Pe();if(Math.abs(u)<f)return[];const m=R(Ps,a,l,g/u);if(e.type===0){const v=$(bt,m,a);if(B(v,l)<-f)return[]}if(t.type===1){const v=Cn(tt,m,s);if(Ke(v,i)<-f)return[]}return[oe(m)]}function ci(t,e){return pi(Qe(Rt,e[2],t),e)}function vs(t,e){return bs(Qe(Rt,0,t),Qe(yi,0,e)).map(([s,n])=>Ie(s,n))}function js(t,e,s){return Ss(t,Qe(Rt,t[2],e),s)}function _s(t,e,s,n=y()){const i=he(Le,t,e),r=Dn(i);return Ue(n,e,i,r===0?1:s/r),n[2]=t[2],n}function Ss(t,{start:e,end:s,type:n},i=y()){const r=$(st,t,e),a=$(nt,s,e),o=B(r,a)/B(a,a);return R(i,e,a,n===0?Math.max(o,0):o)}const hi=(()=>{const t=y(),e=y(),s=y();return({start:n,end:i},{center:r,radius:a,normal:o,slicePlane:l})=>{const u=Je(r,o,gi);if(_(wt(u,n),0)&&_(wt(u,i),0)){us(o,t,e);const c=(m,v)=>(Xe(s,v,r),ns(m,B(s,t),B(s,e)),m),g=Qn({start:c(Le,n),end:c(tt,i)},zn,a),f=[];for(const[m,v]of g){const j=Mt(y(),r);R(j,j,t,m),R(j,j,e,v),l&&!ue(l,j)||f.push(j)}return f}const h=y();return ls(u,n,i,h)?!_(Me(h,r),a)||l&&!ue(l,h)?[]:[h]:[]}})();function ws({start:t,end:e,type:s},n,i){const r=[],a=Xe(st,e,t),o=he(tt,t,n),l=Ge(a),u=2*Ke(a,o),h=u*u-4*l*(Ge(o)-i*i);if(h===0){const c=-u/(2*l);(s===1||c>=0)&&r.push(R(y(),t,a,c))}else if(h>0){const c=Math.sqrt(h),g=(-u+c)/(2*l);(s===1||g>=0)&&r.push(R(y(),t,a,g));const f=(-u-c)/(2*l);(s===1||f>=0)&&r.push(R(y(),t,a,f))}return r}function bs(t,e){const s=t.start,n=t.end,i=e.start,r=e.end,a=$(st,n,s),o=$(nt,r,i),l=$(Ct,i,s),u=Ze(Ms,a,o);if(!_(B(l,u),0))return[];const h=St(u);if(_(h,0))return[];const c=Ze(Ts,l,o),g=B(c,u)/h,f=R(Ps,s,a,g);if(t.type===0){const m=$(bt,f,s);if(B(a,m)<-Pe())return[]}if(e.type===0){const m=$(bt,f,i);if(B(o,m)<-Pe())return[]}return[oe(f)]}function pi({start:t,end:e,type:s},n){const i=$(st,n,t),r=$(nt,e,t),a=Ze(Ct,r,i),o=St(a)/St(r),l=Pe();if(o<l)switch(s){case 1:return[oe(n)];case 0:return B(r,i)<-l?[]:[oe(n)]}return[]}function Dt(t,e,s,n){const[i,r]=t,[a,o]=s,l=a-i,u=o-r,h=l*l+u*u,c=Math.sqrt(h);if(c>e+n)return[];if(c<Math.abs(e-n))return[];if(_(c,0)&&_(e,n))return[];const g=(e*e-n*n+h)/(2*c),f=Math.sqrt(e*e-g*g),m=f*u/c,v=f*l/c,[j,x]=Rn(Le,t,s,g/c);return _(m,v)?[Ie(j,x)]:[Ie(j+m,x-v),Ie(j-m,x+v)]}function Qe(t,e,{start:s,end:n,type:i}){return ce(t.start,s[0],s[1],e),ce(t.end,n[0],n[1],e),t.type=fi[i],t}function xs(t,e){return _(t[2],e[2])}function _(t,e){return xn(Math.abs(t-e),0,Pe())}function di(t,e){return e.filter(s=>ue(t,s))}function ue(t,e){return An(t,e)}const fi={0:1,1:0},Le=fe(),tt=fe(),st=y(),nt=y(),Ct=y(),Ms=y(),Ts=y(),Ps=y(),bt=y(),gi=A(),Rt={start:y(),end:y(),type:1},yi={start:y(),end:y(),type:1};class F{intersect(e){return se(this,e)}closestPoints(e){return[this.closestTo(e)]}}class je extends F{constructor(e){super(),this.point=e}equals(e){return this===e||G(e)&&b(this.point,e.point)}closestTo(){return me(this.point)}}class Et extends F{constructor(e,s,n){super(),this.start=e,this.end=s,this.lineLike={start:e,end:s,type:n}}equals(e){return this===e||X(e)&&this.lineLike.type===e.lineLike.type&&b(this.start,e.start)&&b(this.end,e.end)}closestTo(e){const s=k();return Ss(e,this.lineLike,s),s}}class zt extends Et{constructor(e,s){super(e,s,1)}}class mi extends Et{constructor(e,s){super(e,s,0)}}class Ds extends F{constructor(e){super(),this.constraints=e}equals(e){return this===e||xt(e)&&sn(this.constraints,e.constraints,(s,n)=>s.equals(n))}closestTo(e){let s,n=1/0;for(const i of this.constraints){const r=i.closestTo(e),a=_t(e,r);a<n&&(n=a,s=r)}return me(s??e)}closestPoints(e){return this.constraints.flatMap(s=>s===this?[]:s.closestPoints(e))}}class Cs extends F{constructor(e,s){super(),this.center=e,this.radius=s}equals(e){return this===e||J(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const s=k();return _s(e,this.center,this.radius,s),s}}class Lt extends F{constructor(e,s){super(),this.center=e,this.radius=s}equals(e){return this===e||ie(e)&&b(this.center,e.center)&&this.radius===e.radius}closestTo(e){const s=k();return _s(e,this.center,this.radius,s),s[2]=this.center[2],s}asCircle(){return new qt(me(this.center),this.radius,pe(0,0,1))}}class qt extends F{constructor(e,s,n,i=void 0){super(),this.center=e,this.radius=s,this.normal=n,this.slicePlane=i}equals(e){return this===e||le(e)&&b(this.center,e.center)&&b(this.normal,e.normal)&&this.radius===e.radius}closestTo(e){const{center:s,radius:n}=this;cs(this.getPlane(vi),e,pt);const i=$(pt,pt,s),r=jn(i);if(_(r,0))return me(e);const a=n/Math.sqrt(r),o=k();R(o,s,i,a);const{slicePlane:l}=this;return l&&!ue(l,o)?Nt(l,this)?.closestTo(e)??me(e):o}getPlane(e=A()){return Je(this.center,this.normal,e)}}const pt=y(),vi=A();class ji extends F{constructor(e){super(),this.z=e}equals(e){return this===e||ne(e)&&this.z===e.z}closestTo(e){return pe(e[0],e[1],this.z)}getPlane(e=A()){return ce(Zt,0,0,this.z),Je(Zt,dn,e)}}const Zt=y();class Bt extends F{constructor(e,s,n){super(),this.start=e,this.end=s,this.planeLike={start:e,end:s,type:n}}equals(e){return this===e||K(e)&&this.planeLike.type===e.planeLike.type&&b(this.start,e.start)&&b(this.end,e.end)}closestTo(e){const s=k();return js(e,this.planeLike,s),s}closestEndTo(e){const{start:s,end:n}=this.planeLike;return Math.sign(Ke(he(_i,n,s),he(Si,e,s)))>0?this.end:this.start}getPlane(e=A()){const s=Mt(Gt,this.end);return s[2]+=1,Vn(this.start,this.end,s,e)}getSlicePlane(e=A()){const{start:s,end:n,type:i}=this.planeLike;if(i===0)return;const r=ce(Gt,s[0],s[1],0),a=ce(Wt,n[0],n[1],0),o=Xe(Wt,a,r);return Je(r,o,e),e}}const _i=fe(),Si=fe(),Gt=y(),Wt=y();class ha extends Bt{constructor(e,s){super(e,s,1)}}class Rs extends Bt{constructor(e,s){super(e,s,0)}}class wi extends F{constructor(e,s){super(),this.sphere=Zn(e,s),this._center=oe(e)}equals(e){return this===e||re(e)&&Gn(this.sphere,e.sphere)}closestTo(e){const s=k();return Wn(this.sphere,e,s),s}get center(){return this._center}get radius(){return this.sphere[3]}}class Es extends F{constructor(e,s,n){super(),this.start=e,this.end=s,this.getZ=n,this.planeLike={start:e,end:s,type:0}}equals(e){return this===e||Ye(e)&&b(this.start,e.start)&&b(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return Di(this,e)}addIfOnTheGround(e,s){for(const n of s){const i=this.getZ(n[0],n[1])??0;_(n[2],i)&&(n[2]=i,e.push(n))}}}class bi extends F{constructor(e,s,n){super(),this._x=e,this._y=s,this._z=n}equals(e){return this===e||Ai(e)&&this._x===e._x&&this._y===e._y&&this._z===e._z}closestTo([e,s,n]){return fs(this._x??e,this._y??s,this._z??n)}}class xi extends F{constructor(e,s,n,i,r){super(),this._origin=e,this._spatialReference=s,this._distanceMeters=n,this._z=i,this._directionDegrees=r}equals(e){return this===e||Hi(e)&&It(this._origin,e._origin)&&this._spatialReference===e._spatialReference&&this._distanceMeters===e._distanceMeters&&this._z===e._z&&this._directionDegrees===e._directionDegrees}closestTo([e,s,n]){return ns(we,e,s),It(we,this._origin)||this._applyDirectionAndDistance(we),fs(we[0],we[1],this._z??n)}_applyDirectionAndDistance(e){if(this._directionDegrees!=null&&this._distanceMeters!=null)ge(e,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)Ti(e,this._origin,this._directionDegrees,e,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:s}=ze(Mi,this._origin,e,this._spatialReference);ge(e,this._origin,s??0,this._distanceMeters,this._spatialReference)}}}const we=[0,0],Mi=new Ee;function Ti(t,e,s,n,i){let{azimuth:r,distance:a}=ze(Pi,e,n,i);r??=0;let o=a*Math.cos((r-s)*L);o=Math.max(0,o),ge(t,e,s,o,i)}const Pi=new Ee;function Di(t,e){const s=k();return js(e,t.planeLike,s),s[2]=t.getZ(s[0],s[1])??Ls,s}function se(t,e){if(xt(t)){const s=[];for(const n of t.constraints){const i=n.intersect(e);i&&s.push(i)}return Ot(s)}if(xt(e))return se(e,t);if(Ye(t))return Qt(t,e);if(Ye(e))return Qt(e,t);if(G(t)){const{point:s}=t;if(G(e))return b(s,e.point)?t:void 0;const n=e.closestTo(s);return vn(n,s)?t:void 0}if(X(t)){if(G(e))return se(e,t);if(X(e))return Q(bs(t.lineLike,e.lineLike));if(ne(e))return Ci(t,e);if(K(e))return Q(ms(e.planeLike,t.lineLike));if(J(e))return Q(ws(t.lineLike,e.center,e.radius));if(le(e))return Q(hi(t.lineLike,e));if(ie(e))return Ri(t,e);if(re(e))return Ei(t,e)}else if(ne(t)){if(G(e)||X(e))return se(e,t);if(ne(e))return zi(t,e);if(K(e))return Li(t,e);if(J(e))return qi(t,e);if(le(e))return Ni(t,e);if(ie(e))return Bi(t,e);if(re(e))return Oi(t,e)}else if(K(t)){if(G(e)||X(e)||ne(e))return se(e,t);if(K(e))return dt(vs(t.planeLike,e.planeLike));if(J(e))return dt(Pt(t.planeLike,e.center,e.radius));if(le(e))return ki(t,e);if(ie(e))return $i(t,e);if(re(e))return Ui(t,e)}else if(J(t)){if(G(e)||X(e)||ne(e)||K(e))return se(e,t);if(J(e))return dt(Dt(t.center,t.radius,e.center,e.radius));if(le(e))return;if(ie(e))return Ii(t,e);if(re(e))return}else if(le(t)){if(G(e)||X(e)||ne(e)||K(e)||J(e))return se(e,t);if(le(e))return;if(ie(e))return e.asCircle(),void 0;if(re(e))return}else if(ie(t)){if(G(e)||X(e)||ne(e)||K(e)||J(e)||le(e))return se(e,t);if(ie(e))return Vi(e,t);if(re(e))return}else if(re(t)){if(G(e)||X(e)||ne(e)||K(e)||J(e)||ie(e))return se(e,t);if(re(e))return}}const Ci=(()=>{const t=A();return(e,s)=>{const{start:n,end:i}=e;if(xs(n,i)&&_(n[2],s.z))return e;const r=k();return ls(s.getPlane(t),n,i,r)?new je(r):void 0}})();function Ri({lineLike:t},{center:e,radius:s}){const n=e[2];return Q(ws(t,e,s).filter(i=>_(i[2],n)))}function Ei({lineLike:t},{sphere:e}){return Q(Fn(e,t.start,t.end))}const Nt=(()=>{const t=Bn(),e=y(),s=y();return(n,i,r)=>{const{normal:a,center:o,radius:l}=i;us(a,e,s);const u=hs(n),h=l*B(u,e),c=l*B(u,s);Ln(t,o[0],o[1],o[2],1);const g=qn(n,t),f=Math.hypot(h,c),m=_(f,0);if(_(wt(n,o),0)){if(m)return i;if(_(l,0))return!r||ue(r,o)?new je(me(o)):void 0;Ze(e,u,a),_n(e,e);const w=new Array,O=oe(o);R(O,O,e,l),r&&!ue(r,O)||w.push(O);const U=oe(o);return R(U,U,e,-l),r&&!ue(r,U)||w.push(U),Q(w)}if(m)return;const v=-g/f;if(Math.abs(v)>1||_(v,1))return;const j=Math.atan(h/c),x=Mn(v)-j,P=Math.PI-x,E=new Array,N=y();R(N,o,e,l*Math.cos(x)),R(N,N,s,l*Math.sin(x)),E.push(N);const C=y();return R(C,o,e,l*Math.cos(P)),R(C,C,s,l*Math.sin(P)),E.push(C),Q(r?di(r,E):E)}})();function zi(t,e){return _(t.z,e.z)?t:void 0}function Li({z:t},{planeLike:e}){const[s,n]=e.start,[i,r]=e.end,a=pe(s,n,t),o=pe(i,r,t);return e.type===0?new zt(a,o):new mi(a,o)}function qi(t,e){const[s,n]=e.center;return new Lt(pe(s,n,t.z),e.radius)}function Bi(t,e){return _(e.center[2],t.z)?e:void 0}const Ni=(()=>{const t=A();return(e,s)=>Nt(e.getPlane(t),s,s.slicePlane)})();function Oi(t,{center:e,radius:s}){const n=Math.abs(e[2]-t.z);if(n>s&&!_(n,s))return;const i=pe(e[0],e[1],t.z),r=Math.sqrt(s**2-n**2);return _(r,0)?void 0:new Lt(i,r)}const $i=(()=>{const t=A();return(e,{center:s,radius:n})=>{const i=Pt(e.planeLike,s,n),r=s[2];e.getSlicePlane(t);const a=new Array;for(const[o,l]of i){const u=[o,l,r];ue(t,u)&&a.push(u)}return Q(a)}})(),ki=(()=>{const t=A(),e=A();return(s,n)=>Nt(s.getPlane(t),n,s.getSlicePlane(e))})(),Ui=(()=>{const t=A();return(e,{center:s,radius:n})=>{const i=e.getPlane(t),r=Hn(i,s),a=Math.abs(r);if(a>n&&!_(a,n))return;const o=Math.sqrt(n**2-r**2);if(_(o,0)){const h=k();return cs(i,s,h),new je(h)}const l=k(),u=oe(hs(i));return R(l,s,u,r),new qt(l,o,u,e.getSlicePlane())}})();function Ii(t,e){const s=ss(t.center,e.center);return _(s,0)&&_(t.radius,e.radius)?e:zs(Dt(t.center,t.radius,e.center,e.radius),e.center[2])}function Vi(t,e){if(!xs(t.center,e.center))return;const s=ss(t.center,e.center);return _(s,0)&&_(t.radius,e.radius)?t:zs(Dt(t.center,t.radius,e.center,e.radius),t.center[2])}function Qt(t,e){const{planeLike:s,getZ:n}=t,i=new Array;if(G(e))t.addIfOnTheGround(i,ci(s,e.point));else if(X(e))t.addIfOnTheGround(i,ms(s,e.lineLike));else if(J(e))for(const[r,a]of Pt(s,e.center,e.radius)){const o=n(r,a);o!=null&&i.push(Ae(r,a,o))}else if(K(e)||Ye(e))for(const[r,a]of vs(s,e.planeLike)){const o=n(r,a)??Ls;i.push(Ae(r,a,o))}return Q(i)}function dt(t){return Ot(t.map(([e,s])=>{const n=pe(e,s,0),i=pe(e,s,1);return new zt(n,i)}))}function Q(t){return Ot(t.map(e=>e?new je(e):void 0))}function zs(t,e){return Q(t.map(([s,n])=>[s,n,e]))}function Ot(t){if(t.length!==0)return t.length===1?t[0]??void 0:new Ds(t.filter(tn))}function xt(t){return t instanceof Ds}function G(t){return t instanceof je}function X(t){return t instanceof Et}function ne(t){return t instanceof ji}function K(t){return t instanceof Bt}function J(t){return t instanceof Cs}function ie(t){return t instanceof Lt}function le(t){return t instanceof qt}function re(t){return t instanceof wi}function Ye(t){return t instanceof Es}function Hi(t){return t instanceof xi}function Ai(t){return t instanceof bi}const Ls=0;let _e=class{constructor(t,e,s,n){this.targetPoint=t,this.constraint=e,this.isDraped=s,this.domain=n}},qs=class extends _e{constructor({targetPoint:t,objectId:e,constraint:s,isDraped:n}){super(t,s,n,1),this.objectId=e}},it=class{constructor(t,e){this.isDraped=t,this.domain=e}},ee=class Bs extends it{constructor(e,s,n,i,r=3,a=!0,o=!0){super(i,r),this.type=e,this.lineStart=s,this.lineEnd=n,this.fadeLeft=a,this.fadeRight=o}equals(e){return e instanceof Bs&&this.type===e.type&&b(this.lineStart,e.lineStart)&&b(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return Me(this.lineStart,this.lineEnd)}};class Fi extends qs{constructor(e){super({...e,isDraped:!0,constraint:new Es(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new ee(1,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}let Zi=class extends qs{constructor(t){super({...t,constraint:new zt(t.edgeStart,t.edgeEnd)})}get hints(){return[new ee(1,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Gi=class Ns extends it{constructor(e,s,n=3){super(s,n),this.intersectionPoint=e}equals(e){return e instanceof Ns&&b(this.intersectionPoint,e.intersectionPoint)}},He=class extends _e{constructor(t,e,s,n){super(t,new je(t),n,3),this.first=e,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new Gi(this.targetPoint,this.isDraped,this.domain)]}},Wi=class extends _e{constructor({lineStart:t,lineEnd:e,targetPoint:s,isDraped:n}){super(s,new Rs(t,e),n,2),this._referenceLineHint=new ee(2,t,e,n,this.domain)}get hints(){return[this._referenceLineHint,new ee(0,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},Qi=class Os extends it{constructor(e,s,n,i=3){super(n,i),this.lineStart=e,this.lineEnd=s}equals(e){return e instanceof Os&&b(this.lineStart,e.lineStart)&&b(this.lineEnd,e.lineEnd)}},Yi=class extends _e{constructor({referenceLine:t,lineStart:e,targetPoint:s,isDraped:n}){const i=oe(e),{left:r,right:a}=t;Xe(i,yn(i,i,a),r),super(s,new Rs(e,i),n,2),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new ee(0,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new Qi(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(t=>new ee(1,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight))]}addReferenceLine(t){const e={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(s=>{b(t.right,s.edge.left)&&(s.fadeLeft=!1,e.fadeRight=!1),b(t.right,s.edge.right)&&(s.fadeRight=!1,e.fadeRight=!1),b(t.left,s.edge.right)&&(s.fadeRight=!1,e.fadeLeft=!1),b(t.left,s.edge.left)&&(s.fadeLeft=!1,e.fadeLeft=!1)}),this._referenceLines.push(e)}},$s=class ks extends it{constructor(e,s,n,i,r=3){super(i,r),this.previousVertex=e,this.centerVertex=s,this.nextVertex=n}equals(e){return e instanceof ks&&b(this.previousVertex,e.previousVertex)&&b(this.centerVertex,e.centerVertex)&&b(this.nextVertex,e.nextVertex)}},Xi=class extends _e{constructor({targetPoint:t,constraint:e,previousVertex:s,otherVertex:n,otherVertexType:i,isDraped:r,selfSnappingType:a,objectId:o,domain:l}){super(t,e,r,l??2),this.previousVertex=s,this.otherVertex=n,this.otherVertexType=i,this.selfSnappingType=a??0,this.objectId=o??null}get hints(){const t=this.previousVertex,e=this.otherVertexType===1?this.otherVertex:this.targetPoint,s=this.otherVertexType===1?this.targetPoint:this.otherVertex;return[new ee(0,e,s,this.isDraped,this.domain),new ee(1,t,e,this.isDraped,this.domain),new $s(this.previousVertex,e,s,this.isDraped,this.domain)]}},Ki=class extends _e{constructor({targetPoint:t,point1:e,point2:s,isDraped:n}){super(t,new Cs(mn(y(),e,s,.5),.5*Pn(e,s)),n,2),this._p1=e,this._p2=s}get hints(){return[new ee(1,this.targetPoint,this._p1,this.isDraped,this.domain),new ee(1,this.targetPoint,this._p2,this.isDraped,this.domain),new $s(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};function pa(t,e,s,n){const i=s.projectToRenderScreen(t,tr),r=s.projectToRenderScreen(e,sr);return i==null||r==null?null:(he(n,r,i),Tn(n,n),n)}function Ji(t,e,s,n,i=y()){const r=Mt(er,t);return r[2]=es(n,r,e,s)||0,n.renderCoordsHelper.toRenderCoords(r,e,i),i}const er=y(),tr=ps(),sr=ps();function nr(t,e,s,n){return n.type==="2d"?(Be.x=t[0],Be.y=t[1],Be.spatialReference=e,n.toScreen(Be)):(Ji(t,e,s,n,Yt),n.state.camera.projectToScreen(Yt,ft),Yn(ft[0],ft[1]))}const Be=Ce(0,0,0,null),Yt=y(),ft=Xn();function da(t){return ve(t)||Tt(t)}function Us(t,e,s,...n){return ve(t)?e.apply(void 0,n):t.isWebMercator?s.apply(void 0,n):null}const fa=1e5;function ir(t){const{spatialReference:e}=t;return Us(e,cr,hr,t)}function rr(t,e){if(!Re(t.spatialReference,e.spatialReference))return null;const{spatialReference:s}=t;return Ne[0]=t.x,Ne[1]=t.y,Ne[2]=t.hasZ?t.z:0,Oe[0]=e.x,Oe[1]=e.y,Oe[2]=e.hasZ?e.z:0,Is(Ne,Oe,s)}function Is(t,e,s){return Us(s,lr,ur,t,e,s)}const ar={geodesicLength:ir,geodesicDistanceBetweenPoints:rr,geodesicDistance:Is};async function or(){return await Kn(),ar}function lr(t,e,s){return H(ze(dr,t,e,s).distance,"meters")}function ur(t,e,s){return H(ds(pr(t,e,s),{unit:"meters"}),"meters")}function cr(t){return H(li([t],"meters")[0],"meters")}function hr(t){return H(ds(t,{unit:"meters"}),"meters")}function pr(t,e,s){return new os({spatialReference:s,paths:[[[...t],[...e]]]})}const dr=new Ee,Ne=y(),Oe=y();let te=class extends an{constructor(t){super(t),this.options=new D,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=0}initialize(){this.addHandles([jt(()=>{const{distance:t,touchSensitivityMultiplier:e,effectiveSelfEnabled:s,effectiveFeatureEnabled:n,effectiveGridEnabled:i}=this.options;return{selfEnabled:s,featureEnabled:n,gridEnabled:this.view.type==="2d"&&i,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:t,touchSensitivityMultiplier:e}},(t,e)=>{e&&(this.doneSnapping(),this.emit("changed")),this._loadTask?.abort(),this._loadTask=rn(s=>this._updateEngines(t,e,s))},Jt),jt(()=>this.options,t=>{for(const e of this._engines)e.options=t},on)])}destroy(){this._loadTask?.abort(),this._destroyEngines()}get updating(){return this._engines.some(t=>t.updating)||!this._loadTask?.finished}_destroyEngines(){this._engineCache.forEach(t=>t.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(t,e,s){if(!t.viewReady)return void this._destroyEngines();e?.viewSpatialReference!==t.viewSpatialReference&&this._destroyEngines();const n=this._engineCache,i=await Promise.allSettled([t.featureEnabled&&!n.has("feature")?this._createFeatureSnappingEngine(s):void 0,t.selfEnabled&&!n.has("self")?this._createSelfSnappingEngine(s):void 0,t.gridEnabled&&!n.has("grid")?this._createGridSnappingEngine(s):void 0]);if(s.aborted)for(const r of i)r.status==="fulfilled"&&r.value?.engine.destroy();else{for(const r of i)r.status==="fulfilled"&&r.value&&n.set(r.value.type,r.value.engine);this._engines=Array.from(n.values())}}async _createSelfSnappingEngine(t){const[{SelfSnappingEngine:e},s]=await Promise.all([ot(()=>lt(()=>import("./SelfSnappingEngine-Du5ij8bo-BYG79SID.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154])),Ve([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155])),or()]);return ut(t),{type:"self",engine:new e({view:this.view,options:this.options,geodesicLengthMeasurementUtils:s})}}async _createGridSnappingEngine(t){const{view:e}=this;if(e.type!=="2d")return;const{GridSnappingEngine:s}=await ot(()=>lt(()=>import("./GridSnappingEngine-BrpXC0if-BAp3APmm.js"),__vite__mapDeps([155,1,11,5,3,4,6,15,2,7,8,9,16,17,38,39,49,10,50,51,52,53,86,93,126,44,45,47,46,30,67,110,55,111,112,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,40,41,42,43,48,54,56,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,113,114,115,116,117,118,119,120,121,122,123,124,125,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,152,153,154,151])),Ve([156,1,11,5,6,3,4,15,2,7,8,9,16,17,38,39,49,10,50,51,52,53,87,94,135,127,44,45,47,46,30,68,111,55,112,113,12,13,14,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,40,41,42,43,48,54,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,88,89,90,91,92,93,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,114,115,116,117,118,119,120,121,122,123,124,125,126,128,129,130,131,132,133,134,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,153,152,154,155]));return ut(t),{type:"grid",engine:new s({view:e,options:this.options})}}async _createFeatureSnappingEngine(t){const{FeatureSnappingEngine:e}=await ot(()=>lt(()=>import("./FeatureSnappingEngine-BAl7xoIm-E9b7xkAo.js"),__vite__mapDeps([156,3,4,1,12,13,14,15,2,5,6,7,8,9,16,17,11,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,10,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,157,158,152,153,154,151])),Ve([157,3,4,1,12,13,14,15,2,5,6,7,8,9,16,17,11,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,10,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,158,159,153,152,154,155]));ut(t);const{view:s,options:n}=this,{spatialReference:i}=s;return{type:"feature",engine:new e({view:s,options:n,spatialReference:i})}}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:e}=this.options,s=t*e;return s*s}snap(t){return yr(t)?this._snapMultiPoint(t):this._snapSinglePoint(t)}update(t){const{point:e,context:s}=t;this._removeVisualization();const n=this._currentMainCandidate;if(n==null)return e;const i=this._selectUpdateInput(t);if(i==null)return e;const{spatialReference:r}=s,a=kt(i,r);if(a==null)return e;const{view:o}=this,{elevationInfo:l,visualizer:u}=s,h=[],c=be(a,o,l),g=n.constraint.closestTo(c);if(!this._arePointsWithinScreenThreshold(c,g,s)||!yt(n,s.drawConstraints))return this._resetSnappingState(),e;n.targetPoint=ht(g),h.push(...n.hints);for(const f of this._currentOtherActiveCandidates)yt(f,s.drawConstraints)&&(f.targetPoint=ht(g),h.push(...f.hints));return u!=null&&this.addHandles(u.draw(h,{spatialReference:r,elevationInfo:mr(s),view:o,selfSnappingZ:s.selfSnappingZ}),gt),At(g,o,e,s)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:t,scenePoint:e}){switch(this._currentSnappedType){case 0:return t;case 1:return e}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=0}_removeVisualization(){this.removeHandles(gt)}async _snapSinglePoint({point:t,context:e,signal:s}){const{view:n}=this,{elevationInfo:i}=e,r=be(t,n,i),a=await this._fetchCandidates(r,3,e,s);return this._createSnapResult(r,0,a,n,t,e,s)}async _snapMultiPoint({point:t,scenePoint:e,context:s,signal:n}){const{view:i}=this,{coordinateHelper:r,elevationInfo:a,spatialReference:o}=s;await ln(e.spatialReference,o);const l=kt(e,o),u=be(l,i,a),h=await this._fetchCandidates(u,1,s,n);if(h.length>0){const f=await this._fetchCandidates(u,2,s,n);return this._createSnapResult(u,1,[...h,...f],i,l,s,n)}const c=be(t,i,a),g=await this._fetchCandidates(c,2,s,n);return this._createSnapResult(c,0,g,i,{z:r.hasZ()&&t.hasZ?t.z??0:void 0,m:r.hasM()&&t.hasM?t.m??0:void 0},s,n)}async _fetchCandidates(t,e,s,n){return(await Promise.all(this._engines.map(i=>i.fetchCandidates(t,e,s,n)))).flat()}_createSnapResult(t,e,s,n,i,r,a){return{get valid(){return!Js(a)},apply:()=>{const{spatialReference:o}=r,{snappedPoint:l,hints:u}=this._processCandidates(t,e,s,r);return this._removeVisualization(),r.visualizer!=null&&this.addHandles(r.visualizer.draw(u,{spatialReference:o,elevationInfo:ye,view:n,selfSnappingZ:r.selfSnappingZ}),gt),At(l,n,i,r)}}}_processCandidates(t,e,s,n){if(s.length<1)return this.doneSnapping(),{snappedPoint:t,hints:[]};this._currentSnappedType!==e&&this._resetSnappingState(),ii(t,s);const i=this._currentMainCandidate;if(i!=null){const r=gr(i,s);if(r>=0){if(!(s[r]instanceof He))return this._intersectWithOtherCandidates(r,s,t,e,n);if(this._arePointsWithinScreenThreshold(t,i.targetPoint,n))return this._updateSnappingCandidate(i,e,s,n)}}return this._intersectWithOtherCandidates(0,s,t,e,n)}_intersectWithOtherCandidates(t,e,s,n,i){const{coordinateHelper:r}=i,a=e[t],o=[];for(let l=0;l<e.length;++l){if(l===t)continue;const u=e[l],h=a.constraint.intersect(u.constraint);if(h)for(const c of h.closestPoints(a.targetPoint))o.push([new He(ht(c),a,u,u.isDraped),this._squaredScreenDistance(s,c,r)])}return o.length>0&&(o.sort((l,u)=>l[1]-u[1]),o[0][1]<this._squaredPointProximityThreshold(i.pointer))?this._updateSnappingCandidate(o[0][0],n,e,i):yt(a,i.drawConstraints)?this._updateSnappingCandidate(a,n,e,i):{snappedPoint:s,hints:[]}}_updateSnappingCandidate(t,e,s,n){this.doneSnapping(),this._currentMainCandidate=t,this._currentSnappedType=e;const i=this._currentMainCandidate.targetPoint,r=[];r.push(...t.hints);for(const a of s){if(t instanceof He){if(a.constraint.equals(t.first.constraint)||a.constraint.equals(t.second.constraint))continue}else if(a.constraint.equals(t.constraint))continue;const o=a.constraint.closestTo(i);this._squaredScreenDistance(o,i,n.coordinateHelper)<fr()&&(a.targetPoint=i,this._currentOtherActiveCandidates.push(a),r.push(...a.hints))}return{snappedPoint:i,hints:r}}_squaredPointProximityThreshold(t){return t==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(t,e,s){return this._squaredScreenDistance(t,e,s.coordinateHelper)<this._squaredPointProximityThreshold(s.pointer)}_squaredScreenDistance(t,e,s){return gs(this._toScreen(t,s),this._toScreen(e,s))}_toScreen(t,e){return nr(t,e.spatialReference,ye,this.view)}get test(){}};p([d({constructOnly:!0})],te.prototype,"view",void 0),p([d()],te.prototype,"options",void 0),p([d({readOnly:!0})],te.prototype,"updating",null),p([d()],te.prototype,"_loadTask",void 0),p([d()],te.prototype,"_engines",void 0),p([d()],te.prototype,"_squaredMouseProximityThreshold",null),p([d()],te.prototype,"_squaredTouchProximityThreshold",null),te=p([De("esri.views.interactive.snapping.SnappingManager")],te);const gt="visualization-handle";function fr(){return We.satisfiesConstraintScreenThreshold*We.satisfiesConstraintScreenThreshold}function yt(t,e){return!e||e.direction==null&&e.distance==null||!(t instanceof Fi||t instanceof Zi||t instanceof Wi||t instanceof Yi||t instanceof Ki)&&(!(t instanceof Xi)||e.direction==null&&t.selfSnappingType===1)}function gr(t,e){return t instanceof He?mt(e,t.first)>=0&&mt(e,t.second)>=0?0:-1:mt(e,t)}function mt(t,e){let s=-1;for(let n=0;n<t.length;++n)if(e.constraint.equals(t[n].constraint)){s=n;break}return s}function yr(t){return t.scenePoint!=null}function mr({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?ye:e}function Vs(t){return On(t)?$n(t)||Tt(t)||kn(t)||Un(t)?Jn:t:ei(t)}function ga(t){return vr(t)}function vr(t,e){const{hasZ:s,spatialReference:n}=t,i=Vs(n);let r=0;const a=is(i);if(a==null)return null;const o=Hs;for(const l of t.paths){if(l.length<2)continue;const u=l.length-1;for(let h=0;h<u;++h){const c=l[h];M[0]=c[0],M[1]=c[1],M[2]=s?c[2]:0;const g=l[h+1];T[0]=g[0],T[1]=g[1],T[2]=s?g[2]:0;const f=o(M,T,n);if(f==null)return null;r+=f.value}}return H(r,a)}function ya(t,e){const{spatialReference:s}=t;return Re(s,e.spatialReference)?(M[0]=t.x,M[1]=t.y,M[2]=t.hasZ?t.z:0,T[0]=e.x,T[1]=e.y,T[2]=e.hasZ?e.z:0,_r(M,T,s)):null}function ma(t,e){const{spatialReference:s}=t;return Re(s,e.spatialReference)?(M[0]=t.x,M[1]=t.y,M[2]=t.hasZ?t.z:0,T[0]=e.x,T[1]=e.y,T[2]=e.hasZ?e.z:0,Sr(M,T,s)):null}function va(t,e){const{spatialReference:s}=t;return Re(s,e.spatialReference)?(M[0]=t.x,M[1]=t.y,M[2]=t.hasZ?t.z:0,T[0]=e.x,T[1]=e.y,T[2]=e.hasZ?e.z:0,Hs(M,T,s)):null}function ja(t,e){const{spatialReference:s}=t;return Re(s,e.spatialReference)?(M[0]=t.x,M[1]=t.y,M[2]=t.hasZ?t.z:0,T[0]=e.x,T[1]=e.y,T[2]=e.hasZ?e.z:0,wr(M,T,s)):null}function _a(t){return t!=null?jr(t.hasZ?t.z:0,t.spatialReference):null}function jr(t,e){const s=Nn(e);return s!=null?H(t??0,s):null}function _r(t,e,s){const n=rt(t,e,s);return n!=null?{direct:H(n.direct,n.unit),horizontal:H(n.horizontal,n.unit),vertical:H(n.vertical,n.unit)}:null}function Sr(t,e,s){const n=rt(t,e,s,0);return n!=null?H(n.direct,n.unit):null}function Hs(t,e,s){const n=rt(t,e,s,1);return n!=null?H(n.horizontal,n.unit):null}function wr(t,e,s){const n=rt(t,e,s,2);return n!=null?H(n.verticalSigned,n.unit):null}function rt(t,e,s,n){const i=Vs(s),r=is(i);if(r==null)return null;const a=e[2]-t[2];if(n===2)return{verticalSigned:a,unit:r};if(!ct(t,s,vt,i)||!ct(e,s,$e,i))return null;if(n===0)return{direct:Me($e,vt),unit:r};if(ce(ke,t[0],t[1],e[2]),!ct(ke,s,ke,i))return null;const o=Me(ke,$e);return n===1?{horizontal:o,unit:r}:{direct:Me($e,vt),horizontal:o,vertical:Math.abs(a),unit:r}}const M=y(),T=y(),vt=y(),$e=y(),ke=y();export{Sr as $,Vs as A,Cs as B,Ot as C,ji as D,va as E,ha as F,xi as G,Us as H,je as I,ii as J,Ji as K,ja as L,fa as M,nr as N,$s as O,ya as P,la as Q,D as R,pa as S,ga as T,We as U,Hs as V,Gi as W,Ht as X,ra as Y,Kr as Z,wr as _,ae as a,ht as a0,pe as a1,gs as a2,Yi as a3,Xr as a4,Wi as a5,Xi as a6,Ki as a7,Ss as a8,fs as a9,sa as aa,He as ab,qs as ac,Zi as ad,Fi as ae,na as af,oa as ag,ia as ah,ea as b,Jr as c,Qi as d,te as e,ma as f,li as g,ge as h,_a as i,G as j,k,ua as l,jr as m,ta as n,aa as o,ca as p,ze as q,or as r,it as s,ee as t,be as u,ve as v,At as w,da as x,bi as y,Ee as z};
