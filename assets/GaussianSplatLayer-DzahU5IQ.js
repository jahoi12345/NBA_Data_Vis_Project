import{G as d,s as p,f as n,i as m,_ as i,m as r,a as c}from"./jsonMap-Bs3hmeCU.js";import{f as h,H as v}from"./Point-B6yFWNoR.js";import{l as S}from"./MultiOriginJSONSupport-Bd1TKmh_.js";import{z as l}from"./Extent-D4kxmHSf.js";import{b as w}from"./Layer-B6AWeI6O.js";import{o as x}from"./APIKeyMixin--YGbad8e.js";import{l as g}from"./ArcGISService-BPahnMeZ.js";import{s as E}from"./CustomParametersMixin-Dshqz1Zp.js";import{b as R,y as T,m as L}from"./OperationalLayer-D4DfJ3fu.js";import{j as $}from"./PortalLayer-CLS9WSYs.js";import{t as b}from"./ScaleRangeLayer-DQr2T3Hh.js";import{R as C,E as f}from"./tiles3DUtils-CK1eGzB2.js";import{j as u,w as O,R as _}from"./elevationInfoUtils-DW7fNUvj.js";import"./reader-DcGs6kKN.js";import"./index-CAyy5ces.js";import"./reactiveUtils-SO2Ko3sy.js";import"./collectionUtils-yEu3-UXw.js";import"./SimpleObservable-CvFyr0NA.js";import"./date-IqUzANpt.js";import"./layerContainerType-CSXZNpHb.js";import"./ElevationInfo-DevipqE4.js";import"./lengthUtils-BsZbNiqt.js";import"./unitConversionUtils-BhI4jDV1.js";import"./opacityUtils-DuFH0EC9.js";import"./asyncUtils-w6KfWU41.js";import"./layerUtils-CIRkC1pU.js";import"./PortalItem-eLNwGntE.js";import"./portalItemUtils-CbcnnyPk.js";import"./projectionUtils-DIbtnzb-.js";import"./Polyline-CiznIgZG.js";import"./Polygon-BUi4eoGW.js";import"./aaBoundingRect-F1Nk1aID.js";import"./mathUtils-PIGhLnI9.js";import"./vec32-BF0cLBAR.js";import"./HeightModelInfo-DHIKf3I1.js";let t=class extends g(R($(b(S(E(x(w))))))){constructor(e){super(e),this.operationalLayerType="GaussianSplatLayer",this.type="gaussian-splat",this.opacity=1,this.minScale=0,this.maxScale=0,this.url=null,this.rootTilesetJSON=null,this.fullExtent=new l(-180,-90,180,90,this.spatialReference),this.spatialReference=new h({wkid:4326,vcsWkid:115700}),this.esriCrsSpatialReference=null,this.esriCrsFullExtent=null}get supportedSpatialReferences(){return this.initialized&&this.esriCrsSpatialReference?[this.spatialReference,this.esriCrsSpatialReference]:[this.spatialReference]}get fullExtents(){return this.initialized&&this.esriCrsFullExtent?[this.fullExtent,this.esriCrsFullExtent]:[this.fullExtent]}set elevationInfo(e){e!=null&&e.mode!=="absolute-height"||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const s=e!=null?e.signal:null;if(!d("enable-feature:gaussianSplatLayer"))throw new p("GaussianSplatLayer-init:not-supported","This layer is currently not supported.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:a=>{if(a.typeKeywords?.includes("GaussianSplat"))return!0;throw new p("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service"})}},e)}catch(a){n(a)}this.url&&await v(this.url,{query:{...this.customParameters,token:this.apiKey},responseType:"json",signal:s}).then(o=>{this.rootTilesetJSON=o.data;const y=C(this.rootTilesetJSON);this.fullExtent=f(this.rootTilesetJSON,!1),this.spatialReference=this.fullExtent.spatialReference,y&&(this.esriCrsFullExtent=f(this.rootTilesetJSON,!0),this.esriCrsSpatialReference=this.esriCrsFullExtent.spatialReference)},o=>{n(o)})}_validateElevationInfo(e){const s="Gaussian Splat layers";u(m.getLogger(this),O(s,"absolute-height",e)),u(m.getLogger(this),_(s,e))}};i([r({type:["GaussianSplatLayer"]})],t.prototype,"operationalLayerType",void 0),i([r({readOnly:!0})],t.prototype,"type",void 0),i([r({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),i([r({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"minScale",void 0),i([r({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],t.prototype,"maxScale",void 0),i([r(T)],t.prototype,"url",void 0),i([r({type:l})],t.prototype,"fullExtent",void 0),i([r({type:h})],t.prototype,"spatialReference",void 0),i([r({readOnly:!0})],t.prototype,"supportedSpatialReferences",null),i([r({type:[l]})],t.prototype,"fullExtents",null),i([r({type:["show","hide"]})],t.prototype,"listMode",void 0),i([r(L)],t.prototype,"elevationInfo",null),t=i([c("esri.layers.GaussianSplatLayer")],t);const ue=t;export{ue as default};
