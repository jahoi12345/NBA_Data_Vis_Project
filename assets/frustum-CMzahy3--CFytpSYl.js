import{s as B}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{e as U,f as I,x as S,A as K}from"./sphere-DLQ6p7mp-DmnRpHXV.js";import{$ as X,A as w,k,I as d,O as A,y as O,L as Q,x as W,z as Y}from"./vec32-CewSdTn3-DHOFKD0R.js";import{X as V,t as f}from"./collectionUtils-jDyktm0P-ArdXNs6F.js";import{z as g,C as G,B as H}from"./vector-B8ZDYGQ6-B1uNywRb.js";import{E as J,z as R}from"./mat4-C96X-Nn0-Do6fKsNS.js";import{P as T}from"./vec42-B8VM4vXb-BnA9MysM.js";import{e as l}from"./vec4f64-DPb6J-GU-C7c2DqbZ.js";import{K as a,W as Z,Y as $,j as rr,k as tr,w as nr}from"./plane-BNdSPG2o-Cq7jmU6w.js";function C(r){return r?{origin:V(r.origin),vector:V(r.vector)}:{origin:f(),vector:f()}}function er(r,t){const n=ur.get();return n.origin=r,n.vector=t,n}function wr(r,t=C()){return or(r.origin,r.vector,t)}function or(r,t,n=C()){return d(n.origin,r),d(n.vector,t),n}function Br(r,t,n=C()){return d(n.origin,r),X(n.vector,t,r),n}function Xr(r,t){const n=X(g.get(),t,r.origin),e=w(r.vector,n),o=w(r.vector,r.vector),s=B(e/o,0,1),i=X(g.get(),k(g.get(),r.vector,s),n);return w(i,i)}function dr(r,t,n){return ir(r,t,0,1,n)}function xr(r,t,n){return A(n,r.origin,k(n,r.vector,t))}function ir(r,t,n,e,o){const{vector:s,origin:i}=r,b=X(g.get(),t,i),m=w(s,b)/Y(s);return k(o,s,B(m,n,e)),A(o,o,r.origin)}function kr(r,t){if(_(r,er(t.origin,t.direction),!1,x)){const{tA:n,pB:e,distance2:o}=x;if(n>=0&&n<=1)return o;if(n<0)return O(r.origin,e);if(n>1)return O(A(g.get(),r.origin,r.vector),e)}return null}function Cr(r,t,n){return!!_(r,t,!0,x)&&(d(n,x.pA),!0)}function _(r,t,n,e){const o=r.origin,s=A(g.get(),o,r.vector),i=t.origin,b=A(g.get(),i,t.vector),m=g.get(),u=g.get();if(m[0]=o[0]-i[0],m[1]=o[1]-i[1],m[2]=o[2]-i[2],u[0]=b[0]-i[0],u[1]=b[1]-i[1],u[2]=b[2]-i[2],Math.abs(u[0])<1e-6&&Math.abs(u[1])<1e-6&&Math.abs(u[2])<1e-6)return!1;const c=g.get();if(c[0]=s[0]-o[0],c[1]=s[1]-o[1],c[2]=s[2]-o[2],Math.abs(c[0])<1e-6&&Math.abs(c[1])<1e-6&&Math.abs(c[2])<1e-6)return!1;const N=m[0]*u[0]+m[1]*u[1]+m[2]*u[2],h=u[0]*c[0]+u[1]*c[1]+u[2]*c[2],j=m[0]*c[0]+m[1]*c[1]+m[2]*c[2],L=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],P=(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])*L-h*h;if(Math.abs(P)<1e-6)return!1;let p=(N*h-j*L)/P,v=(N+h*p)/L;n&&(p=B(p,0,1),v=B(v,0,1));const M=g.get(),y=g.get();return M[0]=o[0]+p*c[0],M[1]=o[1]+p*c[1],M[2]=o[2]+p*c[2],y[0]=i[0]+v*u[0],y[1]=i[1]+v*u[1],y[2]=i[2]+v*u[2],e.tA=p,e.tB=v,e.pA=M,e.pB=y,e.distance2=O(M,y),!0}const x={tA:0,tB:0,pA:f(),pB:f(),distance2:0},ur=new U(()=>C());function E(r){return r?{ray:S(r.ray),c0:r.c0,c1:r.c1}:{ray:S(),c0:0,c1:Number.MAX_VALUE}}function cr(r,t=E()){return I(r,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t}function sr(r,t,n=E()){const e=W(r.vector);return K(r.origin,t,n.ray),n.c0=0,n.c1=e,n}function Er(r,t){return q(r,r.c0,t)}function Lr(r,t){return q(r,r.c1,t)}function q(r,t,n){return A(n,r.ray.origin,k(n,r.ray.direction,t))}new U(()=>E());function Or(r){return r?[a(r[0]),a(r[1]),a(r[2]),a(r[3]),a(r[4]),a(r[5])]:[a(),a(),a(),a(),a(),a()]}function ar(){return[f(),f(),f(),f(),f(),f(),f(),f()]}function Ur(r,t){for(let n=0;n<z;n++)Z(r[n],t[n]);return r}function Nr(r,t,n,e=lr){const o=J(G.get(),t,r);R(o,o);for(let s=0;s<gr;++s){const i=T(H.get(),mr[s],o);Q(e[s],i[0]/i[3],i[1]/i[3],i[2]/i[3])}fr(n,e)}function fr(r,t){$(t[4],t[0],t[3],r[0]),$(t[1],t[5],t[6],r[1]),$(t[4],t[5],t[1],r[2]),$(t[3],t[2],t[6],r[3]),$(t[0],t[1],t[2],r[4]),$(t[5],t[4],t[7],r[5])}function Pr(r,t){for(let n=0;n<z;n++){const e=r[n];if(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]>=t[3])return!1}return!0}function Sr(r,t){return D(r,cr(t,F.get()))}function Vr(r,t){for(let n=0;n<z;n++){const e=r[n];if(!nr(e,t))return!1}return!0}function _r(r,t,n){return D(r,sr(t,n,F.get()))}function qr(r,t){for(let n=0;n<z;n++)if(rr(r[n],t)>0)return!1;return!0}function D(r,t){for(let n=0;n<z;n++)if(!tr(r[n],t))return!1;return!0}const Dr={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},z=6,gr=8,mr=[l(-1,-1,-1,1),l(1,-1,-1,1),l(1,1,-1,1),l(-1,1,-1,1),l(-1,-1,1,1),l(1,-1,1,1),l(1,1,1,1),l(-1,1,1,1)],F=new U(E),lr=ar();export{fr as $,Vr as C,_r as D,xr as E,qr as F,Lr as L,Or as N,Dr as O,C as P,Ur as S,Nr as U,Pr as V,Cr as X,Sr as _,kr as a,E as b,or as c,z as d,er as e,ar as g,Xr as k,Er as q,cr as s,ir as u,wr as w,Br as x,dr as z};
