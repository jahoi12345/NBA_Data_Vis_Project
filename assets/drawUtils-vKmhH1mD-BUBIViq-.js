import{ar as B}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{B as D}from"./mathUtils-PIGhLnI9-B1tKUlUb.js";import{y as d,H as J}from"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";import{r as b,h as k,i as v,k as K,s as P,t as Z,c as $,g as W,w as X}from"./Polygon-D6wEPb3W-CpL9Efjx.js";import{k as Y}from"./curveOperationUtils-BGqPT1bh-COCfpJm1.js";function R(t,s,n,r){if(t.type==="point")return t.x+=s,t.y+=n,t.hasZ&&r!=null,t;if(t.type==="multipoint"){const o=t.points;for(let a=0;a<o.length;a++)o[a]=j(o[a],s,n,r);return t}if(t.type==="extent")return t.xmin+=s,t.xmax+=s,t.ymin+=n,t.ymax+=n,t;const i=t.type==="polyline"?t.curvePaths??t.paths:t.curveRings??t.rings,c=K(t);for(let o=0;o<i.length;o++){const a=i[o];for(let p=0;p<a.length;p++)a[p]=z(a[p],s,n,r)}return"paths"in t?c?t.curvePaths=i:t.paths=i:c?t.curveRings=i:t.rings=i,t}function O(t,s,n,r,i){const c=t.clone();if(i){const{resolution:o}=r;R(c,s*o,-n*o)}else{const{dxMap:o,dyMap:a}=_(s,n,r);R(c,o,a)}return c}function _(t,s,n){const r=n.state.inverseTransform;return{dxMap:r[0]*t+r[2]*s,dyMap:r[1]*t+r[3]*s}}function j(t,s,n,r){return w(t,t[0]+s,t[1]+n,t[2]!=null&&r!=null?t[2]+r:void 0)}function z(t,s,n,r){const i=j(v(t),s,n,r);if(P(t))return i;if(Z(t)){const[,a,p]=t.b;return{b:[i,[a[0]+s,a[1]+n],[p[0]+s,p[1]+n]]}}if($(t)){const[,a]=t.c;return{c:[i,[a[0]+s,a[1]+n]]}}const[,c,...o]=t.a;return{a:[i,[c[0]+s,c[1]+n],...o]}}function Q(t,s,n,r){if(t.type==="point"){const{x:e,y:f}=t,x=r?r[0]:e,l=r?r[1]:f,m=t.clone(),y=(e-x)*s+x,u=(f-l)*n+l;return m.x=y,m.y=u,m}if(t.type==="extent"){const{xmin:e,xmax:f,ymin:x,ymax:l}=t,m=r?r[0]:(e+f)/2,y=r?r[1]:(l+x)/2,u=t.clone();if(u.xmin=(e-m)*s+m,u.ymax=(l-y)*n+y,u.xmax=(f-m)*s+m,u.ymin=(x-y)*n+y,u.xmin>u.xmax){const h=u.xmin,M=u.xmax;u.xmin=M,u.xmax=h}if(u.ymin>u.ymax){const h=u.ymin,M=u.ymax;u.ymin=M,u.ymax=h}return u}let i=null;if(!r){i=b(t);const e=d(),f=k(e,i);if(!f)return t.clone();const[x,l,m,y]=f;r=[(x+m)/2,(l+y)/2]}const[c,o]=r;if(t.type==="multipoint"){const e=t.clone(),f=e.points;for(let x=0;x<f.length;x++){const l=f[x],[m,y]=l,u=(m-c)*s+c,h=(y-o)*n+o;f[x]=w(l,u,h,void 0)}return e.points=f,e}const a=t.clone();i??=b(t);const p=a.type==="polygon",g=p?a.curveRings??a.rings:a.curvePaths??a.paths;if(!r){const e=d(),f=k(e,g,!1,!1);if(!f)return a;r=J(f)}for(const e of g){let f=null;const x=p&&e.length>0&&B(v(e[0]),v(e.at(-1)));for(let l=0;l<e.length;l++){const m=e[l];e[l]=C(m,s,n,c,o,f),f=m}x&&(e[0]=[...v(e.at(-1))])}return a}function q(t,s,n,r,i){const[c,o,...a]=t;return[(c-r)*s+r,(o-i)*n+i,...a]}function C(t,s,n,r,i,c){if(P(t))return q(t,s,n,r,i);if(Z(t)){const[H,L,T]=t.b.map(A=>q(A,s,n,r,i));return{b:[H,L,T]}}if(!c)return t;const o=v(c),a=$(t)?W(o,t):t,[p,g,e,f,x,l,m]=a.a,y=x??0,u=l??Math.hypot(p[0]-g[0],p[1]-g[1]),h=m??1,M=Y(r,i,1,0,0,1,s,n);return X(o,{a:[[...p],[...g],e,f,y,u,h]},M)}function S(t,s,n,r,i,c){const o=Math.sqrt((n-t)*(n-t)+(r-s)*(r-s));return Math.sqrt((i-t)*(i-t)+(c-s)*(c-s))/o}function U(t,s,n,r=!1){const i=Math.atan2(s.y-n.y,s.x-n.x)-Math.atan2(t.y-n.y,t.x-n.x),c=Math.atan2(Math.sin(i),Math.cos(i));return r?c:D(c)}function w(t,s,n,r){const i=[s,n];return t.length>2&&i.push(r??t[2]),t.length>3&&i.push(t[3]),i}export{_ as J,O as W,Q as X,S as Y,U as _};
