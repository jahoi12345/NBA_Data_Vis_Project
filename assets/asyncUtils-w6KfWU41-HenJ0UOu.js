import{bd as h,q as p,x as c,a5 as _,s as f,J as b,Y as n,H as s,G as d}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";function k(r,t,l){return h(r.map((e,a)=>t.apply(l,[e,a])))}async function w(r,t,l){return(await h(r.map((e,a)=>t.apply(l,[e,a])))).map(e=>e.value)}function u(r){return{ok:!0,value:r}}function i(r){return{ok:!1,error:r}}function y(r){return r!=null&&r.ok===!0?r.value:null}function m(r){return r!=null&&r.ok===!1?r.error:null}async function C(r){if(r==null)return{ok:!1,error:new Error("no promise provided")};try{return u(await r)}catch(t){return i(t)}}async function H(r){try{return u(await r)}catch(t){return b(t),i(t)}}function g(r){if(r.ok===!0)return r.value;throw r.error}function x(r,t){return new o(r,t)}let o=class extends p{get value(){return y(this._result)}get error(){return m(this._result)}get finished(){return this._result!=null}constructor(r,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=c(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:l}=this._abortController;this.promise=r(l),this.promise.then(e=>{this._result=u(e),this._cleanup()},e=>{this._result=i(e),this._cleanup()}),this._abortHandle=_(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=f(this._abortHandle),this._abortController=null}};n([s()],o.prototype,"value",null),n([s()],o.prototype,"error",null),n([s()],o.prototype,"finished",null),n([s()],o.prototype,"promise",void 0),n([s()],o.prototype,"_result",void 0),o=n([d("esri.core.asyncUtils.ReactiveTask")],o);export{H as $,C,x as H,g,k,w};
