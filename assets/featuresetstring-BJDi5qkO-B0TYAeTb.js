import{K as n,L as u,y as w,a as m,u as s,ab as l,C as b,A as f,i as p,S as A,ac as T,N as h,ad as g,U as x,x as L,z as V}from"./Dictionary-B4WY1XGX-DTk60YkO.js";import{u as c}from"./enum-BzLwmiID-CcyIdWlQ.js";import{L as y}from"./shared-yd-CR64C-r_XSstFM.js";import"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import"./UnknownTimeZone-B697BDFv-CBbtul7O.js";import"./date-IqUzANpt-bLKO9IDT.js";import"./reactiveUtils-SO2Ko3sy-BCLX8Jdy.js";import"./Extent-CgDMOSRD-CU1qE5Kr.js";import"./Point-BfTTZoMu-BAT2Wq6O.js";import"./index-CTl7hdrJ.js";import"./Polyline-CoiTLswR-BLagWJLS.js";import"./Polygon-D6wEPb3W-CpL9Efjx.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./lengthUtils-Dt1_RvOO-bleznLOi.js";import"./Field-Cm_ZejYW-CwJZmSru.js";import"./Color-CERqXxxY-BuYn26eI.js";import"./fieldType-DVUzXtk_-tUuvnZJM.js";import"./TimeOnly-BERR31kg-PKcKegNB.js";import"./ImmutableArray-BPVd6ESQ-BGk4ZTNG.js";import"./number-D_FvV3D1-OQFavbmh.js";import"./jsonUtils-CmpazY1u-ateEpj4Q.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";function v(i,o){return i&&i.domain?i.domain.type==="coded-value"||i.domain.type==="codedValue"?f.convertObjectToArcadeDictionary({type:"codedValue",name:i.domain.name,dataType:y[i.field.type],codedValues:i.domain.codedValues.map(r=>({name:r.name,code:r.code}))},p(o)):f.convertObjectToArcadeDictionary({type:"range",name:i.domain.name,dataType:y[i.field.type],min:i.domain.minValue,max:i.domain.maxValue},p(o)):null}function Q(i){i.mode==="async"&&(i.functions.domain=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,2,3,o,r),u(t[0]))return v(w(t[0],m(t[1]),t[2]===void 0?void 0:t[2]),o);if(s(t[0]))return await t[0]._ensureLoaded(),v(l(m(t[1]),t[0],null,t[2]===void 0?void 0:t[2]),o);throw new c(o,"InvalidParameter",r)})},i.functions.subtypes=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,1,1,o,r),u(t[0])){const a=b(t[0]);return a?f.convertObjectToArcadeDictionary(a,p(o)):null}if(s(t[0])){await t[0]._ensureLoaded();const a=t[0].subtypeMetaData();return a?f.convertObjectToArcadeDictionary(a,p(o)):null}throw new c(o,"InvalidParameter",r)})},i.functions.domainname=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,2,4,o,r),u(t[0]))return A(t[0],m(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(s(t[0])){await t[0]._ensureLoaded();const a=l(m(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return T(a,t[2])}throw new c(o,"InvalidParameter",r)})},i.signatures.push({name:"domainname",min:2,max:4}),i.functions.domaincode=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,2,4,o,r),u(t[0]))return h(t[0],m(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(s(t[0])){await t[0]._ensureLoaded();const a=l(m(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return g(a,t[2])}throw new c(o,"InvalidParameter",r)})},i.signatures.push({name:"domaincode",min:2,max:4}),i.functions.text=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,1,2,o,r),s(t[0])){const a=x(t[1],"");if(a==="")return t[0].castToText();if(a.toLowerCase()==="schema")return t[0].convertToText("schema",e.abortSignal);if(a.toLowerCase()==="featureset")return t[0].convertToText("featureset",e.abortSignal);throw new c(o,"InvalidParameter",r)}return L(t[0],t[1])})},i.functions.gdbversion=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,1,1,o,r),u(t[0]))return t[0].gdbVersion();if(s(t[0]))return(await t[0].load()).gdbVersion;throw new c(o,"InvalidParameter",r)})},i.functions.schema=function(o,r){return i.standardFunctionAsync(o,r,async(e,d,t)=>{if(n(t,1,1,o,r),s(t[0]))return await t[0].load(),f.convertObjectToArcadeDictionary(t[0].schema(),p(o));if(u(t[0])){const a=V(t[0]);return a?f.convertObjectToArcadeDictionary(a,p(o)):null}throw new c(o,"InvalidParameter",r)})})}export{Q as registerFunctions};
