import{e as f}from"./Lyr3DModule-xeBMLPWA.js";import"./index-BiLqt4Ue.js";import"./Point-CMHR1y9V.js";import"./jsonMap-Bs3hmeCU.js";import"./reader-DcGs6kKN.js";let o,e;async function _(s){await p();const t={status:1,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(s.inputs.length<1)return{result:t,transferList:[]};const i={ptrs:[],sizes:[]};for(const r of s.inputs){const c=e._malloc(r.byteLength);new Uint8Array(e.HEAPU8.buffer,c,r.byteLength).set(new Uint8Array(r)),i.ptrs.push(c),i.sizes.push(r.byteLength)}const n=e.process(s.jobDescJson,s.id,i,s.isMissingResourceCase);t.status=n.status,t.missingInputUrls=n.missingInputUrls.slice();const u=n.status===0&&n.data,l=t.status===2&&t.missingInputUrls.length>0;t.jobDescJson=n.jobDescJson.slice(),t.error=n.error.slice(),u?t.data=n.data.slice():l&&(t.originalInputs=s.inputs.slice());for(let r=0;r<i.ptrs.length;++r)e._free(i.ptrs[r]);const a=[];if(u)a.push(t.data.buffer);else if(l)for(const r of s.inputs)a.push(r);return{result:t,transferList:a}}async function b(s){await p(),e.add_spatial_reference_info(s.sr,s.isGCS,s.toMetersXY,s.toMetersZ)}function w(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function p(){return e?Promise.resolve():(o||(o=f().then(s=>{e=s,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{b as addSpatialReferenceInfo,w as destroyWasm,p as initialize,_ as process};
