import{v as m,I as p}from"./jsonMap-Bs3hmeCU-Cusd0Fmz.js";import{F as l,J as d,I as f,G as g}from"./quantizationUtils-Ceq-Uxsu-CDK8m1qL.js";import"./Extent-CgDMOSRD-CU1qE5Kr.js";import"./Point-BfTTZoMu-BAT2Wq6O.js";import"./index-CTl7hdrJ.js";import"./Polyline-CoiTLswR-BLagWJLS.js";import"./Polygon-D6wEPb3W-CpL9Efjx.js";import"./mathUtils-PIGhLnI9-B1tKUlUb.js";import"./reader-DcGs6kKN-DHJfK-tm.js";import"./aaBoundingRect-CjwcS2F3-D7aII9DY.js";function L(i,r,e,o,n,t){if(i==null)return null;const a=i.references("geometry")&&t?y(r,o,t):r,u=i.repurposeFeature(a,n);try{return i.evaluate(u,e)}catch(c){return m.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const s=new Map;function y(i,r,e){const{transform:o,hasZ:n,hasM:t}=e;s.has(r)||s.set(r,w(r));const a=s.get(r)(i.geometry,o,n,t);return{...i,geometry:a}}function w(i){const r={};switch(i){case"esriGeometryPoint":return(e,o,n,t)=>g(o,r,e,n,t);case"esriGeometryPolygon":return(e,o,n,t)=>f(o,r,e,n,t);case"esriGeometryPolyline":return(e,o,n,t)=>d(o,r,e,n,t);case"esriGeometryMultipoint":return(e,o,n,t)=>l(o,r,e,n,t);default:return m.getLogger("esri.views.2d.support.arcadeOnDemand").error(new p("mapview-arcade",`Unable to handle geometryType: ${i}`)),e=>e}}export{L as default};
